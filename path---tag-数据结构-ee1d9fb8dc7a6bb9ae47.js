webpackJsonp([0x5b0bd835374b],{1385:function(n,s){n.exports={data:{site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"Fiber 的数据结构 此小节会通过两个   来展示   以及   的数据结构。 首先用代码表示上图节点间的关系。比如  下有  , 就可以把它们间的关系写成  ; Stack Reconciler 在   之前，节点之间的关系可以用数据结构中   来表示。 如下实现   函数, 将深度遍历的节点打印出来。 输出结果为:  Fiber Reconciler…",html:'<h1 id="fiber-的数据结构"><a href="#fiber-%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fiber 的数据结构</h1>\n<p>此小节会通过两个 <code class="language-text">demo</code> 来展示 <code class="language-text">Stack Reconciler</code> 以及 <code class="language-text">Fiber Reconciler</code> 的数据结构。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-05-28-14-50-48-09d9e762f85f9e5c7638bf975d99727d-7027d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 300px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAIAAADzvTiPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB1klEQVQ4y5WU2Y6CUBBE5/9/SL/A+OCDPrivuCtq3FFUmDNU5sbcuTDYieYCXV3d1QVfcRxHURQEweVyeT6fURJxvvjiB6zf78/n88ViEX8SP+Dz+Tybzfb7faPRGI1Gk8nkM3Cz2RwOh+Px+PF4TKdT+s8L1tgmlsvl6/V6v/MP2ITv+8y/Xq/B52U2/CCRrdPpMDyFOO92u7xgxgaDZqvVCi2OxyPntC4cbdfrdcQ3o9ZqtTAMc4EJONFc5+12WywW05bnADOnqO73Oy1cr1fP86iiKXBUFhipxUwJlo/zWq0WVfwkEJKibjD24DFsukRqYSQn/6VSSfpzaYMHgwGC93o9g393EearVqvYURa0V4U2OIxtd7tdWvWSECcA7pxOJ3LUuc1MzzgEsFkPjYiHEkhAAsxuMH4gm9db2VwWCgXY9BQhAW82myy1RQshVHTRbrfNe8bObrdbKpiZBSaJPZHNkGaKcrmcqrbA2jM9o5bIZW8eVSoVZtZlFlh4zkqlc1ZFI6zTLZjlbUtLGmEE1uEGU54MyyEmMDafusPhoM3bYLzFkNQ2kub9ktAYXaEwq04jz3ol6RlVcMLfDwATUTH4DXRxOAwxnJ9e5mQWnoZJkPkNxuof2xgpx1gAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 05 28 14 50 48"\n        title=""\n        src="/static/2020-05-28-14-50-48-09d9e762f85f9e5c7638bf975d99727d-7027d.png"\n        srcset="/static/2020-05-28-14-50-48-09d9e762f85f9e5c7638bf975d99727d-55fa9.png 200w,\n/static/2020-05-28-14-50-48-09d9e762f85f9e5c7638bf975d99727d-7027d.png 300w"\n        sizes="(max-width: 300px) 100vw, 300px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>首先用代码表示上图节点间的关系。比如 <code class="language-text">a1 节点</code>下有 <code class="language-text">b1、b2、b3 节点</code>, 就可以把它们间的关系写成 <code class="language-text">a1.render = () =&gt; [b1, b2, b3]</code>;</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42669018964704300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var a1 = { name: \'a1\', render = () => [b1, b2, b3] }\nvar b1 = { name: \'b1\', render = () => [c1] }\nvar b2 = { name: \'b2\', render = () => [c2] }\nvar b3 = { name: \'b3\', render = () => [] }\nvar c1 = { name: \'c1\', render = () => [d1] }\nvar c2 = { name: \'c2\', render = () => [] }\nvar d1 = { name: \'d1\', render = () => [d2] }\nvar d2 = { name: \'d2\', render = () => [] }`, `42669018964704300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'a1\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>b1<span class="token punctuation">,</span> b2<span class="token punctuation">,</span> b3<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> b1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'b1\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>c1<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> b2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'b2\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>c2<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> b3 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'b3\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> c1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'c1\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>d1<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> c2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'c2\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> d1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'d1\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>d2<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> d2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'d2\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="stack-reconciler"><a href="#stack-reconciler" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stack Reconciler</h2>\n<p>在 <code class="language-text">React 16</code> 之前，节点之间的关系可以用数据结构中 <code class="language-text">树的深度遍历</code> 来表示。</p>\n<p>如下实现 <code class="language-text">walk</code> 函数, 将深度遍历的节点打印出来。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46156938568204800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`walk(a1);\n\nfunction walk(instance) {\n  if (!instance) return;\n  console.log(instance.name);\n  instance.render().map(walk);\n}`, `46156938568204800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">walk</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">walk</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>walk<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>输出结果为: <code class="language-text">a1 b1 c1 d1 d2 b2 c2 b3</code></p>\n<h2 id="fiber-reconciler"><a href="#fiber-reconciler" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fiber Reconciler</h2>\n<p>在 <code class="language-text">React 16</code> 中，节点之间的关系可以用数据结构中的 <code class="language-text">链表</code> 来表示。</p>\n<p>节点之间的链表有三种情形, 用图表示如下:</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-05-28-14-52-10-62a31ae4097adb3c3b9f05ed0d77f9da-7027d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 300px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAIAAADzvTiPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADL0lEQVQ4y5VU2ZKcNhTt/89P5MFvSV5SqVT5JUulEtvjTs00PXRPL4CaHQlJSIDYBEQC3O01Ht8qiovQ0T0690grznkYhlEUIZSO4zgMw/jsWHmeByHEhByfdk1Zjt8SKwAucRQyip+2WwrcMiX9ROBZ4Jxn93v75d0Bo0TBmOfXYqr/DPxKPYcoe/G3PX8X5o78+lJjpfwqXoOZEK8Pbi07hNHe2FyMRxs4w9A/q3Im6gcAEWembSv9KOfHg439oOGsadrhy1vQ4KrpHpxEJX4YGdtNEtrf//LWOAZjLWgYlTkbvtBCDe46uQFx28teDownOLVJnruEzjPYel373mclXM2vvZ/CXIssZVUWsUpijGlREE6tV6+tN3cBQgtCLfFuldXM5xQiH+tSnSyLQm+hH2TC8reGyfKccH4+HPtKtKWQsruyWMAezewYq1R2Bef+1acny/ZcD6fwux//fTp5HcuyIGx4MU9YwCHN/DQt6z5Fx0fzp35YwDnnyvM8I3+ZzqO/MGf/vKoOx1tlBc6qcnuyT6e95zuObWmTjDeZuKhML87KEqrl12uwefDCcDX/SzkvqtYOAsuxEUL3m713dhpCRF4Ok0JN17mYoKLcHk8QQcqYcsQCVsJS0WYEb81t5J9/+M3YADTKhkMoIJ4JuKlOHABM8xE49vl8XmgrPojrVjEGk8QSVXVJ6dhrh8a//4kNQyWqnJomu47SCEJQ1+0CLusmokx3qK/VvlSCGEuUilEIDgfwdPB8v2q7AJPJVEKU+GYS7U2cyb6Xqs95PPPkVb3emoRSTKnjOLqjKZHDyBlIEuMDsJtm6ocC53k4UdCMwMVxXS8IArXDWZogIY51t9//kefVDRwSJZmqLfI8upqkrmsyRTndUGrozWZ/8bwEQi3YPKS7VeQpF2q+0m5u8EfHYPFiqNsZR5HrujcwLQtS1F1LITTev0aHKa4jaYoAAL7vqwv3RrvreyfElnX/sPmZMf5p5c+f5+uqxglYDkhTYllW27b/j9QH431wGCe73c6eommaj2ZLKYVQ9lmi67oPwOrAXYDqYaK29Om9o0aU+GrRdoq+7/8DKMcIrds8ZhQAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 05 28 14 52 10"\n        title=""\n        src="/static/2020-05-28-14-52-10-62a31ae4097adb3c3b9f05ed0d77f9da-7027d.png"\n        srcset="/static/2020-05-28-14-52-10-62a31ae4097adb3c3b9f05ed0d77f9da-55fa9.png 200w,\n/static/2020-05-28-14-52-10-62a31ae4097adb3c3b9f05ed0d77f9da-7027d.png 300w"\n        sizes="(max-width: 300px) 100vw, 300px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol>\n<li>父节点到子节点(红色虚线)</li>\n<li>同层节点(黄色虚线)</li>\n<li>子节点到父节点(蓝色虚线)</li>\n</ol>\n<blockquote>\n<p>父节点指向第一个子节点, 每个子节点都指向父节点，同层节点间是单向链表。</p>\n</blockquote>\n<p>首先, 构建节点的数据结构, 如下所示:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50392859515143540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var FiberNode = function(instance) {\n  this.instance = instance;\n  this.parent = null;\n  this.sibling = null;\n  this.child = null;\n};`, `50392859515143540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">FiberNode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> instance<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>sibling <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>child <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后创建一个将节点串联起来的 <code class="language-text">connect</code> 函数:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80655088562191910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var connect = function(parent, childList) {\n  parent.child = childList.reduceRight((prev, current) => {\n    const fiberNode = new FiberNode(current);\n    fiberNode.parent = parent;\n    fiberNode.sibling = prev;\n    return fiberNode;\n  }, null);\n\n  return parent.child;\n};`, `80655088562191910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">connect</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> childList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  parent<span class="token punctuation">.</span>child <span class="token operator">=</span> childList<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> fiberNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FiberNode</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    fiberNode<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>\n    fiberNode<span class="token punctuation">.</span>sibling <span class="token operator">=</span> prev<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> fiberNode<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> parent<span class="token punctuation">.</span>child<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>在 JavaScript 中实现链表的数据结构可以巧用 reduceRight</p>\n</blockquote>\n<p><code class="language-text">connect</code> 函数中实现了上述链表关系。可以像这样使用它:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83521168972245290000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var parent = new FiberNode(a1);\nvar childFirst = connect(\n  parent,\n  a1.render()\n);`, `83521168972245290000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FiberNode</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> childFirst <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>\n  parent<span class="token punctuation">,</span>\n  a1<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样子便完成了 <code class="language-text">a1 节点</code>指向 <code class="language-text">b1 节点</code>的链表、<code class="language-text">b1、b2、b3 节点间</code>的单向链表以及 <code class="language-text">b1、b2、b3 节点</code>指向 <code class="language-text">a1 节点</code> 的链表。</p>\n<p>最后剩下 <code class="language-text">goWalk</code> 函数将全部节点给遍历完。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3045236999875355600"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 打印日志以及添加列表\nvar walk = function(node) {\n  console.log(node.instance.name);\n  const childLists = node.instance.render();\n  let child = null;\n  if (childLists.length > 0) {\n    child = connect(\n      node,\n      childLists\n    );\n  }\n  return child;\n};\n\nvar goWalk = function(root) {\n  let currentNode = root;\n\n  while (true) {\n    const child = walk(currentNode);\n    // 如果有子节点\n    if (child) {\n      currentNode = child;\n      continue;\n    }\n\n    // 如果没有相邻节点, 则返回到父节点\n    while (!currentNode.sibling) {\n      currentNode = currentNode.parent;\n      if (currentNode === root) {\n        return;\n      }\n    }\n\n    // 相邻节点\n    currentNode = currentNode.sibling;\n  }\n};\n\n// 调用\ngoWalk(new FiberNode(a1));`, `3045236999875355600`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 打印日志以及添加列表</span>\n<span class="token keyword">var</span> <span class="token function-variable function">walk</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> childLists <span class="token operator">=</span> node<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">let</span> child <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>childLists<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    child <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>\n      node<span class="token punctuation">,</span>\n      childLists\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> child<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> <span class="token function-variable function">goWalk</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> currentNode <span class="token operator">=</span> root<span class="token punctuation">;</span>\n\n  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token function">walk</span><span class="token punctuation">(</span>currentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 如果有子节点</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      currentNode <span class="token operator">=</span> child<span class="token punctuation">;</span>\n      <span class="token keyword">continue</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// 如果没有相邻节点, 则返回到父节点</span>\n    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>currentNode<span class="token punctuation">.</span>sibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentNode <span class="token operator">===</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// 相邻节点</span>\n    currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>sibling<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 调用</span>\n<span class="token function">goWalk</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FiberNode</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>打印结果为 <code class="language-text">a1 b1 c1 d1 d2 b2 c2 b3</code></p>\n<p><code class="language-text">Fiber</code> 在一个节点上的执行流程总结如下:</p>\n<ul>\n<li>\n<p>在当前节点下寻找是否有子节点</p>\n<ul>\n<li>若有, 则进入子节点</li>\n<li>若没有, 则在当前节点下寻找是否有下一个相邻节点</li>\n<li>若有, 则进入下一个相邻节点</li>\n<li>若没有, 则返回它的父节点</li>\n</ul>\n</li>\n</ul>\n<h1 id="fiber-reconciler-的优势"><a href="#fiber-reconciler-%E7%9A%84%E4%BC%98%E5%8A%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fiber Reconciler 的优势</h1>\n<p>通过分析上述两种数据结构实现的代码，可以得出下面结论:</p>\n<ul>\n<li>基于树的深度遍历实现的 Reconciler: 一旦进入调用栈便无法暂停;</li>\n<li>基于链表实现的 Reconciler: 在 <code class="language-text">while(true) {}</code> 的循环中, 可以通过 <code class="language-text">currentNode</code> 的赋值重新得到需要操作的节点，而在赋值之前便可以’暂停’来执行其它逻辑, 这也是 <code class="language-text">requestIdleCallback</code> 能得以在 <code class="language-text">Fiber Reconciler</code> 的原因。</li>\n</ul>\n<h1 id="相关链接"><a href="#%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>相关链接</h1>\n<ul>\n<li><a href="https://medium.com/react-in-depth/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-67f1014d0eb7" target="_blank" rel="nofollow noreferrer noopener">The how and why on React’s usage of linked list in Fiber to walk the component’s tree</a></li>\n<li><a href="https://github.com/facebook/react/issues/7942" target="_blank" rel="nofollow noreferrer noopener">Fiber Principles: Contributing To Fiber</a>: Fiber 设计思想相关 issue, 推荐。</li>\n</ul>',
id:"/github/workspace/blog/React Fiber数据结构/index.md absPath of file >>> MarkdownRemark",timeToRead:3,frontmatter:{date:"2020-05-28 14:32:24",path:"/react-fiber-data-struct/",tags:"前端, React Fiber, 数据结构",title:"React Fiber 数据结构",draft:null}},{excerpt:"下压栈 特点 能动态调整数组大小的实现 实现 下压堆栈（链表实现） 先进先出队列 背包",html:'<h2 id="下压栈"><a href="#%E4%B8%8B%E5%8E%8B%E6%A0%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>下压栈</h2>\n<h3 id="特点"><a href="#%E7%89%B9%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特点</h3>\n<blockquote>\n<p>能动态调整数组大小的实现</p>\n</blockquote>\n<h3 id="实现"><a href="#%E5%AE%9E%E7%8E%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1904019798806100200"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`package edu.princeton.cs.algs4;\n\nimport java.util.Iterator;\nimport java.util.NoSuchElementException;\n\npublic class ResizingArrayStack<Item> implements Iterable<Item> {\n    private Item[] a;         // array of items\n    private int n;            // number of elements on stack\n\n\n    /**\n     * Initializes an empty stack.\n     */\n    public ResizingArrayStack() {\n        a = (Item[]) new Object[2];\n        n = 0;\n    }\n\n    /**\n     * Is this stack empty?\n     * @return true if this stack is empty; false otherwise\n     */\n    public boolean isEmpty() {\n        return n == 0;\n    }\n\n    /**\n     * Returns the number of items in the stack.\n     * @return the number of items in the stack\n     */\n    public int size() {\n        return n;\n    }\n\n\n    // resize the underlying array holding the elements\n    private void resize(int capacity) {\n        assert capacity >= n;\n\n        // textbook implementation\n        Item[] temp = (Item[]) new Object[capacity];\n        for (int i = 0; i < n; i++) {\n            temp[i] = a[i];\n        }\n        a = temp;\n\n       // alternative implementation\n       // a = java.util.Arrays.copyOf(a, capacity);\n    }\n\n\n\n    /**\n     * Adds the item to this stack.\n     * @param item the item to add\n     */\n    public void push(Item item) {\n        if (n == a.length) resize(2*a.length);    // double size of array if necessary\n        a[n++] = item;                            // add item\n    }\n\n    /**\n     * Removes and returns the item most recently added to this stack.\n     * @return the item most recently added\n     * @throws java.util.NoSuchElementException if this stack is empty\n     */\n    public Item pop() {\n        if (isEmpty()) throw new NoSuchElementException(&quot;Stack underflow&quot;);\n        Item item = a[n-1];\n        a[n-1] = null;                              // to avoid loitering\n        n--;\n        // shrink size of array if necessary\n        if (n > 0 && n == a.length/4) resize(a.length/2);\n        return item;\n    }\n\n\n    /**\n     * Returns (but does not remove) the item most recently added to this stack.\n     * @return the item most recently added to this stack\n     * @throws java.util.NoSuchElementException if this stack is empty\n     */\n    public Item peek() {\n        if (isEmpty()) throw new NoSuchElementException(&quot;Stack underflow&quot;);\n        return a[n-1];\n    }\n\n    /**\n     * Returns an iterator to this stack that iterates through the items in LIFO order.\n     * @return an iterator to this stack that iterates through the items in LIFO order.\n     */\n    public Iterator<Item> iterator() {\n        return new ReverseArrayIterator();\n    }\n\n    // an iterator, doesn\'t implement remove() since it\'s optional\n    private class ReverseArrayIterator implements Iterator<Item> {\n        private int i;\n\n        public ReverseArrayIterator() {\n            i = n-1;\n        }\n\n        public boolean hasNext() {\n            return i >= 0;\n        }\n\n        public void remove() {\n            throw new UnsupportedOperationException();\n        }\n\n        public Item next() {\n            if (!hasNext()) throw new NoSuchElementException();\n            return a[i--];\n        }\n    }\n\n\n    /**\n     * Unit tests the {@code Stack} data type.\n     *\n     * @param args the command-line arguments\n     */\n    public static void main(String[] args) {\n        ResizingArrayStack<String> stack = new ResizingArrayStack<String>();\n        while (!StdIn.isEmpty()) {\n            String item = StdIn.readString();\n            if (!item.equals(&quot;-&quot;)) stack.push(item);\n            else if (!stack.isEmpty()) StdOut.print(stack.pop() + &quot; &quot;);\n        }\n        StdOut.println(&quot;(&quot; + stack.size() + &quot; left on stack)&quot;);\n    }\n}`, `1904019798806100200`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">edu<span class="token punctuation">.</span>princeton<span class="token punctuation">.</span>cs<span class="token punctuation">.</span>algs4</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Iterator</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">NoSuchElementException</span><span class="token punctuation">;</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResizingArrayStack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Item</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">;</span>         <span class="token comment">// array of items</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>            <span class="token comment">// number of elements on stack</span>\n\n\n    <span class="token comment">/**\n     * Initializes an empty stack.\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">ResizingArrayStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Item</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Is this stack empty?\n     * @return true if this stack is empty; false otherwise\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns the number of items in the stack.\n     * @return the number of items in the stack\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> n<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n\n    <span class="token comment">// resize the underlying array holding the elements</span>\n    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">assert</span> capacity <span class="token operator">>=</span> n<span class="token punctuation">;</span>\n\n        <span class="token comment">// textbook implementation</span>\n        <span class="token class-name">Item</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Item</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        a <span class="token operator">=</span> temp<span class="token punctuation">;</span>\n\n       <span class="token comment">// alternative implementation</span>\n       <span class="token comment">// a = java.util.Arrays.copyOf(a, capacity);</span>\n    <span class="token punctuation">}</span>\n\n\n\n    <span class="token comment">/**\n     * Adds the item to this stack.\n     * @param item the item to add\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Item</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> a<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>a<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// double size of array if necessary</span>\n        a<span class="token punctuation">[</span>n<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>                            <span class="token comment">// add item</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Removes and returns the item most recently added to this stack.\n     * @return the item most recently added\n     * @throws java.util.NoSuchElementException if this stack is empty\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token string">"Stack underflow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">Item</span> item <span class="token operator">=</span> a<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        a<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                              <span class="token comment">// to avoid loitering</span>\n        n<span class="token operator">--</span><span class="token punctuation">;</span>\n        <span class="token comment">// shrink size of array if necessary</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">==</span> a<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token function">resize</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> item<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n\n    <span class="token comment">/**\n     * Returns (but does not remove) the item most recently added to this stack.\n     * @return the item most recently added to this stack\n     * @throws java.util.NoSuchElementException if this stack is empty\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token string">"Stack underflow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> a<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns an iterator to this stack that iterates through the items in LIFO order.\n     * @return an iterator to this stack that iterates through the items in LIFO order.\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ReverseArrayIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// an iterator, doesn\'t implement remove() since it\'s optional</span>\n    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">ReverseArrayIterator</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n        <span class="token keyword">private</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>\n\n        <span class="token keyword">public</span> <span class="token class-name">ReverseArrayIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            i <span class="token operator">=</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">return</span> a<span class="token punctuation">[</span>i<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n\n    <span class="token comment">/**\n     * Unit tests the {@code Stack} data type.\n     *\n     * @param args the command-line arguments\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">ResizingArrayStack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResizingArrayStack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StdIn</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token class-name">String</span> item <span class="token operator">=</span> <span class="token class-name">StdIn</span><span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token class-name">StdOut</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token class-name">StdOut</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"("</span> <span class="token operator">+</span> stack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" left on stack)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="下压堆栈（链表实现）"><a href="#%E4%B8%8B%E5%8E%8B%E5%A0%86%E6%A0%88%EF%BC%88%E9%93%BE%E8%A1%A8%E5%AE%9E%E7%8E%B0%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>下压堆栈（链表实现）</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67133738367068865000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`package edu.princeton.cs.algs4;\n\nimport java.util.Iterator;\nimport java.util.NoSuchElementException;\n\npublic class Stack<Item> implements Iterable<Item> {\n    private Node<Item> first;     // top of stack\n    private int n;                // size of the stack\n\n    // helper linked list class\n    private static class Node<Item> {\n        private Item item;\n        private Node<Item> next;\n    }\n\n    /**\n     * Initializes an empty stack.\n     */\n    public Stack() {\n        first = null;\n        n = 0;\n    }\n\n    /**\n     * Returns true if this stack is empty.\n     *\n     * @return true if this stack is empty; false otherwise\n     */\n    public boolean isEmpty() {\n        return first == null;\n    }\n\n    /**\n     * Returns the number of items in this stack.\n     *\n     * @return the number of items in this stack\n     */\n    public int size() {\n        return n;\n    }\n\n    /**\n     * Adds the item to this stack.\n     *\n     * @param  item the item to add\n     */\n    public void push(Item item) {\n        Node<Item> oldfirst = first;\n        first = new Node<Item>();\n        first.item = item;\n        first.next = oldfirst;\n        n++;\n    }\n\n    /**\n     * Removes and returns the item most recently added to this stack.\n     *\n     * @return the item most recently added\n     * @throws NoSuchElementException if this stack is empty\n     */\n    public Item pop() {\n        if (isEmpty()) throw new NoSuchElementException(&quot;Stack underflow&quot;);\n        Item item = first.item;        // save item to return\n        first = first.next;            // delete first node\n        n--;\n        return item;                   // return the saved item\n    }\n\n\n    /**\n     * Returns (but does not remove) the item most recently added to this stack.\n     *\n     * @return the item most recently added to this stack\n     * @throws NoSuchElementException if this stack is empty\n     */\n    public Item peek() {\n        if (isEmpty()) throw new NoSuchElementException(&quot;Stack underflow&quot;);\n        return first.item;\n    }\n\n    /**\n     * Returns a string representation of this stack.\n     *\n     * @return the sequence of items in this stack in LIFO order, separated by spaces\n     */\n    public String toString() {\n        StringBuilder s = new StringBuilder();\n        for (Item item : this) {\n            s.append(item);\n            s.append(\' \');\n        }\n        return s.toString();\n    }\n\n\n    /**\n     * Returns an iterator to this stack that iterates through the items in LIFO order.\n     *\n     * @return an iterator to this stack that iterates through the items in LIFO order\n     */\n    public Iterator<Item> iterator() {\n        return new ListIterator<Item>(first);\n    }\n\n    // an iterator, doesn\'t implement remove() since it\'s optional\n    private class ListIterator<Item> implements Iterator<Item> {\n        private Node<Item> current;\n\n        public ListIterator(Node<Item> first) {\n            current = first;\n        }\n\n        public boolean hasNext() {\n            return current != null;\n        }\n\n        public void remove() {\n            throw new UnsupportedOperationException();\n        }\n\n        public Item next() {\n            if (!hasNext()) throw new NoSuchElementException();\n            Item item = current.item;\n            current = current.next;\n            return item;\n        }\n    }\n\n\n    /**\n     * Unit tests the {@code Stack} data type.\n     *\n     * @param args the command-line arguments\n     */\n    public static void main(String[] args) {\n        Stack<String> stack = new Stack<String>();\n        while (!StdIn.isEmpty()) {\n            String item = StdIn.readString();\n            if (!item.equals(&quot;-&quot;))\n                stack.push(item);\n            else if (!stack.isEmpty())\n                StdOut.print(stack.pop() + &quot; &quot;);\n        }\n        StdOut.println(&quot;(&quot; + stack.size() + &quot; left on stack)&quot;);\n    }\n}`, `67133738367068865000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">edu<span class="token punctuation">.</span>princeton<span class="token punctuation">.</span>cs<span class="token punctuation">.</span>algs4</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Iterator</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">NoSuchElementException</span><span class="token punctuation">;</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> first<span class="token punctuation">;</span>     <span class="token comment">// top of stack</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>                <span class="token comment">// size of the stack</span>\n\n    <span class="token comment">// helper linked list class</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n        <span class="token keyword">private</span> <span class="token class-name">Item</span> item<span class="token punctuation">;</span>\n        <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> next<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Initializes an empty stack.\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        first <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns true if this stack is empty.\n     *\n     * @return true if this stack is empty; false otherwise\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> first <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns the number of items in this stack.\n     *\n     * @return the number of items in this stack\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> n<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Adds the item to this stack.\n     *\n     * @param  item the item to add\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Item</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> oldfirst <span class="token operator">=</span> first<span class="token punctuation">;</span>\n        first <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        first<span class="token punctuation">.</span>item <span class="token operator">=</span> item<span class="token punctuation">;</span>\n        first<span class="token punctuation">.</span>next <span class="token operator">=</span> oldfirst<span class="token punctuation">;</span>\n        n<span class="token operator">++</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Removes and returns the item most recently added to this stack.\n     *\n     * @return the item most recently added\n     * @throws NoSuchElementException if this stack is empty\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token string">"Stack underflow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">Item</span> item <span class="token operator">=</span> first<span class="token punctuation">.</span>item<span class="token punctuation">;</span>        <span class="token comment">// save item to return</span>\n        first <span class="token operator">=</span> first<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            <span class="token comment">// delete first node</span>\n        n<span class="token operator">--</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> item<span class="token punctuation">;</span>                   <span class="token comment">// return the saved item</span>\n    <span class="token punctuation">}</span>\n\n\n    <span class="token comment">/**\n     * Returns (but does not remove) the item most recently added to this stack.\n     *\n     * @return the item most recently added to this stack\n     * @throws NoSuchElementException if this stack is empty\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token string">"Stack underflow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> first<span class="token punctuation">.</span>item<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns a string representation of this stack.\n     *\n     * @return the sequence of items in this stack in LIFO order, separated by spaces\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">StringBuilder</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Item</span> item <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            s<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            s<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">\' \'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n\n    <span class="token comment">/**\n     * Returns an iterator to this stack that iterates through the items in LIFO order.\n     *\n     * @return an iterator to this stack that iterates through the items in LIFO order\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// an iterator, doesn\'t implement remove() since it\'s optional</span>\n    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n        <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> current<span class="token punctuation">;</span>\n\n        <span class="token keyword">public</span> <span class="token class-name">ListIterator</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> first<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            current <span class="token operator">=</span> first<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> current <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token class-name">Item</span> item <span class="token operator">=</span> current<span class="token punctuation">.</span>item<span class="token punctuation">;</span>\n            current <span class="token operator">=</span> current<span class="token punctuation">.</span>next<span class="token punctuation">;</span>\n            <span class="token keyword">return</span> item<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n\n    <span class="token comment">/**\n     * Unit tests the {@code Stack} data type.\n     *\n     * @param args the command-line arguments\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StdIn</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token class-name">String</span> item <span class="token operator">=</span> <span class="token class-name">StdIn</span><span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n                <span class="token class-name">StdOut</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token class-name">StdOut</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"("</span> <span class="token operator">+</span> stack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" left on stack)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="先进先出队列"><a href="#%E5%85%88%E8%BF%9B%E5%85%88%E5%87%BA%E9%98%9F%E5%88%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>先进先出队列</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60156567955893854000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`package edu.princeton.cs.algs4;\n\nimport java.util.Iterator;\nimport java.util.NoSuchElementException;\npublic class Queue<Item> implements Iterable<Item> {\n    private Node<Item> first;    // beginning of queue\n    private Node<Item> last;     // end of queue\n    private int n;               // number of elements on queue\n\n    // helper linked list class\n    private static class Node<Item> {\n        private Item item;\n        private Node<Item> next;\n    }\n\n    /**\n     * Initializes an empty queue.\n     */\n    public Queue() {\n        first = null;\n        last  = null;\n        n = 0;\n    }\n\n    /**\n     * Returns true if this queue is empty.\n     *\n     * @return {@code true} if this queue is empty; {@code false} otherwise\n     */\n    public boolean isEmpty() {\n        return first == null;\n    }\n\n    /**\n     * Returns the number of items in this queue.\n     *\n     * @return the number of items in this queue\n     */\n    public int size() {\n        return n;\n    }\n\n    /**\n     * Returns the item least recently added to this queue.\n     *\n     * @return the item least recently added to this queue\n     * @throws NoSuchElementException if this queue is empty\n     */\n    public Item peek() {\n        if (isEmpty()) throw new NoSuchElementException(&quot;Queue underflow&quot;);\n        return first.item;\n    }\n\n    /**\n     * Adds the item to this queue.\n     *\n     * @param  item the item to add\n     */\n    public void enqueue(Item item) {\n        Node<Item> oldlast = last;\n        last = new Node<Item>();\n        last.item = item;\n        last.next = null;\n        if (isEmpty()) first = last;\n        else           oldlast.next = last;\n        n++;\n    }\n\n    /**\n     * Removes and returns the item on this queue that was least recently added.\n     *\n     * @return the item on this queue that was least recently added\n     * @throws NoSuchElementException if this queue is empty\n     */\n    public Item dequeue() {\n        if (isEmpty()) throw new NoSuchElementException(&quot;Queue underflow&quot;);\n        Item item = first.item;\n        first = first.next;\n        n--;\n        if (isEmpty()) last = null;   // to avoid loitering\n        return item;\n    }\n\n    /**\n     * Returns a string representation of this queue.\n     *\n     * @return the sequence of items in FIFO order, separated by spaces\n     */\n    public String toString() {\n        StringBuilder s = new StringBuilder();\n        for (Item item : this) {\n            s.append(item);\n            s.append(\' \');\n        }\n        return s.toString();\n    }\n\n    /**\n     * Returns an iterator that iterates over the items in this queue in FIFO order.\n     *\n     * @return an iterator that iterates over the items in this queue in FIFO order\n     */\n    public Iterator<Item> iterator()  {\n        return new ListIterator<Item>(first);\n    }\n\n    // an iterator, doesn\'t implement remove() since it\'s optional\n    private class ListIterator<Item> implements Iterator<Item> {\n        private Node<Item> current;\n\n        public ListIterator(Node<Item> first) {\n            current = first;\n        }\n\n        public boolean hasNext()  { return current != null;                     }\n        public void remove()      { throw new UnsupportedOperationException();  }\n\n        public Item next() {\n            if (!hasNext()) throw new NoSuchElementException();\n            Item item = current.item;\n            current = current.next;\n            return item;\n        }\n    }\n\n\n    /**\n     * Unit tests the {@code Queue} data type.\n     *\n     * @param args the command-line arguments\n     */\n    public static void main(String[] args) {\n        Queue<String> queue = new Queue<String>();\n        while (!StdIn.isEmpty()) {\n            String item = StdIn.readString();\n            if (!item.equals(&quot;-&quot;))\n                queue.enqueue(item);\n            else if (!queue.isEmpty())\n                StdOut.print(queue.dequeue() + &quot; &quot;);\n        }\n        StdOut.println(&quot;(&quot; + queue.size() + &quot; left on queue)&quot;);\n    }\n}`, `60156567955893854000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">edu<span class="token punctuation">.</span>princeton<span class="token punctuation">.</span>cs<span class="token punctuation">.</span>algs4</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Iterator</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">NoSuchElementException</span><span class="token punctuation">;</span>\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> first<span class="token punctuation">;</span>    <span class="token comment">// beginning of queue</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> last<span class="token punctuation">;</span>     <span class="token comment">// end of queue</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>               <span class="token comment">// number of elements on queue</span>\n\n    <span class="token comment">// helper linked list class</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n        <span class="token keyword">private</span> <span class="token class-name">Item</span> item<span class="token punctuation">;</span>\n        <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> next<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Initializes an empty queue.\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        first <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        last  <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns true if this queue is empty.\n     *\n     * @return {@code true} if this queue is empty; {@code false} otherwise\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> first <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns the number of items in this queue.\n     *\n     * @return the number of items in this queue\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> n<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns the item least recently added to this queue.\n     *\n     * @return the item least recently added to this queue\n     * @throws NoSuchElementException if this queue is empty\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token string">"Queue underflow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">return</span> first<span class="token punctuation">.</span>item<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Adds the item to this queue.\n     *\n     * @param  item the item to add\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token class-name">Item</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> oldlast <span class="token operator">=</span> last<span class="token punctuation">;</span>\n        last <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        last<span class="token punctuation">.</span>item <span class="token operator">=</span> item<span class="token punctuation">;</span>\n        last<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> first <span class="token operator">=</span> last<span class="token punctuation">;</span>\n        <span class="token keyword">else</span>           oldlast<span class="token punctuation">.</span>next <span class="token operator">=</span> last<span class="token punctuation">;</span>\n        n<span class="token operator">++</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Removes and returns the item on this queue that was least recently added.\n     *\n     * @return the item on this queue that was least recently added\n     * @throws NoSuchElementException if this queue is empty\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token string">"Queue underflow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token class-name">Item</span> item <span class="token operator">=</span> first<span class="token punctuation">.</span>item<span class="token punctuation">;</span>\n        first <span class="token operator">=</span> first<span class="token punctuation">.</span>next<span class="token punctuation">;</span>\n        n<span class="token operator">--</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>   <span class="token comment">// to avoid loitering</span>\n        <span class="token keyword">return</span> item<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns a string representation of this queue.\n     *\n     * @return the sequence of items in FIFO order, separated by spaces\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">StringBuilder</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Item</span> item <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            s<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            s<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">\' \'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns an iterator that iterates over the items in this queue in FIFO order.\n     *\n     * @return an iterator that iterates over the items in this queue in FIFO order\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// an iterator, doesn\'t implement remove() since it\'s optional</span>\n    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n        <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> current<span class="token punctuation">;</span>\n\n        <span class="token keyword">public</span> <span class="token class-name">ListIterator</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> first<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            current <span class="token operator">=</span> first<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span> <span class="token keyword">return</span> current <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                     <span class="token punctuation">}</span>\n        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token class-name">Item</span> item <span class="token operator">=</span> current<span class="token punctuation">.</span>item<span class="token punctuation">;</span>\n            current <span class="token operator">=</span> current<span class="token punctuation">.</span>next<span class="token punctuation">;</span>\n            <span class="token keyword">return</span> item<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n\n    <span class="token comment">/**\n     * Unit tests the {@code Queue} data type.\n     *\n     * @param args the command-line arguments\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StdIn</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token class-name">String</span> item <span class="token operator">=</span> <span class="token class-name">StdIn</span><span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n                queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n                <span class="token class-name">StdOut</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token class-name">StdOut</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"("</span> <span class="token operator">+</span> queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" left on queue)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="背包"><a href="#%E8%83%8C%E5%8C%85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>背包</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27392021998298886000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`package edu.princeton.cs.algs4;\n\nimport java.util.Iterator;\nimport java.util.NoSuchElementException;\n\npublic class Bag<Item> implements Iterable<Item> {\n    private Node<Item> first;    // beginning of bag\n    private int n;               // number of elements in bag\n\n    // helper linked list class\n    private static class Node<Item> {\n        private Item item;\n        private Node<Item> next;\n    }\n\n    /**\n     * Initializes an empty bag.\n     */\n    public Bag() {\n        first = null;\n        n = 0;\n    }\n\n    /**\n     * Returns true if this bag is empty.\n     *\n     * @return {@code true} if this bag is empty;\n     *         {@code false} otherwise\n     */\n    public boolean isEmpty() {\n        return first == null;\n    }\n\n    /**\n     * Returns the number of items in this bag.\n     *\n     * @return the number of items in this bag\n     */\n    public int size() {\n        return n;\n    }\n\n    /**\n     * Adds the item to this bag.\n     *\n     * @param  item the item to add to this bag\n     */\n    public void add(Item item) {\n        Node<Item> oldfirst = first;\n        first = new Node<Item>();\n        first.item = item;\n        first.next = oldfirst;\n        n++;\n    }\n\n\n    /**\n     * Returns an iterator that iterates over the items in this bag in arbitrary order.\n     *\n     * @return an iterator that iterates over the items in this bag in arbitrary order\n     */\n    public Iterator<Item> iterator()  {\n        return new ListIterator<Item>(first);\n    }\n\n    // an iterator, doesn\'t implement remove() since it\'s optional\n    private class ListIterator<Item> implements Iterator<Item> {\n        private Node<Item> current;\n\n        public ListIterator(Node<Item> first) {\n            current = first;\n        }\n\n        public boolean hasNext()  { return current != null;                     }\n        public void remove()      { throw new UnsupportedOperationException();  }\n\n        public Item next() {\n            if (!hasNext()) throw new NoSuchElementException();\n            Item item = current.item;\n            current = current.next;\n            return item;\n        }\n    }\n\n    /**\n     * Unit tests the {@code Bag} data type.\n     *\n     * @param args the command-line arguments\n     */\n    public static void main(String[] args) {\n        Bag<String> bag = new Bag<String>();\n        while (!StdIn.isEmpty()) {\n            String item = StdIn.readString();\n            bag.add(item);\n        }\n\n        StdOut.println(&quot;size of bag = &quot; + bag.size());\n        for (String s : bag) {\n            StdOut.println(s);\n        }\n    }\n\n}`, `27392021998298886000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">edu<span class="token punctuation">.</span>princeton<span class="token punctuation">.</span>cs<span class="token punctuation">.</span>algs4</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Iterator</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">NoSuchElementException</span><span class="token punctuation">;</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bag</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> first<span class="token punctuation">;</span>    <span class="token comment">// beginning of bag</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>               <span class="token comment">// number of elements in bag</span>\n\n    <span class="token comment">// helper linked list class</span>\n    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n        <span class="token keyword">private</span> <span class="token class-name">Item</span> item<span class="token punctuation">;</span>\n        <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> next<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Initializes an empty bag.\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Bag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        first <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n        n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns true if this bag is empty.\n     *\n     * @return {@code true} if this bag is empty;\n     *         {@code false} otherwise\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> first <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Returns the number of items in this bag.\n     *\n     * @return the number of items in this bag\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> n<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Adds the item to this bag.\n     *\n     * @param  item the item to add to this bag\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Item</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> oldfirst <span class="token operator">=</span> first<span class="token punctuation">;</span>\n        first <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        first<span class="token punctuation">.</span>item <span class="token operator">=</span> item<span class="token punctuation">;</span>\n        first<span class="token punctuation">.</span>next <span class="token operator">=</span> oldfirst<span class="token punctuation">;</span>\n        n<span class="token operator">++</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n\n    <span class="token comment">/**\n     * Returns an iterator that iterates over the items in this bag in arbitrary order.\n     *\n     * @return an iterator that iterates over the items in this bag in arbitrary order\n     */</span>\n    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// an iterator, doesn\'t implement remove() since it\'s optional</span>\n    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> <span class="token punctuation">{</span>\n        <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> current<span class="token punctuation">;</span>\n\n        <span class="token keyword">public</span> <span class="token class-name">ListIterator</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Item</span><span class="token punctuation">></span></span> first<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            current <span class="token operator">=</span> first<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span> <span class="token keyword">return</span> current <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                     <span class="token punctuation">}</span>\n        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>\n\n        <span class="token keyword">public</span> <span class="token class-name">Item</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token class-name">Item</span> item <span class="token operator">=</span> current<span class="token punctuation">.</span>item<span class="token punctuation">;</span>\n            current <span class="token operator">=</span> current<span class="token punctuation">.</span>next<span class="token punctuation">;</span>\n            <span class="token keyword">return</span> item<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">/**\n     * Unit tests the {@code Bag} data type.\n     *\n     * @param args the command-line arguments\n     */</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">Bag</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> bag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bag</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StdIn</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token class-name">String</span> item <span class="token operator">=</span> <span class="token class-name">StdIn</span><span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            bag<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token class-name">StdOut</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"size of bag = "</span> <span class="token operator">+</span> bag<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> bag<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token class-name">StdOut</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>',
id:"/github/workspace/blog/链表java实现/index.md absPath of file >>> MarkdownRemark",timeToRead:8,frontmatter:{date:"2018-03-15 14:30:11",path:"/stack-queue-java/",tags:"面试, 数据结构",title:"栈、队列java实现",draft:null}}],length:2,tag:"数据结构",pagesSum:1,page:1}}}});