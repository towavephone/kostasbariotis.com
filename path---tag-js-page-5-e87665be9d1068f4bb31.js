webpackJsonp([95399022353888],{1302:function(n,a){n.exports={data:{site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"简介 document.readyState 是一个只读属性，可以返回当前文档的准备状态。 语法 其中 state 值包含下面三个值： loading 表示文档正在加载中。 interactive 表示文档已完成加载，文档已被解析，但图像、样式表和框架等子资源仍在加载。 complete 表示文档和所有子资源已完成加载。如果状态变成这个，表明 load 事件即将触发。 DOM 事件绑定没必要等 domready 对于 web 页面开发，JavaScript 最主要的功能之一就是页面上 DOM…",html:'<h1 id="简介"><a href="#%E7%AE%80%E4%BB%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>简介</h1>\n<p>document.readyState 是一个只读属性，可以返回当前文档的准备状态。</p>\n<p>语法</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94886283241894360000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var state = document.readyState;`, `94886283241894360000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> state <span class="token operator">=</span> document<span class="token punctuation">.</span>readyState<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>其中 state 值包含下面三个值：</p>\n<ul>\n<li>loading<br>\n表示文档正在加载中。</li>\n<li>interactive<br>\n表示文档已完成加载，文档已被解析，但图像、样式表和框架等子资源仍在加载。</li>\n<li>complete<br>\n表示文档和所有子资源已完成加载。如果状态变成这个，表明 load 事件即将触发。</li>\n</ul>\n<h1 id="dom-事件绑定没必要等-domready"><a href="#dom-%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E6%B2%A1%E5%BF%85%E8%A6%81%E7%AD%89-domready" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DOM 事件绑定没必要等 domready</h1>\n<p>对于 web 页面开发，JavaScript 最主要的功能之一就是页面上 DOM 元素的交互实现，如果 DOM 元素还没有加载也没有被解析，自然这些 DOM 操作难以为继。于是，JS 初始化的时机就变得很重要。</p>\n<p>实际上，如果我们的 JS 文件以及 script 代码都放在页面的底部，我们不用考虑 JS 初始化时机，因为 JS 放在底部，等到要执行的时候，上面 DOM 都已经解析好了。也就是什么 readyState，什么 DOMContentLoaded 都不需要考虑。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53814472756788140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$(document).ready(function() {});\n// \\$(document).ready这一戳东西删掉，只要你的JS代码是在页面底部的，这些都完全不需要\n(function() {})();`, `53814472756788140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// $(document).ready这一戳东西删掉，只要你的JS代码是在页面底部的，这些都完全不需要</span>\n<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="domcontentloaded-事件"><a href="#domcontentloaded-%E4%BA%8B%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DOMContentLoaded 事件</h1>\n<p>document.readyState 越来越少用到的另外一个原因，就是半路上杀出一个程咬金——‘DOMContentLoaded’事件。</p>\n<p>DOMContentLoaded 事件是 DOM Level 3 新增的一个事件类型，IE9+浏览器支持，表示 DOM 节点内容加载完毕。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62467669554402640000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`document.addEventListener(\'DOMContentLoaded\', function() {});\n\nwindow.addEventListener(\'DOMContentLoaded\', function() {});`, `62467669554402640000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'DOMContentLoaded\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nwindow<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'DOMContentLoaded\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>DOMContentLoaded 设计初衷就是为了方便 JS 代码的初始化，要比记得记不住的 interactive 状态容易理解，也容易使用的多。</p>\n<p>因此，如果为了提防我们的 JavaScript 代码不小心跑到了页面的顶部，需要确保在 DOM 加载完毕之后执行，推荐使用下面代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21805013611583156000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`window.addEventListener(\'DOMContentLoaded\', function() {});`, `21805013611583156000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'DOMContentLoaded\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>由于<code class="language-text">&lt;script&gt;</code>元素本身也是 DOM 元素，因此，只要脚本不是异步加载的，无论放在页面什么位置，DOMContentLoaded 事件一定会触发。</p>\n<p>假设有一个名为 insert.js 的文件，里面的 JS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56719733332119660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`console.log(\'zxx被加载了~\' + document.readyState);\nwindow.addEventListener(\'DOMContentLoaded\', function() {\n  console.log(\'CSS选择器这本书很赞哦！\' + document.readyState);\n});`, `56719733332119660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'zxx被加载了~\'</span> <span class="token operator">+</span> document<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span><span class="token punctuation">;</span>\nwindow<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'DOMContentLoaded\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'CSS选择器这本书很赞哦！\'</span> <span class="token operator">+</span> document<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后还有一个名为 load-test.html 的页面，里面代码这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55062136484809620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<body>\n  <script src=&quot;./insert.js&quot;></script>\n</body>`, `55062136484809620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                html 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./insert.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>结果页面进入，控制台出现了下图所示的结果：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-06-23-0eefa5efdc36f511ae56222efc4e6954-4493b.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 320px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 46.5625%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABSUlEQVQoz3WR6W6DMBCE8/7PFYkcKoQoB4FcJTLYEMBcAmwDHUzVP1FHCC3WfrszZjEMQ9u2hBBK6f1+T9P0/X6HYUiCIGKURNz22O5CvhziU84Yfb1ejDG0ua67ANx1neM4APAuigJT4jhumqaua15UcVYmvA6jlMUALtC87HQ6Lfq+F0JUVQXM933w1+s1y7JUqyhyKTo8SgopRaOF/rIsp82AlVLYD9jzPMMwLMuC88fjgSXoQLeUEu6EFvrHccTJ7XabYFRK9diDb9u2AZ/PZ+Q3TXO5XAZBkCRJFEWYiLTwCBhTfmEhZNWqvsf64c/I7CXjHCRSUH1JuA6MyPMcs2BzgtE3fgg+jdVqp4U+ODocDsfjcb/fIw6uZsqMSM/n8/tDyGxpbTYbMOv1GinAbLdbFDifYJjk/6jUmn8E3qjnotIFrP0AZMTt3j2EvYsAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 06 23"\n        title=""\n        src="/static/2019-12-15-19-06-23-0eefa5efdc36f511ae56222efc4e6954-4493b.png"\n        srcset="/static/2019-12-15-19-06-23-0eefa5efdc36f511ae56222efc4e6954-102e5.png 200w,\n/static/2019-12-15-19-06-23-0eefa5efdc36f511ae56222efc4e6954-4493b.png 320w"\n        sizes="(max-width: 320px) 100vw, 320px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>可以看到，“DOMContentLoaded”事件绑定时候文档状态是’loading’，执行的时候文档状态是可交互的’interactive’。</p>\n<p>配合其他测试（这里不展示），我们可以得出一个网页文档几个加载状态变化和事件触发顺序是这样子的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67502551487359885000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`document.readyState = \'loading\'\n↓\ndocument.readyState变成\'interactive\'\n↓\n\'DOMContentLoaded\'事件执行\n↓\ndocument.readyState变成\'complete\'\n↓\n\'load\'事件执行`, `67502551487359885000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">document.readyState <span class="token operator">=</span> <span class="token string">\'loading\'</span>\n↓\ndocument.readyState变成<span class="token string">\'interactive\'</span>\n↓\n<span class="token string">\'DOMContentLoaded\'</span>事件执行\n↓\ndocument.readyState变成<span class="token string">\'complete\'</span>\n↓\n<span class="token string">\'load\'</span>事件执行</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>以及可以推测出一个结论：</p>\n<p><strong>DOMContentLoaded 事件必须在文档状态为 loading 时候绑定才有效。</strong></p>\n<p>正是由于上面推论，才使得 document.readyState 有了应用场景。</p>\n<h1 id="应用"><a href="#%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>应用</h1>\n<p>由于 DOMContentLoaded 事件绑定后可能并不会执行，于是出现了需要用到 document.readyState 的场景。</p>\n<p>什么时候 DOMContentLoaded 事件不会执行呢？</p>\n<p>那就是相关脚本是在页面 DOM 加载完毕后执行的场景下。</p>\n<p>假设有一个名为 insert.js 的文件，里面的 JS 代码如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2517567096174433300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`console.log(\'zxx被加载了~\' + document.readyState);\nwindow.addEventListener(\'DOMContentLoaded\', function() {\n  console.log(\'CSS选择器这本书很赞哦！\');\n});`, `2517567096174433300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'zxx被加载了~\'</span> <span class="token operator">+</span> document<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span><span class="token punctuation">;</span>\nwindow<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'DOMContentLoaded\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'CSS选择器这本书很赞哦！\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后还有一个名为 load-test.html 的页面，里面代码这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17750204576153350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<body>\n  <script>\n    var eleScript = document.createElement(\'script\');\n    eleScript.src = \'./insert.js\';\n    document.head.appendChild(eleScript);\n  </script>\n</body>`, `17750204576153350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                html 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n    <span class="token keyword">var</span> eleScript <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'script\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    eleScript<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">\'./insert.js\'</span><span class="token punctuation">;</span>\n    document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>eleScript<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结果页面进入，控制台只有’zxx 被加载了~‘的文案，并没有 DOMContentLoaded 事件中的 console.log 输出，如下图所示：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-09-13-44cbe95141bdf16813be7c2440147caf-bd67d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 250px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 57.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABXElEQVQoz5VSa4+CMBDs//9XF01MTAxGkZdygOCDd6Gl8tQbaEzuzH3QSWjZzcxud1rSNE37RDMBP8Mw9H2Ptes6mUPU9UgObdtJDgiEUqqqapqmWH3fZ4zleX44HDzPc103CALOWEmzk+8Fvuu5dhJd6/pmmqbjOKMYW5Iktm2HYVgUBTJQotDxeDwFQZwWazubrb2Z4n6tvldWElNhmoZhmiSKIpBkCQjKskQGYfUELcowY3EuElolVDh+WDCua5qu6+R8Pm82myzLdrsd9BjGmyCVfMJNcFHxijPOyii8iqpSFEXTNCKEgAFgYOz9fo96hmGgFppjlvwJZMCRvsJIDAhfCPx8PB5xHKPtYrGYz+fL5RJU6YI8xeVywUQoB+b9fpd8dCJV3VIxxuP3Bv6Ip2udchN+k17wj1ge+31IMYYaxbgb/gnwiuq6xu1alkVQYLvdqh8CEjynH+3XnM2FRsFyAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 09 13"\n        title=""\n        src="/static/2019-12-15-19-09-13-44cbe95141bdf16813be7c2440147caf-bd67d.png"\n        srcset="/static/2019-12-15-19-09-13-44cbe95141bdf16813be7c2440147caf-30978.png 200w,\n/static/2019-12-15-19-09-13-44cbe95141bdf16813be7c2440147caf-bd67d.png 250w"\n        sizes="(max-width: 250px) 100vw, 250px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>因为 DOMContentLoaded 事件绑定的时候，页面的准备状态已经是’interactive’而不是’loading’了。</p>\n<p>如果 insert.js 是一个公用组件，尤其以后会开源的那种，那势必要考虑到各种加载场景，页面的头部，页面底部，或者异步动态加载，此时，单纯靠 DOMContentLoaded 事件只能覆盖前两种情况，异步动态加载无能为力。</p>\n<p>此时，一直认为没什么锤子用的 document.readyState 倒是排上了用场，假设组件的初始方法名为 init，则好的实现方法是这样的：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13628280242304670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`if (document.readyState != \'loading\') {\n  init();\n} else {\n  window.addEventListener(\'DOMContentLoaded\', function() {\n    init();\n  });\n}`, `13628280242304670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">!=</span> <span class="token string">\'loading\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'DOMContentLoaded\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这是当下实际开发中，唯一需要使用 document.readyState 的场景，在开源或者大规模使用的框架或组件中精准初始化使用。</p>',id:"/github/workspace/blog/document.readyState的作用/index.md absPath of file >>> MarkdownRemark",timeToRead:3,frontmatter:{date:"2019-12-15 18:59:10",path:"/document-readystate/",tags:"前端, JS, JS知识点",title:"document.readyState的作用",draft:null}},{excerpt:"实现方式 通常会新建一个另外的独立页面，专门用来接收传入的前端代码，通过新开窗口或者嵌入 iframe 页面的方式达到最终效果，其中可能会用到 HTML5 postMessage 等通信技术。 然而实际上，对于这个预览效果，如果代码是我们自己控制，而不是全权交给用户编辑的，是没有必要新建一个另外的预览页面，亦或者是在新窗口（新标签页）中浏览的。可以直接在当前页面构建一个文档上下文，实现更加方便快捷的预览。 核心原理 需要注意的是，当我们使用 new Blob…",html:'<h1 id="实现方式"><a href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现方式</h1>\n<p>通常会新建一个另外的独立页面，专门用来接收传入的前端代码，通过新开窗口或者嵌入 iframe 页面的方式达到最终效果，其中可能会用到 HTML5 postMessage 等通信技术。</p>\n<p>然而实际上，对于这个预览效果，如果代码是我们自己控制，而不是全权交给用户编辑的，是没有必要新建一个另外的预览页面，亦或者是在新窗口（新标签页）中浏览的。可以直接在当前页面构建一个文档上下文，实现更加方便快捷的预览。</p>\n<h1 id="核心原理"><a href="#%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>核心原理</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="760323714826483000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 1. 创建<iframe>元素\nvar iframe = document.createElement(\'iframe\');\n// 2. 将CSS，HTML字符串转换为Blob对象\nvar blob = new Blob([htmlCode], {\n  type: \'text/html\'\n});\n// 3. 使用URL.createObjectURL()方法将Blob对象转换为URL对象并赋予我们创建的<iframe>元素\niframe.src = URL.createObjectURL(blob);`, `760323714826483000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 1. 创建&lt;iframe>元素</span>\n<span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'iframe\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 2. 将CSS，HTML字符串转换为Blob对象</span>\n<span class="token keyword">var</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>htmlCode<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  type<span class="token punctuation">:</span> <span class="token string">\'text/html\'</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 3. 使用URL.createObjectURL()方法将Blob对象转换为URL对象并赋予我们创建的&lt;iframe>元素</span>\niframe<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>需要注意的是，当我们使用 new Blob() 对我们的字符数据进行转换的时候，一定要指定 type 为 text/html，否则，HTML 代码会被自动转移为安全的纯文本显示在<code class="language-text">&lt;iframe&gt;</code>元素中。</p>\n<h1 id="兼容性"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性</h1>\n<p>IE 浏览器遗憾并不支持 src 直接是 URL 对象。</p>\n<p>所以此技术只适用于对兼容性没有严格要求的一些项目。</p>\n<h1 id="结束语"><a href="#%E7%BB%93%E6%9D%9F%E8%AF%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>结束语</h1>\n<p>其实很多效果，我们直接在结束当前页面的 window 上下文预览也没什么，但是有一些效果就不行，例如，预览针对响应式布局的 media 屏幕宽度查询下的效果，必须是真实的窗体宽度才会触发 CSS 查询语句的执行，此时，只能在<code class="language-text">&lt;iframe&gt;</code>中预览，我们只要把<code class="language-text">&lt;iframe&gt;</code>元素宽度设置到我们需要的大小就可以了，例如，需要预览类似如下 CSS 代码效果：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81161936513812630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@media screen and (max-width: 480px) {\n  img {\n    max-width: 100%;\n  }\n}`, `81161936513812630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                css 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 480px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>\n  <span class="token selector">img</span> <span class="token punctuation">{</span>\n    <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>只要设置<code class="language-text">&lt;iframe&gt;</code>元素宽度为 480 像素就可以了。</p>',
id:"/github/workspace/blog/iframe和HTML5 blob实现当前页预览/index.md absPath of file >>> MarkdownRemark",timeToRead:1,frontmatter:{date:"2019-12-11 11:53:26",path:"/iframe-html5-blob-code-view/",tags:"前端, JS, JS知识点",title:"iframe和HTML5 blob实现当前页预览",draft:null}},{excerpt:"原生 CSS.supports 语法 返回布尔值 true 或者 false，用来检测是否支持某 CSS 属性。 实际开发的时候，需要使用到对 CSS 检测场景，往往都是针对低版本的 IE 浏览器，例如 IE9-IE11，低版本的 IE 浏览器并不支持浏览器原生支持的 CSS.supports()方法。 JS 赋值再取值的检测方法 当浏览器不支持某个 CSS 属性的时候，就算你强制设置，获取的计算值也不会是你设置的属性值 注意点 getComputedStyle…",html:'<h1 id="原生-csssupports-语法"><a href="#%E5%8E%9F%E7%94%9F-csssupports-%E8%AF%AD%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>原生 CSS.supports 语法</h1>\n<p>返回布尔值 true 或者 false，用来检测是否支持某 CSS 属性。</p>\n<p>实际开发的时候，需要使用到对 CSS 检测场景，往往都是针对低版本的 IE 浏览器，例如 IE9-IE11，低版本的 IE 浏览器并不支持浏览器原生支持的 CSS.supports()方法。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92881823809620500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// CSS.supports(propertyName, value);\n// CSS.supports(supportCondition);\n// propertyName\n// 字符串。用来检测的CSS属性名。\n// value\n// 字符串。用来检测的CSS属性值。\n// supportCondition\n// 字符串。用来检测的CSS声明、表达式或者语法。\nresult = CSS.supports(\'filter\', \'blur(5px)\');\nresult = CSS.supports(\'filter: 5px\'); // 错误语法，返回false\nresult = CSS.supports(\'--username: zhangxinxu\');\nresult = CSS.supports(\'(--username: zhangxinxu)\');\n// 支持逻辑表达，注意括号是必须的，这里语法错误，返回false\nresult = CSS.supports(\'width: fit-content or width: -webkit-fit-content\');\nresult = CSS.supports(\'(width: fit-content) or (width: -webkit-fit-content)\');`, `92881823809620500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// CSS.supports(propertyName, value);</span>\n<span class="token comment">// CSS.supports(supportCondition);</span>\n<span class="token comment">// propertyName</span>\n<span class="token comment">// 字符串。用来检测的CSS属性名。</span>\n<span class="token comment">// value</span>\n<span class="token comment">// 字符串。用来检测的CSS属性值。</span>\n<span class="token comment">// supportCondition</span>\n<span class="token comment">// 字符串。用来检测的CSS声明、表达式或者语法。</span>\nresult <span class="token operator">=</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">\'filter\'</span><span class="token punctuation">,</span> <span class="token string">\'blur(5px)\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nresult <span class="token operator">=</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">\'filter: 5px\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 错误语法，返回false</span>\nresult <span class="token operator">=</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">\'--username: zhangxinxu\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nresult <span class="token operator">=</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">\'(--username: zhangxinxu)\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 支持逻辑表达，注意括号是必须的，这里语法错误，返回false</span>\nresult <span class="token operator">=</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">\'width: fit-content or width: -webkit-fit-content\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nresult <span class="token operator">=</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">\'(width: fit-content) or (width: -webkit-fit-content)\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="js-赋值再取值的检测方法"><a href="#js-%E8%B5%8B%E5%80%BC%E5%86%8D%E5%8F%96%E5%80%BC%E7%9A%84%E6%A3%80%E6%B5%8B%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JS 赋值再取值的检测方法</h1>\n<p>当浏览器不支持某个 CSS 属性的时候，就算你强制设置，获取的计算值也不会是你设置的属性值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8642326703038750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`document.head.style.filter = \'blur(5px)\';\n// 注意，这里为了兼容到IE9+用了getComputedStyle方法\nresult = window.getComputedStyle(document.head).filter == \'blur(5px)\';\n// 如果是带私有前缀，正则匹配关键部分\ndocument.head.style.width = \'fit-content\';\ndocument.head.style.width = \'-moz-fit-content\';\nresult = /fit-content/.test(window.getComputedStyle(document.head).width);`, `8642326703038750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">document<span class="token punctuation">.</span>head<span class="token punctuation">.</span>style<span class="token punctuation">.</span>filter <span class="token operator">=</span> <span class="token string">\'blur(5px)\'</span><span class="token punctuation">;</span>\n<span class="token comment">// 注意，这里为了兼容到IE9+用了getComputedStyle方法</span>\nresult <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>head<span class="token punctuation">)</span><span class="token punctuation">.</span>filter <span class="token operator">==</span> <span class="token string">\'blur(5px)\'</span><span class="token punctuation">;</span>\n<span class="token comment">// 如果是带私有前缀，正则匹配关键部分</span>\ndocument<span class="token punctuation">.</span>head<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">\'fit-content\'</span><span class="token punctuation">;</span>\ndocument<span class="token punctuation">.</span>head<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">\'-moz-fit-content\'</span><span class="token punctuation">;</span>\nresult <span class="token operator">=</span> <span class="token regex">/fit-content/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>head<span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="注意点"><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>注意点</h2>\n<p>getComputedStyle()方法返回的是计算值，很多时候和设置的属性值并不同。</p>\n<p>例如设置行高为小数，在 IE 浏览器下返回就是 px 计算值。</p>\n<p>又或者设置 background 属性值，结果返回的是 background 兄弟姐妹一大家子值：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14124822635608791000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`document.head.style.background = \'paint(abc)\';\nresult = /paint/.test(window.getComputedStyle(document.head).background);\n// result值是true\nwindow.getComputedStyle(document.head).background;\n// &quot;rgba(0, 0, 0, 0) paint(abc) repeat scroll 0% 0% / auto padding-box border-box&quot;`, `14124822635608791000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">document<span class="token punctuation">.</span>head<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">\'paint(abc)\'</span><span class="token punctuation">;</span>\nresult <span class="token operator">=</span> <span class="token regex">/paint/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>head<span class="token punctuation">)</span><span class="token punctuation">.</span>background<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// result值是true</span>\nwindow<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>head<span class="token punctuation">)</span><span class="token punctuation">.</span>background<span class="token punctuation">;</span>\n<span class="token comment">// "rgba(0, 0, 0, 0) paint(abc) repeat scroll 0% 0% / auto padding-box border-box"</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>需要使用模糊匹配才行。</p>\n<h1 id="其他方法"><a href="#%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他方法</h1>\n<p>同赋值取值法</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55456966080951165000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`document.head.setAttribute(\'style\', \'filter: blur(5px)\');\nresult = !!document.head.style.filter;`, `55456966080951165000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">\'style\'</span><span class="token punctuation">,</span> <span class="token string">\'filter: blur(5px)\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nresult <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>document<span class="token punctuation">.</span>head<span class="token punctuation">.</span>style<span class="token punctuation">.</span>filter<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h1 id="总结"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h1>\n<p>不考虑兼容性，对 CSS 的进行检测使用 CSS.supports()方法，要检测 IE 浏览器使用赋值取值法。</p>',id:"/github/workspace/blog/JS检测CSS属性浏览器是否支持/index.md absPath of file >>> MarkdownRemark",timeToRead:2,frontmatter:{date:"2019-12-11 11:36:36",path:"/js-css-supports-detect/",tags:"前端, JS, JS知识点",title:"JS检测CSS属性浏览器是否支持",draft:null}},{excerpt:"ES…",html:'<h1 id="es5-继承"><a href="#es5-%E7%BB%A7%E6%89%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ES5 继承</h1>\n<p>先定义一个父类</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84950634998720560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function SuperType() {\n  // 属性\n  this.name = \'SuperType\';\n}\n// 原型方法\nSuperType.prototype.sayName = function() {\n  return this.name;\n};`, `84950634998720560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 属性</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">\'SuperType\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 原型方法</span>\n<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="原型链继承"><a href="#%E5%8E%9F%E5%9E%8B%E9%93%BE%E7%BB%A7%E6%89%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>原型链继承</h2>\n<p><strong>将父类的实例作为子类的原型</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19477100429484140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 父类\nfunction SuperType() {\n  this.name = \'SuperType\'; // 父类属性\n}\nSuperType.prototype.sayName = function() {\n  // 父类原型方法\n  return this.name;\n};\n\n// 子类\nfunction SubType() {\n  this.subName = \'SubType\'; // 子类属性\n}\n\nSubType.prototype = new SuperType(); // 重写原型对象，代之以一个新类型的实例\n// 这里实例化一个 SuperType 时， 实际上执行了两步\n// 1，新创建的对象复制了父类构造函数内的所有属性及方法\n// 2，并将原型 __proto__ 指向了父类的原型对象\n\nSubType.prototype.saySubName = function() {\n  // 子类原型方法\n  return this.subName;\n};\n\n// 子类实例\nlet instance = new SubType();\n\n// instanceof 通过判断对象的 prototype 链来确定对象是否是某个类的实例\ninstance instanceof SubType; // true\ninstance instanceof SuperType; // true\n\n// 注意\nSubType instanceof SuperType; // false\nSubType.prototype instanceof SuperType; // true`, `19477100429484140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 父类</span>\n<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">\'SuperType\'</span><span class="token punctuation">;</span> <span class="token comment">// 父类属性</span>\n<span class="token punctuation">}</span>\n<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 父类原型方法</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 子类</span>\n<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>subName <span class="token operator">=</span> <span class="token string">\'SubType\'</span><span class="token punctuation">;</span> <span class="token comment">// 子类属性</span>\n<span class="token punctuation">}</span>\n\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重写原型对象，代之以一个新类型的实例</span>\n<span class="token comment">// 这里实例化一个 SuperType 时， 实际上执行了两步</span>\n<span class="token comment">// 1，新创建的对象复制了父类构造函数内的所有属性及方法</span>\n<span class="token comment">// 2，并将原型 __proto__ 指向了父类的原型对象</span>\n\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">saySubName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 子类原型方法</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subName<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 子类实例</span>\n<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// instanceof 通过判断对象的 prototype 链来确定对象是否是某个类的实例</span>\ninstance <span class="token keyword">instanceof</span> <span class="token class-name">SubType</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\ninstance <span class="token keyword">instanceof</span> <span class="token class-name">SuperType</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n\n<span class="token comment">// 注意</span>\nSubType <span class="token keyword">instanceof</span> <span class="token class-name">SuperType</span><span class="token punctuation">;</span> <span class="token comment">// false</span>\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">SuperType</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-21-02-55-32-650497183e53bdda43d578b83b47b2ff-83743.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 738px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 73.71273712737127%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABv0lEQVQoz4VSi26cMBDk/z+sVZsmpEnJ8cgBBwJjfPgBfnFg6F6inGhF2hGWjFezO7O7nrW2qtGpKCuElmVZP7A4t95+t4ENvGmayrIMD2EUxi1uy6JIogjVtWVMx7FOYpVEjAqu98iQFIqf0y7/esIR4Yx1cUgefRaGknOIOWtnt7i90h6c8TJaYUXeD1helCZFHv30yyhK4ngG8Z/DW99SamHQA26PHQky4T+LrOieniRj74Y/J6+rc46fBT/156gjB9aVQho3KDPN87VVH9gnQ2AE4U3fvhB6pINQvbRGq/V/8N6ErdM80YqRQ0dTKpqBE0mZPHc0y7KqqtI0Ze8WdsjrOs/zaEbLrenspCbBeHjtV4wxNsZwzsdx3CHDnFpCUIObGjPKqwrhhsDaoKa5XC5bqw4G5pYtPKXHU4lfj1leFHlRFlXNhJBKg5Ztkf2GwSAJoc/BS5qfvt/7NWqE6CEXaEmOKdgW/SClhPuXb3cIt9tEHmgDVyDIzTN8cCBmjIV3cATLC0+gFi7Wjn/J8ZRSZd0UCFcNbhkPDlGYvOKWbNXeSi1/wtNa8yDgP+6G4Bd99EHFtdI/t/KG3xqYXbU55onmAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 21 02 55 32"\n        title=""\n        src="/static/2019-09-21-02-55-32-650497183e53bdda43d578b83b47b2ff-83743.png"\n        srcset="/static/2019-09-21-02-55-32-650497183e53bdda43d578b83b47b2ff-1800c.png 200w,\n/static/2019-09-21-02-55-32-650497183e53bdda43d578b83b47b2ff-4ad31.png 400w,\n/static/2019-09-21-02-55-32-650497183e53bdda43d578b83b47b2ff-83743.png 738w"\n        sizes="(max-width: 738px) 100vw, 738px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>\n<p><strong>特点</strong>：利用原型，让一个引用类型继承另一个引用类型的属性及方法</p>\n</li>\n<li>\n<p><strong>优点</strong>：<strong>继承了父类的模板，又继承了父类的原型对象</strong></p>\n</li>\n<li>\n<p><strong>缺点</strong>：</p>\n<ul>\n<li>\n<p>可以在子类构造函数中，为子类实例增加实例属性。如果要<strong>新增原型属性和方法</strong>，则必须放在 <code class="language-text">SubType.prototype = new SuperType(&#39;SubType&#39;);</code> 这样的语句<strong>之后</strong>执行。</p>\n</li>\n<li>\n<p>无法实现多继承</p>\n</li>\n<li>\n<p>来自原型对象的所有属性被<strong>所有实例共享</strong></p>\n</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48007346745994090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 父类\nfunction SuperType() {\n  this.colors = [\'red\', \'blue\', \'green\'];\n  this.name = \'SuperType\';\n}\n// 子类\nfunction SubType() {}\n\n// 原型链继承\nSubType.prototype = new SuperType();\n\n// 实例1\nvar instance1 = new SubType();\ninstance1.colors.push(\'blcak\');\ninstance1.name = \'change-super-type-name\';\nconsole.log(instance1.colors); // [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;blcak&quot;]\nconsole.log(instance1.name); // change-super-type-name\n// 实例2\nvar instance2 = new SubType();\nconsole.log(instance2.colors); // [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;blcak&quot;]\nconsole.log(instance2.name); // SuperType`, `48007346745994090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 父类</span>\n<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">\'red\'</span><span class="token punctuation">,</span> <span class="token string">\'blue\'</span><span class="token punctuation">,</span> <span class="token string">\'green\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">\'SuperType\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 子类</span>\n<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token comment">// 原型链继承</span>\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 实例1</span>\n<span class="token keyword">var</span> instance1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ninstance1<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">\'blcak\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ninstance1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">\'change-super-type-name\'</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance1<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ["red", "blue", "green", "blcak"]</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// change-super-type-name</span>\n<span class="token comment">// 实例2</span>\n<span class="token keyword">var</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ["red", "blue", "green", "blcak"]</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SuperType</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-21-03-12-19-05a308af2c534a0d56dae7c10f32d8cb-41127.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 68.76267748478702%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABnElEQVQoz5VS7XLcIAy893+8pkkvl1wuYLANBgzG5kMGXNx20rq9H+nOiBHMrFitdCqlSKWMMZExP46BsyBE0DpQEu0EUnpKo3PbtpV/cKqBcENp2yMkGO8QpgipQSRjUgzZOajJupZ7ONWSXc8455aQqLVnzIkhahMphdmCkr6l0fvtHk4pJUJbTMgg5cdrrfpL5125Hz8DQM9Y1/fjqLf/xCnnXBt+fHgihDJKrVKpbePbW8DII+QxrvodfjfWr2mXcSDXgADDVRhpLMby5SKen9X1NRBSDXct3fWtkH628NfPNVJJY6PlyzhJQzFqz+fuclmtrcNbfYhdG5Xar6RxQhzJPwrOw6KQXthg32/D06NTu3k5xpJzqWcdVUoF9uTodk5mmgYujJoKlBCCkDICfNawpmm+nc+UEjP7CLmUnHL+FHk3DMAwM3WTNQvtWd2wum3JuWSnFEKyds+9T5OBeb7Ts7qp/is3pDXXV/nwZW5wDiEOQyUDZ6D1GjxwHq09kOsIcslhCW700YZJKnS7zcvye9GO+HPDvgPlaiiAYy8MvwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 21 03 12 19"\n        title=""\n        src="/static/2019-09-21-03-12-19-05a308af2c534a0d56dae7c10f32d8cb-fee1c.png"\n        srcset="/static/2019-09-21-03-12-19-05a308af2c534a0d56dae7c10f32d8cb-a67b7.png 200w,\n/static/2019-09-21-03-12-19-05a308af2c534a0d56dae7c10f32d8cb-0b187.png 400w,\n/static/2019-09-21-03-12-19-05a308af2c534a0d56dae7c10f32d8cb-fee1c.png 800w,\n/static/2019-09-21-03-12-19-05a308af2c534a0d56dae7c10f32d8cb-41127.png 986w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><strong>注意</strong>：更改 <code class="language-text">SuperType</code> <strong>引用类型属性</strong>时，会使 <code class="language-text">SubType</code> 所有实例共享这一更新。基础类型属性更新则不会。</p>\n<ul>\n<li><strong>创建子类实例时，无法向父类构造函数传参</strong>，或者说是，没办法在不影响所有对象实例的情况下，向超类的构造函数传递参数</li>\n</ul>\n</li>\n</ul>\n<h2 id="构造继承"><a href="#%E6%9E%84%E9%80%A0%E7%BB%A7%E6%89%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>构造继承</h2>\n<p><strong>基本思想</strong>：在子类型的构造函数内部调用父类型构造函数。</p>\n<p><strong>注意</strong>：函数只不过是在特定环境中执行代码的对象，所以这里使用 apply/call 来实现。</p>\n<p><strong>使用父类的构造函数来增强子类实例，等于是复制父类的实例属性给子类（没用到原型）</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16204558560796990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 父类\nfunction SuperType(name) {\n  this.name = name; // 父类属性\n}\nSuperType.prototype.sayName = function() {\n  // 父类原型方法\n  return this.name;\n};\n\n// 子类\nfunction SubType() {\n  // 调用 SuperType 构造函数\n  SuperType.call(this, \'SuperType\'); // 在子类构造函数中，向父类构造函数传参\n  // 为了保证子父类的构造函数不会重写子类的属性，需要在调用父类构造函数后，定义子类的属性\n  this.subName = \'SubType\'; // 子类属性\n}\n// 子类实例\nlet instance = new SubType(); // 运行子类构造函数，并在子类构造函数中运行父类构造函数，this绑定到子类`, `16204558560796990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 父类</span>\n<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">// 父类属性</span>\n<span class="token punctuation">}</span>\n<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 父类原型方法</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 子类</span>\n<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 调用 SuperType 构造函数</span>\n  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">\'SuperType\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在子类构造函数中，向父类构造函数传参</span>\n  <span class="token comment">// 为了保证子父类的构造函数不会重写子类的属性，需要在调用父类构造函数后，定义子类的属性</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>subName <span class="token operator">=</span> <span class="token string">\'SubType\'</span><span class="token punctuation">;</span> <span class="token comment">// 子类属性</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// 子类实例</span>\n<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 运行子类构造函数，并在子类构造函数中运行父类构造函数，this绑定到子类</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-21-03-12-49-aaefd94e92f026e95abae5b59cecb4d2-b855b.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 47.767857142857146%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABOUlEQVQoz4WSDW+DIBCG/f//bGuWtFs/tYoVFG0ryFcREB3N1mxJu+7N5UJeeMLd5SJUVqAouo6N0+S8H0M4N1ob8jSG5Ky1/mZ6awc/hpdfinCF402Ca4xzUCNkMJZJ3COoi8JoXZYlREgr2UOos1QiRIX1NzryzsOXst4eGcj5+4LPXjnIrjfjzw/fujMiY0yHGEmpYr0RwgthpbTuqlDt9FRR6FIxpc+6b7VmmjJ1gBiADEKolPoHVhdFWspOnDQdJTTZ74vQrTHXIf3SYzgvyiQFzemEm+bcEi6kMfau2T/glnbzxXL2Ngd5UUCE6waVeLFc5wc4DINzw7Oy6+a43SW7JP1YbVKQhwiHfQZW2ziswDZOlusNofQxzIVgjIclqXDNuTDWEkJbQtTlEgYupUIVDv5D+BNVbjykTj2skQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 21 03 12 49"\n        title=""\n        src="/static/2019-09-21-03-12-49-aaefd94e92f026e95abae5b59cecb4d2-fee1c.png"\n        srcset="/static/2019-09-21-03-12-49-aaefd94e92f026e95abae5b59cecb4d2-a67b7.png 200w,\n/static/2019-09-21-03-12-49-aaefd94e92f026e95abae5b59cecb4d2-0b187.png 400w,\n/static/2019-09-21-03-12-49-aaefd94e92f026e95abae5b59cecb4d2-fee1c.png 800w,\n/static/2019-09-21-03-12-49-aaefd94e92f026e95abae5b59cecb4d2-b855b.png 896w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li><strong>优点</strong>：<strong>解决了 1 中子类实例共享父类引用对象的问题，实现多继承，创建子类实例时，可以向父类传递参数</strong></li>\n<li>\n<p><strong>缺点</strong>：</p>\n<ul>\n<li>实例并不是父类的实例，只是子类的实例</li>\n<li><strong>只能</strong>继承父类的实例属性和方法，<strong>不能</strong>继承原型属性/方法</li>\n<li><strong>无法实现函数复用</strong>，每个子类都有父类实例函数的副本，影响性能</li>\n</ul>\n</li>\n</ul>\n<h2 id="组合继承"><a href="#%E7%BB%84%E5%90%88%E7%BB%A7%E6%89%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>组合继承</h2>\n<p>顾名思义，组合继承就是将原型链继承与构造函数继承组合在一起，从而发挥两者之长的一种继承模式。</p>\n<p><strong>基本思想</strong>：使用<strong>原型链</strong>继承使用对原型属性和方法的继承，通过<strong>构造函数</strong>继承来实现对实例属性的继承。这样既能通过在原型上定义方法实现函数复用，又能保证每个实例都有自己的属性。</p>\n<p><strong>通过调用父类构造，继承父类的属性并保留传参的优点，然后通过将父类实例作为子类原型，实现函数复用</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80157281430741200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 父类\nfunction SuperType(name) {\n  this.colors = [\'red\', \'blue\', \'green\'];\n  this.name = name; // 父类属性\n}\nSuperType.prototype.sayName = function() {\n  // 父类原型方法\n  return this.name;\n};\n\n// 子类\nfunction SubType(name, subName) {\n  // 调用 SuperType 构造函数\n  SuperType.call(this, name); // ----第二次调用 SuperType----\n  this.subName = subName;\n}\n\n// ----第一次调用 SuperType----\nSubType.prototype = new SuperType(); // 重写原型对象，代之以一个新类型的实例\n\nSubType.prototype.constructor = SubType; // 组合继承需要修复构造函数指向，不修复的话会指向SuperType\nSubType.prototype.saySubName = function() {\n  // 子类原型方法\n  return this.subName;\n};\n\n// 子类实例\nlet instance = new SubType(\'An\', \'sisterAn\');\ninstance.colors.push(\'black\');\nconsole.log(instance.colors); // [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;black&quot;]\ninstance.sayName(); // An\ninstance.saySubName(); // sisterAn\n\nlet instance1 = new SubType(\'An1\', \'sisterAn1\');\nconsole.log(instance1.colors); //  [&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;]\ninstance1.sayName(); // An1\ninstance1.saySubName(); // sisterAn1`, `80157281430741200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 父类</span>\n<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">\'red\'</span><span class="token punctuation">,</span> <span class="token string">\'blue\'</span><span class="token punctuation">,</span> <span class="token string">\'green\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">// 父类属性</span>\n<span class="token punctuation">}</span>\n<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 父类原型方法</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 子类</span>\n<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> subName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 调用 SuperType 构造函数</span>\n  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ----第二次调用 SuperType----</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>subName <span class="token operator">=</span> subName<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// ----第一次调用 SuperType----</span>\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重写原型对象，代之以一个新类型的实例</span>\n\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType<span class="token punctuation">;</span> <span class="token comment">// 组合继承需要修复构造函数指向，不修复的话会指向SuperType</span>\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">saySubName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 子类原型方法</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subName<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 子类实例</span>\n<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token string">\'An\'</span><span class="token punctuation">,</span> <span class="token string">\'sisterAn\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ninstance<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">\'black\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ["red", "blue", "green", "black"]</span>\ninstance<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// An</span>\ninstance<span class="token punctuation">.</span><span class="token function">saySubName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sisterAn</span>\n\n<span class="token keyword">let</span> instance1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token string">\'An1\'</span><span class="token punctuation">,</span> <span class="token string">\'sisterAn1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance1<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  ["red", "blue", "green"]</span>\ninstance1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// An1</span>\ninstance1<span class="token punctuation">.</span><span class="token function">saySubName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sisterAn1</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-21-03-25-03-ece5d09e2ee8087f8f723614aa00244b-94c27.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 616px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 67.20779220779221%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACIUlEQVQ4y42TyW7bQBBE9dFODkEOMRLAzhclyNl2YlteJe+WZC3Uwp0j7iLnpSkaFoX4EALF5hDdPdU1NS2NxjVc7IGJbS5Y2g6RaRHOZoS2TTydklsWStb+ZMIqTSmXIaskIS80SL3WEivI06pekZ3iPLikgSKaz4kch/999NZC1w3jlxHewQ3Luz7m1RXzwyP8TodIkD49EpydkQ1fIAzRwlAncR2zDLIqptsM094Q80cb8+AK67yL0+3i3XTwrq8JH+6xLs5Jnh7A99BLVUclcbkUqBrNhomvsE+esY+fCUYGpRSQ57BabSDrNaNKs9dRt6BrLdcNUQHerwOCn39YHh4zO2mzGAxwDANzPCYLAtk1QVfMqo1eD+HtMPRGyVYuCSqKUGFEWQiZosQXrXJJKiWhbAi/zWbDqolWLAL3HnsYwwmO6+CJVZTAE7t4pokSlvnEQIlmC3FAJrqt5H+FMEwpSt7Yvo2sZgnmjU0wX5BYNqnjrn1WFAVFIkUyRfmebu/aRuaMX8a47T7RYMzi8gLr9JRsaoAw0mLqQlhqx4bAl91VjTgWXePaSoLNKYuHkk4X93KEezvA7Y9w7h+x7m6xOteo3jNGu00ot4RBX2yzbDRM5FaENZoNs+kceyRjD31mpo+f1SMWDazTF/PtEf+5NtXIskv27SvxzmfyT7vYOx9wP36A/X3Y25Mo+C7fu1/Qv4/qwsoOTcs0rPMXY6ngqMroMT4AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 21 03 25 03"\n        title=""\n        src="/static/2019-09-21-03-25-03-ece5d09e2ee8087f8f723614aa00244b-94c27.png"\n        srcset="/static/2019-09-21-03-25-03-ece5d09e2ee8087f8f723614aa00244b-64932.png 200w,\n/static/2019-09-21-03-25-03-ece5d09e2ee8087f8f723614aa00244b-2fd6e.png 400w,\n/static/2019-09-21-03-25-03-ece5d09e2ee8087f8f723614aa00244b-94c27.png 616w"\n        sizes="(max-width: 616px) 100vw, 616px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>第一次调用 <code class="language-text">SuperType</code> 构造函数时，<code class="language-text">SubType.prototype</code> 会得到两个属性<code class="language-text">name</code>和<code class="language-text">colors</code>；当调用 <code class="language-text">SubType</code> 构造函数时，第二次调用 <code class="language-text">SuperType</code> 构造函数，这一次又在新对象属性上创建了 <code class="language-text">name</code>和<code class="language-text">colors</code>，这两个属性就会屏蔽原型对象上的同名属性。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42936321558742204000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// instanceof：instance 的原型链是针对 SuperType.prototype 进行检查的\ninstance instanceof SuperType; // true\ninstance instanceof SubType; // true\n\n// isPrototypeOf：instance 的原型链是针对 SuperType 本身进行检查的\nSuperType.prototype.isPrototypeOf(instance); // true\nSubType.prototype.isPrototypeOf(instance); // true`, `42936321558742204000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// instanceof：instance 的原型链是针对 SuperType.prototype 进行检查的</span>\ninstance <span class="token keyword">instanceof</span> <span class="token class-name">SuperType</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\ninstance <span class="token keyword">instanceof</span> <span class="token class-name">SubType</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n\n<span class="token comment">// isPrototypeOf：instance 的原型链是针对 SuperType 本身进行检查的</span>\n<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-21-03-35-46-893a961d45f9af88f9053d69b2f2c0f7-9d536.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 543px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 29.65009208103131%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAxElEQVQY042R627DIAyF+/5vuanJ1CZgwNxikpwZWu3XlM2SxZGRP47NLcaMaV6xrAZCBWVi1GeCsYTHc4FzHj3O8/xX3mIquM92NO4skCWjUYUPAZYcfotroDq8Ty9g5oxIEclHBOYBTCkhZ3Veip4Z+75fA5k70Izm7soFD3IOzBHeBx3d6h0NbXUNddsuXSow4ePzAWNoQI15AbrjVXXfLWl9NWY88ufIKVXMX/oRdUNrDZs6EJG3lpEi7ad2HMdlfgMXxNNkPHqbvwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 21 03 35 46"\n        title=""\n        src="/static/2019-09-21-03-35-46-893a961d45f9af88f9053d69b2f2c0f7-9d536.png"\n        srcset="/static/2019-09-21-03-35-46-893a961d45f9af88f9053d69b2f2c0f7-cdad1.png 200w,\n/static/2019-09-21-03-35-46-893a961d45f9af88f9053d69b2f2c0f7-5653c.png 400w,\n/static/2019-09-21-03-35-46-893a961d45f9af88f9053d69b2f2c0f7-9d536.png 543w"\n        sizes="(max-width: 543px) 100vw, 543px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li><strong>优点</strong>：<strong>弥补了方式 2 的缺陷，可以继承实例属性/方法，也可以继承原型属性/方法，不存在引用属性共享问题，可传参，可复用</strong></li>\n<li>\n<p><strong>缺点</strong>：</p>\n<ul>\n<li>调用了两次父类构造函数，生成了<strong>两份实例</strong>（子类实例将子类原型上的那份屏蔽了）</li>\n</ul>\n</li>\n</ul>\n<h2 id="寄生组合继承"><a href="#%E5%AF%84%E7%94%9F%E7%BB%84%E5%90%88%E7%BB%A7%E6%89%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>寄生组合继承</h2>\n<p>在组合继承中，调用了两次父类构造函数，这里 <strong>通过通过寄生方式，砍掉父类的实例属性，这样，在调用两次父类的构造的时候，就不会初始化两次实例方法/属性，避免的组合继承的缺点</strong></p>\n<p><strong>主要思想</strong>：借用 <strong>构造函数</strong> 继承 <strong>属性</strong> ，通过 <strong>原型链的混成形式</strong> 来继承 <strong>方法</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86090822968578130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 父类\nfunction SuperType(name) {\n  this.colors = [\'red\', \'blue\', \'green\'];\n  this.name = name; // 父类属性\n}\nSuperType.prototype.sayName = function() {\n  // 父类原型方法\n  return this.name;\n};\n\n// 子类\nfunction SubType(name, subName) {\n  // 调用 SuperType 构造函数\n  SuperType.call(this, name); // ----第二次调用 SuperType，继承实例属性----\n  this.subName = subName;\n}\n\n// ----第一次调用 SuperType，继承原型属性----\nSubType.prototype = Object.create(SuperType.prototype);\n\nSubType.prototype.constructor = SubType; // 注意：增强对象\n\nlet instance = new SubType(\'An\', \'sisterAn\');`, `86090822968578130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 父类</span>\n<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">\'red\'</span><span class="token punctuation">,</span> <span class="token string">\'blue\'</span><span class="token punctuation">,</span> <span class="token string">\'green\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">// 父类属性</span>\n<span class="token punctuation">}</span>\n<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 父类原型方法</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 子类</span>\n<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> subName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 调用 SuperType 构造函数</span>\n  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ----第二次调用 SuperType，继承实例属性----</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>subName <span class="token operator">=</span> subName<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// ----第一次调用 SuperType，继承原型属性----</span>\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType<span class="token punctuation">;</span> <span class="token comment">// 注意：增强对象</span>\n\n<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token string">\'An\'</span><span class="token punctuation">,</span> <span class="token string">\'sisterAn\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-21-03-42-49-aec6a13e2423869db22b2aea5bc5e57c-4c6f5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 607px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 31.960461285008236%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA5UlEQVQY032QbW+EIBCE7///un7sl9b0TEB8Q09BBeQp6LVJe71uMkyWbGZn57IsC1JV9IPGe38iBDbncIlzH33ApT7PBufZ15WQ4FwgxvgDF+cd8kNSFRVNXdM3DaNS6LJEC8GQeLteGceRtm1x1hISe62xa+CsyFdd8jOLmfpFMdcNSxKxQkK4D6etB57Ug8P8aSaDfh+4iRtNWVG8FchKovXAbAxNdp0c/iVw7vslmHPqi47+tcMal/ILR14midl04pHd3XH8x+33yXvcmdoJowxmtAihqOvTVdd1bNv2xN0jPgFTndNHZSY6/wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 21 03 42 49"\n        title=""\n        src="/static/2019-09-21-03-42-49-aec6a13e2423869db22b2aea5bc5e57c-4c6f5.png"\n        srcset="/static/2019-09-21-03-42-49-aec6a13e2423869db22b2aea5bc5e57c-3bd24.png 200w,\n/static/2019-09-21-03-42-49-aec6a13e2423869db22b2aea5bc5e57c-52f0c.png 400w,\n/static/2019-09-21-03-42-49-aec6a13e2423869db22b2aea5bc5e57c-4c6f5.png 607w"\n        sizes="(max-width: 607px) 100vw, 607px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><strong>优点</strong>：</p>\n<ul>\n<li>只调用一次 <code class="language-text">SuperType</code> 构造函数，只创建一份父类属性</li>\n<li>原型链保持不变</li>\n<li>能够正常使用 <code class="language-text">instanceof</code> 与 <code class="language-text">isPrototypeOf</code></li>\n</ul>\n<h2 id="原型式继承"><a href="#%E5%8E%9F%E5%9E%8B%E5%BC%8F%E7%BB%A7%E6%89%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>原型式继承</h2>\n<p><strong>实现思路就是将子类的原型设置为父类的原型</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69669864165665960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 父类\nfunction SuperType(name) {\n  this.colors = [\'red\', \'blue\', \'green\'];\n  this.name = name; // 父类属性\n}\nSuperType.prototype.sayName = function() {\n  // 父类原型方法\n  return this.name;\n};\n\n/** 第一步 */\n// 子类，通过 call 继承父类的实例属性和方法，不能继承原型属性/方法\nfunction SubType(name, subName) {\n  SuperType.call(this, name); // 调用 SuperType 的构造函数，并向其传参\n  this.subName = subName;\n}\n\n/** 第二步 */\n// 解决 call 无法继承父类原型属性/方法的问题\n// Object.create 方法接受传入一个作为新创建对象的原型的对象，创建一个拥有指定原型和若干个指定属性的对象\n// 通过这种方法指定的任何属性都会覆盖原型对象上的同名属性\nSubType.prototype = Object.create(SuperType.prototype, {\n  constructor: {\n    // 注意指定 SubType.prototype.constructor = SubType\n    value: SubType,\n    enumerable: false,\n    writable: true,\n    configurable: true\n  },\n  run: {\n    value: function() {\n      // override\n      SuperType.prototype.run.apply(this, arguments);\n      // call super\n      // ...\n    },\n    enumerable: true,\n    configurable: true,\n    writable: true\n  }\n});\n\n/** 第三步 */\n// 最后：解决 SubType.prototype.constructor === SuperType 的问题\n// 这里，在上一步已经指定，这里不需要再操作\n// SubType.prototype.constructor = SubType;\n\nvar instance = new SubType(\'An\', \'sistenAn\');`, `69669864165665960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 父类</span>\n<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">\'red\'</span><span class="token punctuation">,</span> <span class="token string">\'blue\'</span><span class="token punctuation">,</span> <span class="token string">\'green\'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token comment">// 父类属性</span>\n<span class="token punctuation">}</span>\n<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 父类原型方法</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">/** 第一步 */</span>\n<span class="token comment">// 子类，通过 call 继承父类的实例属性和方法，不能继承原型属性/方法</span>\n<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> subName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用 SuperType 的构造函数，并向其传参</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>subName <span class="token operator">=</span> subName<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/** 第二步 */</span>\n<span class="token comment">// 解决 call 无法继承父类原型属性/方法的问题</span>\n<span class="token comment">// Object.create 方法接受传入一个作为新创建对象的原型的对象，创建一个拥有指定原型和若干个指定属性的对象</span>\n<span class="token comment">// 通过这种方法指定的任何属性都会覆盖原型对象上的同名属性</span>\n<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  constructor<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 注意指定 SubType.prototype.constructor = SubType</span>\n    value<span class="token punctuation">:</span> SubType<span class="token punctuation">,</span>\n    enumerable<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    writable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    configurable<span class="token punctuation">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  run<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">value</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// override</span>\n      <span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token comment">// call super</span>\n      <span class="token comment">// ...</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    configurable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    writable<span class="token punctuation">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">/** 第三步 */</span>\n<span class="token comment">// 最后：解决 SubType.prototype.constructor === SuperType 的问题</span>\n<span class="token comment">// 这里，在上一步已经指定，这里不需要再操作</span>\n<span class="token comment">// SubType.prototype.constructor = SubType;</span>\n\n<span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token string">\'An\'</span><span class="token punctuation">,</span> <span class="token string">\'sistenAn\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-21-03-57-16-01f2f7a428b20c128919080569d83c63-68fa4.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 641px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 32.137285491419654%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2ElEQVQY042Q6W7DIBCE/f4vWPVfLPXAjg+uxZgCk8FpoiiKqq40WnYFH7Pbee9x6nuM5zMkBAQROGMQ2Bdq1waZfd16zMU5/CwLtpBQKxiV+Tgc0RUUrJ8a47vCrBTCPCMQ7ocBwofx6xuRME9Y2neUbUPhpynl10CWkEkwvU3Y6EbTrSXsf1HxwPoFshNsgBs87Cow2mKmM6012jramAvrnPMVUeuDnut6BaaUsJ5WmN4cu4kxwnFXwtFuKqXcgX9F1y42WWXhPhxdeig1Hg5vug/45OaVLtdO1DxmdhEFAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 21 03 57 16"\n        title=""\n        src="/static/2019-09-21-03-57-16-01f2f7a428b20c128919080569d83c63-68fa4.png"\n        srcset="/static/2019-09-21-03-57-16-01f2f7a428b20c128919080569d83c63-ea38f.png 200w,\n/static/2019-09-21-03-57-16-01f2f7a428b20c128919080569d83c63-bb505.png 400w,\n/static/2019-09-21-03-57-16-01f2f7a428b20c128919080569d83c63-68fa4.png 641w"\n        sizes="(max-width: 641px) 100vw, 641px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>如果希望能 <strong>多继承</strong> ，可使用 <strong>混入</strong> 的方式</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85067391492735430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 父类 SuperType\nfunction SuperType() {}\n// 父类 OtherSuperType\nfunction OtherSuperType() {}\n\n// 多继承子类\nfunction AnotherType() {\n  SuperType.call(this); // 继承 SuperType 的实例属性和方法\n  OtherSuperType.call(this); // 继承 OtherSuperType 的实例属性和方法\n}\n\n// 继承一个类\nAnotherType.prototype = Object.create(SuperType.prototype);\n\n// 使用 Object.assign 混合其它\nObject.assign(AnotherType.prototype, OtherSuperType.prototype);\n// Object.assign 会把  OtherSuperType 原型上的函数拷贝到 AnotherType 原型上，使 AnotherType 的所有实例都可用 OtherSuperType 的方法\n\n// 重新指定 constructor\nAnotherType.prototype.constructor = AnotherType;\n\nAnotherType.prototype.myMethod = function() {\n  // do a thing\n};\n\nlet instance = new AnotherType();`, `85067391492735430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 父类 SuperType</span>\n<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token comment">// 父类 OtherSuperType</span>\n<span class="token keyword">function</span> <span class="token function">OtherSuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token comment">// 多继承子类</span>\n<span class="token keyword">function</span> <span class="token function">AnotherType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 继承 SuperType 的实例属性和方法</span>\n  <span class="token function">OtherSuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 继承 OtherSuperType 的实例属性和方法</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 继承一个类</span>\n<span class="token class-name">AnotherType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 使用 Object.assign 混合其它</span>\nObject<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">AnotherType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">OtherSuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// Object.assign 会把  OtherSuperType 原型上的函数拷贝到 AnotherType 原型上，使 AnotherType 的所有实例都可用 OtherSuperType 的方法</span>\n\n<span class="token comment">// 重新指定 constructor</span>\n<span class="token class-name">AnotherType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> AnotherType<span class="token punctuation">;</span>\n\n<span class="token class-name">AnotherType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// do a thing</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnotherType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>最重要的部分是</strong>：</p>\n<ul>\n<li><code class="language-text">SuperType.call</code> 继承实例属性方法</li>\n<li>用 <code class="language-text">Object.create()</code> 来继承原型属性与方法</li>\n<li>修改 <code class="language-text">SubType.prototype.constructor</code>的指向</li>\n</ul>\n<h1 id="es6-继承"><a href="#es6-%E7%BB%A7%E6%89%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ES6 继承</h1>\n<p>首先，实现一个简单的 ES6 继承：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70307642366743675000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class People {\n  constructor(name) {\n    this.name = name;\n  }\n  run() {}\n}\n\n// extends 相当于方法的继承\n// 替换了上面的3行代码\nclass Man extends People {\n  constructor(name) {\n    // super 相当于属性的继承\n    // 替换了 People.call(this, name)\n    super(name);\n    this.gender = \'男\';\n  }\n  fight() {}\n}`, `70307642366743675000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">People</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// extends 相当于方法的继承</span>\n<span class="token comment">// 替换了上面的3行代码</span>\n<span class="token keyword">class</span> <span class="token class-name">Man</span> <span class="token keyword">extends</span> <span class="token class-name">People</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// super 相当于属性的继承</span>\n    <span class="token comment">// 替换了 People.call(this, name)</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token string">\'男\'</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="核心代码"><a href="#%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>核心代码</h2>\n<p><code class="language-text">extends</code> 继承的核心代码如下，其实现和上述的寄生组合式继承方式一样</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80637538772691600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function _inherits(subType, superType) {\n    // 创建对象，Object.create 创建父类原型的一个副本\n    // 增强对象，弥补因重写原型而失去的默认的 constructor 属性\n    // 指定对象，将新创建的对象赋值给子类的原型 subType.prototype\n    subType.prototype = Object.create(superType && superType.prototype, {\n        constructor: { // 重写 constructor\n            value: subType,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n    if (superType) {\n        Object.setPrototypeOf\n            ? Object.setPrototypeOf(subType, superType)\n            : subType.__proto__ = superType;\n    }\n}`, `80637538772691600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                Js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">_inherits</span><span class="token punctuation">(</span><span class="token parameter">subType<span class="token punctuation">,</span> superType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// 创建对象，Object.create 创建父类原型的一个副本</span>\n    <span class="token comment">// 增强对象，弥补因重写原型而失去的默认的 constructor 属性</span>\n    <span class="token comment">// 指定对象，将新创建的对象赋值给子类的原型 subType.prototype</span>\n    subType<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>superType <span class="token operator">&amp;&amp;</span> superType<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n        constructor<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 重写 constructor</span>\n            value<span class="token punctuation">:</span> subType<span class="token punctuation">,</span>\n            enumerable<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n            writable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n            configurable<span class="token punctuation">:</span> <span class="token boolean">true</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>superType<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        Object<span class="token punctuation">.</span>setPrototypeOf\n            <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>subType<span class="token punctuation">,</span> superType<span class="token punctuation">)</span>\n            <span class="token punctuation">:</span> subType<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> superType<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="继承的使用场景"><a href="#%E7%BB%A7%E6%89%BF%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>继承的使用场景</h1>\n<ul>\n<li>不要仅仅为了使用而使用它们，这只是在浪费时间而已。</li>\n<li>当需要创建 <strong>一系列拥有相似特性的对象</strong> 时，那么创建一个包含所有共有功能的通用对象，然后在更特殊的对象类型中继承这些特性。</li>\n<li>应避免多继承，造成混乱。</li>\n</ul>\n<p><strong>注:</strong> 考虑到 JavaScript 的工作方式，由于原型链等特性的存在，在不同对象之间功能的共享通常被叫做 <strong>委托</strong> - 特殊的对象将功能委托给通用的对象类型完成。这也许比将其称之为继承更为贴切，因为“被继承”了的功能并没有被拷贝到正在“进行继承”的对象中，相反它仍存在于通用的对象中。</p>\n<h2 id="扩展：new"><a href="#%E6%89%A9%E5%B1%95%EF%BC%9Anew" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>扩展：new</h2>\n<p><strong>new 关键字</strong>创建的对象<strong>实际上是对新对象 this 的不断赋值，并将 prototype 指向类的 prototype 所指向的对象</strong>。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39003996177210690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var SuperType = function(name) {\n  var nose = \'nose\'; // 私有属性\n  function say() {} // 私有方法\n\n  // 特权方法\n  this.getName = function() {};\n  this.setName = function() {};\n\n  this.mouse = \'mouse\'; // 对象公有属性\n  this.listen = function() {}; // 对象公有方法\n\n  // 构造器\n  this.setName(name);\n};\n\nSuperType.age = 10; // 类静态公有属性（对象不能访问）\nSuperType.read = function() {}; // 类静态公有方法（对象无法访问）\n\nSuperType.prototype = {\n  // 对象赋值（也可以一一赋值）\n  isMan: \'true\', // 公有属性\n  write: function() {} // 公有方法\n};\n\nvar instance = new SuperType();`, `39003996177210690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">SuperType</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> nose <span class="token operator">=</span> <span class="token string">\'nose\'</span><span class="token punctuation">;</span> <span class="token comment">// 私有属性</span>\n  <span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 私有方法</span>\n\n  <span class="token comment">// 特权方法</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">this</span><span class="token punctuation">.</span>mouse <span class="token operator">=</span> <span class="token string">\'mouse\'</span><span class="token punctuation">;</span> <span class="token comment">// 对象公有属性</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">listen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 对象公有方法</span>\n\n  <span class="token comment">// 构造器</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\nSuperType<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 类静态公有属性（对象不能访问）</span>\nSuperType<span class="token punctuation">.</span><span class="token function-variable function">read</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 类静态公有方法（对象无法访问）</span>\n\n<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 对象赋值（也可以一一赋值）</span>\n  isMan<span class="token punctuation">:</span> <span class="token string">\'true\'</span><span class="token punctuation">,</span> <span class="token comment">// 公有属性</span>\n  <span class="token function-variable function">write</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 公有方法</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-21-04-20-04-6eb5875c171f52d6633fd7e6b8e3bea1-51685.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 550px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 32.72727272727273%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA3klEQVQoz52RyW7DMAxE/f8f10PRWwvUSGLDVl0tXiRZojWdKEHvDgGCAEm8GYnNre/RXi9YtxUp7di2Dfu+I+cM731NyYIQAiL7B6twRziPMdbdPWWIFJRS0IzDiPajRf/Voxt+0FFgnucKmqap5h1mtIZjX7RBGgbEe89a7jq4JSAJGATGNUK9jTCthelGpGXBa/F0GEgf3xXMxcDdBniq1nEpJ/PpMKUES3f6U8MvKzKf9a95GkogS3Vnvy3cr8OsFBI/vDwkT0cjwguuvKDlxXyGpUNF6CHHSw7/AIQhIzLPVvPsAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 21 04 20 04"\n        title=""\n        src="/static/2019-09-21-04-20-04-6eb5875c171f52d6633fd7e6b8e3bea1-51685.png"\n        srcset="/static/2019-09-21-04-20-04-6eb5875c171f52d6633fd7e6b8e3bea1-b4476.png 200w,\n/static/2019-09-21-04-20-04-6eb5875c171f52d6633fd7e6b8e3bea1-1367e.png 400w,\n/static/2019-09-21-04-20-04-6eb5875c171f52d6633fd7e6b8e3bea1-51685.png 550w"\n        sizes="(max-width: 550px) 100vw, 550px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>所以类的构造函数内定义的 <strong>私有变量或方法</strong> ，以及类定义的 <strong>静态公有属性及方法</strong> ，在 <strong>new</strong> 的实例对象中都将 <strong>无法访问</strong> 。</p>\n<h3 id="扩展：继承机制的设计思想··"><a href="#%E6%89%A9%E5%B1%95%EF%BC%9A%E7%BB%A7%E6%89%BF%E6%9C%BA%E5%88%B6%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3%C2%B7%C2%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>扩展：继承机制的设计思想··</h3>\n<p>关于继承机制的设计思想，请参见 <a href="http://www.ruanyifeng.com/blog/2011/06/designing_ideas_of_inheritance_mechanism_in_javascript.html" target="_blank" rel="nofollow noreferrer noopener">Javascript 继承机制的设计思想</a> 。</p>',
id:"/github/workspace/blog/JS基础之继承/index.md absPath of file >>> MarkdownRemark",timeToRead:8,frontmatter:{date:"2019-09-21 02:26:30",path:"/js-basic-of-extend/",tags:"前端, JS, 继承",title:"JS基础之继承",draft:null}},{excerpt:"防抖动是将多次执行变为最后一次执行，节流是将多次执行变成每隔一段时间执行。 防抖 触发高频事件后 n 秒内函数只会执行一次，如果 n 秒内高频事件再次被触发，则重新计算时间 思路： 每次触发事件时都取消之前的延时调用方法 节流 高频事件触发，但在 n 秒内只会执行一次，所以节流会稀释函数的执行频率 思路： 每次触发事件时都判断当前是否有等待执行的延时函数",html:'<p>防抖动是将多次执行变为最后一次执行，节流是将多次执行变成每隔一段时间执行。</p>\n<h1 id="防抖"><a href="#%E9%98%B2%E6%8A%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>防抖</h1>\n<p>触发高频事件后 n 秒内函数只会执行一次，如果 n 秒内高频事件再次被触发，则重新计算时间</p>\n<h2 id="思路："><a href="#%E6%80%9D%E8%B7%AF%EF%BC%9A" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路：</h2>\n<p>每次触发事件时都取消之前的延时调用方法</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66073117141667170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function debounce(fn) {\n  let timeout = null; // 创建一个标记用来存放定时器的返回值\n  return function() {\n    clearTimeout(timeout); // 每当用户输入的时候把前一个 setTimeout clear 掉\n    // 然后又创建一个新的 setTimeout, 这样就能保证输入字符后的 interval 间隔内如果还有字符输入的话，就不会执行 fn 函数\n    timeout = setTimeout(() => {\n      fn.apply(this, arguments);\n    }, 500);\n  };\n}\n\nfunction sayHi() {\n  console.log(\'防抖成功\');\n}\n\nvar inp = document.getElementById(\'inp\');\ninp.addEventListener(\'input\', debounce(sayHi)); // 防抖`, `66073117141667170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个标记用来存放定时器的返回值</span>\n  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 每当用户输入的时候把前一个 setTimeout clear 掉</span>\n    <span class="token comment">// 然后又创建一个新的 setTimeout, 这样就能保证输入字符后的 interval 间隔内如果还有字符输入的话，就不会执行 fn 函数</span>\n    timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'防抖成功\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">var</span> inp <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'inp\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\ninp<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'input\'</span><span class="token punctuation">,</span> <span class="token function">debounce</span><span class="token punctuation">(</span>sayHi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 防抖</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="节流"><a href="#%E8%8A%82%E6%B5%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>节流</h1>\n<p>高频事件触发，但在 n 秒内只会执行一次，所以节流会稀释函数的执行频率</p>\n<h2 id="思路：-1"><a href="#%E6%80%9D%E8%B7%AF%EF%BC%9A-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>思路：</h2>\n<p>每次触发事件时都判断当前是否有等待执行的延时函数</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49205668397259350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function throttle(fn) {\n  let canRun = true; // 通过闭包保存一个标记\n  return function() {\n    if (!canRun) return; // 在函数开头判断标记是否为 true，不为 true 则 return\n    canRun = false; // 立即设置为 false\n    setTimeout(() => {\n      // 将外部传入的函数的执行放在 setTimeout 中\n      fn.apply(this, arguments);\n      // 最后在 setTimeout 执行完毕后再把标记设置为 true(关键) 表示可以执行下一次循环了\n      // 当定时器没有执行的时候标记永远是 false，在开头被 return 掉\n      canRun = true;\n    }, 500);\n  };\n}\n\nfunction sayHi(e) {\n  console.log(e.target.innerWidth, e.target.innerHeight);\n}\n\nwindow.addEventListener(\'resize\', throttle(sayHi));`, `49205668397259350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> canRun <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 通过闭包保存一个标记</span>\n  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canRun<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 在函数开头判断标记是否为 true，不为 true 则 return</span>\n    canRun <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 立即设置为 false</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token comment">// 将外部传入的函数的执行放在 setTimeout 中</span>\n      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token comment">// 最后在 setTimeout 执行完毕后再把标记设置为 true(关键) 表示可以执行下一次循环了</span>\n      <span class="token comment">// 当定时器没有执行的时候标记永远是 false，在开头被 return 掉</span>\n      canRun <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nwindow<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'resize\'</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>sayHi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>',id:"/github/workspace/blog/防抖节流的区别与实现/index.md absPath of file >>> MarkdownRemark",timeToRead:1,frontmatter:{date:"2019-07-19 11:31:28",path:"/debounce-throttle-difference-realize/",tags:"前端, JS, 防抖, 节流",title:"防抖节流的区别与实现",draft:null}}],length:31,tag:"JS",pagesSum:7,page:5}}}});