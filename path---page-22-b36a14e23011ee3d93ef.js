webpackJsonp([0x8de8f1391e7b],{1193:function(n,a){n.exports={data:{site:{siteMetadata:{description:'å‰ç«¯å·¥ç¨‹å¸ˆï¼Œé»‘çŒ«å¥³ç‹æ§ï¼Œæ¬¢è¿å‹¾æ­ï¼ŒæŠ€æœ¯ç›¸å…³<a href="https://github.com/towavephone" target="_blank">@towavephone</a>ï¼ŒQQé—²èŠ<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>ï¼Œbiliå…³æ³¨<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"ä¸€ä¸ªç«™ç‚¹é…ç½®å¤šä¸ªåŸŸå server_name åè·Ÿå¤šä¸ªåŸŸåå³å¯ï¼Œå¤šä¸ªåŸŸåä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš” ä¸€ä¸ªæœåŠ¡é…ç½®å¤šä¸ªç«™ç‚¹ åŸºäº nginx è™šæ‹Ÿä¸»æœºé…ç½®å®ç°ï¼Œnginx æœ‰ä¸‰ç§ç±»å‹çš„è™šæ‹Ÿä¸»æœº åŸºäº ip çš„è™šæ‹Ÿä¸»æœºï¼šéœ€è¦ä½ çš„æœåŠ¡å™¨ä¸Šæœ‰å¤šä¸ªåœ°å€ï¼Œæ¯ä¸ªç«™ç‚¹å¯¹åº”ä¸åŒçš„åœ°å€ï¼Œè¿™ç§æ–¹å¼ä½¿ç”¨çš„æ¯”è¾ƒå°‘ åŸºäºç«¯å£çš„è™šæ‹Ÿä¸»æœºï¼šæ¯ä¸ªç«™ç‚¹å¯¹åº”ä¸åŒçš„ç«¯å£ï¼Œè®¿é—®çš„æ—¶å€™ä½¿ç”¨ ip:port çš„æ–¹å¼è®¿é—®ï¼Œå¯ä»¥ä¿®æ”¹ listenâ€¦",html:'<h1 id="ä¸€ä¸ªç«™ç‚¹é…ç½®å¤šä¸ªåŸŸå"><a href="#%E4%B8%80%E4%B8%AA%E7%AB%99%E7%82%B9%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AA%E5%9F%9F%E5%90%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸€ä¸ªç«™ç‚¹é…ç½®å¤šä¸ªåŸŸå</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65990533319254660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`server {\n    listen       80;\n    server_name  ops-coffee.cn b.ops-coffee.cn;\n}`, `65990533319254660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">server <span class="token punctuation">{</span>\n    listen       <span class="token number">80</span><span class="token punctuation">;</span>\n    server_name  ops-coffee.cn b.ops-coffee.cn<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>server_name åè·Ÿå¤šä¸ªåŸŸåå³å¯ï¼Œå¤šä¸ªåŸŸåä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”</p>\n<h1 id="ä¸€ä¸ªæœåŠ¡é…ç½®å¤šä¸ªç«™ç‚¹"><a href="#%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AA%E7%AB%99%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸€ä¸ªæœåŠ¡é…ç½®å¤šä¸ªç«™ç‚¹</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45355646901453550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`server {\n    listen       80;\n    server_name  a.ops-coffee.cn;\n\n    location / {\n        root /home/project/pa;\n        index index.html;\n    }\n}\n\nserver {\n    listen       80;\n    server_name  ops-coffee.cn b.ops-coffee.cn;\n\n    location / {\n        root /home/project/pb;\n        index index.html;\n    }\n}\n\nserver {\n    listen       80;\n    server_name  c.ops-coffee.cn;\n\n    location / {\n        root /home/project/pc;\n        index index.html;\n    }\n}`, `45355646901453550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">server <span class="token punctuation">{</span>\n    listen       <span class="token number">80</span><span class="token punctuation">;</span>\n    server_name  a.ops-coffee.cn<span class="token punctuation">;</span>\n\n    location / <span class="token punctuation">{</span>\n        root /home/project/pa<span class="token punctuation">;</span>\n        index index.html<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nserver <span class="token punctuation">{</span>\n    listen       <span class="token number">80</span><span class="token punctuation">;</span>\n    server_name  ops-coffee.cn b.ops-coffee.cn<span class="token punctuation">;</span>\n\n    location / <span class="token punctuation">{</span>\n        root /home/project/pb<span class="token punctuation">;</span>\n        index index.html<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nserver <span class="token punctuation">{</span>\n    listen       <span class="token number">80</span><span class="token punctuation">;</span>\n    server_name  c.ops-coffee.cn<span class="token punctuation">;</span>\n\n    location / <span class="token punctuation">{</span>\n        root /home/project/pc<span class="token punctuation">;</span>\n        index index.html<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>åŸºäº nginx è™šæ‹Ÿä¸»æœºé…ç½®å®ç°ï¼Œnginx æœ‰ä¸‰ç§ç±»å‹çš„è™šæ‹Ÿä¸»æœº</p>\n<p>åŸºäº ip çš„è™šæ‹Ÿä¸»æœºï¼šéœ€è¦ä½ çš„æœåŠ¡å™¨ä¸Šæœ‰å¤šä¸ªåœ°å€ï¼Œæ¯ä¸ªç«™ç‚¹å¯¹åº”ä¸åŒçš„åœ°å€ï¼Œè¿™ç§æ–¹å¼ä½¿ç”¨çš„æ¯”è¾ƒå°‘</p>\n<p>åŸºäºç«¯å£çš„è™šæ‹Ÿä¸»æœºï¼šæ¯ä¸ªç«™ç‚¹å¯¹åº”ä¸åŒçš„ç«¯å£ï¼Œè®¿é—®çš„æ—¶å€™ä½¿ç”¨ ip:port çš„æ–¹å¼è®¿é—®ï¼Œå¯ä»¥ä¿®æ”¹ listen çš„ç«¯å£æ¥ä½¿ç”¨</p>\n<p>åŸºäºåŸŸåçš„è™šæ‹Ÿä¸»æœºï¼šä½¿ç”¨æœ€å¹¿çš„æ–¹å¼ï¼Œä¸Šè¾¹ä¾‹å­ä¸­å°±æ˜¯ç”¨äº†åŸºäºåŸŸåçš„è™šæ‹Ÿä¸»æœºï¼Œå‰ææ¡ä»¶æ˜¯ä½ æœ‰å¤šä¸ªåŸŸååˆ†åˆ«å¯¹åº”æ¯ä¸ªç«™ç‚¹ï¼Œserver_name å¡«å†™ä¸åŒçš„åŸŸåå³å¯</p>\n<h1 id="nginx-æ·»åŠ è´¦å·å¯†ç éªŒè¯"><a href="#nginx-%E6%B7%BB%E5%8A%A0%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>nginx æ·»åŠ è´¦å·å¯†ç éªŒè¯</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57412556188147200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`server {\n    location / {\n        auth_basic &quot;please input user&passwd&quot;;\n        auth_basic_user_file key/auth.key;\n    }\n}`, `57412556188147200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">server <span class="token punctuation">{</span>\n    location / <span class="token punctuation">{</span>\n        auth_basic <span class="token string">"please input user&amp;passwd"</span><span class="token punctuation">;</span>\n        auth_basic_user_file key/auth.key<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>æœ‰å¾ˆå¤šæœåŠ¡é€šè¿‡ nginx è®¿é—®ï¼Œä½†æœ¬èº«æ²¡æœ‰æä¾›è´¦å·è®¤è¯çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥é€šè¿‡ nginx æä¾›çš„ authbase è´¦å·å¯†ç è®¤è¯æ¥å®ç°ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹è„šæœ¬æ¥ç”Ÿæˆè´¦å·çš„å¯†ç </p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40581742379928600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# cat pwd.pl\n#!/usr/bin/perl\nuse strict;\n\nmy \\$pw=\\$ARGV[0] ;\nprint crypt(\\$pw,\\$pw).&quot;\\n&quot;;`, `40581742379928600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># cat pwd.pl</span>\n<span class="token comment">#!/usr/bin/perl</span>\nuse strict<span class="token punctuation">;</span>\n\nmy <span class="token variable">$pw</span><span class="token operator">=</span><span class="token variable">$ARGV</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">;</span>\nprint crypt<span class="token punctuation">(</span><span class="token variable">$pw</span>,<span class="token variable">$pw</span><span class="token punctuation">)</span>.<span class="token string">"<span class="token entity" title="\\n">\\n</span>"</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ä½¿ç”¨æ–¹æ³•ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20214896067692600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# perl pwd.pl ops-coffee.cn\nopf8BImqCAXww\n# echo &quot;admin:opf8BImqCAXww&quot; > key/auth.key`, `20214896067692600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># perl pwd.pl ops-coffee.cn</span>\nopf8BImqCAXww\n<span class="token comment"># echo "admin:opf8BImqCAXww" > key/auth.key</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="nginx-å¼€å¯åˆ—ç›®å½•"><a href="#nginx-%E5%BC%80%E5%90%AF%E5%88%97%E7%9B%AE%E5%BD%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>nginx å¼€å¯åˆ—ç›®å½•</h1>\n<p>å½“ä½ æƒ³è®© nginx ä½œä¸ºæ–‡ä»¶ä¸‹è½½æœåŠ¡å™¨å­˜åœ¨æ—¶ï¼Œéœ€è¦å¼€å¯ nginx åˆ—ç›®å½•</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50109489971555350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`server {\n    location download {\n        autoindex on;\n\n        autoindex_exact_size off;\n        autoindex_localtime on;\n    }\n}`, `50109489971555350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">server <span class="token punctuation">{</span>\n    location download <span class="token punctuation">{</span>\n        autoindex on<span class="token punctuation">;</span>\n\n        autoindex_exact_size off<span class="token punctuation">;</span>\n        autoindex_localtime on<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>autoindex<em>exact</em>sizeï¼šä¸º onï¼ˆé»˜è®¤ï¼‰æ—¶æ˜¾ç¤ºæ–‡ä»¶çš„ç¡®åˆ‡å¤§å°ï¼Œå•ä½æ˜¯ byteï¼›æ”¹ä¸º off æ˜¾ç¤ºæ–‡ä»¶å¤§æ¦‚å¤§å°ï¼Œå•ä½ KB æˆ– MB æˆ– GB</p>\n<p>autoindex_localtimeï¼šä¸º offï¼ˆé»˜è®¤ï¼‰æ—¶æ˜¾ç¤ºçš„æ–‡ä»¶æ—¶é—´ä¸º GMT æ—¶é—´ï¼›æ”¹ä¸º on åï¼Œæ˜¾ç¤ºçš„æ–‡ä»¶æ—¶é—´ä¸ºæœåŠ¡å™¨æ—¶é—´</p>\n<p>é»˜è®¤å½“è®¿é—®åˆ—å‡ºçš„ txt ç­‰æ–‡ä»¶æ—¶ä¼šåœ¨æµè§ˆå™¨ä¸Šæ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ï¼Œå¦‚æœä½ æƒ³è®©æµè§ˆå™¨ç›´æ¥ä¸‹è½½ï¼ŒåŠ ä¸Šä¸‹è¾¹çš„é…ç½®</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50789747244417850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`if (\\$request_filename ~* ^.*?\\.(txt|pdf|jpg|png)\\$) {\n    add_header Content-Disposition \'attachment\';\n}`, `50789747244417850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request_filename</span> ~* ^.*?<span class="token punctuation">\\</span>.<span class="token punctuation">(</span>txt<span class="token operator">|</span>pdf<span class="token operator">|</span>jpg<span class="token operator">|</span>png<span class="token punctuation">)</span>$<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    add_header Content-Disposition <span class="token string">\'attachment\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="é…ç½®é»˜è®¤ç«™ç‚¹"><a href="#%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%AB%99%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>é…ç½®é»˜è®¤ç«™ç‚¹</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21440849649921700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`server {\n    listen 80 default;\n}`, `21440849649921700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">server <span class="token punctuation">{</span>\n    listen <span class="token number">80</span> default<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>å½“ä¸€ä¸ª nginx æœåŠ¡ä¸Šåˆ›å»ºäº†å¤šä¸ªè™šæ‹Ÿä¸»æœºæ—¶é»˜è®¤ä¼šä»ä¸Šåˆ°ä¸‹æŸ¥æ‰¾ï¼Œå¦‚æœåŒ¹é…ä¸åˆ°è™šæ‹Ÿä¸»æœºåˆ™ä¼šè¿”å›ç¬¬ä¸€ä¸ªè™šæ‹Ÿä¸»æœºçš„å†…å®¹ï¼Œå¦‚æœä½ æƒ³æŒ‡å®šä¸€ä¸ªé»˜è®¤ç«™ç‚¹æ—¶ï¼Œå¯ä»¥å°†è¿™ä¸ªç«™ç‚¹çš„è™šæ‹Ÿä¸»æœºæ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ç¬¬ä¸€ä¸ªè™šæ‹Ÿä¸»æœºçš„ä½ç½®ï¼Œæˆ–è€…åœ¨è¿™ä¸ªç«™ç‚¹çš„è™šæ‹Ÿä¸»æœºä¸Šé…ç½® listen default</p>\n<h1 id="ä¸å…è®¸é€šè¿‡-ip-è®¿é—®"><a href="#%E4%B8%8D%E5%85%81%E8%AE%B8%E9%80%9A%E8%BF%87-ip-%E8%AE%BF%E9%97%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸å…è®¸é€šè¿‡ IP è®¿é—®</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37717124171550090000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`server {\n    listen       80 default;\n    server_name  _;\n\n    return      404;\n}`, `37717124171550090000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">server <span class="token punctuation">{</span>\n    listen       <span class="token number">80</span> default<span class="token punctuation">;</span>\n    server_name  _<span class="token punctuation">;</span>\n\n    <span class="token builtin class-name">return</span>      <span class="token number">404</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å¯èƒ½æœ‰ä¸€äº›æœªå¤‡æ¡ˆçš„åŸŸåæˆ–è€…ä½ ä¸å¸Œæœ›çš„åŸŸåå°†æœåŠ¡å™¨åœ°å€æŒ‡å‘äº†ä½ çš„æœåŠ¡å™¨ï¼Œè¿™æ—¶å€™å°±ä¼šå¯¹ä½ çš„ç«™ç‚¹é€ æˆä¸€å®šçš„å½±å“ï¼Œéœ€è¦ç¦æ­¢ IP æˆ–æœªé…ç½®çš„åŸŸåè®¿é—®ï¼Œæˆ‘ä»¬åˆ©ç”¨ä¸Šè¾¹æ‰€è¯´çš„ default è§„åˆ™ï¼Œå°†é»˜è®¤æµé‡éƒ½è½¬åˆ° 404 å»</p>\n<p>ä¸Šè¾¹è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒç²—æš´ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é…ç½®ä¸‹æ‰€æœ‰æœªé…ç½®çš„åœ°å€è®¿é—®æ—¶ç›´æ¥ 301 é‡å®šå‘åˆ°ä½ çš„ç½‘ç«™å»ï¼Œä¹Ÿèƒ½ä¸ºä½ çš„ç½‘ç«™å¸¦æ¥ä¸€å®šçš„æµé‡</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="1413999334787230500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`server {\n    rewrite ^/(.*)\\$ https://ops-coffee.cn/\\$1    permanent;\n}`, `1413999334787230500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">server <span class="token punctuation">{</span>\n    rewrite ^/<span class="token punctuation">(</span>.*<span class="token punctuation">)</span>$ https://ops-coffee.cn/<span class="token variable">$1</span>    permanent<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="ç›´æ¥è¿”å›éªŒè¯æ–‡ä»¶"><a href="#%E7%9B%B4%E6%8E%A5%E8%BF%94%E5%9B%9E%E9%AA%8C%E8%AF%81%E6%96%87%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç›´æ¥è¿”å›éªŒè¯æ–‡ä»¶</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71878302624896010000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`location = /XDFyle6tNA.txt {\n    default_type text/plain;\n    return 200 \'d6296a84657eb275c05c31b10924f6ea\';\n}`, `71878302624896010000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">location <span class="token operator">=</span> /XDFyle6tNA.txt <span class="token punctuation">{</span>\n    default_type text/plain<span class="token punctuation">;</span>\n    <span class="token builtin class-name">return</span> <span class="token number">200</span> <span class="token string">\'d6296a84657eb275c05c31b10924f6ea\'</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å¾ˆå¤šæ—¶å€™å¾®ä¿¡ç­‰ç¨‹åºéƒ½éœ€è¦æˆ‘ä»¬æ”¾ä¸€ä¸ª txt çš„æ–‡ä»¶åˆ°é¡¹ç›®é‡Œä»¥éªŒè¯é¡¹ç›®å½’å±ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ä¸Šè¾¹è¿™ç§æ–¹å¼ä¿®æ”¹ nginx å³å¯ï¼Œæ— éœ€çœŸæ­£çš„æŠŠæ–‡ä»¶ç»™æ”¾åˆ°æœåŠ¡å™¨ä¸Š</p>\n<h1 id="nginx-é…ç½®-upstream-åå‘ä»£ç†"><a href="#nginx-%E9%85%8D%E7%BD%AE-upstream-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>nginx é…ç½® upstream åå‘ä»£ç†</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84242704769407120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`http {\n    ...\n    upstream tomcats {\n        server 192.168.106.176 weight=1;\n        server 192.168.106.177 weight=1;\n    }\n\n    server {\n        location /ops-coffee/ {\n            proxy_pass http://tomcats;\n\n            proxy_set_header Host \\$host;\n            proxy_set_header X-Real-IP \\$remote_addr;\n            proxy_set_header X-Forwarded-For \\$proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto \\$scheme;\n        }\n    }\n\n}`, `84242704769407120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">http <span class="token punctuation">{</span>\n    <span class="token punctuation">..</span>.\n    upstream tomcats <span class="token punctuation">{</span>\n        server <span class="token number">192.168</span>.106.176 <span class="token assign-left variable">weight</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>\n        server <span class="token number">192.168</span>.106.177 <span class="token assign-left variable">weight</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    server <span class="token punctuation">{</span>\n        location /ops-coffee/ <span class="token punctuation">{</span>\n            proxy_pass http://tomcats<span class="token punctuation">;</span>\n\n            proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>\n            proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>\n            proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>\n            proxy_set_header X-Forwarded-Proto <span class="token variable">$scheme</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ç¨ä¸æ³¨æ„å¯èƒ½ä¼šè½å…¥ä¸€ä¸ª proxy<em>pass åŠ æ ä¸åŠ æ çš„é™·é˜±ï¼Œè¿™é‡Œè¯¦ç»†è¯´ä¸‹ proxy</em>pass <code class="language-text">http://tomcats</code> ä¸ proxy_pass <code class="language-text">http://tomcats/</code> çš„åŒºåˆ«ï¼š</p>\n<p>è™½ç„¶åªæ˜¯ä¸€ä¸ª / çš„åŒºåˆ«ä½†ç»“æœç¡®åƒå·®ä¸‡åˆ«ã€‚åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p>\n<ol>\n<li>\n<p>ç›®æ ‡åœ°å€ä¸­ä¸å¸¦ uri(proxy_pass <code class="language-text">http://tomcats</code>)ã€‚æ­¤æ—¶æ–°çš„ç›®æ ‡ url ä¸­ï¼ŒåŒ¹é…çš„ uri éƒ¨åˆ†ä¸åšä¿®æ”¹ï¼ŒåŸæ¥æ˜¯ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78772065722989430000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`location /ops-coffee/ {\n   proxy_pass  http://192.168.106.135:8181;\n}\n\nhttp://domain/ops-coffee/   -->     http://192.168.106.135:8181/ops-coffee/\nhttp://domain/ops-coffee/action/abc   -->     http://192.168.106.135:8181/ops-coffee/action/abc`, `78772065722989430000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">location /ops-coffee/ <span class="token punctuation">{</span>\n   proxy_pass  http://192.168.106.135:8181<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nhttp://domain/ops-coffee/   --<span class="token operator">></span>     http://192.168.106.135:8181/ops-coffee/\nhttp://domain/ops-coffee/action/abc   --<span class="token operator">></span>     http://192.168.106.135:8181/ops-coffee/action/abc</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>ç›®æ ‡åœ°å€ä¸­å¸¦ uri (proxy_pass <code class="language-text">http://tomcats/</code>ï¼Œ/ä¹Ÿæ˜¯ uri) ,æ­¤æ—¶æ–°çš„ç›®æ ‡ url ä¸­ï¼ŒåŒ¹é…çš„ uri éƒ¨åˆ†å°†ä¼šè¢«ä¿®æ”¹ä¸ºè¯¥å‚æ•°ä¸­çš„ uriã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79224835840642240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`location /ops-coffee/ {\n   proxy_pass  http://192.168.106.135:8181/;\n}\n\nhttp://domain/ops-coffee/   -->     http://192.168.106.135:8181\nhttp://domain/ops-coffee/action/abc   -->     http://192.168.106.135:8181/action/abc`, `79224835840642240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">location /ops-coffee/ <span class="token punctuation">{</span>\n   proxy_pass  http://192.168.106.135:8181/<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nhttp://domain/ops-coffee/   --<span class="token operator">></span>     http://192.168.106.135:8181\nhttp://domain/ops-coffee/action/abc   --<span class="token operator">></span>     http://192.168.106.135:8181/action/abc</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<h1 id="nginx-upstream-å¼€å¯-keepalive"><a href="#nginx-upstream-%E5%BC%80%E5%90%AF-keepalive" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>nginx upstream å¼€å¯ keepalive</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42088656933164790000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`upstream tomcat {\n    server ops-coffee.cn:8080;\n    keepalive 1024;\n}\n\nserver {\n    location / {\n        proxy_http_version 1.1;\n        proxy_set_header Connection &quot;&quot;;\n\n        proxy_pass http://tomcat;\n    }\n}`, `42088656933164790000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">upstream tomcat <span class="token punctuation">{</span>\n    server ops-coffee.cn:8080<span class="token punctuation">;</span>\n    keepalive <span class="token number">1024</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nserver <span class="token punctuation">{</span>\n    location / <span class="token punctuation">{</span>\n        proxy_http_version <span class="token number">1.1</span><span class="token punctuation">;</span>\n        proxy_set_header Connection <span class="token string">""</span><span class="token punctuation">;</span>\n\n        proxy_pass http://tomcat<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>nginx åœ¨é¡¹ç›®ä¸­å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šä½œä¸ºåå‘ä»£ç†ä½¿ç”¨ï¼Œä¾‹å¦‚ nginx åæ¥ tomcatï¼Œnginx åæ¥ php ç­‰ï¼Œè¿™æ—¶æˆ‘ä»¬å¼€å¯ nginx å’Œåç«¯æœåŠ¡ä¹‹é—´çš„ keepalive èƒ½å¤Ÿå‡å°‘é¢‘ç¹åˆ›å»º TCP è¿æ¥é€ æˆçš„èµ„æºæ¶ˆè€—ï¼Œé…ç½®å¦‚ä¸Š</p>\n<p>keepalive: æŒ‡å®šæ¯ä¸ª nginxworker å¯ä»¥ä¿æŒçš„æœ€å¤§è¿æ¥æ•°é‡ä¸º 1024ï¼Œé»˜è®¤ä¸è®¾ç½®ï¼Œå³ nginx ä½œä¸º client æ—¶ keepalive æœªç”Ÿæ•ˆ</p>\n<p><code class="language-text">proxy_http_version 1.1</code>: å¼€å¯ keepalive è¦æ±‚ HTTP åè®®ç‰ˆæœ¬ä¸º HTTP 1.1</p>\n<p><code class="language-text">proxy_set_header Connection &quot;&quot;</code>: ä¸ºäº†å…¼å®¹è€çš„åè®®ä»¥åŠé˜²æ­¢ http å¤´ä¸­æœ‰ Connection close å¯¼è‡´çš„ keepalive å¤±æ•ˆï¼Œè¿™é‡Œéœ€è¦åŠæ—¶æ¸…æ‰ HTTP å¤´éƒ¨çš„ Connection</p>\n<h1 id="404-è‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µ"><a href="#404-%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%AC%E5%88%B0%E9%A6%96%E9%A1%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>404 è‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µ</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31235601680685887000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`server {\n    location / {\n       error_page 404 =  @ops-coffee;\n    }\n\n    location @ops-coffee {\n       rewrite  .*  / permanent;\n    }\n}`, `31235601680685887000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">server <span class="token punctuation">{</span>\n    location / <span class="token punctuation">{</span>\n       error_page <span class="token number">404</span> <span class="token operator">=</span>  @ops-coffee<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    location @ops-coffee <span class="token punctuation">{</span>\n       rewrite  .*  / permanent<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ç½‘ç«™å‡ºç° 404 é¡µé¢ä¸æ˜¯ç‰¹åˆ«å‹å¥½ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šè¾¹çš„é…ç½®åœ¨å‡ºç° 404 ä¹‹åç»™è‡ªåŠ¨è·³è½¬åˆ°é¦–é¡µå»</p>',
id:"/github/workspace/blog/nginxå¸¸ç”¨é…ç½®å’ŒæŠ€å·§/index.md absPath of file >>> MarkdownRemark",timeToRead:5,frontmatter:{date:"2019-06-06 15:03:49",path:"/nginx-common-configurations-techniques/",tags:"åç«¯, nginx",title:"nginxå¸¸ç”¨é…ç½®å’ŒæŠ€å·§",draft:null}},{excerpt:"æ¦‚è¿° ç›¸æ¯”ä»£ç çš„ Lint æˆ–è€… Prettierï¼Œæˆ–è®¸æˆ‘ä»¬æ›´åº”è¯¥å…³æ³¨ä»£ç æ˜¯å¦å…·æœ‰å¼¹æ€§ã€‚ Dan  æ€»ç»“äº†å¼¹æ€§ç»„ä»¶å…·æœ‰çš„å››ä¸ªç‰¹å¾ï¼š ä¸è¦é˜»å¡æ•°æ®æµã€‚ æ—¶åˆ»å‡†å¤‡å¥½æ¸²æŸ“ã€‚ ä¸è¦æœ‰å•ä¾‹ç»„ä»¶ã€‚ éš”ç¦»æœ¬åœ°çŠ¶æ€ã€‚ ä»¥ä¸Šè§„åˆ™ä¸ä»…é€‚ç”¨äº Reactï¼Œå®ƒé€‚ç”¨äºæ‰€æœ‰ UI ç»„ä»¶ã€‚ ä¸è¦é˜»å¡æ¸²æŸ“çš„æ•°æ®æµ ä¸é˜»å¡æ•°æ®æµçš„æ„æ€ï¼Œå°±æ˜¯  ä¸è¦å°†æ¥æ”¶åˆ°çš„å‚æ•°æœ¬åœ°åŒ–ï¼Œ  æˆ–è€…  ä½¿ç»„ä»¶å®Œå…¨å—æ§ ã€‚ åœ¨ Class Componentâ€¦",html:'<h1 id="æ¦‚è¿°"><a href="#%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ¦‚è¿°</h1>\n<p>ç›¸æ¯”ä»£ç çš„ Lint æˆ–è€… Prettierï¼Œæˆ–è®¸æˆ‘ä»¬æ›´åº”è¯¥å…³æ³¨ä»£ç æ˜¯å¦å…·æœ‰å¼¹æ€§ã€‚</p>\n<p><a href="https://mobile.twitter.com/dan_abramov" target="_blank" rel="nofollow noreferrer noopener">Dan</a> æ€»ç»“äº†å¼¹æ€§ç»„ä»¶å…·æœ‰çš„å››ä¸ªç‰¹å¾ï¼š</p>\n<ol>\n<li><strong>ä¸è¦é˜»å¡æ•°æ®æµã€‚</strong></li>\n<li><strong>æ—¶åˆ»å‡†å¤‡å¥½æ¸²æŸ“ã€‚</strong></li>\n<li><strong>ä¸è¦æœ‰å•ä¾‹ç»„ä»¶ã€‚</strong></li>\n<li><strong>éš”ç¦»æœ¬åœ°çŠ¶æ€ã€‚</strong></li>\n</ol>\n<p>ä»¥ä¸Šè§„åˆ™ä¸ä»…é€‚ç”¨äº Reactï¼Œå®ƒé€‚ç”¨äºæ‰€æœ‰ UI ç»„ä»¶ã€‚</p>\n<h2 id="ä¸è¦é˜»å¡æ¸²æŸ“çš„æ•°æ®æµ"><a href="#%E4%B8%8D%E8%A6%81%E9%98%BB%E5%A1%9E%E6%B8%B2%E6%9F%93%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B5%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸è¦é˜»å¡æ¸²æŸ“çš„æ•°æ®æµ</h2>\n<p>ä¸é˜»å¡æ•°æ®æµçš„æ„æ€ï¼Œå°±æ˜¯ <strong>ä¸è¦å°†æ¥æ”¶åˆ°çš„å‚æ•°æœ¬åœ°åŒ–ï¼Œ</strong> æˆ–è€… <strong>ä½¿ç»„ä»¶å®Œå…¨å—æ§</strong>ã€‚</p>\n<p>åœ¨ Class Component è¯­æ³•ä¸‹ï¼Œ<strong>ç”±äºæœ‰ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œåœ¨æŸä¸ªç”Ÿå‘½å‘¨æœŸå°† <code class="language-text">props</code> å­˜å‚¨åˆ° <code class="language-text">state</code> çš„æ–¹å¼å±¡è§ä¸é²œã€‚</strong> ç„¶è€Œä¸€æ—¦å°† <code class="language-text">props</code> å›ºåŒ–åˆ° <code class="language-text">state</code>ï¼Œç»„ä»¶å°±ä¸å—æ§äº†ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60484460237977730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Button extends React.Component {\n  state = {\n    color: this.props.color\n  };\n  render() {\n    const { color } = this.state; // ğŸ”´ \\`color\\` is stale!\n    return <button className={\'Button-\' + color}>{this.props.children}</button>;\n  }\n}`, `60484460237977730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    color<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>color\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> color <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span> <span class="token comment">// ğŸ”´ `color` is stale!</span>\n    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">\'Button-\'</span> <span class="token operator">+</span> color<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å½“ç»„ä»¶å†æ¬¡åˆ·æ–°æ—¶ï¼Œ<code class="language-text">props.color</code> å˜åŒ–äº†ï¼Œä½† <code class="language-text">state.color</code> ä¸ä¼šå˜ï¼Œè¿™ç§æƒ…å†µå°±é˜»å¡äº†æ•°æ®æµï¼Œå°ä¼™ä¼´ä»¬å¯èƒ½ä¼šåæ§½ç»„ä»¶æœ‰ BUGã€‚è¿™æ—¶å€™å¦‚æœä½ å°è¯•é€šè¿‡å…¶ä»–ç”Ÿå‘½å‘¨æœŸï¼ˆ<code class="language-text">componentWillReceiveProps</code> æˆ– <code class="language-text">componentDidUpdate</code>ï¼‰å»ä¿®å¤ï¼Œä»£ç ä¼šå˜å¾—éš¾ä»¥ç®¡ç†ã€‚</p>\n<p>ç„¶è€Œ Function Component æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œ<strong>æ‰€ä»¥æ²¡æœ‰å¿…é¡»è¦å°† <code class="language-text">props</code> å­˜å‚¨åˆ° <code class="language-text">state</code></strong>ï¼Œç›´æ¥æ¸²æŸ“å³å¯ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33661152949306315000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Button({ color, children }) {\n  return (\n    // âœ… \\`color\\` is always fresh!\n    <button className={\'Button-\' + color}>{children}</button>\n  );\n}`, `33661152949306315000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> color<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token comment">// âœ… `color` is always fresh!</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">\'Button-\'</span> <span class="token operator">+</span> color<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å¦‚æœéœ€è¦å¯¹ <code class="language-text">props</code> è¿›è¡ŒåŠ å·¥ï¼Œå¯ä»¥åˆ©ç”¨ <code class="language-text">useMemo</code> å¯¹åŠ å·¥è¿‡ç¨‹è¿›è¡Œç¼“å­˜ï¼Œä»…å½“ä¾èµ–å˜åŒ–æ—¶æ‰é‡æ–°æ‰§è¡Œï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25211769246568160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const textColor = useMemo(\n  () => slowlyCalculateTextColor(color),\n  [color] // âœ… Donâ€™t recalculate until \\`color\\` changes\n);`, `25211769246568160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">const</span> textColor <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span>\n  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">slowlyCalculateTextColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">[</span>color<span class="token punctuation">]</span> <span class="token comment">// âœ… Donâ€™t recalculate until `color` changes</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="ä¸è¦é˜»å¡å‰¯ä½œç”¨çš„æ•°æ®æµ"><a href="#%E4%B8%8D%E8%A6%81%E9%98%BB%E5%A1%9E%E5%89%AF%E4%BD%9C%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B5%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸è¦é˜»å¡å‰¯ä½œç”¨çš„æ•°æ®æµ</h2>\n<p>å‘è¯·æ±‚å°±æ˜¯ä¸€ç§å‰¯ä½œç”¨ï¼Œå¦‚æœåœ¨ä¸€ä¸ªç»„ä»¶å†…å‘è¯·æ±‚ï¼Œé‚£ä¹ˆåœ¨å–æ•°å‚æ•°å˜åŒ–æ—¶ï¼Œæœ€å¥½èƒ½é‡æ–°å–æ•°ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80990494527887980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class SearchResults extends React.Component {\n  state = {\n    data: null\n  };\n  componentDidMount() {\n    this.fetchResults();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.query !== this.props.query) {\n      // âœ… Refetch on change\n      this.fetchResults();\n    }\n  }\n  fetchResults() {\n    const url = this.getFetchUrl();\n    // Do the fetching...\n  }\n  getFetchUrl() {\n    return \'http://myapi/results?query\' + this.props.query; // âœ… Updates are handled\n  }\n  render() {\n    // ...\n  }\n}`, `80990494527887980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">SearchResults</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    data<span class="token punctuation">:</span> <span class="token keyword">null</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span>query <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>query<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// âœ… Refetch on change</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">fetchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// Do the fetching...</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token string">\'http://myapi/results?query\'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>query<span class="token punctuation">;</span> <span class="token comment">// âœ… Updates are handled</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// ...</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å¦‚æœç”¨ Class Component çš„æ–¹å¼å®ç°ï¼Œæˆ‘ä»¬éœ€è¦å°†è¯·æ±‚å‡½æ•° <code class="language-text">getFetchUrl</code> æŠ½å‡ºæ¥ï¼Œå¹¶ä¸”åœ¨ <code class="language-text">componentDidMount</code> ä¸ <code class="language-text">componentDidUpdate</code> æ—¶åŒæ—¶è°ƒç”¨å®ƒï¼Œè¿˜è¦æ³¨æ„ <code class="language-text">componentDidUpdate</code> æ—¶å¦‚æœå–æ•°å‚æ•° <code class="language-text">state.query</code> æ²¡æœ‰å˜åŒ–åˆ™ä¸æ‰§è¡Œ <code class="language-text">getFetchUrl</code>ã€‚</p>\n<p>è¿™æ ·çš„ç»´æŠ¤ä½“éªŒå¾ˆç³Ÿç³•ï¼Œå¦‚æœå–æ•°å‚æ•°å¢åŠ äº† <code class="language-text">state.currentPage</code>ï¼Œä½ å¾ˆå¯èƒ½åœ¨ <code class="language-text">componentDidUpdate</code> ä¸­æ¼æ‰å¯¹ <code class="language-text">state.currentPage</code> çš„åˆ¤æ–­ã€‚</p>\n<p>å¦‚æœä½¿ç”¨ Function Componentï¼Œå¯ä»¥é€šè¿‡ <code class="language-text">useCallback</code> å°†æ•´ä¸ªå–æ•°è¿‡ç¨‹ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼š</p>\n<blockquote>\n<p>åŸæ–‡æ²¡æœ‰ä½¿ç”¨ <code class="language-text">useCallback</code>ï¼Œç¬”è€…è¿›è¡Œäº†åŠ å·¥ã€‚</p>\n</blockquote>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71542921281181700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function SearchResults({ query }) {\n  const [data, setData] = useState(null);\n  const [currentPage, setCurrentPage] = useState(0);\n\n  const getFetchUrl = useCallback(() => {\n    return \'http://myapi/results?query=\' + query + \'&page=\' + currentPage;\n  }, [currentPage, query]);\n\n  useEffect(() => {\n    const url = getFetchUrl();\n    // Do the fetching...\n  }, [getFetchUrl]); // âœ… Refetch on change\n\n  // ...\n}`, `71542921281181700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> query <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>currentPage<span class="token punctuation">,</span> setCurrentPage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> getFetchUrl <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token string">\'http://myapi/results?query=\'</span> <span class="token operator">+</span> query <span class="token operator">+</span> <span class="token string">\'&amp;page=\'</span> <span class="token operator">+</span> currentPage<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>currentPage<span class="token punctuation">,</span> query<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// Do the fetching...</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>getFetchUrl<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… Refetch on change</span>\n\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Function Component å¯¹ <code class="language-text">props</code> ä¸ <code class="language-text">state</code> çš„æ•°æ®éƒ½ä¸€è§†åŒä»ï¼Œä¸”å¯ä»¥å°†å–æ•°é€»è¾‘ä¸ â€œæ›´æ–°åˆ¤æ–­â€ é€šè¿‡ <code class="language-text">useCallback</code> å®Œå…¨å°è£…åœ¨ä¸€ä¸ªå‡½æ•°å†…ï¼Œå†å°†è¿™ä¸ªå‡½æ•°ä½œä¸ºæ•´ä½“ä¾èµ–é¡¹æ·»åŠ åˆ° <code class="language-text">useEffect</code>ï¼Œå¦‚æœæœªæ¥å†æ–°å¢ä¸€ä¸ªå‚æ•°ï¼Œåªè¦ä¿®æ”¹ <code class="language-text">getFetchUrl</code> è¿™ä¸ªå‡½æ•°å³å¯ï¼Œè€Œä¸”è¿˜å¯ä»¥é€šè¿‡ <code class="language-text">eslint-plugin-react-hooks</code> æ’ä»¶é™æ€åˆ†ææ˜¯å¦é—æ¼äº†ä¾èµ–é¡¹ã€‚</p>\n<p>Function Component ä¸ä½†å°†ä¾èµ–é¡¹èšåˆèµ·æ¥ï¼Œè¿˜è§£å†³äº† Class Component åˆ†æ•£åœ¨å¤šå¤„ç”Ÿå‘½å‘¨æœŸçš„å‡½æ•°åˆ¤æ–­ï¼Œå¼•å‘çš„æ— æ³•é™æ€åˆ†æä¾èµ–çš„é—®é¢˜ã€‚</p>\n<h2 id="ä¸è¦å› ä¸ºæ€§èƒ½ä¼˜åŒ–è€Œé˜»å¡æ•°æ®æµ"><a href="#%E4%B8%8D%E8%A6%81%E5%9B%A0%E4%B8%BA%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E8%80%8C%E9%98%BB%E5%A1%9E%E6%95%B0%E6%8D%AE%E6%B5%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸è¦å› ä¸ºæ€§èƒ½ä¼˜åŒ–è€Œé˜»å¡æ•°æ®æµ</h2>\n<p>ç›¸æ¯” <code class="language-text">PureComponent</code> ä¸ <code class="language-text">React.memo</code>ï¼Œæ‰‹åŠ¨è¿›è¡Œæ¯”è¾ƒä¼˜åŒ–æ˜¯ä¸å¤ªå®‰å…¨çš„ï¼Œæ¯”å¦‚ä½ å¯èƒ½ä¼šå¿˜è®°å¯¹å‡½æ•°è¿›è¡Œå¯¹æ¯”ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22168471459160990000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Button extends React.Component {\n  shouldComponentUpdate(prevProps) {\n    // ğŸ”´ Doesn\'t compare this.props.onClick\n    return this.props.color !== prevProps.color;\n  }\n  render() {\n    const onClick = this.props.onClick; // ğŸ”´ Doesn\'t reflect updates\n    const textColor = slowlyCalculateTextColor(this.props.color);\n    return (\n      <button onClick={onClick} className={\'Button-\' + this.props.color + \' Button-text-\' + textColor}>\n        {this.props.children}\n      </button>\n    );\n  }\n}`, `22168471459160990000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Button</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// ğŸ”´ Doesn\'t compare this.props.onClick</span>\n    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>color <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span>color<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> onClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>onClick<span class="token punctuation">;</span> <span class="token comment">// ğŸ”´ Doesn\'t reflect updates</span>\n    <span class="token keyword">const</span> textColor <span class="token operator">=</span> <span class="token function">slowlyCalculateTextColor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">\'Button-\'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>color <span class="token operator">+</span> <span class="token string">\' Button-text-\'</span> <span class="token operator">+</span> textColor<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ä¸Šé¢çš„ä»£ç æ‰‹åŠ¨è¿›è¡Œäº† <code class="language-text">shouldComponentUpdate</code> å¯¹æ¯”ä¼˜åŒ–ï¼Œä½†æ˜¯å¿½ç•¥äº†å¯¹å‡½æ•°å‚æ•° <code class="language-text">onClick</code> çš„å¯¹æ¯”ï¼Œå› æ­¤è™½ç„¶å¤§éƒ¨åˆ†æ—¶é—´ <code class="language-text">onClick</code> ç¡®å®æ²¡æœ‰å˜åŒ–ï¼Œå› æ­¤ä»£ç ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆ bugï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67326358716614610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class MyForm extends React.Component {\n  handleClick = () => {\n    // âœ… Always the same function\n    // Do something\n  };\n  render() {\n    return (\n      <>\n        <h1>Hello!</h1>\n        <Button color=\'green\' onClick={this.handleClick}>\n          Press me\n        </Button>\n      </>\n    );\n  }\n}`, `67326358716614610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">MyForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token comment">// âœ… Always the same function</span>\n    <span class="token comment">// Do something</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Hello!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>green<span class="token punctuation">\'</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          Press me\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ä½†æ˜¯ä¸€æ—¦æ¢ä¸€ç§æ–¹å¼å®ç° <code class="language-text">onClick</code>ï¼Œæƒ…å†µå°±ä¸ä¸€æ ·äº†ï¼Œæ¯”å¦‚ä¸‹é¢ä¸¤ç§æƒ…å†µï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38732551703220210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class MyForm extends React.Component {\n  state = {\n    isEnabled: true\n  };\n  handleClick = () => {\n    this.setState({ isEnabled: false });\n    // Do something\n  };\n  render() {\n    return (\n      <>\n        <h1>Hello!</h1>\n        <Button\n          color=\'green\'\n          onClick={\n            // ğŸ”´ Button ignores updates to the onClick prop\n            this.state.isEnabled ? this.handleClick : null\n          }\n        >\n          Press me\n        </Button>\n      </>\n    );\n  }\n}`, `38732551703220210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">MyForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    isEnabled<span class="token punctuation">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> isEnabled<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// Do something</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Hello!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>\n          <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>green<span class="token punctuation">\'</span></span>\n          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>\n            <span class="token comment">// ğŸ”´ Button ignores updates to the onClick prop</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isEnabled <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token punctuation">:</span> <span class="token keyword">null</span>\n          <span class="token punctuation">}</span></span>\n        <span class="token punctuation">></span></span><span class="token plain-text">\n          Press me\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class="language-text">onClick</code> éšæœºåœ¨ <code class="language-text">null</code> ä¸ <code class="language-text">this.handleClick</code> ä¹‹é—´åˆ‡æ¢ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85759276218336610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`drafts.map((draft) => (\n  <Button\n    color=\'blue\'\n    key={draft.id}\n    onClick={\n      // ğŸ”´ Button ignores updates to the onClick prop\n      this.handlePublish.bind(this, draft.content)\n    }\n  >\n    Publish\n  </Button>\n));`, `85759276218336610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx">drafts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">draft</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>\n    <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>blue<span class="token punctuation">\'</span></span>\n    <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>draft<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span>\n    <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>\n      <span class="token comment">// ğŸ”´ Button ignores updates to the onClick prop</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handlePublish</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> draft<span class="token punctuation">.</span>content<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span></span>\n  <span class="token punctuation">></span></span><span class="token plain-text">\n    Publish\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span>\n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å¦‚æœ <code class="language-text">draft.content</code> å˜åŒ–äº†ï¼Œåˆ™ <code class="language-text">onClick</code> å‡½æ•°å˜åŒ–ã€‚</p>\n<p>ä¹Ÿå°±æ˜¯å¦‚æœå­ç»„ä»¶è¿›è¡Œæ‰‹åŠ¨ä¼˜åŒ–æ—¶ï¼Œå¦‚æœæ¼äº†å¯¹å‡½æ•°çš„å¯¹æ¯”ï¼Œå¾ˆæœ‰å¯èƒ½æ‰§è¡Œåˆ°æ—§çš„å‡½æ•°å¯¼è‡´é”™è¯¯çš„é€»è¾‘ã€‚</p>\n<p>æ‰€ä»¥å°½é‡ä¸è¦è‡ªå·±è¿›è¡Œä¼˜åŒ–ï¼ŒåŒæ—¶åœ¨ Function Component ç¯å¢ƒä¸‹ï¼Œåœ¨å†…éƒ¨ç”³æ˜çš„å‡½æ•°æ¯æ¬¡éƒ½æœ‰ä¸åŒçš„å¼•ç”¨ï¼Œå› æ­¤ä¾¿äºå‘ç°é€»è¾‘ BUGï¼ŒåŒæ—¶åˆ©ç”¨ <code class="language-text">useCallback</code> ä¸ <code class="language-text">useContext</code> æœ‰åŠ©äºè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<h2 id="æ—¶åˆ»å‡†å¤‡æ¸²æŸ“"><a href="#%E6%97%B6%E5%88%BB%E5%87%86%E5%A4%87%E6%B8%B2%E6%9F%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ—¶åˆ»å‡†å¤‡æ¸²æŸ“</h2>\n<p>ç¡®ä¿ä½ çš„ç»„ä»¶å¯ä»¥éšæ—¶é‡æ¸²æŸ“ï¼Œä¸”ä¸ä¼šå¯¼è‡´å†…éƒ¨çŠ¶æ€ç®¡ç†å‡ºç° BUGã€‚</p>\n<p>è¦åšåˆ°è¿™ä¸€ç‚¹å…¶å®æŒºéš¾çš„ï¼Œæ¯”å¦‚ä¸€ä¸ªå¤æ‚ç»„ä»¶ï¼Œå¦‚æœæ¥æ”¶äº†ä¸€ä¸ªçŠ¶æ€ä½œä¸ºèµ·ç‚¹ï¼Œä¹‹åçš„ä»£ç åŸºäºè¿™ä¸ªèµ·ç‚¹æ´¾ç”Ÿäº†è®¸å¤šå†…éƒ¨çŠ¶æ€ï¼ŒæŸä¸ªæ—¶åˆ»æ”¹å˜äº†è¿™ä¸ªèµ·å§‹å€¼ï¼Œç»„ä»¶è¿˜èƒ½æ­£å¸¸è¿è¡Œå—ï¼Ÿ</p>\n<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72399064882895405000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ğŸ¤” Should prevent unnecessary re-renders... right?\nclass TextInput extends React.PureComponent {\n  state = {\n    value: \'\'\n  };\n  // ğŸ”´ Resets local state on every parent render\n  componentWillReceiveProps(nextProps) {\n    this.setState({ value: nextProps.value });\n  }\n  handleChange = (e) => {\n    this.setState({ value: e.target.value });\n  };\n  render() {\n    return <input value={this.state.value} onChange={this.handleChange} />;\n  }\n}`, `72399064882895405000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token comment">// ğŸ¤” Should prevent unnecessary re-renders... right?</span>\n<span class="token keyword">class</span> <span class="token class-name">TextInput</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    value<span class="token punctuation">:</span> <span class="token string">\'\'</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token comment">// ğŸ”´ Resets local state on every parent render</span>\n  <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token punctuation">:</span> nextProps<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class="language-text">componentWillReceiveProps</code> æ ‡è¯†äº†æ¯æ¬¡ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ <code class="language-text">props</code>ï¼Œéƒ½ä¼šå°† <code class="language-text">props.value</code> åŒæ­¥åˆ° <code class="language-text">state.value</code>ã€‚è¿™å°±æ˜¯ä¸€ç§æ´¾ç”Ÿ <code class="language-text">state</code>ï¼Œè™½ç„¶çœ‹ä¸Šå»å¯ä»¥åšåˆ°ä¼˜é›…æ‰¿æ¥ <code class="language-text">props</code> çš„å˜åŒ–ï¼Œä½† <strong>çˆ¶å…ƒç´ å› ä¸ºå…¶ä»–åŸå› çš„ rerender å°±ä¼šå¯¼è‡´ <code class="language-text">state.value</code> éæ­£å¸¸é‡ç½®ï¼Œæ¯”å¦‚çˆ¶å…ƒç´ çš„ <code class="language-text">forceUpdate</code>ã€‚</strong></p>\n<p>å½“ç„¶å¯ä»¥é€šè¿‡ <strong>ä¸è¦é˜»å¡æ¸²æŸ“çš„æ•°æ®æµ</strong> ä¸€èŠ‚æ‰€è¯´çš„æ–¹å¼ï¼Œæ¯”å¦‚ <code class="language-text">PureComponent</code>, <code class="language-text">shouldComponentUpdate</code>, <code class="language-text">React.memo</code> æ¥åšæ€§èƒ½ä¼˜åŒ–ï¼ˆå½“ <code class="language-text">props.value</code> æ²¡æœ‰å˜åŒ–æ—¶å°±ä¸ä¼šé‡ç½® <code class="language-text">state.value</code>ï¼‰ï¼Œä½†è¿™æ ·çš„ä»£ç ä¾ç„¶æ˜¯è„†å¼±çš„ã€‚</p>\n<p>å¥å£®çš„ä»£ç ä¸ä¼šå› ä¸ºåˆ é™¤äº†æŸé¡¹ä¼˜åŒ–å°±å‡ºç° BUGï¼Œä¸è¦ä½¿ç”¨æ´¾ç”Ÿ <code class="language-text">state</code> å°±èƒ½é¿å…æ­¤é—®é¢˜ã€‚</p>\n<blockquote>\n<p>ç¬”è€…è¡¥å……ï¼šè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹å¼æ˜¯ï¼Œ1. å¦‚æœç»„ä»¶ä¾èµ–äº† <code class="language-text">props.value</code>ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨ <code class="language-text">state.value</code>ï¼Œå®Œå…¨åšæˆ <strong>å—æ§ç»„ä»¶</strong>ã€‚2. å¦‚æœå¿…é¡»æœ‰ <code class="language-text">state.value</code>ï¼Œé‚£å°±åšæˆå†…éƒ¨çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸è¦ä»å¤–éƒ¨æ¥æ”¶ <code class="language-text">props.value</code>ã€‚æ€»ä¹‹é¿å…å†™ â€œä»‹äºå—æ§ä¸éå—æ§ä¹‹é—´çš„ç»„ä»¶â€ã€‚</p>\n</blockquote>\n<p>è¡¥å……ä¸€ä¸‹ï¼Œå¦‚æœåšæˆäº†éå—æ§ç»„ä»¶ï¼Œå´æƒ³é‡ç½®åˆå§‹å€¼ï¼Œé‚£ä¹ˆåœ¨çˆ¶çº§è°ƒç”¨å¤„åŠ ä¸Š <code class="language-text">key</code> æ¥è§£å†³ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94671159868059600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<EmailInput defaultEmail={this.props.user.email} key={this.props.user.id} />`, `94671159868059600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EmailInput</span></span> <span class="token attr-name">defaultEmail</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>user<span class="token punctuation">.</span>email<span class="token punctuation">}</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>user<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>å¦å¤–ä¹Ÿå¯ä»¥é€šè¿‡ <code class="language-text">ref</code> è§£å†³ï¼Œè®©å­å…ƒç´ æä¾›ä¸€ä¸ª <code class="language-text">reset</code> å‡½æ•°ï¼Œä¸è¿‡ä¸æ¨èä½¿ç”¨ <code class="language-text">ref</code>ã€‚</p>\n<h2 id="ä¸è¦æœ‰å•ä¾‹ç»„ä»¶"><a href="#%E4%B8%8D%E8%A6%81%E6%9C%89%E5%8D%95%E4%BE%8B%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸è¦æœ‰å•ä¾‹ç»„ä»¶</h2>\n<p>ä¸€ä¸ªæœ‰å¼¹æ€§çš„åº”ç”¨ï¼Œåº”è¯¥èƒ½é€šè¿‡ä¸‹é¢è€ƒéªŒï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46475634096785460000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ReactDOM.render(\n  <>\n    <MyApp />\n    <MyApp />\n  </>,\n  document.getElementById(\'root\')\n);`, `46475634096785460000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyApp</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span><span class="token punctuation">,</span>\n  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'root\'</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å°†æ•´ä¸ªåº”ç”¨æ¸²æŸ“ä¸¤éï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å„è‡ªæ­£ç¡®è¿ä½œï¼Ÿ</p>\n<p>é™¤äº†ç»„ä»¶æœ¬åœ°çŠ¶æ€ç”±æœ¬åœ°ç»´æŠ¤å¤–ï¼Œå…·æœ‰å¼¹æ€§çš„ç»„ä»¶ä¸åº”è¯¥å› ä¸ºå…¶ä»–å®ä¾‹è°ƒç”¨äº†æŸäº›å‡½æ•°ï¼Œè€Œ â€œæ°¸è¿œé”™è¿‡äº†æŸäº›çŠ¶æ€æˆ–åŠŸèƒ½â€ã€‚</p>\n<p>ç¬”è€…è¡¥å……ï¼šä¸€ä¸ªå±é™©çš„ç»„ä»¶ä¸€èˆ¬æ˜¯è¿™ä¹ˆæ€è€ƒçš„ï¼šæ²¡æœ‰äººä¼šéšæ„ç ´åæ•°æ®æµï¼Œå› æ­¤åªè¦åœ¨ <code class="language-text">didMount</code> ä¸ <code class="language-text">unMount</code> æ—¶åšå¥½æ•°æ®åˆå§‹åŒ–å’Œé”€æ¯å°±è¡Œäº†ã€‚</p>\n<p>é‚£ä¹ˆå½“å¦ä¸€ä¸ªå®ä¾‹è¿›è¡Œé”€æ¯æ“ä½œæ—¶ï¼Œå¯èƒ½ä¼šç ´åè¿™ä¸ªå®ä¾‹çš„ä¸­é—´çŠ¶æ€ã€‚ä¸€ä¸ªå…·æœ‰å¼¹æ€§çš„ç»„ä»¶åº”è¯¥èƒ½ <strong>éšæ—¶å“åº”</strong> çŠ¶æ€çš„å˜åŒ–ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µçš„ Function Component å¤„ç†èµ·æ¥æ˜¾ç„¶æ›´å¾—å¿ƒåº”æ‰‹ã€‚</p>\n<h2 id="éš”ç¦»æœ¬åœ°çŠ¶æ€"><a href="#%E9%9A%94%E7%A6%BB%E6%9C%AC%E5%9C%B0%E7%8A%B6%E6%80%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>éš”ç¦»æœ¬åœ°çŠ¶æ€</h2>\n<p><strong>å¾ˆå¤šæ—¶å€™éš¾ä»¥åˆ¤æ–­æ•°æ®å±äºç»„ä»¶çš„æœ¬åœ°çŠ¶æ€è¿˜æ˜¯å…¨å±€çŠ¶æ€ã€‚</strong></p>\n<p>æ–‡ç« æä¾›äº†ä¸€ä¸ªåˆ¤æ–­æ–¹æ³•ï¼š<strong>â€œæƒ³è±¡è¿™ä¸ªç»„ä»¶åŒæ—¶æ¸²æŸ“äº†ä¸¤ä¸ªå®ä¾‹ï¼Œè¿™ä¸ªæ•°æ®ä¼šåŒæ—¶å½±å“è¿™ä¸¤ä¸ªå®ä¾‹å—ï¼Ÿå¦‚æœç­”æ¡ˆæ˜¯ ä¸ä¼šï¼Œé‚£è¿™ä¸ªæ•°æ®å°±é€‚åˆä½œä¸ºæœ¬åœ°çŠ¶æ€â€ã€‚</strong></p>\n<p>å°¤å…¶åœ¨å†™ä¸šåŠ¡ç»„ä»¶æ—¶ï¼Œå®¹æ˜“å°†ä¸šåŠ¡æ•°æ®ä¸ç»„ä»¶æœ¬èº«çŠ¶æ€æ•°æ®æ··æ·†ã€‚</p>\n<p>æ ¹æ®ç¬”è€…çš„ç»éªŒï¼Œ<strong>ä»ä¸Šå±‚ä¸šåŠ¡åˆ°åº•å±‚é€šç”¨ç»„ä»¶ä¹‹é—´ï¼Œæœ¬åœ°çŠ¶æ€æ•°é‡æ˜¯é€’å¢çš„ï¼š</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8947054146086674000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ä¸šåŠ¡\n  -> å…¨å±€æ•°æ®æµ\n    -> é¡µé¢ï¼ˆå®Œå…¨ä¾èµ–å…¨å±€æ•°æ®æµï¼Œå‡ ä¹æ²¡æœ‰è‡ªå·±çš„çŠ¶æ€ï¼‰\n      -> ä¸šåŠ¡ç»„ä»¶ï¼ˆä»é¡µé¢æˆ–å…¨å±€æ•°æ®æµç»§æ‰¿æ•°æ®ï¼Œå¾ˆå°‘æœ‰è‡ªå·±çŠ¶æ€ï¼‰\n        -> é€šç”¨ç»„ä»¶ï¼ˆå®Œå…¨å—æ§ï¼Œæ¯”å¦‚ inputï¼›æˆ–å¤§é‡å†…èšçŠ¶æ€çš„å¤æ‚é€šç”¨é€»è¾‘ï¼Œæ¯”å¦‚ monaco-editorï¼‰`, `8947054146086674000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">ä¸šåŠ¡\n  -&gt; å…¨å±€æ•°æ®æµ\n    -&gt; é¡µé¢ï¼ˆå®Œå…¨ä¾èµ–å…¨å±€æ•°æ®æµï¼Œå‡ ä¹æ²¡æœ‰è‡ªå·±çš„çŠ¶æ€ï¼‰\n      -&gt; ä¸šåŠ¡ç»„ä»¶ï¼ˆä»é¡µé¢æˆ–å…¨å±€æ•°æ®æµç»§æ‰¿æ•°æ®ï¼Œå¾ˆå°‘æœ‰è‡ªå·±çŠ¶æ€ï¼‰\n        -&gt; é€šç”¨ç»„ä»¶ï¼ˆå®Œå…¨å—æ§ï¼Œæ¯”å¦‚ inputï¼›æˆ–å¤§é‡å†…èšçŠ¶æ€çš„å¤æ‚é€šç”¨é€»è¾‘ï¼Œæ¯”å¦‚ monaco-editorï¼‰</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="3-ç²¾è¯»"><a href="#3-%E7%B2%BE%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. ç²¾è¯»</h1>\n<p>å†æ¬¡å¼ºè°ƒï¼Œä¸€ä¸ªæœ‰å¼¹æ€§çš„ç»„ä»¶éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ 4 ä¸ªåŸåˆ™ï¼š</p>\n<ol>\n<li><strong>ä¸è¦é˜»å¡æ•°æ®æµã€‚</strong></li>\n<li><strong>æ—¶åˆ»å‡†å¤‡å¥½æ¸²æŸ“ã€‚</strong></li>\n<li><strong>ä¸è¦æœ‰å•ä¾‹ç»„ä»¶ã€‚</strong></li>\n<li><strong>éš”ç¦»æœ¬åœ°çŠ¶æ€ã€‚</strong></li>\n</ol>\n<p>æƒ³è¦éµå¾ªè¿™äº›è§„åˆ™çœ‹ä¸Šå»ä¹Ÿä¸éš¾ï¼Œä½†å®è·µè¿‡ç¨‹ä¸­ä¼šé‡åˆ°ä¸å°‘é—®é¢˜ï¼Œç¬”è€…ä¸¾å‡ ä¸ªä¾‹å­ã€‚</p>\n<h2 id="é¢‘ç¹ä¼ é€’å›è°ƒå‡½æ•°"><a href="#%E9%A2%91%E7%B9%81%E4%BC%A0%E9%80%92%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>é¢‘ç¹ä¼ é€’å›è°ƒå‡½æ•°</h2>\n<p>Function Component ä¼šå¯¼è‡´ç»„ä»¶ç²’åº¦æ‹†åˆ†çš„æ¯”è¾ƒç»†ï¼Œåœ¨æé«˜å¯ç»´æŠ¤æ€§åŒæ—¶ï¼Œä¹Ÿä¼šå¯¼è‡´å…¨å±€ <code class="language-text">state</code> æˆä¸ºè¿‡å»ï¼Œä¸‹é¢çš„ä»£ç å¯èƒ½è®©ä½ è§‰å¾—åˆ«æ‰­ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73530562067320720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const App = memo(function App() {\n  const [count, setCount] = useState(0);\n  const [name, setName] = useState(&quot;nick&quot;);\n\n  return (\n    <>\n      <Count count={count} setCount={setCount}/>\n      <Name name={name} setName={setName}/>\n    </>\n  );\n});\n\nconst Count = memo(function Count(props) {\n  return (\n      <input value={props.count} onChange={pipeEvent(props.setCount)}>\n  );\n});\n\nconst Name = memo(function Name(props) {\n  return (\n  <input value={props.name} onChange={pipeEvent(props.setName)}>\n  );\n});`, `73530562067320720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"nick"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Count</span></span> <span class="token attr-name">count</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span></span> <span class="token attr-name">setCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setCount<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Name</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span> <span class="token attr-name">setName</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setName<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> Count <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">pipeEvent</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>setCount<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n  );\n});\n\nconst Name = memo(function Name(props) </span><span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">pipeEvent</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>setName<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n  );\n});</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>è™½ç„¶å°†å­ç»„ä»¶ <code class="language-text">Count</code> ä¸ <code class="language-text">Name</code> æ‹†åˆ†å‡ºæ¥ï¼Œé€»è¾‘æ›´åŠ è§£è€¦ï¼Œä½†å­ç»„ä»¶éœ€è¦æ›´æ–°çˆ¶ç»„ä»¶çš„çŠ¶æ€å°±å˜å¾—éº»çƒ¦ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å°†å‡½æ•°ä½œä¸ºå‚æ•°é€ä¼ ç»™å­ç»„ä»¶ã€‚</p>\n<p>ä¸€ç§åŠæ³•æ˜¯å°†å‡½æ•°é€šè¿‡ <code class="language-text">Context</code> ä¼ ç»™å­ç»„ä»¶ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7863993080104636000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const SetCount = createContext(null)\nconst SetName = createContext(null)\n\nconst App = memo(function App() {\n  const [count, setCount] = useState(0);\n  const [name, setName] = useState(&quot;nick&quot;);\n\n  return (\n    <SetCount.Provider value={setCount}>\n      <SetName.Provider value={setName}>\n        <Count count={count}/>\n        <Name name={name}/>\n      </SetName.Provider>\n    </SetCount.Provider>\n  );\n});\n\nconst Count = memo(function Count(props) {\n  const setCount = useContext(SetCount)\n  return (\n      <input value={props.count} onChange={pipeEvent(setCount)}>\n  );\n});\n\nconst Name = memo(function Name(props) {\n  const setName = useContext(SetName)\n  return (\n  <input value={props.name} onChange={pipeEvent(setName)}>\n  );\n});`, `7863993080104636000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">const</span> SetCount <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> SetName <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>\n\n<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">"nick"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SetCount.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setCount<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SetName.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>setName<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Count</span></span> <span class="token attr-name">count</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Name</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SetName.Provider</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SetCount.Provider</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> Count <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> setCount <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>SetCount<span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">pipeEvent</span><span class="token punctuation">(</span>setCount<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n  );\n});\n\nconst Name = memo(function Name(props) </span><span class="token punctuation">{</span>\n  <span class="token keyword">const</span> setName <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>SetName<span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">pipeEvent</span><span class="token punctuation">(</span>setName<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n  );\n});</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ä½†è¿™æ ·ä¼šå¯¼è‡´ <code class="language-text">Provider</code> è¿‡äºè‡ƒè‚¿ï¼Œå› æ­¤å»ºè®®éƒ¨åˆ†ç»„ä»¶ä½¿ç”¨ <code class="language-text">useReducer</code> æ›¿ä»£ <code class="language-text">useState</code>ï¼Œå°†å‡½æ•°åˆå¹¶åˆ° <code class="language-text">dispatch</code>ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74863545842242680000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const AppDispatch = createContext(null)\n\nclass State = {\n  count = 0\n  name = \'nick\'\n}\n\nfunction appReducer(state, action) {\n  switch(action.type) {\n    case \'setCount\':\n      return {\n        ...state,\n        count: action.value\n      }\n    case \'setName\':\n      return {\n        ...state,\n        name: action.value\n      }\n    default:\n      return state\n  }\n}\n\nconst App = memo(function App() {\n  const [state, dispatch] = useReducer(appReducer, new State())\n\n  return (\n    <AppDispatch.Provider value={dispatch}>\n      <Count count={count}/>\n      <Name name={name}/>\n    </AppDispatch.Provider>\n  );\n});\n\nconst Count = memo(function Count(props) {\n  const dispatch = useContext(AppDispatch)\n  return (\n      <input value={props.count} onChange={pipeEvent(value => dispatch({type: \'setCount\', value}))}>\n  );\n});\n\nconst Name = memo(function Name(props) {\n  const dispatch = useContext(AppDispatch)\n  return (\n  <input value={props.name} onChange={pipeEvent(pipeEvent(value => dispatch({type: \'setName\', value})))}>\n  );\n});`, `74863545842242680000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">const</span> AppDispatch <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>\n\n<span class="token keyword">class</span> <span class="token class-name">State</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  count <span class="token operator">=</span> <span class="token number">0</span>\n  name <span class="token operator">=</span> <span class="token string">\'nick\'</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">appReducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">case</span> <span class="token string">\'setCount\'</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> <span class="token punctuation">{</span>\n        <span class="token operator">...</span>state<span class="token punctuation">,</span>\n        count<span class="token punctuation">:</span> action<span class="token punctuation">.</span>value\n      <span class="token punctuation">}</span>\n    <span class="token keyword">case</span> <span class="token string">\'setName\'</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> <span class="token punctuation">{</span>\n        <span class="token operator">...</span>state<span class="token punctuation">,</span>\n        name<span class="token punctuation">:</span> action<span class="token punctuation">.</span>value\n      <span class="token punctuation">}</span>\n    <span class="token keyword">default</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> state\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>appReducer<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">State</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AppDispatch.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>dispatch<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Count</span></span> <span class="token attr-name">count</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Name</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">AppDispatch.Provider</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> Count <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>AppDispatch<span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">pipeEvent</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">\'setCount\'</span><span class="token punctuation">,</span> value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n  );\n});\n\nconst Name = memo(function Name(props) </span><span class="token punctuation">{</span>\n  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>AppDispatch<span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">pipeEvent</span><span class="token punctuation">(</span><span class="token function">pipeEvent</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">\'setName\'</span><span class="token punctuation">,</span> value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n  );\n});</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å°†çŠ¶æ€èšåˆåˆ° <code class="language-text">reducer</code> ä¸­ï¼Œè¿™æ ·ä¸€ä¸ª <code class="language-text">ContextProvider</code> å°±èƒ½è§£å†³æ‰€æœ‰æ•°æ®å¤„ç†é—®é¢˜äº†ã€‚</p>\n<blockquote>\n<p>memo åŒ…è£¹çš„ç»„ä»¶ç±»ä¼¼ PureComponent æ•ˆæœã€‚</p>\n</blockquote>\n<h2 id="usecallback-å‚æ•°å˜åŒ–é¢‘ç¹"><a href="#usecallback-%E5%8F%82%E6%95%B0%E5%8F%98%E5%8C%96%E9%A2%91%E7%B9%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>useCallback å‚æ•°å˜åŒ–é¢‘ç¹</h2>\n<p>åœ¨ <a href="https://github.com/dt-fe/weekly/blob/master/96.%E7%B2%BE%E8%AF%BB%E3%80%8AuseEffect%20%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97%E3%80%8B.md#%E5%A6%82%E6%9E%9C%E9%9D%9E%E8%A6%81%E6%8A%8A-function-%E5%86%99%E5%9C%A8-effect-%E5%A4%96%E9%9D%A2%E5%91%A2" target="_blank" rel="nofollow noreferrer noopener">ç²¾è¯»ã€ŠuseEffect å®Œå…¨æŒ‡å—ã€‹</a> æˆ‘ä»¬ä»‹ç»äº†åˆ©ç”¨ <code class="language-text">useCallback</code> åˆ›å»ºä¸€ä¸ª Immutable çš„å‡½æ•°ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94535305842177800000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Form() {\n  const [text, updateText] = useState(\'\');\n\n  const handleSubmit = useCallback(() => {\n    const currentText = text;\n    alert(currentText);\n  }, [text]);\n\n  return (\n    <>\n      <input value={text} onChange={(e) => updateText(e.target.value)} />\n      <ExpensiveTree onSubmit={handleSubmit} />\n    </>\n  );\n}`, `94535305842177800000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Form</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> updateText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> handleSubmit <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> currentText <span class="token operator">=</span> text<span class="token punctuation">;</span>\n    <span class="token function">alert</span><span class="token punctuation">(</span>currentText<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>text<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">updateText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ExpensiveTree</span></span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ä½†è¿™ä¸ªå‡½æ•°çš„ä¾èµ– <code class="language-text">[text]</code> å˜åŒ–è¿‡äºé¢‘ç¹ï¼Œä»¥è‡³äºåœ¨æ¯ä¸ª <code class="language-text">render</code> éƒ½ä¼šé‡æ–°ç”Ÿæˆ <code class="language-text">handleSubmit</code> å‡½æ•°ï¼Œå¯¹æ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚ä¸€ç§è§£å†³åŠæ³•æ˜¯åˆ©ç”¨ <code class="language-text">Ref</code> è§„é¿è¿™ä¸ªé—®é¢˜ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68355149024347510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Form() {\n  const [text, updateText] = useState(\'\');\n  const textRef = useRef();\n\n  useEffect(() => {\n    textRef.current = text; // Write it to the ref\n  });\n\n  const handleSubmit = useCallback(() => {\n    const currentText = textRef.current; // Read it from the ref\n    alert(currentText);\n  }, [textRef]); // Don\'t recreate handleSubmit like [text] would do\n\n  return (\n    <>\n      <input value={text} onChange={(e) => updateText(e.target.value)} />\n      <ExpensiveTree onSubmit={handleSubmit} />\n    </>\n  );\n}`, `68355149024347510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Form</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> updateText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> textRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    textRef<span class="token punctuation">.</span>current <span class="token operator">=</span> text<span class="token punctuation">;</span> <span class="token comment">// Write it to the ref</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> handleSubmit <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> currentText <span class="token operator">=</span> textRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span> <span class="token comment">// Read it from the ref</span>\n    <span class="token function">alert</span><span class="token punctuation">(</span>currentText<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>textRef<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Don\'t recreate handleSubmit like [text] would do</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">updateText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ExpensiveTree</span></span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å°†è¿™ä¸ªè¿‡ç¨‹å°è£…ä¸ºä¸€ä¸ªè‡ªå®šä¹‰ Hooksï¼Œè®©ä»£ç ç¨å¾®å¥½çœ‹äº›ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70508639854600405000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Form() {\n  const [text, updateText] = useState(\'\');\n  // Will be memoized even if \\`text\\` changes:\n  const handleSubmit = useEventCallback(() => {\n    alert(text);\n  }, [text]);\n\n  return (\n    <>\n      <input value={text} onChange={(e) => updateText(e.target.value)} />\n      <ExpensiveTree onSubmit={handleSubmit} />\n    </>\n  );\n}\n\nfunction useEventCallback(fn, dependencies) {\n  const ref = useRef(() => {\n    throw new Error(\'Cannot call an event handler while rendering.\');\n  });\n\n  useEffect(() => {\n    ref.current = fn;\n  }, [fn, ...dependencies]);\n\n  return useCallback(() => {\n    const fn = ref.current;\n    return fn();\n  }, [ref]);\n}`, `70508639854600405000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Form</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>text<span class="token punctuation">,</span> updateText<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// Will be memoized even if `text` changes:</span>\n  <span class="token keyword">const</span> handleSubmit <span class="token operator">=</span> <span class="token function">useEventCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token function">alert</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>text<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">updateText</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ExpensiveTree</span></span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">useEventCallback</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> dependencies</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">\'Cannot call an event handler while rendering.\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    ref<span class="token punctuation">.</span>current <span class="token operator">=</span> fn<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>fn<span class="token punctuation">,</span> <span class="token operator">...</span>dependencies<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> fn <span class="token operator">=</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>ref<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>ä¸è¿‡è¿™ç§æ–¹æ¡ˆå¹¶ä¸ä¼˜é›…ï¼Œ<a href="https://reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback" target="_blank" rel="nofollow noreferrer noopener">React è€ƒè™‘æä¾›ä¸€ä¸ªæ›´ä¼˜é›…çš„æ–¹æ¡ˆ</a>ã€‚</p>\n</blockquote>\n<h2 id="æœ‰å¯èƒ½è¢«æ»¥ç”¨çš„-usereducer"><a href="#%E6%9C%89%E5%8F%AF%E8%83%BD%E8%A2%AB%E6%BB%A5%E7%94%A8%E7%9A%84-usereducer" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æœ‰å¯èƒ½è¢«æ»¥ç”¨çš„ useReducer</h2>\n<p>åœ¨ <a href="https://github.com/dt-fe/weekly/blob/master/96.%E7%B2%BE%E8%AF%BB%E3%80%8AuseEffect%20%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97%E3%80%8B.md#%E5%B0%86%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%8A%A8%E4%BD%9C%E8%A7%A3%E8%80%A6" target="_blank" rel="nofollow noreferrer noopener">ç²¾è¯»ã€ŠuseEffect å®Œå…¨æŒ‡å—ã€‹</a> â€œå°†æ›´æ–°ä¸åŠ¨ä½œè§£è€¦â€ ä¸€èŠ‚é‡Œæåˆ°äº†ï¼Œåˆ©ç”¨ <code class="language-text">useReducer</code> è§£å†³ â€œå‡½æ•°åŒæ—¶ä¾èµ–å¤šä¸ªå¤–éƒ¨å˜é‡çš„é—®é¢˜â€ã€‚</p>\n<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šè¿™ä¹ˆä½¿ç”¨ <code class="language-text">useReducer</code>:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92349129060544400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const reducer = (state, action) => {\n  switch (action.type) {\n    case \'increment\':\n      return { value: state.value + 1 };\n    case \'decrement\':\n      return { value: state.value - 1 };\n    case \'incrementAmount\':\n      return { value: state.value + action.amount };\n    default:\n      throw new Error();\n  }\n};\n\nconst [state, dispatch] = useReducer(reducer, { value: 0 });`, `92349129060544400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                tsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="tsx"><pre style="counter-reset: linenumber NaN" class="language-tsx line-numbers"><code class="language-tsx"><span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">case</span> <span class="token string">\'increment\'</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> state<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">case</span> <span class="token string">\'decrement\'</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> state<span class="token punctuation">.</span>value <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">case</span> <span class="token string">\'incrementAmount\'</span><span class="token punctuation">:</span>\n      <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> state<span class="token punctuation">.</span>value <span class="token operator">+</span> action<span class="token punctuation">.</span>amount <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">default</span><span class="token punctuation">:</span>\n      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ä½†å…¶å® <code class="language-text">useReducer</code> å¯¹ <code class="language-text">state</code> ä¸ <code class="language-text">action</code> çš„å®šä¹‰å¯ä»¥å¾ˆéšæ„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code class="language-text">useReducer</code> æ‰“é€ ä¸€ä¸ª <code class="language-text">useState</code>ã€‚</p>\n<p>æ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰å¤æ•° key çš„ <code class="language-text">useState</code>:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9115456270656197000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const [state, setState] = useState({ count: 0, name: \'nick\' });\n\n// ä¿®æ”¹ count\nsetState((state) => ({ ...state, count: 1 }));\n\n// ä¿®æ”¹ name\nsetState((state) => ({ ...state, name: \'jack\' }));`, `9115456270656197000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'nick\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ä¿®æ”¹ count</span>\n<span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> count<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ä¿®æ”¹ name</span>\n<span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'jack\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>åˆ©ç”¨ <code class="language-text">useReducer</code> å®ç°ç›¸ä¼¼çš„åŠŸèƒ½ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6804089576584893000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function reducer(state, action) {\n  return action(state);\n}\n\nconst [state, dispatch] = useReducer(reducer, { count: 0, name: \'nick\' });\n\n// ä¿®æ”¹ count\ndispatch((state) => ({ ...state, count: 1 }));\n\n// ä¿®æ”¹ name\ndispatch((state) => ({ ...state, name: \'jack\' }));`, `6804089576584893000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token function">action</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'nick\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ä¿®æ”¹ count</span>\n<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> count<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ä¿®æ”¹ name</span>\n<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'jack\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å› æ­¤é’ˆå¯¹å¦‚ä¸Šæƒ…å†µï¼Œæˆ‘ä»¬å¯èƒ½æ»¥ç”¨äº† <code class="language-text">useReducer</code>ï¼Œå»ºè®®ç›´æ¥ç”¨ <code class="language-text">useState</code> ä»£æ›¿ã€‚</p>\n<h1 id="4-æ€»ç»“"><a href="#4-%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. æ€»ç»“</h1>\n<p>æœ¬æ–‡æ€»ç»“äº†å…·æœ‰å¼¹æ€§çš„ç»„ä»¶çš„å››ä¸ªç‰¹æ€§ï¼šä¸è¦é˜»å¡æ•°æ®æµã€æ—¶åˆ»å‡†å¤‡å¥½æ¸²æŸ“ã€ä¸è¦æœ‰å•ä¾‹ç»„ä»¶ã€éš”ç¦»æœ¬åœ°çŠ¶æ€ã€‚</p>\n<p>è¿™ä¸ªçº¦å®šå¯¹ä»£ç è´¨é‡å¾ˆé‡è¦ï¼Œè€Œä¸”éš¾ä»¥é€šè¿‡ lint è§„åˆ™æˆ–ç®€å•è‚‰çœ¼è§‚å¯ŸåŠ ä»¥è¯†åˆ«ï¼Œå› æ­¤æ¨å¹¿èµ·æ¥è¿˜æ˜¯æœ‰ä¸å°éš¾åº¦ã€‚</p>\n<p>æ€»çš„æ¥è¯´ï¼ŒFunction Component å¸¦æ¥äº†æ›´ä¼˜é›…çš„ä»£ç ä½“éªŒï¼Œä½†æ˜¯å¯¹å›¢é˜Ÿåä½œçš„è¦æ±‚ä¹Ÿæ›´é«˜äº†ã€‚</p>',
id:"/github/workspace/blog/ç¼–å†™æœ‰å¼¹æ€§çš„ç»„ä»¶/index.md absPath of file >>> MarkdownRemark",timeToRead:11,frontmatter:{date:"2019-06-06 14:35:51",path:"/write-resilient-components/",tags:"å‰ç«¯, ç»„ä»¶",title:"ç¼–å†™æœ‰å¼¹æ€§çš„ç»„ä»¶",draft:null}},{excerpt:"ç¼–ç åªæ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼Œä¸ºäº†ä½¿æˆ‘ä»¬å·¥ä½œæ›´åŠ é«˜æ•ˆï¼Œæˆ‘ä»¬å¿…é¡»å­¦ä¼šè°ƒè¯•ï¼Œå¹¶æ“…é•¿è°ƒè¯•ã€‚ å†…å®¹æ¦‚è¦ æ–‡ä¸­åˆ—ä¸¾äº†å¸¸ç”¨è°ƒè¯•æŠ€å·§ï¼Œå¦‚ä¸‹ï¼š Debugger åœ¨ä»£ç ä¸­æ’å…¥   å¯ä»¥åœ¨å…¶ä½ç½®è§¦å‘æ–­ç‚¹è°ƒè¯•ã€‚ Console.dir ä½¿ç”¨   å‘½ä»¤ï¼Œå¯ä»¥æ‰“å°å‡ºå¯¹è±¡çš„ç»“æ„ï¼Œè€Œ   ä»…èƒ½æ‰“å°è¿”å›å€¼ï¼Œåœ¨æ‰“å°   å±æ€§æ—¶å°¤ä¸ºæœ‰ç”¨ã€‚ ps: å¤§éƒ¨åˆ†æ—¶å€™ï¼Œå¯¹è±¡è¿”å›å€¼å°±æ˜¯å…¶ç»“æ„ ä½¿ç”¨è¾…åŠ©å·¥å…·ï¼Œè¯­æ³•é«˜äº®ã€linting å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½é—®é¢˜ï¼Œå…¶å® flow ä¸ typescriptâ€¦",html:'<p>ç¼–ç åªæ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼Œä¸ºäº†ä½¿æˆ‘ä»¬å·¥ä½œæ›´åŠ é«˜æ•ˆï¼Œæˆ‘ä»¬å¿…é¡»å­¦ä¼šè°ƒè¯•ï¼Œå¹¶æ“…é•¿è°ƒè¯•ã€‚</p>\n<h1 id="å†…å®¹æ¦‚è¦"><a href="#%E5%86%85%E5%AE%B9%E6%A6%82%E8%A6%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å†…å®¹æ¦‚è¦</h1>\n<p>æ–‡ä¸­åˆ—ä¸¾äº†å¸¸ç”¨è°ƒè¯•æŠ€å·§ï¼Œå¦‚ä¸‹ï¼š</p>\n<h3 id="debugger"><a href="#debugger" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Debugger</h3>\n<p>åœ¨ä»£ç ä¸­æ’å…¥ <code class="language-text">debugger</code> å¯ä»¥åœ¨å…¶ä½ç½®è§¦å‘æ–­ç‚¹è°ƒè¯•ã€‚</p>\n<h3 id="consoledir"><a href="#consoledir" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Console.dir</h3>\n<p>ä½¿ç”¨ <code class="language-text">console.dir</code> å‘½ä»¤ï¼Œå¯ä»¥æ‰“å°å‡ºå¯¹è±¡çš„ç»“æ„ï¼Œè€Œ <code class="language-text">console.log</code> ä»…èƒ½æ‰“å°è¿”å›å€¼ï¼Œåœ¨æ‰“å° <code class="language-text">document</code> å±æ€§æ—¶å°¤ä¸ºæœ‰ç”¨ã€‚</p>\n<blockquote>\n<p>ps: å¤§éƒ¨åˆ†æ—¶å€™ï¼Œå¯¹è±¡è¿”å›å€¼å°±æ˜¯å…¶ç»“æ„</p>\n</blockquote>\n<h3 id="ä½¿ç”¨è¾…åŠ©å·¥å…·ï¼Œè¯­æ³•é«˜äº®ã€linting"><a href="#%E4%BD%BF%E7%94%A8%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7%EF%BC%8C%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E3%80%81linting" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä½¿ç”¨è¾…åŠ©å·¥å…·ï¼Œè¯­æ³•é«˜äº®ã€linting</h3>\n<p>å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½é—®é¢˜ï¼Œå…¶å® flow ä¸ typescript ä¹Ÿèµ·åˆ°äº†å¾ˆå¥½çš„è°ƒè¯•ä½œç”¨ã€‚</p>\n<h3 id="æµè§ˆå™¨æ‹“å±•"><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8B%93%E5%B1%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æµè§ˆå™¨æ‹“å±•</h3>\n<p>ä½¿ç”¨ç±»ä¼¼ <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi" target="_blank" rel="nofollow noreferrer noopener">ReactDTools</a> <a href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd" target="_blank" rel="nofollow noreferrer noopener">VueDTools</a> è°ƒè¯•å¯¹åº”æ¡†æ¶ã€‚</p>\n<h3 id="å€ŸåŠ©-devtools"><a href="#%E5%80%9F%E5%8A%A9-devtools" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å€ŸåŠ© DevTools</h3>\n<p>Chrome Dev Tools éå¸¸å¼ºå¤§ï¼Œ<a href="https://umaar.com/dev-tips/" target="_blank" rel="nofollow noreferrer noopener">dev-tips</a> åˆ—å‡ºäº† 100 å¤šæ¡å®ƒå¯ä»¥åšçš„äº‹ã€‚</p>\n<h3 id="ç§»åŠ¨ç«¯è°ƒè¯•å·¥å…·"><a href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç§»åŠ¨ç«¯è°ƒè¯•å·¥å…·</h3>\n<p>æœ€é è°±çš„åº”è¯¥æ˜¯ <a href="http://eruda.liriliri.io/" target="_blank" rel="nofollow noreferrer noopener">eruda</a>ï¼Œå¯ä»¥å†…åµŒåœ¨ä»»ä½• h5 é¡µé¢ï¼Œå……å½“ DevTools æ§åˆ¶å°çš„ä½œç”¨ã€‚</p>\n<h3 id="å®æ—¶è°ƒè¯•"><a href="#%E5%AE%9E%E6%97%B6%E8%B0%83%E8%AF%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å®æ—¶è°ƒè¯•</h3>\n<p>ä¸éœ€è¦é¢„å…ˆåŸ‹ç‚¹ï¼Œæ¯”å¦‚ <code class="language-text">document.activeElement</code> å¯ä»¥æ‰“å°æœ€è¿‘ focus è¿‡çš„å…ƒç´ ï¼Œå› ä¸ºæ‰“å¼€æ§åˆ¶å°å¯¼è‡´å¤±å»ç„¦ç‚¹ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡æ­¤ api è·å–å®ƒã€‚</p>\n<h3 id="ç»“æ„åŒ–æ‰“å°å¯¹è±¡ç¬æ—¶çŠ¶æ€"><a href="#%E7%BB%93%E6%9E%84%E5%8C%96%E6%89%93%E5%8D%B0%E5%AF%B9%E8%B1%A1%E7%9E%AC%E6%97%B6%E7%8A%B6%E6%80%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç»“æ„åŒ–æ‰“å°å¯¹è±¡ç¬æ—¶çŠ¶æ€</h3>\n<p><code class="language-text">JSON.stringify(obj, null, 2)</code> å¯ä»¥ç»“æ„åŒ–æ‰“å°å‡ºå¯¹è±¡ï¼Œå› ä¸ºæ˜¯å­—ç¬¦ä¸²ï¼Œä¸ç”¨æ‹…å¿ƒå¼•ç”¨é—®é¢˜ã€‚</p>\n<h3 id="æ•°ç»„è°ƒè¯•"><a href="#%E6%95%B0%E7%BB%84%E8%B0%83%E8%AF%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ•°ç»„è°ƒè¯•</h3>\n<p>é€šè¿‡ <code class="language-text">Array.prototype.find</code> å¿«é€Ÿå¯»æ‰¾æŸä¸ªå…ƒç´ ã€‚</p>\n<h1 id="ç²¾è¯»"><a href="#%E7%B2%BE%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç²¾è¯»</h1>\n<p>æœ¬ç²¾è¯»ç”± <a href="https://github.com/rccoder" target="_blank" rel="nofollow noreferrer noopener">rccoder</a> <a href="https://github.com/ascoders" target="_blank" rel="nofollow noreferrer noopener">ascoders</a> <a href="https://github.com/NE-SmallTown" target="_blank" rel="nofollow noreferrer noopener">NE-SmallTown</a> <a href="https://github.com/BlackGanglion" target="_blank" rel="nofollow noreferrer noopener">BlackGanglion</a> <a href="https://github.com/jasonslyvia" target="_blank" rel="nofollow noreferrer noopener">jasonslyvia</a> <a href="https://github.com/alcat2008" target="_blank" rel="nofollow noreferrer noopener">alcat2008</a> <a href="https://github.com/DanielWLam" target="_blank" rel="nofollow noreferrer noopener">DanielWLam</a> <a href="https://github.com/HsuanXyz" target="_blank" rel="nofollow noreferrer noopener">HsuanXyz</a> <a href="https://github.com/huxiaoyun" target="_blank" rel="nofollow noreferrer noopener">huxiaoyun</a> <a href="https://github.com/vagusX" target="_blank" rel="nofollow noreferrer noopener">vagusX</a> è®¨è®ºè€Œå‡ºã€‚</p>\n<h3 id="ç§»åŠ¨ç«¯çœŸæœºæµ‹è¯•"><a href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9C%9F%E6%9C%BA%E6%B5%8B%E8%AF%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç§»åŠ¨ç«¯çœŸæœºæµ‹è¯•</h3>\n<p>ç”±äº webview ä¸ä¸€å®šæ”¯æŒè¿æ¥ chrome æ§åˆ¶å°è°ƒè¯•ï¼Œåªæœ‰çœŸæœºæµ‹è¯•æ‰èƒ½å¤ç°çœŸå®åœºæ™¯ã€‚</p>\n<p><a href="https://www.browserstack.com/" target="_blank" rel="nofollow noreferrer noopener">browserstack</a> <a href="https://www.dynatrace.com/platform/offerings/customer-experience-monitoring/" target="_blank" rel="nofollow noreferrer noopener">dynatrace</a> éƒ½æ˜¯çœŸæœºæµ‹è¯•å¹³å°ï¼Œå…¬å¸å†…éƒ¨åº”è¯¥ä¹Ÿä¼šæ­å»ºè¿™ç§å¹³å°ã€‚</p>\n<h3 id="ç§»åŠ¨ç«¯æ§åˆ¶å°"><a href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%8E%A7%E5%88%B6%E5%8F%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç§»åŠ¨ç«¯æ§åˆ¶å°</h3>\n<ul>\n<li><a href="https://developers.google.com/web/tools/chrome-devtools/remote-debugging/webviews" target="_blank" rel="nofollow noreferrer noopener">Chrome è¿œç¨‹è°ƒè¯•</a> app æ”¯æŒåï¼Œè¿æ¥ usb æˆ–è€…å±€åŸŸç½‘ï¼Œå³å¯é€šè¿‡ Dev Tools è°ƒè¯• webview é¡µé¢ã€‚</li>\n<li><a href="http://people.apache.org/~pmuellr/weinre/docs/latest/Home.html" target="_blank" rel="nofollow noreferrer noopener">Weinre</a> é€šè¿‡é¡µé¢åŠ è½½è„šæœ¬ï¼Œä¸ pc ç«¯è°ƒè¯•å™¨é€šä¿¡ã€‚</li>\n<li>é€šè¿‡å†…åµŒæ§åˆ¶å°è§£å†³ï¼Œæ¯”å¦‚ <a href="http://eruda.liriliri.io/" target="_blank" rel="nofollow noreferrer noopener">eruda</a> <a href="https://github.com/WechatFE/vConsole" target="_blank" rel="nofollow noreferrer noopener">VConsole</a></li>\n<li><a href="http://alloyteam.github.io/Rosin/" target="_blank" rel="nofollow noreferrer noopener">Rosin</a> fiddler çš„ä¸€ä¸ªæ’ä»¶ï¼ŒååŠ©ç§»åŠ¨é¡µé¢è°ƒè¯•ã€‚</li>\n<li><a href="https://jsconsole.com/" target="_blank" rel="nofollow noreferrer noopener">jsconsole</a> åœ¨æœ¬åœ°éƒ¨ç½²åï¼Œæ‰‹æœºè®¿é—®å¯¹åº” ipï¼Œå¯ä»¥æµ‹è¯•å¯¹åº”æµè§ˆå™¨çš„æ§åˆ¶å°ã€‚</li>\n</ul>\n<h3 id="è¯·æ±‚ä»£ç†"><a href="#%E8%AF%B7%E6%B1%82%E4%BB%A3%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>è¯·æ±‚ä»£ç†</h3>\n<p><a href="http://www.charlesproxy.com/" target="_blank" rel="nofollow noreferrer noopener">charles</a> <a href="http://www.telerik.com/fiddler" target="_blank" rel="nofollow noreferrer noopener">Fiddler</a> å¯ä»¥æŠ“åŒ…ï¼Œæ›´é‡è¦æ˜¯å¯ä»¥ä»£ç†è¯·æ±‚ã€‚å‡æ•°æ®ã€è¾¹ç•Œå€¼æµ‹è¯•ã€å¼€å‘ç¯å¢ƒä»£ç åŠ è½½ï¼Œæ¯ä¸€é¡¹éƒ½éå¸¸æœ‰ç”¨ã€‚</p>\n<h3 id="å®šåˆ¶-chrome-æ‹“å±•"><a href="#%E5%AE%9A%E5%88%B6-chrome-%E6%8B%93%E5%B1%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å®šåˆ¶ Chrome æ‹“å±•</h3>\n<p>å¯¹äºç‰¹å®šä¸šåŠ¡åœºæ™¯ä¹Ÿå¯ä»¥é€šè¿‡å¼€å‘ chrome æ’ä»¶æ¥åšï¼Œæ¯”å¦‚åˆ†æè‡ªå·±ç½‘ç«™çš„ç»“æ„ã€ç‰ˆæœ¬ã€ä»£ç å¼€å‘è´£ä»»äººã€ä¸€é”®åˆ‡æ¢å¼€å‘ç¯å¢ƒã€‚</p>\n<h3 id="åœ¨ç”¨æˆ·è®¾å¤‡è°ƒè¯•"><a href="#%E5%9C%A8%E7%94%A8%E6%88%B7%E8%AE%BE%E5%A4%87%E8%B0%83%E8%AF%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>åœ¨ç”¨æˆ·è®¾å¤‡è°ƒè¯•</h3>\n<p>æŠŠæ§åˆ¶å°è¾“å‡ºä¿¡æ¯æ‰“åˆ°æœåŠ¡å™¨ï¼Œæœ¬åœ°é€šè¿‡ä¸æœåŠ¡å™¨å»ºç«‹ socket é“¾æ¥å®æ—¶æŸ¥çœ‹æ§åˆ¶å°ä¿¡æ¯ã€‚è¦çŸ¥é“å®æ—¶æ ¹æ®ç”¨æˆ· id å¼€å¯è°ƒè¯•ä¿¡æ¯ï¼Œå¹¶çœ‹ç”¨æˆ·çœŸæ˜¯ç¯å¢ƒçš„æ§åˆ¶å°æ‰“å°ä¿¡æ¯æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œèƒ½è§£å†³å¾ˆå¤šéš¾ä»¥å¤ç°é—®é¢˜ã€‚</p>\n<p>ä»£ç ä¸­å¯ä»¥ä½¿ç”¨å°è£…è¿‡çš„ <code class="language-text">console.log</code>ï¼Œå½“æœåŠ¡ç«¯å¼€å¯è°ƒè¯•çŠ¶æ€åï¼Œå¯¹åº”ç”¨æˆ·ç½‘é¡µä¼šæºæºä¸æ–­æ‰“å‡º logã€‚</p>\n<h3 id="dom-æ–­ç‚¹ã€äº‹ä»¶æ–­ç‚¹"><a href="#dom-%E6%96%AD%E7%82%B9%E3%80%81%E4%BA%8B%E4%BB%B6%E6%96%AD%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DOM æ–­ç‚¹ã€äº‹ä»¶æ–­ç‚¹</h3>\n<ul>\n<li>DOM æ–­ç‚¹ï¼Œåœ¨ dom å…ƒç´ å³é”®ï¼Œé€‰æ‹© ï¼ˆBreak on subtree modificationsï¼‰ï¼Œå¯ä»¥åœ¨æ­¤ dom è¢«ä¿®æ”¹æ—¶è§¦å‘æ–­ç‚¹ï¼Œåœ¨ä¸ç¡®å®š dom è¢«å“ªæ®µ js è„šæœ¬ä¿®æ”¹æ—¶å¯èƒ½æœ‰ç”¨ã€‚</li>\n<li>Event Listener Breakpointsï¼Œç¥å™¨ä¹‹ä¸€ï¼Œå¯¹äºä»»ä½•äº‹ä»¶éƒ½èƒ½è¿›å…¥æ–­ç‚¹ï¼Œæ¯”å¦‚ clickï¼Œtouchï¼Œscript äº‹ä»¶ç»Ÿç»Ÿèƒ½ç›‘å¬ã€‚</li>\n</ul>\n<h3 id="ä½¿ç”¨é”™è¯¯è¿½è¸ªå¹³å°"><a href="#%E4%BD%BF%E7%94%A8%E9%94%99%E8%AF%AF%E8%BF%BD%E8%B8%AA%E5%B9%B3%E5%8F%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä½¿ç”¨é”™è¯¯è¿½è¸ªå¹³å°</h3>\n<p>å¯¹é”™è¯¯ä¿¡æ¯é‡‡é›†ã€åˆ†æã€æŠ¥è­¦æ˜¯å¾ˆå¿…è¦çš„ï¼Œè¿™é‡Œæœ‰ä¸€äº›å¯¹å¤–æœåŠ¡ï¼š<a href="https://sentry.io/welcome/" target="_blank" rel="nofollow noreferrer noopener">sentry</a> <a href="https://trackjs.com/" target="_blank" rel="nofollow noreferrer noopener">trackjs</a></p>\n<h3 id="é»‘ç›’è°ƒè¯•"><a href="#%E9%BB%91%E7%9B%92%E8%B0%83%E8%AF%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>é»‘ç›’è°ƒè¯•</h3>\n<p>SourceMap å¯ä»¥ç²¾å‡†å®šä½åˆ°ä»£ç ï¼Œä½†æœ‰æ—¶å€™æŠ¥é”™æ˜¯ç”±æŸå¤„ä»£ç ç»Ÿä¸€æŠ›å‡ºçš„ï¼Œæ¯”å¦‚ <a href="https://github.com/zertosh/invariant" target="_blank" rel="nofollow noreferrer noopener">invariant</a> è®©äººåˆçˆ±åˆæ¨çš„åº“ï¼Œæ‰€æœ‰å®šä½å…¨éƒ¨è·‘åˆ°è¿™ä¸ªåº“é‡Œäº†ï¼ˆè¦ä½ æœ‰ä½•ç”¨ï¼‰ï¼Œè¿™æ—¶å€™ï¼Œå¯ä»¥åœ¨ DevTools æºç ä¸­å³é”®ï¼Œé€‰ä¸­ <code class="language-text">BlackBox Script</code>ï¼Œå®ƒå°±å˜æˆé»‘ç›’äº†ï¼Œä¸‹æ¬¡ log çš„å®šä½å°†ä¼šæ˜¯å‡†ç¡®çš„ã€‚</p>\n<p><a href="https://hacks.mozilla.org/2013/08/new-features-of-firefox-developer-tools-episode-25/" target="_blank" rel="nofollow noreferrer noopener">FireFox</a>ã€<a href="https://umaar.com/dev-tips/128-blackboxing/" target="_blank" rel="nofollow noreferrer noopener">Chrome</a>ã€‚</p>\n<h3 id="åˆ é™¤æ— ç”¨çš„-css"><a href="#%E5%88%A0%E9%99%A4%E6%97%A0%E7%94%A8%E7%9A%84-css" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>åˆ é™¤æ— ç”¨çš„ css</h3>\n<p>css ä¸åƒ js ä¸€æ ·æ–¹ä¾¿åˆ†æè§„åˆ™æ˜¯å¦å­˜åœ¨å†—ä½™ï¼ŒChrome å¸®æˆ‘ä»¬åšäº†è¿™ä»¶äº‹ï¼š<a href="https://umaar.com/dev-tips/126-css-tracker/" target="_blank" rel="nofollow noreferrer noopener">CSS Tracker</a>ã€‚</p>\n<h3 id="åœ¨-chrome-å¿«é€ŸæŸ¥æ‰¾å…ƒç´ "><a href="#%E5%9C%A8-chrome-%E5%BF%AB%E9%80%9F%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>åœ¨ Chrome å¿«é€ŸæŸ¥æ‰¾å…ƒç´ </h3>\n<p>Chrome ä¼šè®°å½•æœ€åæ’å…¥çš„ 5 ä¸ªå…ƒç´ ï¼Œåˆ†åˆ«ä»¥ <code class="language-text">$0</code> ~ <code class="language-text">$4</code> çš„æ–¹å¼åœ¨æ§åˆ¶å°ç›´æ¥è¾“å‡ºã€‚</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-06-05-15-38-56-b58af1d9eea7c56d7d8303cd7d3d32ee-27a9d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 417px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 123.74100719424462%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACcUlEQVQ4y5VT23KbMBDl79v3fkWnj/2BJtOXpHZs1zSxsRObq20QSALdJXAXu9NmmgvJYUfsIC1n9+zKY5yB1U2NT6jrmlIKK2MM1uaE8xdwCCGwnn1YvcnNxJ/5ox+ji8sLsJvJDWA6nQZBMJlMfN9fr9fj8Ric5XI5Go0Wi8VsNoMD8/ncy3d5vjrgFItGkD3mhBljtNYGHqXNI9gTzn5/wBiPCVYsD4WfW24NtU6445vhlWWZRml8G5d5jlFWFijLqixF5R6hHcIVfgUebBNKsvUuDVbb6eV2vrq6TqfjKPbD6GdYFiUmLwcfuz4BiZUoShL59a4K1jyJuMx5k9Rd272Wdtf12yznLEc4nNdZsb5vogdaJ4RExFnXHbuX4LVta5SBcwJzo2SJ1aGQuData51x3avw4iTNiyIM46pA24x+/BJ/+Bx9+ppJpaEt+lFjnsJL02wTRmEcL4PgbhlczVbfrvzv1/5mG/q/bm/vFg8Pm6qCVgDF//CSJIFuFQXa7/fbzSZLohIdKK7gMPw0SpIwShrGnHP2CTyYYUyIdQ50ta6FEWrbXqS2a6VWUvYGu8+rDb8UTOpGSQpCIVLpAilOpKyEUwPT5oEYhNRWW6uFBRphhbBGWStNa9u/wj4fbKyRXKlaCZKLCuFSFUiemLlV9i3MFFrqgFlwJR0XQNsbMA8Eg2iSSWA+14yr9zBDr5uagTZWcjApHNRstbPCDDPDHWcN141WdaVIRbHGWEtIBEtQcZgZY/JHbSmUsLzPwPRquyFmBdnBFHMtaQk1UwJ9loIqReRwzXDn3BDDi8H/3O58c/v38WzvCH4/fgNjmZwh3GWNEAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 06 05 15 38 56"\n        title=""\n        src="/static/2019-06-05-15-38-56-b58af1d9eea7c56d7d8303cd7d3d32ee-27a9d.png"\n        srcset="/static/2019-06-05-15-38-56-b58af1d9eea7c56d7d8303cd7d3d32ee-6fc91.png 200w,\n/static/2019-06-05-15-38-56-b58af1d9eea7c56d7d8303cd7d3d32ee-7d566.png 400w,\n/static/2019-06-05-15-38-56-b58af1d9eea7c56d7d8303cd7d3d32ee-27a9d.png 417w"\n        sizes="(max-width: 417px) 100vw, 417px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="consoletable"><a href="#consoletable" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Console.table</h3>\n<p>ä»¥è¡¨æ ¼å½¢å¼æ‰“å°ï¼Œå¯¹äºå¯¹è±¡æ•°ç»„å°¤ä¸ºåˆé€‚ã€‚</p>\n<h3 id="ç›‘å¬ç‰¹å®šå‡½æ•°è°ƒç”¨"><a href="#%E7%9B%91%E5%90%AC%E7%89%B9%E5%AE%9A%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç›‘å¬ç‰¹å®šå‡½æ•°è°ƒç”¨</h3>\n<p><code class="language-text">monitor</code> æœ‰ç‚¹åƒ <code class="language-text">proxy</code>ï¼Œç”¨ <code class="language-text">monitor</code> åŒ…è£¹ä½çš„ functionï¼Œåœ¨å…¶è°ƒç”¨åï¼Œä¼šåœ¨æ§åˆ¶å°è¾“å‡ºå…¶è°ƒç”¨ä¿¡æ¯ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6259205328483541000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`> function func(num){}\n> monitor(func)\n> func(3)\n// < function func called with arguments: 3`, `6259205328483541000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                javascript å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">></span> <span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token operator">></span> <span class="token function">monitor</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>\n<span class="token operator">></span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>\n<span class="token comment">// &lt; function func called with arguments: 3</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="æ¨¡æ‹Ÿå‘é€è¯·æ±‚åˆ©å™¨-postman"><a href="#%E6%A8%A1%E6%8B%9F%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E5%88%A9%E5%99%A8-postman" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ¨¡æ‹Ÿå‘é€è¯·æ±‚åˆ©å™¨ PostMan</h3>\n<p><a href="https://www.getpostman.com/products" target="_blank" rel="nofollow noreferrer noopener">PostMan</a>, FireFox æ§åˆ¶å° Network ä¹Ÿæ”¯æŒæ­¤åŠŸèƒ½ã€‚</p>\n<h3 id="æ‰¾åˆ°æ§åˆ¶å°æœ€åä¸€ä¸ªå¯¹è±¡"><a href="#%E6%89%BE%E5%88%B0%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ‰¾åˆ°æ§åˆ¶å°æœ€åä¸€ä¸ªå¯¹è±¡</h3>\n<p>æœ‰äº† <code class="language-text">$_</code>ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å®šä¹‰æ–°çš„å¯¹è±¡æ¥æ‰“å°å€¼äº†ï¼Œæ¯”å¦‚ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39663257847245670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`> [1, 2, 3, 4]\n< [1, 2, 3, 4]\n> \\$_.length\n// < 4`, `39663257847245670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                javascript å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>\n<span class="token operator">&lt;</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>\n<span class="token operator">></span> $_<span class="token punctuation">.</span>length\n<span class="token comment">// &lt; 4</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>æ›´å¤šæ§åˆ¶å°ç›¸å…³æŠ€å·§å¯ä»¥æŸ¥çœ‹ï¼š<a href="https://developers.google.com/web/tools/chrome-devtools/console/command-line-reference?utm_source=dcc&#x26;utm_medium=redirect&#x26;utm_campaign=2016q3" target="_blank" rel="nofollow noreferrer noopener">command-line-reference</a>ã€‚</p>\n<h1 id="æ€»ç»“"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ€»ç»“</h1>\n<p>è™½ç„¶åœ¨æŠ›ç –å¼•ç‰ï¼Œä½†æ•´ç†å®Œä¹‹åå‘ç°ä»ç„¶æ˜¯å—ç –å¤´ï¼Œè°ƒè¯•æŠ€å·§ç¹å¤šï¼Œé‡Œé¢åŒ…å«äº†é€šç”¨çš„ã€ä¸é€šç”¨çš„ï¼Œç²¾è¯»ä¸å¯èƒ½ä¸€ä¸€åˆ—ä¸¾ã€‚å¸Œæœ›å¤§å®¶èƒ½æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯ï¼ŒæŒæ¡ç›¸å…³çš„è°ƒè¯•æŠ€å·§ï¼Œè®©å·¥ä½œæ›´åŠ é«˜æ•ˆã€‚</p>',id:"/github/workspace/blog/å‰ç«¯è°ƒè¯•æŠ€å·§/index.md absPath of file >>> MarkdownRemark",timeToRead:6,frontmatter:{date:"2019-06-05 15:37:02",path:"/frontend-debug-skill/",tags:"å‰ç«¯, è°ƒè¯•",title:"å‰ç«¯è°ƒè¯•æŠ€å·§",draft:null}},{excerpt:"React16 æ–°ç‰¹æ€§ å¼•è¨€ äº 2017.09.26 Facebook å‘å¸ƒ React v16.0 ç‰ˆæœ¬ï¼Œæ—¶è‡³ä»Šæ—¥å·²æ›´æ–°åˆ° React v16.6ï¼Œä¸”å¼•å…¥äº†å¤§é‡çš„ä»¤äººæŒ¯å¥‹çš„æ–°ç‰¹æ€§ï¼Œæœ¬æ–‡ç« å°†å¸¦é¢†å¤§å®¶æ ¹æ® React æ›´æ–°çš„æ—¶é—´è„‰ç»œäº†è§£ React16 çš„æ–°ç‰¹æ€§ã€‚ æ¦‚è¿° æŒ‰ç…§ React16 çš„æ›´æ–°æ—¶é—´ï¼Œä» React v16.0 ~ React v16.6 è¿›è¡Œæ¦‚è¿°ã€‚ React v16.0 render æ”¯æŒè¿”å›æ•°ç»„å’Œå­—ç¬¦ä¸²ã€Error Boundariesã€createPortalâ€¦",html:'<h1 id="react16-æ–°ç‰¹æ€§"><a href="#react16-%E6%96%B0%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React16 æ–°ç‰¹æ€§</h1>\n<h2 id="å¼•è¨€"><a href="#%E5%BC%95%E8%A8%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å¼•è¨€</h2>\n<p>äº 2017.09.26 Facebook å‘å¸ƒ React v16.0 ç‰ˆæœ¬ï¼Œæ—¶è‡³ä»Šæ—¥å·²æ›´æ–°åˆ° React v16.6ï¼Œä¸”å¼•å…¥äº†å¤§é‡çš„ä»¤äººæŒ¯å¥‹çš„æ–°ç‰¹æ€§ï¼Œæœ¬æ–‡ç« å°†å¸¦é¢†å¤§å®¶æ ¹æ® React æ›´æ–°çš„æ—¶é—´è„‰ç»œäº†è§£ React16 çš„æ–°ç‰¹æ€§ã€‚</p>\n<h2 id="æ¦‚è¿°"><a href="#%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ¦‚è¿°</h2>\n<p>æŒ‰ç…§ React16 çš„æ›´æ–°æ—¶é—´ï¼Œä» React v16.0 ~ React v16.6 è¿›è¡Œæ¦‚è¿°ã€‚</p>\n<p><strong>React v16.0</strong></p>\n<ul>\n<li>render æ”¯æŒè¿”å›æ•°ç»„å’Œå­—ç¬¦ä¸²ã€Error Boundariesã€createPortalã€æ”¯æŒè‡ªå®šä¹‰ DOM å±æ€§ã€å‡å°‘æ–‡ä»¶ä½“ç§¯ã€fiberï¼›</li>\n</ul>\n<p><strong>React v16.1</strong></p>\n<ul>\n<li>react-call-returnï¼›</li>\n</ul>\n<p><strong>React v16.2</strong></p>\n<ul>\n<li>Fragmentï¼›</li>\n</ul>\n<p><strong>React v16.3</strong></p>\n<ul>\n<li>createContextã€createRefã€forwardRefã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ›´æ–°ã€Strict Modeï¼›</li>\n</ul>\n<p><strong>React v16.4</strong></p>\n<ul>\n<li>Pointer Eventsã€update getDerivedStateFromPropsï¼›</li>\n</ul>\n<p><strong>React v16.5</strong></p>\n<ul>\n<li>Profilerï¼›</li>\n</ul>\n<p><strong>React v16.6</strong></p>\n<ul>\n<li>memoã€lazyã€Suspenseã€static contextTypeã€static getDerivedStateFromError()ï¼›</li>\n</ul>\n<p><strong>React v16.7ï¼ˆ~Q1 2019ï¼‰</strong></p>\n<ul>\n<li>Hooksï¼›</li>\n</ul>\n<p><strong>React v16.8ï¼ˆ~Q2 2019ï¼‰</strong></p>\n<ul>\n<li>Concurrent Renderingï¼›</li>\n</ul>\n<p><strong>React v16.9ï¼ˆ~mid 2019ï¼‰</strong></p>\n<ul>\n<li>Suspense for Data Fetchingï¼›</li>\n</ul>\n<p>ä¸‹é¢å°†æŒ‰ç…§ä¸Šè¿°çš„ React16 æ›´æ–°è·¯å¾„å¯¹æ¯ä¸ªæ–°ç‰¹æ€§è¿›è¡Œè¯¦ç»†æˆ–ç®€çŸ­çš„è§£æã€‚</p>\n<h2 id="ç²¾è¯»"><a href="#%E7%B2%BE%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç²¾è¯»</h2>\n<h3 id="react-v160"><a href="#react-v160" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.0</h3>\n<h4 id="render-æ”¯æŒè¿”å›æ•°ç»„å’Œå­—ç¬¦ä¸²"><a href="#render-%E6%94%AF%E6%8C%81%E8%BF%94%E5%9B%9E%E6%95%B0%E7%BB%84%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>render æ”¯æŒè¿”å›æ•°ç»„å’Œå­—ç¬¦ä¸²</h4>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53153318908669060000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ä¸éœ€è¦å†å°†å…ƒç´ ä½œä¸ºå­å…ƒç´ è£…è½½åˆ°æ ¹å…ƒç´ ä¸‹é¢\nrender() {\n  return [\n    <li/>1</li>,\n    <li/>2</li>,\n    <li/>3</li>,\n  ];\n}`, `53153318908669060000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ä¸éœ€è¦å†å°†å…ƒç´ ä½œä¸ºå­å…ƒç´ è£…è½½åˆ°æ ¹å…ƒç´ ä¸‹é¢</span>\n<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">[</span>\n    <span class="token operator">&lt;</span>li<span class="token operator">/</span><span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">,</span>\n    <span class="token operator">&lt;</span>li<span class="token operator">/</span><span class="token operator">></span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">,</span>\n    <span class="token operator">&lt;</span>li<span class="token operator">/</span><span class="token operator">></span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="error-boundaries"><a href="#error-boundaries" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Boundaries</h4>\n<p>React15 åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­é‡åˆ°è¿è¡Œæ—¶çš„é”™è¯¯ï¼Œä¼šå¯¼è‡´æ•´ä¸ª React ç»„ä»¶çš„å´©æºƒï¼Œè€Œä¸”é”™è¯¯ä¿¡æ¯ä¸æ˜ç¡®å¯è¯»æ€§å·®ã€‚React16 æ”¯æŒäº†æ›´ä¼˜é›…çš„é”™è¯¯å¤„ç†ç­–ç•¥ï¼Œå¦‚æœä¸€ä¸ªé”™è¯¯æ˜¯åœ¨ç»„ä»¶çš„æ¸²æŸ“æˆ–è€…ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¢«æŠ›å‡ºï¼Œæ•´ä¸ªç»„ä»¶ç»“æ„å°±ä¼šä»æ ¹èŠ‚ç‚¹ä¸­å¸è½½ï¼Œè€Œä¸å½±å“å…¶ä»–ç»„ä»¶çš„æ¸²æŸ“ï¼Œå¯ä»¥åˆ©ç”¨ error boundaries è¿›è¡Œé”™è¯¯çš„ä¼˜åŒ–å¤„ç†ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97313898993022700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class ErrorBoundary extends React.Component {\n  state = { hasError: false };\n\n  componentDidCatch(error, info) {\n    this.setState({ hasError: true });\n\n    logErrorToMyService(error, info);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>æ•°æ®é”™è¯¯</h1>;\n    }\n\n    return this.props.children;\n  }\n}`, `97313898993022700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ErrorBoundary</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span> hasError<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> hasError<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">logErrorToMyService</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>æ•°æ®é”™è¯¯<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="createportal"><a href="#createportal" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>createPortal</h4>\n<p>createPortal çš„å‡ºç°ä¸ºå¼¹çª—ã€å¯¹è¯æ¡†ç­‰è„±ç¦»æ–‡æ¡£æµçš„ç»„ä»¶å¼€å‘æä¾›äº†ä¾¿åˆ©ï¼Œæ›¿æ¢äº†ä¹‹å‰ä¸ç¨³å®šçš„ API unstable_renderSubtreeIntoContainerï¼Œåœ¨ä»£ç ä½¿ç”¨ä¸Šå¯ä»¥åšå…¼å®¹ï¼Œå¦‚ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13976230509648490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const isReact16 = ReactDOM.createPortal !== undefined;\n\nconst getCreatePortal = () => (isReact16 ? ReactDOM.createPortal : ReactDOM.unstable_renderSubtreeIntoContainer);`, `13976230509648490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> isReact16 <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span>createPortal <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">getCreatePortal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>isReact16 <span class="token operator">?</span> ReactDOM<span class="token punctuation">.</span>createPortal <span class="token punctuation">:</span> ReactDOM<span class="token punctuation">.</span>unstable_renderSubtreeIntoContainer<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>ä½¿ç”¨ createPortal å¯ä»¥å¿«é€Ÿåˆ›å»º Dialog ç»„ä»¶ï¼Œä¸”ä¸éœ€è¦ç‰µæ‰¯åˆ° componentDidMountã€componentDidUpdate ç­‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p>\n<p>å¹¶ä¸”é€šè¿‡ createPortal æ¸²æŸ“çš„ DOMï¼Œäº‹ä»¶å¯ä»¥ä» portal çš„å…¥å£ç«¯å†’æ³¡ä¸Šæ¥ï¼Œå¦‚æœå…¥å£ç«¯å­˜åœ¨ onDialogClick ç­‰äº‹ä»¶ï¼ŒcreatePortal ä¸­çš„ DOM ä¹Ÿèƒ½å¤Ÿè¢«è°ƒç”¨åˆ°ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93700703643680260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import React from \'react\';\nimport { createPortal } from \'react-dom\';\n\nclass Dialog extends React.Component {\n  constructor() {\n    super(props);\n\n    this.node = document.createElement(\'div\');\n    document.body.appendChild(this.node);\n  }\n\n  render() {\n    return createPortal(<div>{this.props.children}</div>, this.node);\n  }\n}`, `93700703643680260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> createPortal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-dom\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Dialog</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'div\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token function">createPortal</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="æ”¯æŒè‡ªå®šä¹‰-dom-å±æ€§"><a href="#%E6%94%AF%E6%8C%81%E8%87%AA%E5%AE%9A%E4%B9%89-dom-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ”¯æŒè‡ªå®šä¹‰ DOM å±æ€§</h3>\n<p>ä»¥å‰çš„ React ç‰ˆæœ¬ DOM ä¸è¯†åˆ«é™¤äº† HTML å’Œ SVG æ”¯æŒçš„ä»¥å¤–å±æ€§ï¼Œåœ¨ React16 ç‰ˆæœ¬ä¸­å°†ä¼šæŠŠå…¨éƒ¨çš„å±æ€§ä¼ é€’ç»™ DOM å…ƒç´ ã€‚è¿™ä¸ªæ–°ç‰¹æ€§å¯ä»¥è®©æˆ‘ä»¬æ‘†è„±å¯ç”¨çš„ React DOM å±æ€§ç™½åå•ã€‚ç¬”è€…ä¹‹å‰å†™è¿‡ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè¿‡æ»¤é DOM å±æ€§ <a href="https://github.com/twobin/filter-react-dom-props" target="_blank" rel="nofollow noreferrer noopener">filter-react-dom-props</a>ï¼Œ16 ä¹‹åå³å¯ä¸å†éœ€è¦è¿™æ ·çš„æ–¹æ³•ã€‚</p>\n<h3 id="å‡å°‘æ–‡ä»¶ä½“ç§¯"><a href="#%E5%87%8F%E5%B0%91%E6%96%87%E4%BB%B6%E4%BD%93%E7%A7%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å‡å°‘æ–‡ä»¶ä½“ç§¯</h3>\n<p>React16 ä½¿ç”¨ Rollup é’ˆå¯¹ä¸åŒçš„ç›®æ ‡æ ¼å¼è¿›è¡Œä»£ç æ‰“åŒ…ï¼Œç”±äºæ‰“åŒ…å·¥å…·çš„æ”¹å˜ä½¿å¾—åº“æ–‡ä»¶å¤§å°å¾—åˆ°ç¼©å‡ã€‚</p>\n<ul>\n<li>React åº“å¤§å°ä» 20.7kbï¼ˆå‹ç¼©å 6.9kbï¼‰é™ä½åˆ° 5.3kbï¼ˆå‹ç¼©å 2.2kbï¼‰</li>\n<li>ReactDOM åº“å¤§å°ä» 141kbï¼ˆå‹ç¼©å 42.9kbï¼‰é™ä½åˆ° 103.7kbï¼ˆå‹ç¼©å 32.6kbï¼‰</li>\n<li>React + ReactDOM åº“å¤§å°ä» 161.7kbï¼ˆå‹ç¼©å 49.8kbï¼‰é™ä½åˆ° 109kbï¼ˆå‹ç¼©å 43.8kbï¼‰</li>\n</ul>\n<h3 id="fiber"><a href="#fiber" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fiber</h3>\n<p>Fiber æ˜¯å¯¹ React æ ¸å¿ƒç®—æ³•çš„ä¸€æ¬¡é‡æ–°å®ç°ï¼Œå°†åŸæœ¬çš„åŒæ­¥æ›´æ–°è¿‡ç¨‹ç¢ç‰‡åŒ–ï¼Œé¿å…ä¸»çº¿ç¨‹çš„é•¿æ—¶é—´é˜»å¡ï¼Œä½¿åº”ç”¨çš„æ¸²æŸ“æ›´åŠ æµç•…ã€‚</p>\n<p>åœ¨ React16 ä¹‹å‰ï¼Œæ›´æ–°ç»„ä»¶æ—¶ä¼šè°ƒç”¨å„ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè®¡ç®—å’Œæ¯”å¯¹ Virtual DOMï¼Œæ›´æ–° DOM æ ‘ç­‰ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œä¸­é€”æ— æ³•ä¸­æ–­ã€‚å½“ç»„ä»¶æ¯”è¾ƒåºå¤§ï¼Œæ›´æ–°æ“ä½œè€—æ—¶è¾ƒé•¿æ—¶ï¼Œå°±ä¼šå¯¼è‡´æµè§ˆå™¨å”¯ä¸€çš„ä¸»çº¿ç¨‹éƒ½æ˜¯æ‰§è¡Œç»„ä»¶æ›´æ–°æ“ä½œï¼Œè€Œæ— æ³•å“åº”ç”¨æˆ·çš„è¾“å…¥æˆ–åŠ¨ç”»çš„æ¸²æŸ“ï¼Œå¾ˆå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>\n<p>Fiber åˆ©ç”¨åˆ†ç‰‡çš„æ€æƒ³ï¼ŒæŠŠä¸€ä¸ªè€—æ—¶é•¿çš„ä»»åŠ¡åˆ†æˆå¾ˆå¤šå°ç‰‡ï¼Œæ¯ä¸€ä¸ªå°ç‰‡çš„è¿è¡Œæ—¶é—´å¾ˆçŸ­ï¼Œåœ¨æ¯ä¸ªå°ç‰‡æ‰§è¡Œå®Œä¹‹åï¼Œå°±æŠŠæ§åˆ¶æƒäº¤è¿˜ç»™ React è´Ÿè´£ä»»åŠ¡åè°ƒçš„æ¨¡å—ï¼Œå¦‚æœæœ‰ç´§æ€¥ä»»åŠ¡å°±å»ä¼˜å…ˆå¤„ç†ï¼Œå¦‚æœæ²¡æœ‰å°±ç»§ç»­æ›´æ–°ï¼Œè¿™æ ·å°±ç»™å…¶ä»–ä»»åŠ¡ä¸€ä¸ªæ‰§è¡Œçš„æœºä¼šï¼Œå”¯ä¸€çš„çº¿ç¨‹å°±ä¸ä¼šä¸€ç›´è¢«ç‹¬å ã€‚</p>\n<p>å› æ­¤ï¼Œåœ¨ç»„ä»¶æ›´æ–°æ—¶æœ‰å¯èƒ½ä¸€ä¸ªæ›´æ–°ä»»åŠ¡è¿˜æ²¡æœ‰å®Œæˆï¼Œå°±è¢«å¦ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„æ›´æ–°è¿‡ç¨‹æ‰“æ–­ï¼Œä¼˜å…ˆçº§é«˜çš„æ›´æ–°ä»»åŠ¡ä¼šä¼˜å…ˆå¤„ç†å®Œï¼Œè€Œä½ä¼˜å…ˆçº§æ›´æ–°ä»»åŠ¡æ‰€åšçš„å·¥ä½œåˆ™ä¼šå®Œå…¨ä½œåºŸï¼Œç„¶åç­‰å¾…æœºä¼šé‡å¤´å†æ¥ã€‚æ‰€ä»¥ React Fiber æŠŠä¸€ä¸ªæ›´æ–°è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>\n<ul>\n<li>ç¬¬ä¸€ä¸ªé˜¶æ®µ Reconciliation Phaseï¼ŒFiber ä¼šæ‰¾å‡ºéœ€è¦æ›´æ–°çš„ DOMï¼Œè¿™ä¸ªé˜¶æ®µæ˜¯å¯ä»¥è¢«æ‰“æ–­çš„ï¼›</li>\n<li>ç¬¬äºŒä¸ªé˜¶æ®µ Commit Phaseï¼Œæ— æ³•è¢«æ‰“æ–­ï¼Œå®Œæˆ DOM çš„æ›´æ–°å¹¶å±•ç¤ºï¼›</li>\n</ul>\n<p>åœ¨ä½¿ç”¨ Fiber åï¼Œéœ€è¦è¦æ£€æŸ¥ä¸ç¬¬ä¸€é˜¶æ®µç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œé¿å…é€»è¾‘çš„å¤šæ¬¡æˆ–é‡å¤è°ƒç”¨ï¼š</p>\n<ul>\n<li>componentWillMount</li>\n<li>componentWillReceiveProps</li>\n<li>shouldComponentUpdate</li>\n<li>componentWillUpdate</li>\n</ul>\n<p>ä¸ç¬¬äºŒé˜¶æ®µç›¸å…³çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p>\n<ul>\n<li>componentDidMount</li>\n<li>componentDidUpdate</li>\n<li>componentWillUnmount</li>\n</ul>\n<h2 id="react-v161"><a href="#react-v161" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.1</h2>\n<h3 id="call-returnï¼ˆreact-call-return-npmï¼‰"><a href="#call-return%EF%BC%88react-call-return-npm%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Call Returnï¼ˆreact-call-return npmï¼‰</h3>\n<p>react-call-return ç›®å‰è¿˜æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ npm åŒ…ï¼Œä¸»è¦æ˜¯é’ˆå¯¹çˆ¶ç»„ä»¶éœ€è¦æ ¹æ®å­ç»„ä»¶çš„å›è°ƒä¿¡æ¯å»æ¸²æŸ“å­ç»„ä»¶åœºæ™¯ æä¾›çš„è§£å†³æ–¹æ¡ˆã€‚</p>\n<p>åœ¨ React16 ä¹‹å‰ï¼Œé’ˆå¯¹ä¸Šè¿°åœºæ™¯ä¸€èˆ¬æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p>\n<ul>\n<li>\n<p>é¦–å…ˆè®©å­ç»„ä»¶åˆå§‹åŒ–æ¸²æŸ“ï¼Œé€šè¿‡å›è°ƒå‡½æ•°æŠŠä¿¡æ¯ä¼ ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å®Œæˆå¤„ç†åæ›´æ–°å­ç»„ä»¶ propsï¼Œè§¦å‘å­ç»„ä»¶çš„ç¬¬äºŒæ¬¡æ¸²æŸ“æ‰å¯ä»¥è§£å†³ï¼Œå­ç»„ä»¶éœ€è¦ç»è¿‡ä¸¤æ¬¡æ¸²æŸ“å‘¨æœŸï¼Œå¯èƒ½ä¼šé€ æˆæ¸²æŸ“çš„æŠ–åŠ¨æˆ–é—ªçƒç­‰é—®é¢˜ï¼›</p>\n</li>\n<li>\n<p>é¦–å…ˆåœ¨çˆ¶ç»„ä»¶é€šè¿‡ children è·å¾—å­ç»„ä»¶å¹¶è¯»å–å…¶ä¿¡æ¯ï¼Œåˆ©ç”¨ React.cloneElement å…‹éš†äº§ç”Ÿæ–°å…ƒç´ ï¼Œå¹¶å°†æ–°çš„å±æ€§ä¼ é€’è¿›å»ï¼Œçˆ¶ç»„ä»¶ render è¿”å›çš„æ˜¯å…‹éš†äº§ç”Ÿçš„å­å…ƒç´ ã€‚è™½ç„¶è¿™ç§æ–¹æ³•åªéœ€è¦ä½¿ç”¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œä½†æ˜¯çˆ¶ç»„ä»¶çš„ä»£ç ç¼–å†™ä¼šæ¯”è¾ƒéº»çƒ¦ï¼›</p>\n</li>\n</ul>\n<p>React16 æ”¯æŒçš„ react-call-returnï¼Œæä¾›äº†ä¸¤ä¸ªå‡½æ•° unstable<em>createCall å’Œ unstable</em>createReturnï¼Œå…¶ä¸­ unstable<em>createCall æ˜¯ çˆ¶ç»„ä»¶ä½¿ç”¨ï¼Œunstable</em>createReturn æ˜¯ å­ç»„ä»¶ä½¿ç”¨ï¼Œçˆ¶ç»„ä»¶å‘å‡º Callï¼Œå­ç»„ä»¶å“åº”è¿™ä¸ª Callï¼Œå³ Returnã€‚</p>\n<ul>\n<li>\n<p>åœ¨çˆ¶ç»„ä»¶ render å‡½æ•°ä¸­è¿”å›å¯¹ unstable_createCall çš„è°ƒç”¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ props.childrenï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºæ¥å—å­ç»„ä»¶å“åº” Call æ‰€è¿”å›çš„ä¿¡æ¯ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ propsï¼›</p>\n</li>\n<li>\n<p>åœ¨å­ç»„ä»¶ render å‡½æ•°è¿”å›å¯¹ unstable<em>createReturn çš„è°ƒç”¨ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šåœ¨ unstable</em>createCall ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°å‚æ•°ä¸­è®¿é—®åˆ°ï¼›</p>\n</li>\n<li>\n<p>å½“çˆ¶ç»„ä»¶ä¸‹çš„æ‰€æœ‰å­ç»„ä»¶éƒ½å®Œæˆæ¸²æŸ“å‘¨æœŸåï¼Œç”±äºå­ç»„ä»¶è¿”å›çš„æ˜¯å¯¹ unstable<em>createReturn çš„è°ƒç”¨æ‰€ä»¥å¹¶æ²¡æœ‰æ¸²æŸ“å…ƒç´ ï¼Œunstable</em>createCall çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°å‚æ•°ä¼šè¢«è°ƒç”¨ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°è¿”å›çš„æ˜¯çœŸæ­£æ¸²æŸ“å­ç»„ä»¶çš„å…ƒç´ ï¼›</p>\n</li>\n</ul>\n<p>é’ˆå¯¹æ™®é€šåœºæ™¯æ¥è¯´ï¼Œreact-call-return æœ‰ç‚¹è¿‡åº¦è®¾è®¡çš„æ„Ÿè§‰ï¼Œä½†æ˜¯å¦‚æœé’ˆå¯¹ä¸€äº›ç‰¹å®šåœºæ™¯çš„è¯ï¼Œå®ƒçš„ä½œç”¨è¿˜æ˜¯éå¸¸æ˜æ˜¾ï¼Œæ¯”å¦‚ï¼Œåœ¨æ¸²æŸ“ç€‘å¸ƒæµå¸ƒå±€æ—¶ï¼Œåˆ©ç”¨ react-call-return å¯ä»¥å…ˆç¼“å­˜å­ç»„ä»¶çš„ ReactElementï¼Œç­‰å¿…è¦çš„ä¿¡æ¯è¶³å¤Ÿä¹‹åçˆ¶ç»„ä»¶å†è§¦å‘ renderï¼Œå®Œæˆæ¸²æŸ“ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81642758411539870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import React from \'react\';\nimport { unstable_createReturn, unstable_createCall } from \'react-call-return\';\n\nconst Child = (props) => {\n  return unstable_createReturn({\n    size: props.children.length,\n    renderItem: (partSize, totalSize) => {\n      return (\n        <div>\n          {props.children} {partSize} / {totalSize}\n        </div>\n      );\n    }\n  });\n};\n\nconst Parent = (props) => {\n  return (\n    <div>\n      {unstable_createCall(\n        props.children,\n        (props, returnValues) => {\n          const totalSize = returnValues.map((v) => v.size).reduce((a, b) => a + b, 0);\n          return returnValues.map(({ size, renderItem }) => {\n            return renderItem(size, totalSize);\n          });\n        },\n        props\n      )}\n    </div>\n  );\n};`, `81642758411539870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> unstable_createReturn<span class="token punctuation">,</span> unstable_createCall <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-call-return\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">Child</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token function">unstable_createReturn</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    size<span class="token punctuation">:</span> props<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">,</span>\n    <span class="token function-variable function">renderItem</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">partSize<span class="token punctuation">,</span> totalSize</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token punctuation">(</span>\n        <span class="token operator">&lt;</span>div<span class="token operator">></span>\n          <span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span> <span class="token punctuation">{</span>partSize<span class="token punctuation">}</span> <span class="token operator">/</span> <span class="token punctuation">{</span>totalSize<span class="token punctuation">}</span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">Parent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>div<span class="token operator">></span>\n      <span class="token punctuation">{</span><span class="token function">unstable_createCall</span><span class="token punctuation">(</span>\n        props<span class="token punctuation">.</span>children<span class="token punctuation">,</span>\n        <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> returnValues</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n          <span class="token keyword">const</span> totalSize <span class="token operator">=</span> returnValues<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=></span> v<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">+</span> b<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token keyword">return</span> returnValues<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> size<span class="token punctuation">,</span> renderItem <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> <span class="token function">renderItem</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> totalSize<span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        props\n      <span class="token punctuation">)</span><span class="token punctuation">}</span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="react-v162"><a href="#react-v162" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.2</h2>\n<h3 id="fragment"><a href="#fragment" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fragment</h3>\n<p>Fragment ç»„ä»¶å…¶ä½œç”¨æ˜¯å¯ä»¥å°†ä¸€äº›å­å…ƒç´ æ·»åŠ åˆ° DOM tree ä¸Šä¸”ä¸éœ€è¦ä¸ºè¿™äº›å…ƒç´ æä¾›é¢å¤–çš„çˆ¶èŠ‚ç‚¹ï¼Œç›¸å½“äº render è¿”å›æ•°ç»„å…ƒç´ ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24160961099472810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`render() {\n  return (\n    <Fragment>\n      Some text.\n      <h2>A heading</h2>\n      More text.\n      <h2>Another heading</h2>\n      Even more text.\n    </Fragment>\n  );\n}`, `24160961099472810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>Fragment<span class="token operator">></span>\n      Some text<span class="token punctuation">.</span>\n      <span class="token operator">&lt;</span>h2<span class="token operator">></span><span class="token constant">A</span> heading<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>\n      More text<span class="token punctuation">.</span>\n      <span class="token operator">&lt;</span>h2<span class="token operator">></span>Another heading<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>\n      Even more text<span class="token punctuation">.</span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="react-v163"><a href="#react-v163" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.3</h2>\n<h3 id="createcontext"><a href="#createcontext" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>createContext</h3>\n<p>å…¨æ–°çš„ Context API å¯ä»¥å¾ˆå®¹æ˜“ç©¿é€ç»„ä»¶è€Œæ— å‰¯ä½œç”¨ï¼Œå…¶åŒ…å«ä¸‰éƒ¨åˆ†ï¼šReact.createContextï¼ŒProviderï¼ŒConsumerã€‚</p>\n<ul>\n<li>React.createContext æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶åˆå§‹å€¼å¹¶è¿”å›å¸¦æœ‰ Provider å’Œ Consumer ç»„ä»¶çš„å¯¹è±¡ï¼›</li>\n<li>Provider ç»„ä»¶æ˜¯æ•°æ®çš„å‘å¸ƒæ–¹ï¼Œä¸€èˆ¬åœ¨ç»„ä»¶æ ‘çš„ä¸Šå±‚å¹¶æ¥æ”¶ä¸€ä¸ªæ•°æ®çš„åˆå§‹å€¼ï¼›</li>\n<li>Consumer ç»„ä»¶æ˜¯æ•°æ®çš„è®¢é˜…æ–¹ï¼Œå®ƒçš„ props.children æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶è¢«å‘å¸ƒçš„æ•°æ®ï¼Œå¹¶ä¸”è¿”å› React Elementï¼›</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6450752407573624000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const ThemeContext = React.createContext(\'light\');\n\nclass ThemeProvider extends React.Component {\n  state = { theme: \'light\' };\n\n  render() {\n    return <ThemeContext.Provider value={this.state.theme}>{this.props.children}</ThemeContext.Provider>;\n  }\n}\n\nclass ThemedButton extends React.Component {\n  render() {\n    return <ThemeContext.Consumer>{(theme) => <Button theme={theme} />}</ThemeContext.Consumer>;\n  }\n}`, `6450752407573624000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token string">\'light\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">ThemeProvider</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span> theme<span class="token punctuation">:</span> <span class="token string">\'light\'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>ThemeContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>theme<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ThemeContext<span class="token punctuation">.</span>Provider<span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">ThemedButton</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>ThemeContext<span class="token punctuation">.</span>Consumer<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">theme</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>Button theme<span class="token operator">=</span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ThemeContext<span class="token punctuation">.</span>Consumer<span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="createref--forwardref"><a href="#createref--forwardref" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>createRef / forwardRef</h3>\n<p>React16 è§„èŒƒäº† Ref çš„è·å–æ–¹å¼ï¼Œé€šè¿‡ React.createRef å–å¾— Ref å¯¹è±¡ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11804873556499284000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// before React 16\nÂ·Â·Â·\n\n  componentDidMount() {\n    const el = this.refs.myRef\n  }\n\n  render() {\n    return <div ref=&quot;myRef&quot; />\n  }\n\nÂ·Â·Â·\n\n// React 16+\n  constructor(props) {\n    super(props)\n\n    this.myRef = React.createRef()\n  }\n\n  render() {\n    return <div ref={this.myRef} />\n  }\nÂ·Â·Â·`, `11804873556499284000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// before React 16</span>\nÂ·Â·Â·\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> el <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>myRef\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token string">"myRef"</span> <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">}</span>\n\nÂ·Â·Â·\n\n<span class="token comment">// React 16+</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>myRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">}</span>\nÂ·Â·Â·</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>React.forwardRef æ˜¯ Ref çš„è½¬å‘, å®ƒèƒ½å¤Ÿè®©çˆ¶ç»„ä»¶è®¿é—®åˆ°å­ç»„ä»¶çš„ Refï¼Œä»è€Œæ“ä½œå­ç»„ä»¶çš„ DOMã€‚ React.forwardRef æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å‚æ•°æœ‰ props å’Œ refã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6292867638043376000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const TextInput = React.forwardRef((props, ref) => <input type=\'text\' placeholder=\'Hello forwardRef\' ref={ref} />);\n\nconst inputRef = React.createRef();\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.myRef = React.createRef();\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    alert(\'input value is:\' + inputRef.current.value);\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <TextInput ref={inputRef} />\n        <button type=\'submit\'>Submit</button>\n      </form>\n    );\n  }\n}`, `6292867638043376000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> TextInput <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">\'text\'</span> placeholder<span class="token operator">=</span><span class="token string">\'Hello forwardRef\'</span> ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> inputRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>myRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">\'input value is:\'</span> <span class="token operator">+</span> inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>TextInput ref<span class="token operator">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">\'submit\'</span><span class="token operator">></span>Submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ›´æ–°"><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0%E7%9A%84%E6%9B%B4%E6%96%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ›´æ–°</h3>\n<p>React16 é‡‡ç”¨äº†æ–°çš„å†…æ ¸æ¶æ„ Fiberï¼ŒFiber å°†ç»„ä»¶æ›´æ–°åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šRender Parse å’Œ Commit Parseï¼Œå› æ­¤ React ä¹Ÿå¼•å…¥äº† getDerivedStateFromProps ã€ getSnapshotBeforeUpdate åŠ componentDidCatch ç­‰ä¸‰ä¸ªå…¨æ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚åŒæ—¶ä¹Ÿå°† componentWillMountã€componentWillReceiveProps å’Œ componentWillUpdate æ ‡è®°ä¸ºä¸å®‰å…¨çš„æ–¹æ³•ã€‚</p>\n<h4 id="static-getderivedstatefrompropsnextprops-prevstate"><a href="#static-getderivedstatefrompropsnextprops-prevstate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>static getDerivedStateFromProps(nextProps, prevState)</h4>\n<p>getDerivedStateFromProps(nextProps, prevState) å…¶ä½œç”¨æ˜¯æ ¹æ®ä¼ é€’çš„ props æ¥æ›´æ–° stateã€‚å®ƒçš„ä¸€å¤§ç‰¹ç‚¹æ˜¯æ— å‰¯ä½œç”¨ï¼Œç”±äºå¤„åœ¨ Render Phase é˜¶æ®µï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡çš„æ›´æ–°éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°ï¼Œ åœ¨ API è®¾è®¡ä¸Šé‡‡ç”¨äº†é™æ€æ–¹æ³•ï¼Œä½¿å…¶æ— æ³•è®¿é—®å®ä¾‹ã€æ— æ³•é€šè¿‡ ref è®¿é—®åˆ° DOM å¯¹è±¡ç­‰ï¼Œä¿è¯äº†è¯¥å‡½æ•°çš„çº¯ç²¹é«˜æ•ˆã€‚</p>\n<p>ä¸ºäº†é…åˆæœªæ¥çš„ React å¼‚æ­¥æ¸²æŸ“æœºåˆ¶ï¼ŒReact v16.4 å¯¹ getDerivedStateFromProps åšäº†ä¸€äº›æ”¹å˜ï¼Œ ä½¿å…¶ä¸ä»…åœ¨ props æ›´æ–°æ—¶ä¼šè¢«è°ƒç”¨ï¼ŒsetState æ—¶ä¹Ÿä¼šè¢«è§¦å‘ã€‚</p>\n<ul>\n<li>å¦‚æœæ”¹å˜ props çš„åŒæ—¶ï¼Œæœ‰å‰¯ä½œç”¨çš„äº§ç”Ÿï¼Œè¿™æ—¶åº”è¯¥ä½¿ç”¨ componentDidUpdateï¼›</li>\n<li>å¦‚æœæƒ³è¦æ ¹æ® props è®¡ç®—å±æ€§ï¼Œåº”è¯¥è€ƒè™‘å°†ç»“æœ memoization åŒ–ï¼›</li>\n<li>å¦‚æœæƒ³è¦æ ¹æ® props å˜åŒ–æ¥é‡ç½®æŸäº›çŠ¶æ€ï¼Œåº”è¯¥è€ƒè™‘ä½¿ç”¨å—æ§ç»„ä»¶ï¼›</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27970418733919076000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`static getDerivedStateFromProps(props, state) {\n  if (props.value !== state.controlledValue) {\n    return {\n      controlledValue: props.value,\n    };\n  }\n\n  return null;\n}`, `27970418733919076000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>value <span class="token operator">!==</span> state<span class="token punctuation">.</span>controlledValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span>\n      controlledValue<span class="token punctuation">:</span> props<span class="token punctuation">.</span>value<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="getsnapshotbeforeupdateprevprops-prevstate"><a href="#getsnapshotbeforeupdateprevprops-prevstate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>getSnapshotBeforeUpdate(prevProps, prevState)</h4>\n<p>getSnapshotBeforeUpdate(prevProps, prevState) ä¼šåœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰è·å–ä¸€ä¸ª snapshotï¼Œå¹¶å¯ä»¥å°†è®¡ç®—å¾—çš„å€¼æˆ–ä» DOM å¾—åˆ°çš„ä¿¡æ¯ä¼ é€’åˆ° componentDidUpdate(prevProps, prevState, snapshot) å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå¸¸å¸¸ç”¨äº scroll ä½ç½®å®šä½ç­‰åœºæ™¯ã€‚</p>\n<h4 id="componentdidcatcherror-info"><a href="#componentdidcatcherror-info" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>componentDidCatch(error, info)</h4>\n<p>componentDidCatch å‡½æ•°è®©å¼€å‘è€…å¯ä»¥è‡ªä¸»å¤„ç†é”™è¯¯ä¿¡æ¯ï¼Œè¯¸å¦‚é”™è¯¯å±•ç¤ºï¼Œä¸ŠæŠ¥é”™è¯¯ç­‰ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºè‡ªå·±çš„ Error Boundary æ¥æ•è·é”™è¯¯ã€‚</p>\n<h4 id="componentwillmountnextprops-nextstate"><a href="#componentwillmountnextprops-nextstate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>componentWillMount(nextProps, nextState)</h4>\n<p>componentWillMount è¢«æ ‡è®°ä¸ºä¸å®‰å…¨ï¼Œå› ä¸ºåœ¨ componentWillMount ä¸­è·å–å¼‚æ­¥æ•°æ®æˆ–è¿›è¡Œäº‹ä»¶è®¢é˜…ç­‰æ“ä½œä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ— æ³•ä¿è¯åœ¨ componentWillUnmount ä¸­å–æ¶ˆæ‰ç›¸åº”çš„äº‹ä»¶è®¢é˜…ï¼Œæˆ–è€…å¯¼è‡´å¤šæ¬¡é‡å¤è·å–å¼‚æ­¥æ•°æ®ç­‰é—®é¢˜ã€‚</p>\n<h4 id="componentwillreceivepropsnextprops--componentwillupdatenextprops-nextstate"><a href="#componentwillreceivepropsnextprops--componentwillupdatenextprops-nextstate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>componentWillReceiveProps(nextProps) / componentWillUpdate(nextProps, nextState)</h4>\n<p>componentWillReceiveProps / componentWillUpdate è¢«æ ‡è®°ä¸ºä¸å®‰å…¨ï¼Œä¸»è¦æ˜¯å› ä¸ºæ“ä½œ props å¼•èµ·çš„ re-render é—®é¢˜ï¼Œå¹¶ä¸”å¯¹ DOM çš„æ›´æ–°æ“ä½œä¹Ÿå¯èƒ½å¯¼è‡´é‡æ–°æ¸²æŸ“ã€‚</p>\n<h3 id="strict-mode"><a href="#strict-mode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Strict Mode</h3>\n<p>StrictMode å¯ä»¥åœ¨å¼€å‘é˜¶æ®µå¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œå‘ç°åº”ç”¨å­˜åœ¨çš„æ½œåœ¨é—®é¢˜ï¼Œæå‡åº”ç”¨çš„å¥å£®æ€§ï¼Œä¸»è¦èƒ½æ£€æµ‹ä¸‹åˆ—é—®é¢˜ï¼š</p>\n<ul>\n<li>è¯†åˆ«è¢«æ ‡å¿—ä½ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</li>\n<li>å¯¹å¼ƒç”¨çš„ API è¿›è¡Œè­¦å‘Š</li>\n<li>æ¢æµ‹æŸäº›äº§ç”Ÿå‰¯ä½œç”¨çš„æ–¹æ³•</li>\n<li>æ£€æµ‹æ˜¯å¦ä½¿ç”¨ findDOMNode</li>\n<li>æ£€æµ‹æ˜¯å¦é‡‡ç”¨äº†è€çš„ Context API</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51946141646076160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class App extends React.Component {\n  render() {\n    return (\n      <div>\n        <React.StrictMode>\n          <ComponentA />\n        </React.StrictMode>\n      </div>\n    );\n  }\n}`, `51946141646076160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">></span>\n          <span class="token operator">&lt;</span>ComponentA <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="react-v164"><a href="#react-v164" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.4</h2>\n<h3 id="pointer-events"><a href="#pointer-events" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pointer Events</h3>\n<p>æŒ‡é’ˆäº‹ä»¶æ˜¯ä¸ºæŒ‡é’ˆè®¾å¤‡è§¦å‘çš„ DOM äº‹ä»¶ã€‚å®ƒä»¬æ—¨åœ¨åˆ›å»ºå•ä¸ª DOM äº‹ä»¶æ¨¡å‹æ¥å¤„ç†æŒ‡å‘è¾“å…¥è®¾å¤‡ï¼Œä¾‹å¦‚é¼ æ ‡ï¼Œç¬” / è§¦æ§ç¬”æˆ–è§¦æ‘¸ï¼ˆä¾‹å¦‚ä¸€ä¸ªæˆ–å¤šä¸ªæ‰‹æŒ‡ï¼‰ã€‚æŒ‡é’ˆæ˜¯ä¸€ä¸ªä¸ç¡¬ä»¶æ— å…³çš„è®¾å¤‡ï¼Œå¯ä»¥å®šä½ä¸€ç»„ç‰¹å®šçš„å±å¹•åæ ‡ã€‚æ‹¥æœ‰æŒ‡é’ˆçš„å•ä¸ªäº‹ä»¶æ¨¡å‹å¯ä»¥ç®€åŒ–åˆ›å»º Web ç«™ç‚¹å’Œåº”ç”¨ç¨‹åºï¼Œå¹¶æä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæ— è®ºç”¨æˆ·çš„ç¡¬ä»¶å¦‚ä½•ã€‚ä½†æ˜¯ï¼Œå¯¹äºéœ€è¦ç‰¹å®šäºè®¾å¤‡çš„å¤„ç†çš„åœºæ™¯ï¼ŒæŒ‡é’ˆäº‹ä»¶å®šä¹‰äº†ä¸€ä¸ª pointerType å±æ€§ï¼Œç”¨äºæ£€æŸ¥äº§ç”Ÿäº‹ä»¶çš„è®¾å¤‡ç±»å‹ã€‚</p>\n<p>React æ–°å¢ onPointerDown / onPointerMove / onPointerUp / onPointerCancel / onGotPointerCapture / onLostPointerCapture / onPointerEnter / onPointerLeave / onPointerOver / onPointerOut ç­‰æŒ‡é’ˆäº‹ä»¶ã€‚</p>\n<p>è¿™äº›äº‹ä»¶åªèƒ½åœ¨æ”¯æŒ æŒ‡é’ˆäº‹ä»¶ è§„èŒƒçš„æµè§ˆå™¨ä¸­å·¥ä½œã€‚å¦‚æœåº”ç”¨ç¨‹åºä¾èµ–äºæŒ‡é’ˆäº‹ä»¶ï¼Œå»ºè®®ä½¿ç”¨ç¬¬ä¸‰æ–¹æŒ‡é’ˆäº‹ä»¶ polyfillã€‚</p>\n<h2 id="react-v165"><a href="#react-v165" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.5</h2>\n<h3 id="profiler"><a href="#profiler" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Profiler</h3>\n<p>React 16.5 æ·»åŠ äº†å¯¹æ–°çš„ profiler DevTools æ’ä»¶çš„æ”¯æŒã€‚è¿™ä¸ªæ’ä»¶ä½¿ç”¨ React çš„ Profiler å®éªŒæ€§ API å»æ”¶é›†æ‰€æœ‰ component çš„æ¸²æŸ“æ—¶é—´ï¼Œç›®çš„æ˜¯ä¸ºäº†æ‰¾å‡º React App çš„æ€§èƒ½ç“¶é¢ˆï¼Œå®ƒå°†ä¼šå’Œ React å³å°†å‘å¸ƒçš„ æ—¶é—´ç‰‡ ç‰¹æ€§å®Œå…¨å…¼å®¹ã€‚</p>\n<h2 id="react-v166"><a href="#react-v166" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.6</h2>\n<h3 id="memo"><a href="#memo" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>memo</h3>\n<p>React.memo() åªèƒ½ä½œç”¨åœ¨ç®€å•çš„å‡½æ•°ç»„ä»¶ä¸Šï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå¯ä»¥è‡ªåŠ¨å¸®åŠ©ç»„ä»¶æ‰§è¡Œ shouldComponentUpdate()ï¼Œä½†åªæ˜¯æ‰§è¡Œæµ…æ¯”è¾ƒï¼Œå…¶æ„ä¹‰å’Œä»·å€¼æœ‰é™ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33057164806248428000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const MemoizedComponent = React.memo((props) => {\n  /* åªåœ¨ props æ›´æ”¹çš„æ—¶å€™æ‰ä¼šé‡æ–°æ¸²æŸ“ */\n});`, `33057164806248428000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> MemoizedComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token comment">/* åªåœ¨ props æ›´æ”¹çš„æ—¶å€™æ‰ä¼šé‡æ–°æ¸²æŸ“ */</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h3 id="lazy--suspense"><a href="#lazy--suspense" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>lazy / Suspense</h3>\n<p>React.lazy() æä¾›äº†åŠ¨æ€ import ç»„ä»¶çš„èƒ½åŠ›ï¼Œå®ç°ä»£ç åˆ†å‰²ã€‚</p>\n<p>Suspense ä½œç”¨æ˜¯åœ¨ç­‰å¾…ç»„ä»¶æ—¶ suspendï¼ˆæš‚åœï¼‰æ¸²æŸ“ï¼Œå¹¶æ˜¾ç¤ºåŠ è½½æ ‡è¯†ã€‚</p>\n<p>ç›®å‰ React v16.6 ä¸­ Suspense åªæ”¯æŒä¸€ä¸ªåœºæ™¯ï¼Œå³ä½¿ç”¨ React.lazy() å’Œ &#x3C;React.Suspense> å®ç°çš„åŠ¨æ€åŠ è½½ç»„ä»¶ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47817750946115670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import React, { lazy, Suspense } from \'react\';\nconst OtherComponent = lazy(() => import(\'./OtherComponent\'));\n\nfunction MyComponent() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <OtherComponent />\n    </Suspense>\n  );\n}`, `47817750946115670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> lazy<span class="token punctuation">,</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> OtherComponent <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">\'./OtherComponent\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">></span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>OtherComponent <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="static-contexttype"><a href="#static-contexttype" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>static contextType</h3>\n<p>static contextType ä¸º Context API æä¾›äº†æ›´åŠ ä¾¿æ·çš„ä½¿ç”¨ä½“éªŒï¼Œå¯ä»¥é€šè¿‡ this.context æ¥è®¿é—® Contextã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58519870562119930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const MyContext = React.createContext();\n\nclass MyClass extends React.Component {\n  static contextType = MyContext;\n\n  componentDidMount() {\n    const value = this.context;\n  }\n\n  componentDidUpdate() {\n    const value = this.context;\n  }\n\n  componentWillUnmount() {\n    const value = this.context;\n  }\n\n  render() {\n    const value = this.context;\n  }\n}`, `58519870562119930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> MyContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token keyword">static</span> contextType <span class="token operator">=</span> MyContext<span class="token punctuation">;</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="getderivedstatefromerror"><a href="#getderivedstatefromerror" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>getDerivedStateFromError</h3>\n<p>static getDerivedStateFromError(error) å…è®¸å¼€å‘è€…åœ¨ render å®Œæˆä¹‹å‰æ¸²æŸ“ Fallback UIï¼Œè¯¥ç”Ÿå‘½å‘¨æœŸå‡½æ•°è§¦å‘çš„æ¡ä»¶æ˜¯å­ç»„ä»¶æŠ›å‡ºé”™è¯¯ï¼ŒgetDerivedStateFromError æ¥æ”¶åˆ°è¿™ä¸ªé”™è¯¯å‚æ•°åæ›´æ–° stateã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3850877957194720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class ErrorBoundary extends React.Component {\n  state = { hasError: false };\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n    logErrorToMyService(error, info);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return this.props.children;\n  }\n}`, `3850877957194720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ErrorBoundary</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span> hasError<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// Update state so the next render will show the fallback UI.</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span> hasError<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// You can also log the error to an error reporting service</span>\n    <span class="token function">logErrorToMyService</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// You can render any custom fallback UI</span>\n      <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Something went wrong<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="react-v167ï¼ˆq1-2019ï¼‰"><a href="#react-v167%EF%BC%88q1-2019%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.7ï¼ˆ~Q1 2019ï¼‰</h2>\n<h3 id="hooks"><a href="#hooks" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hooks</h3>\n<p>Hooks è¦è§£å†³çš„æ˜¯çŠ¶æ€é€»è¾‘å¤ç”¨é—®é¢˜ï¼Œä¸”ä¸ä¼šäº§ç”Ÿ JSX åµŒå¥—åœ°ç‹±ï¼Œå…¶ç‰¹æ€§å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>å¤šä¸ªçŠ¶æ€ä¸ä¼šäº§ç”ŸåµŒå¥—ï¼Œä¾ç„¶æ˜¯å¹³é“ºå†™æ³•ï¼›</li>\n<li>Hooks å¯ä»¥å¼•ç”¨å…¶ä»– Hooksï¼›</li>\n<li>æ›´å®¹æ˜“å°†ç»„ä»¶çš„ UI ä¸çŠ¶æ€åˆ†ç¦»ï¼›</li>\n</ul>\n<p>Hooks å¹¶ä¸æ˜¯é€šè¿‡ Proxy æˆ–è€… getters å®ç°ï¼Œè€Œæ˜¯é€šè¿‡æ•°ç»„å®ç°ï¼Œæ¯æ¬¡ useState éƒ½ä¼šæ”¹å˜ä¸‹æ ‡ï¼Œå¦‚æœ useState è¢«åŒ…è£¹åœ¨ condition ä¸­ï¼Œé‚£æ¯æ¬¡æ‰§è¡Œçš„ä¸‹æ ‡å°±å¯èƒ½å¯¹ä¸ä¸Šï¼Œå¯¼è‡´ useState å¯¼å‡ºçš„ setter æ›´æ–°é”™æ•°æ®ã€‚</p>\n<p>æ›´å¤š Hooks ä½¿ç”¨åœºæ™¯å¯ä»¥é˜…è¯»ä¸‹åˆ—æ–‡ç« ï¼š</p>\n<ul>\n<li><a href="https://zhuanlan.zhihu.com/p/50274018" target="_blank" rel="nofollow noreferrer noopener">ç²¾è¯»ã€Šæ€ä¹ˆç”¨ React Hooks é€ è½®å­ã€‹</a></li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66679754616581490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function App() {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <>\n      <Button type=\'primary\' onClick={() => setOpen(true)}>\n        Open Modal\n      </Button>\n      <Modal visible={open} onOk={() => setOpen(false)} onCancel={() => setOpen(false)} />\n    </>\n  );\n}`, `66679754616581490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>open<span class="token punctuation">,</span> setOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">\'primary\'</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>\n        Open Modal\n      <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span>\n      <span class="token operator">&lt;</span>Modal visible<span class="token operator">=</span><span class="token punctuation">{</span>open<span class="token punctuation">}</span> onOk<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span> onCancel<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="react-v168ï¼ˆq2-2019ï¼‰"><a href="#react-v168%EF%BC%88q2-2019%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.8ï¼ˆ~Q2 2019ï¼‰</h2>\n<h3 id="concurrent-rendering"><a href="#concurrent-rendering" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Concurrent Rendering</h3>\n<p>Concurrent Rendering å¹¶å‘æ¸²æŸ“æ¨¡å¼æ˜¯åœ¨ä¸é˜»å¡ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹æ¸²æŸ“ç»„ä»¶æ ‘ï¼Œä½¿ React åº”ç”¨å“åº”æ€§æ›´æµç•…ï¼Œå®ƒå…è®¸ React ä¸­æ–­è€—æ—¶çš„æ¸²æŸ“ï¼Œå»å¤„ç†é«˜ä¼˜å…ˆçº§çš„äº‹ä»¶ï¼Œå¦‚ç”¨æˆ·è¾“å…¥ç­‰ï¼Œè¿˜èƒ½åœ¨é«˜é€Ÿè¿æ¥æ—¶è·³è¿‡ä¸å¿…è¦çš„åŠ è½½çŠ¶æ€ï¼Œç”¨ä»¥æ”¹å–„ Suspense çš„ç”¨æˆ·ä½“éªŒã€‚</p>\n<p>ç›®å‰ Concurrent Rendering å°šæœªæ­£å¼å‘å¸ƒï¼Œä¹Ÿæ²¡æœ‰è¯¦ç»†ç›¸å…³æ–‡æ¡£ï¼Œéœ€è¦ç­‰å¾… React å›¢é˜Ÿçš„æ­£å¼å‘å¸ƒã€‚</p>\n<h2 id="react-v169ï¼ˆmid-2019ï¼‰"><a href="#react-v169%EF%BC%88mid-2019%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React v16.9ï¼ˆ~mid 2019ï¼‰</h2>\n<h3 id="suspense-for-data-fetching"><a href="#suspense-for-data-fetching" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Suspense for Data Fetching</h3>\n<p>Suspense é€šè¿‡ ComponentDidCatch å®ç°ç”¨åŒæ­¥çš„æ–¹å¼ç¼–å†™å¼‚æ­¥æ•°æ®çš„è¯·æ±‚ï¼Œå¹¶ä¸”æ²¡æœ‰ä½¿ç”¨ yield / async / awaitï¼Œå…¶æµç¨‹ï¼šè°ƒç”¨ render å‡½æ•° -> å‘ç°æœ‰å¼‚æ­¥è¯·æ±‚ -> æš‚åœæ¸²æŸ“ï¼Œç­‰å¾…å¼‚æ­¥è¯·æ±‚ç»“æœ -> æ¸²æŸ“å±•ç¤ºæ•°æ®ã€‚</p>\n<p>æ— è®ºæ˜¯ä»€ä¹ˆå¼‚å¸¸ï¼ŒJavaScript éƒ½èƒ½æ•è·ï¼ŒReact å°±æ˜¯åˆ©ç”¨äº†è¿™ä¸ªè¯­è¨€ç‰¹æ€§ï¼Œé€šè¿‡ ComponentDidCatch æ•è·äº†æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€render å‡½æ•°ç­‰ï¼Œä»¥åŠäº‹ä»¶å›è°ƒä¸­çš„é”™è¯¯ã€‚å¦‚æœæœ‰ç¼“å­˜åˆ™è¯»å–ç¼“å­˜æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ promiseï¼Œåˆ©ç”¨å¼‚å¸¸åšé€»è¾‘æµæ§åˆ¶æ˜¯ä¸€ç§æ‹¥æœ‰è¾ƒæ·±çš„è°ƒç”¨å †æ ˆæ—¶çš„æ‰‹æ®µï¼Œå®ƒæ˜¯åœ¨è™šæ‹Ÿ DOM æ¸²æŸ“å±‚åšçš„æš‚åœæ‹¦æˆªï¼Œä»£ç å¯åœ¨æœåŠ¡ç«¯å¤ç”¨ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85454740757805480000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import { fetchMovieDetails } from \'../api\';\nimport { createFetch } from \'../future\';\n\nconst movieDetailsFetch = createFetch(fetchMovieDetails);\n\nfunction MovieDetails(props) {\n  const movie = movieDetailsFetch.read(props.id);\n\n  return (\n    <div>\n      <MoviePoster src={movie.poster} />\n      <MovieMetrics {...movie} />\n    </div>\n  );\n}`, `85454740757805480000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> fetchMovieDetails <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'../api\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> createFetch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'../future\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> movieDetailsFetch <span class="token operator">=</span> <span class="token function">createFetch</span><span class="token punctuation">(</span>fetchMovieDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">MovieDetails</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> movie <span class="token operator">=</span> movieDetailsFetch<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span>MoviePoster src<span class="token operator">=</span><span class="token punctuation">{</span>movie<span class="token punctuation">.</span>poster<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>MovieMetrics <span class="token punctuation">{</span><span class="token operator">...</span>movie<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="æ€»ç»“"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ€»ç»“</h2>\n<p>ä» React16 çš„ä¸€ç³»åˆ—æ›´æ–°å’Œæ–°ç‰¹æ€§ä¸­æˆ‘ä»¬å¯ä»¥çª¥è§ï¼ŒReact å·²ç»ä¸ä»…ä»…åªåœ¨åšä¸€ä¸ª View çš„å±•ç¤ºåº“ï¼Œè€Œæ˜¯æƒ³è¦å‘å±•æˆä¸ºä¸€ä¸ªåŒ…å« View / æ•°æ®ç®¡ç† / æ•°æ®è·å– ç­‰åœºæ™¯çš„å‰ç«¯æ¡†æ¶ï¼Œä»¥ React å›¢é˜Ÿçš„æŠ€æœ¯å®åŠ›ä»¥åŠæƒ³æ³•ï¼Œç¬”è€…è¿˜æ˜¯å¾ˆæœŸå¾…å’Œçœ‹å¥½ React çš„æœªæ¥ï¼Œä¸è¿‡å®ƒæ¸æ¸åœ°å·²ç»å¯¹å¼€å‘æ–°æ‰‹ä»¬ä¸å¤ªå‹å¥½äº†ã€‚</p>',
id:"/github/workspace/blog/React16æ–°ç‰¹æ€§/index.md absPath of file >>> MarkdownRemark",timeToRead:11,frontmatter:{date:"2019-06-04 20:43:46",path:"/react-16-new-feature/",tags:"å‰ç«¯, React",title:"React16æ–°ç‰¹æ€§",draft:null}},{excerpt:"å¼•è¨€ å¦‚ä»Šï¼ŒJavascript æ¨¡å—åŒ–è§„èŒƒéå¸¸æ–¹ä¾¿ã€è‡ªç„¶ï¼Œä½†è¿™ä¸ªæ–°è§„èŒƒä»…æ‰§è¡Œäº† 2 å¹´ï¼Œå°±åœ¨ 4 å¹´å‰ï¼Œjs çš„æ¨¡å—åŒ–è¿˜åœç•™åœ¨è¿è¡Œæ—¶æ”¯æŒï¼Œ10 å¹´å‰ï¼Œé€šè¿‡åç«¯æ¨¡ç‰ˆå®šä¹‰ã€æ³¨é‡Šå®šä¹‰æ¨¡å—ä¾èµ–ã€‚å¯¹ç»å†è¿‡æ¥çš„äººæ¥è¯´ï¼Œå†å²çš„æ¨¡å—åŒ–æ–¹å¼è¿˜åœç•™åœ¨è„‘æµ·ä¸­ï¼Œåè€Œæ–°ä¸Šæ‰‹çš„åŒå­¦ä¼šæ›´å¿«æ¥å—ç°ä»£çš„æ¨¡å—åŒ–è§„èŒƒã€‚ ä½†ä¸ºä»€ä¹ˆè¦äº†è§£ Javascript æ¨¡å—åŒ–å‘å±•çš„å†å²å‘¢ï¼Ÿå› ä¸ºå‡¡äº‹éƒ½æœ‰ä¸¤é¢æ€§ï¼Œäº†è§£ Javascript æ¨¡å—åŒ–è§„èŒƒï¼Œæœ‰åˆ©äºæˆ‘ä»¬æ€è€ƒå‡ºæ›´å¥½çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œçºµè§‚å†å²ï¼Œä» 199â€¦",html:'<h1 id="å¼•è¨€"><a href="#%E5%BC%95%E8%A8%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å¼•è¨€</h1>\n<blockquote>\n<p>å¦‚ä»Šï¼ŒJavascript æ¨¡å—åŒ–è§„èŒƒéå¸¸æ–¹ä¾¿ã€è‡ªç„¶ï¼Œä½†è¿™ä¸ªæ–°è§„èŒƒä»…æ‰§è¡Œäº† 2 å¹´ï¼Œå°±åœ¨ 4 å¹´å‰ï¼Œjs çš„æ¨¡å—åŒ–è¿˜åœç•™åœ¨è¿è¡Œæ—¶æ”¯æŒï¼Œ10 å¹´å‰ï¼Œé€šè¿‡åç«¯æ¨¡ç‰ˆå®šä¹‰ã€æ³¨é‡Šå®šä¹‰æ¨¡å—ä¾èµ–ã€‚å¯¹ç»å†è¿‡æ¥çš„äººæ¥è¯´ï¼Œå†å²çš„æ¨¡å—åŒ–æ–¹å¼è¿˜åœç•™åœ¨è„‘æµ·ä¸­ï¼Œåè€Œæ–°ä¸Šæ‰‹çš„åŒå­¦ä¼šæ›´å¿«æ¥å—ç°ä»£çš„æ¨¡å—åŒ–è§„èŒƒã€‚</p>\n</blockquote>\n<p>ä½†ä¸ºä»€ä¹ˆè¦äº†è§£ Javascript æ¨¡å—åŒ–å‘å±•çš„å†å²å‘¢ï¼Ÿå› ä¸ºå‡¡äº‹éƒ½æœ‰ä¸¤é¢æ€§ï¼Œäº†è§£ Javascript æ¨¡å—åŒ–è§„èŒƒï¼Œæœ‰åˆ©äºæˆ‘ä»¬æ€è€ƒå‡ºæ›´å¥½çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œçºµè§‚å†å²ï¼Œä» 1999 å¹´å¼€å§‹ï¼Œæ¨¡å—åŒ–æ–¹æ¡ˆæœ€å¤šç»´æŒä¸¤å¹´ï¼Œå°±å‡ºç°äº†æ–°çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ¯”åŸæœ‰çš„æ¨¡å—åŒ–æ›´æ¸…æ™°ã€å¼ºå£®ï¼Œæˆ‘ä»¬ä¸èƒ½è¢«ç°ä»£æ¨¡å—åŒ–æ–¹å¼é™åˆ¶ä½æ€ç»´ï¼Œå› ä¸ºç°åœ¨çš„ ES2015 æ¨¡å—åŒ–æ–¹æ¡ˆè·ç¦»å‘å¸ƒä¹Ÿä»…ä»…è¿‡äº†ä¸¤å¹´ã€‚</p>\n<h1 id="å†…å®¹æ¦‚è¦"><a href="#%E5%86%85%E5%AE%B9%E6%A6%82%E8%A6%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å†…å®¹æ¦‚è¦</h1>\n<p><strong>ç›´æ¥å®šä¹‰ä¾èµ– (1999)</strong>: ç”±äºå½“æ—¶ js æ–‡ä»¶éå¸¸ç®€å•ï¼Œæ¨¡å—åŒ–æ–¹å¼éå¸¸ç®€å•ç²—æš´ â€”â€” é€šè¿‡å…¨å±€æ–¹æ³•å®šä¹‰ã€å¼•ç”¨æ¨¡å—ã€‚è¿™ç§å®šä¹‰æ–¹å¼ä¸ç°åœ¨çš„ commonjs éå¸¸ç¥ä¼¼ï¼ŒåŒºåˆ«æ˜¯ commonjs ä»¥æ–‡ä»¶ä½œä¸ºæ¨¡å—ï¼Œè€Œè¿™ç§æ–¹æ³•å¯ä»¥åœ¨ä»»ä½•æ–‡ä»¶ä¸­å®šä¹‰æ¨¡å—ï¼Œæ¨¡å—ä¸ä¸æ–‡ä»¶å…³è”ã€‚</p>\n<p><strong>é—­åŒ…æ¨¡å—åŒ–æ¨¡å¼ (2003)</strong>: ç”¨é—­åŒ…æ–¹å¼è§£å†³äº†å˜é‡æ±¡æŸ“é—®é¢˜ï¼Œé—­åŒ…å†…è¿”å›æ¨¡å—å¯¹è±¡ï¼Œåªéœ€å¯¹å¤–æš´éœ²ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</p>\n<p><strong>æ¨¡ç‰ˆä¾èµ–å®šä¹‰ (2006)</strong>: è¿™æ—¶å€™å¼€å§‹æµè¡Œåç«¯æ¨¡ç‰ˆè¯­æ³•ï¼Œé€šè¿‡åç«¯è¯­æ³•èšåˆ js æ–‡ä»¶ï¼Œä»è€Œå®ç°ä¾èµ–åŠ è½½ï¼Œè¯´å®è¯ï¼Œç°åœ¨ go è¯­è¨€ç­‰æ¨¡ç‰ˆè¯­æ³•ä¹Ÿå¾ˆæµè¡Œè¿™ç§æ–¹å¼ï¼Œå†™åç«¯ä»£ç çš„æ—¶å€™ä¸è§‰å¾—ï¼Œå›å¤´çœ‹çœ‹ï¼Œè¿˜æ˜¯æŒ‚åœ¨å¯ç»´æŠ¤æ€§ä¸Šã€‚</p>\n<p><strong>æ³¨é‡Šä¾èµ–å®šä¹‰ (2006)</strong>: å‡ ä¹å’Œæ¨¡ç‰ˆä¾èµ–å®šä¹‰åŒæ—¶å‡ºç°ï¼Œä¸ 1999 å¹´æ–¹æ¡ˆä¸åŒçš„ï¼Œä¸ä»…ä»…æ˜¯æ¨¡å—å®šä¹‰æ–¹å¼ï¼Œè€Œæ˜¯ç»ˆäºä»¥æ–‡ä»¶ä¸ºå•ä½å®šä¹‰æ¨¡å—äº†ï¼Œé€šè¿‡ <a href="https://github.com/bevacqua/lazyjs" target="_blank" rel="nofollow noreferrer noopener">lazyjs</a> åŠ è½½æ–‡ä»¶ï¼ŒåŒæ—¶è¯»å–æ–‡ä»¶æ³¨é‡Šï¼Œç»§ç»­é€’å½’åŠ è½½å‰©ä¸‹çš„æ–‡ä»¶ã€‚</p>\n<p><strong>å¤–éƒ¨ä¾èµ–å®šä¹‰ (2007)</strong>: è¿™ç§å®šä¹‰æ–¹å¼åœ¨ cocos2d-js å¼€å‘ä¸­æ™®éä½¿ç”¨ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¾èµ–æŠ½å‡ºå•ç‹¬æ–‡ä»¶å®šä¹‰ï¼Œè¿™ç§æ–¹å¼ä¸åˆ©äºé¡¹ç›®ç®¡ç†ï¼Œæ¯•ç«Ÿä¾èµ–æŠ½åˆ°ä»£ç ä¹‹å¤–ï¼Œæˆ‘æ˜¯ä¸æ˜¯å¾—ä¸¤å¤´æ‰¾å‘¢ï¼Ÿæ‰€ä»¥æ‰æœ‰é€šè¿‡ webpack æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶çš„æ–¹å¼æš´åŠ›æ›¿æ¢ä¸º commonjs çš„æ–¹å¼å‡ºç°ã€‚</p>\n<p><strong>Sandbox æ¨¡å¼ (2009)</strong>: è¿™ç§æ¨¡å—åŒ–æ–¹å¼å¾ˆç®€å•ï¼Œæš´åŠ›ï¼Œå°†æ‰€æœ‰æ¨¡å—å¡åˆ°ä¸€ä¸ª <code class="language-text">sanbox</code> å˜é‡ä¸­ï¼Œç¡¬ä¼¤æ˜¯æ— æ³•è§£å†³å†²çªé—®é¢˜ï¼Œæ¯•ç«Ÿéƒ½å¡åˆ°ä¸€ä¸ª <code class="language-text">sandbox</code> å¯¹è±¡é‡Œï¼Œè€Œ <code class="language-text">Sandbox</code> å¯¹è±¡ä¹Ÿéœ€è¦å®šä¹‰åœ¨å…¨å±€ï¼Œå­˜åœ¨è¢«è¦†ç›–çš„é£é™©ã€‚æ¨¡å—åŒ–éœ€è¦ä¿è¯å…¨å±€å˜é‡å°½é‡å¹²å‡€ï¼Œç›®å‰ä¸ºæ­¢çš„æ¨¡å—åŒ–æ–¹æ¡ˆéƒ½æ²¡æœ‰å¾ˆå¥½çš„åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>\n<p><strong>ä¾èµ–æ³¨å…¥ (2009)</strong>: å°±æ˜¯å¤§å®¶ç†ŸçŸ¥çš„ angular1.0ï¼Œä¾èµ–æ³¨å…¥çš„æ€æƒ³ç°åœ¨å·²å¹¿æ³›è¿ç”¨åœ¨ reactã€vue ç­‰æµè¡Œæ¡†æ¶ä¸­ã€‚ä½†ä¾èµ–æ³¨å…¥å’Œè§£å†³æ¨¡å—åŒ–é—®é¢˜è¿˜å·®å¾—è¿œã€‚</p>\n<p><strong>CommonJS (2009)</strong>: çœŸæ­£è§£å†³æ¨¡å—åŒ–é—®é¢˜ï¼Œä» node ç«¯é€æ¸å‘åŠ›åˆ°å‰ç«¯ï¼Œå‰ç«¯éœ€è¦ä½¿ç”¨æ„å»ºå·¥å…·æ¨¡æ‹Ÿã€‚</p>\n<p><strong>Amd (2009)</strong>: éƒ½æ˜¯åŒä¸€æ—¶æœŸçš„äº§ç‰©ï¼Œè¿™ä¸ªæ–¹æ¡ˆä¸»è¦è§£å†³å‰ç«¯åŠ¨æ€åŠ è½½ä¾èµ–ï¼Œç›¸æ¯” commonJsï¼Œä½“ç§¯æ›´å°ï¼ŒæŒ‰éœ€åŠ è½½ã€‚</p>\n<p><strong>Umd (2011)</strong>: å…¼å®¹äº† CommonJS ä¸ Amdï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¦‚æœåœ¨ commonjs ç¯å¢ƒï¼ˆå­˜åœ¨ <code class="language-text">module.exports</code>ï¼Œä¸å­˜åœ¨ <code class="language-text">define</code>ï¼‰ï¼Œå°†å‡½æ•°æ‰§è¡Œç»“æœäº¤ç»™ <code class="language-text">module.exports</code> å®ç° Commonjsï¼Œå¦åˆ™ç”¨ Amd ç¯å¢ƒçš„ <code class="language-text">define</code>ï¼Œå®ç° Amdã€‚</p>\n<p><strong>Labeled Modules (2012)</strong>: å’Œ CommonJS å¾ˆåƒäº†ï¼Œæ²¡ä»€ä¹ˆç¡¬ä¼¤ï¼Œä½†ç”Ÿä¸é€¢æ—¶ï¼Œç¢°ä¸Š CommonJS ä¸ Amdï¼Œé‚£åªæœ‰è¢«äººé—å¿˜çš„ä»½äº†ã€‚</p>\n<p><strong>YModules (2013)</strong>: æ—¢ç„¶éƒ½å‡ºäº† CommonJS Amdï¼Œæ–‡ç« è¿˜åˆ—å‡ºäº†æ­¤æ–¹æ¡ˆï¼Œä¸€å®šæœ‰å…¶ç‹¬åˆ°ä¹‹å¤„ã€‚å…¶æ ¸å¿ƒæ€æƒ³åœ¨äºä½¿ç”¨ <code class="language-text">provide</code> å–ä»£ <code class="language-text">return</code>ï¼Œå¯ä»¥æ§åˆ¶æ¨¡å—ç»“æŸæ—¶æœºï¼Œå¤„ç†å¼‚æ­¥ç»“æœï¼›æ‹¿åˆ°ç¬¬äºŒä¸ªå‚æ•° <code class="language-text">module</code>ï¼Œä¿®æ”¹å…¶ä»–æ¨¡å—çš„å®šä¹‰ï¼ˆè™½ç„¶å¾ˆæœ‰æ‹“å±•æ€§ï¼Œä½†ç”¨åœ¨é¡¹ç›®é‡Œæ˜¯ä¸ªæ…å±æ£ï¼‰ã€‚</p>\n<p><strong>ES2015 Modules (2015)</strong>: å°±æ˜¯æˆ‘ä»¬ç°åœ¨çš„æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œè¿˜æ²¡æœ‰è¢«æµè§ˆå™¨å®ç°ï¼Œå¤§éƒ¨åˆ†é¡¹ç›®å·²é€šè¿‡ <code class="language-text">babel</code> æˆ– <code class="language-text">typescript</code> æå‰ä½“éªŒã€‚</p>\n<h1 id="ç²¾è¯»"><a href="#%E7%B2%BE%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç²¾è¯»</h1>\n<p>æœ¬æ¬¡æå‡ºç‹¬åˆ°è§‚ç‚¹çš„åŒå­¦æœ‰ï¼š<a href="https://github.com/arcthur" target="_blank" rel="nofollow noreferrer noopener">æµå½¢</a>ï¼Œ<a href="https://github.com/ascoders" target="_blank" rel="nofollow noreferrer noopener">é»„å­æ¯…</a>ï¼Œ<a href="https://github.com/javie007" target="_blank" rel="nofollow noreferrer noopener">è‹é‡Œçº¦</a>ï¼Œ<a href="https://github.com/camsong" target="_blank" rel="nofollow noreferrer noopener">camsong</a>ï¼Œ<a href="https://github.com/jasonslyvia" target="_blank" rel="nofollow noreferrer noopener">æ¨æ£®</a>ï¼Œ<a href="https://github.com/BlackGanglion" target="_blank" rel="nofollow noreferrer noopener">æ·¡è‹</a>ï¼Œ<a href="https://github.com/fanhc019" target="_blank" rel="nofollow noreferrer noopener">ç•™å½±</a>ï¼Œç²¾è¯»ç”±æ­¤å½’çº³ã€‚</p>\n<h3 id="ä»è¯­è¨€å±‚é¢åˆ°æ–‡ä»¶å±‚é¢çš„æ¨¡å—åŒ–"><a href="#%E4%BB%8E%E8%AF%AD%E8%A8%80%E5%B1%82%E9%9D%A2%E5%88%B0%E6%96%87%E4%BB%B6%E5%B1%82%E9%9D%A2%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä»è¯­è¨€å±‚é¢åˆ°æ–‡ä»¶å±‚é¢çš„æ¨¡å—åŒ–</h3>\n<blockquote>\n<p>ä» 1999 å¹´å¼€å§‹ï¼Œæ¨¡å—åŒ–æ¢ç´¢éƒ½æ˜¯åŸºäºè¯­è¨€å±‚é¢çš„ä¼˜åŒ–ï¼ŒçœŸæ­£çš„é©å‘½ä» 2009 å¹´ CommonJS çš„å¼•å…¥å¼€å§‹ï¼Œå‰ç«¯å¼€å§‹å¤§é‡ä½¿ç”¨é¢„ç¼–è¯‘ã€‚</p>\n</blockquote>\n<p>è¿™ç¯‡æ–‡ç« æ‰€æä¾›çš„æ¨¡å—åŒ–å†å²çš„æ–¹æ¡ˆéƒ½æ˜¯é€»è¾‘æ¨¡å—åŒ–ï¼Œ<strong>ä» CommonJS æ–¹æ¡ˆå¼€å§‹å‰ç«¯æŠŠæœåŠ¡ç«¯çš„è§£å†³æ–¹æ¡ˆæ¬è¿‡æ¥ä¹‹åï¼Œç®—æ˜¯çœ‹åˆ°æ ‡å‡†ç‰©ç†ä¸é€»è¾‘ç»Ÿä¸€çš„æ¨¡å—åŒ–</strong>ã€‚ä½†ä¹‹åå‰ç«¯å·¥ç¨‹ä¸å¾—ä¸å¼•å…¥æ¨¡å—åŒ–æ„å»ºè¿™ä¸€æ­¥ã€‚æ­£æ˜¯è¿™ä¸€æ­¥ç»™å‰ç«¯å¼€å‘æ— ç–‘å¸¦æ¥äº†è¯¸å¤šçš„ä¸ä¾¿ï¼Œå°¤å…¶æ˜¯ç°åœ¨æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¸ºäº†ä¼˜åŒ–è¿™ä¸ªå·¥å…·å¸¦äº†å¾ˆå¤šé¢å¤–çš„æˆæœ¬ã€‚</p>\n<p>ä» CommonJS ä¹‹å‰å…¶å®éƒ½åªæ˜¯å°è£…ï¼Œå¹¶æ²¡æœ‰ä¸€å¥—æ¨¡å—åŒ–è§„èŒƒï¼Œè¿™ä¸ªå°±æœ‰äº›åƒç±»ä¸åŒ…çš„æ¦‚å¿µã€‚æˆ‘åœ¨ 10 å¹´å·¦å³ç”¨çš„æœ€å¤šçš„è¿˜æ˜¯ YUI2ï¼ŒYUI2 æ˜¯ç”¨ namespace æ¥åšæ¨¡å—åŒ–çš„ï¼Œä½†æœ‰å¾ˆå¤šé—®é¢˜æ²¡æœ‰è§£å†³ï¼Œæ¯”å¦‚å¤šç‰ˆæœ¬å…±å­˜ï¼Œå› æ­¤åæ¥ YUI3 å‡ºæ¥äº†ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67435522713687690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`YUI().use(\'node\', \'event\', function(Y) {\n  // The Node and Event modules are loaded and ready to use.\n  // Your code goes here!\n});`, `67435522713687690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                javascript å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token constant">YUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">\'node\'</span><span class="token punctuation">,</span> <span class="token string">\'event\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">Y</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// The Node and Event modules are loaded and ready to use.</span>\n  <span class="token comment">// Your code goes here!</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>YUI3 çš„ sandbox åƒæäº†å·®ä¸å¤šåŒæ—¶å‡ºç°çš„ AMD è§„èŒƒï¼Œä½†æ—©æœŸ yahoo åœ¨å‰ç«¯åœˆçš„å½±å“åŠ›è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œè€Œ requirejs åˆ° 2011 å¹´æ‰è¯ç”Ÿï¼Œå› æ­¤åœˆå­ä¸æ˜¯ç”¨ç€ YUI è¦ä¸å°±è‡ªå·±å°è£…ä¸€å¥— sandboxï¼Œå†…éƒ¨ä½¿ç”¨ jQueryã€‚</p>\n<p>ä¸ºä»€ä¹ˆæ¨¡å—åŒ–æ–¹æ¡ˆè¿™ä¹ˆæ™šæ‰æˆå‹ï¼Œå¯èƒ½æ—©æœŸåº”ç”¨çš„å¤æ‚åº¦éƒ½åœ¨åç«¯ï¼Œå‰ç«¯éƒ½æ˜¯éå¸¸ç®€å•é€»è¾‘ã€‚åæ¥ Ajax ç«äº†ä¹‹åï¼Œweb app æ¦‚å¿µçš„å¼€å§‹æµè¡Œï¼Œå‰ç«¯çš„å¤æ‚åº¦ä¹Ÿå‘ˆæŒ‡æ•°çº§ä¸Šæ¶¨ï¼Œåˆ°ä»Šå¤©å‡ ä¹å’Œåç«¯æ¥è¿‘ä¸€ä¸ªé‡çº§ã€‚<strong>å·¥ç¨‹å‘å±•åˆ°ä¸€å®šé˜¶æ®µï¼Œè¦å‡ºç°çš„å¿…ç„¶ä¼šå‡ºç°ã€‚</strong></p>\n<h3 id="å‰ç«¯ä¸‰å‰‘å®¢çš„æ¨¡å—åŒ–å±•æœ›"><a href="#%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96%E5%B1%95%E6%9C%9B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å‰ç«¯ä¸‰å‰‘å®¢çš„æ¨¡å—åŒ–å±•æœ›</h3>\n<blockquote>\n<p>ä» js æ¨¡å—åŒ–å‘å±•å²ï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°äº† css html æ¨¡å—åŒ–æ–¹é¢çš„ä¸¥é‡è½åï¼Œå¦‚ä»Šä¾èµ–ç¼–è¯‘å·¥å…·çš„æ¨¡å—åŒ–å¢å¼ºåœ¨æœªæ¥ä¼šè¢«æ ‡å‡†æ‰€æ›¿ä»£ã€‚</p>\n</blockquote>\n<p>åŸç”Ÿæ”¯æŒçš„æ¨¡å—åŒ–ï¼Œ<strong>è§£å†³ html ä¸ css æ¨¡å—åŒ–é—®é¢˜æ­£æ˜¯ä»¥åçš„æ–¹å‘ã€‚</strong></p>\n<p>å†å›åˆ° JS æ¨¡å—åŒ–è¿™ä¸ªä¸»é¢˜ï¼Œå¼€å¤´ä¹Ÿè¯´åˆ°æ˜¯ä¸ºäº†æ„å»º scopeï¼Œå®åˆ™æä¾›äº†ä¸šåŠ¡è§„èŒƒæ ‡å‡†çš„è¾“å…¥è¾“å‡ºçš„æ–¹å¼ã€‚ä½†æ–‡ç« ä¸­çš„ JS çš„æ¨¡å—åŒ–è¿˜ä¸ç­‰äºå‰ç«¯å·¥ç¨‹çš„æ¨¡å—åŒ–ï¼ŒWeb ç•Œé¢æ˜¯ç”± HTMLã€CSS å’Œ JS ä¸‰ç§è¯­è¨€å®ç°ï¼Œä¸è®ºæ˜¯ CommonJS è¿˜æ˜¯ AMD åŒ…æ‹¬ä¹‹åçš„æ–¹æ¡ˆéƒ½æ— æ³•è§£å†³ CSS ä¸ HTML æ¨¡å—åŒ–çš„é—®é¢˜ã€‚</p>\n<p>å¯¹äº CSS æœ¬èº«å®ƒå°±æ˜¯ global scopeï¼Œå› æ­¤å¼€å‘æ ·å¼å¯ä»¥è¯´æ˜¯å–œå¿§å‚åŠã€‚è¿‘å‡ å¹´ä¹Ÿæ¶Œç°æŠŠ HTMLã€CSS å’Œ JS åˆå¹¶ä½œæ¨¡å—åŒ–çš„æ–¹æ¡ˆï¼Œå…¶ä¸­ react/css-modules å’Œ vue éƒ½ä¸ºäººç†ŸçŸ¥ã€‚å½“ç„¶ï¼Œè¿™ä¸€ç‚¹è¿˜æ˜¯éå¸¸ä¾èµ–äº webpack/rollup ç­‰æ„å»ºå·¥å…·ï¼Œè®©æˆ‘ä»¬æ„è¯†åˆ°åœ¨ browser ç«¯è¿˜æœ‰å¾ˆå¤šæœ¬è´¨çš„é—®é¢˜éœ€è¦æ¨è¿›ã€‚</p>\n<p>å¯¹äº css æ¨¡å—åŒ–ï¼Œç›®å‰ä¸ä¾èµ–é¢„ç¼–è¯‘çš„æ–¹å¼æ˜¯ <code class="language-text">styled-component</code>ï¼Œé€šè¿‡ js åŠ¨æ€åˆ›å»º classã€‚è€Œç›®å‰ css ä¹Ÿå¼•å…¥äº†<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_variables" target="_blank" rel="nofollow noreferrer noopener">ä¸ js é€šä¿¡çš„æœºåˆ¶ ä¸ åŸç”Ÿå˜é‡æ”¯æŒ</a>ã€‚æœªæ¥ css æ¨¡å—åŒ–ä¹Ÿå¾ˆå¯èƒ½æ˜¯è¿è¡Œæ—¶çš„ï¼Œæ‰€ä»¥ç›®å‰æ¯”è¾ƒçœ‹å¥½ <code class="language-text">styled-component</code> çš„æ–¹å‘ã€‚</p>\n<p>å¯¹äº html æ¨¡å—åŒ–ï¼Œå°å°¤æœ€è¿‘çˆ†å‡ºä¸ chrome å°ç»„è°ƒç ” html Modulesï¼Œå¦‚æœ html å¾—åˆ°äº†æµè§ˆå™¨ï¼Œç¼–è¾‘å™¨çš„æ¨¡å—åŒ–æ”¯æŒï¼Œæœªæ¥å¯èƒ½ä¼šå–ä»£ jsx æˆä¸ºæœ€å¼ºå¤§çš„æ¨¡å—åŒ–ã€æ¨¡æ¿è¯­è¨€ã€‚</p>\n<p>å¯¹äº js æ¨¡å—åŒ–ï¼Œæœ€è¿‘å‡ºç°çš„ <code class="language-text">&lt;script type=&quot;module&quot;&gt;</code> æ–¹å¼ï¼Œè™½ç„¶è¿˜æ²¡æœ‰å¾—åˆ°æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œä½†ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒçœ‹å¥½çš„æœªæ¥è¶‹åŠ¿ï¼Œè¿™æ ·å°±è¿ webpack çš„æ‹†åŒ…éƒ½ä¸éœ€è¦äº†ï¼Œç›´æ¥æŠŠæºä»£ç ä¼ åˆ°æœåŠ¡å™¨ï¼Œé…åˆ http2.0 å®Œç¾æŠ›å¼€é¢„ç¼–è¯‘çš„æ·é”ã€‚</p>\n<p>ä¸Šè¿°ä¸‰ç§æ–¹æ¡ˆéƒ½ä¸ä¾èµ–é¢„ç¼–è¯‘ï¼Œåˆ†åˆ«å®ç°äº† htmlã€cssã€js æ¨¡å—åŒ–ï¼Œç›¸ä¿¡è¿™å°±æ˜¯æœªæ¥ã€‚</p>\n<h3 id="æ¨¡å—åŒ–æ ‡å‡†æ¨è¿›é€Ÿåº¦ä»ç„¶ç¼“æ…¢"><a href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E6%A0%87%E5%87%86%E6%8E%A8%E8%BF%9B%E9%80%9F%E5%BA%A6%E4%BB%8D%E7%84%B6%E7%BC%93%E6%85%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ¨¡å—åŒ–æ ‡å‡†æ¨è¿›é€Ÿåº¦ä»ç„¶ç¼“æ…¢</h3>\n<blockquote>\n<p>2015 å¹´æå‡ºçš„æ ‡å‡†ï¼Œåœ¨ 17 å¹´ä¾ç„¶æ²¡æœ‰å¾—åˆ°å®ç°ï¼Œå³ä¾¿åœ¨ nodejs ç«¯ã€‚</p>\n</blockquote>\n<p>è¿™å‡ å¹´ TC39 å¯¹è¯­è¨€ç»ˆäºé‡è§†èµ·æ¥äº†ï¼Œæ…¢æ…¢æœ‰åŠ¨ä½œäº†ï¼Œä½†é’ˆå¯¹æ¨¡å—æ ‡å‡†åˆ¶å®šçš„é€Ÿåº¦ï¼Œä¸è½å®éƒ½éå¸¸ç¼“æ…¢ï¼Œä¸ javascript è¶Šæ¥è¶Šæµè¡Œçš„è¶‹åŠ¿é€æ¸è„±èŠ‚ã€‚nodejs è‡³ä»Šä¹Ÿæ²¡æœ‰å®ç° ES2015 æ¨¡å—åŒ–è§„èŒƒï¼Œæ‰€æœ‰ jser éƒ½å¤„åœ¨æ„å»ºå·¥å…·çš„é˜´å½±ä¸‹ã€‚</p>\n<h3 id="http-20-å¯¹-js-æ¨¡å—åŒ–çš„æ¨åŠ¨"><a href="#http-20-%E5%AF%B9-js-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E6%8E%A8%E5%8A%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Http 2.0 å¯¹ js æ¨¡å—åŒ–çš„æ¨åŠ¨</h3>\n<blockquote>\n<p>js æ¨¡å—åŒ–å®šä¹‰çš„å†ç¾å¥½ï¼Œæµè§ˆå™¨ç«¯çš„æ”¯æŒç²’åº¦æ°¸è¿œæ˜¯ç“¶é¢ˆï¼Œhttp 2.0 æ­£æ˜¯è€ƒè™‘åˆ°äº†è¿™ä¸ªå› ç´ ï¼Œå¤§åŠ›æ”¯æŒäº† ES 2015 æ¨¡å—åŒ–è§„èŒƒã€‚</p>\n</blockquote>\n<p>å¹¸è¿çš„æ˜¯ï¼Œæ¨¡å—åŒ–æ„å»ºå°†æ¥å¯èƒ½ä¸å†éœ€è¦ã€‚éšç€ HTTP/2 æµè¡Œèµ·æ¥ï¼Œè¯·æ±‚å’Œå“åº”å¯ä»¥å¹¶è¡Œï¼Œä¸€æ¬¡è¿æ¥å…è®¸å¤šä¸ªè¯·æ±‚ï¼Œå¯¹äºå‰ç«¯æ¥è¯´å®£å‘Šä¸å†éœ€è¦åœ¨å¼€å‘å’Œä¸Šçº¿æ—¶å†åšç¼–è¯‘è¿™ä¸ªåŠ¨ä½œã€‚</p>\n<p>å‡ å¹´å‰ï¼Œæ¨¡å—åŒ–å‡ ä¹æ˜¯æ¯ä¸ªæµè¡Œåº“å¿…é€ çš„è½®å­ï¼ˆYUIã€Dojoã€Angularï¼‰ï¼Œå¤§ç‰›ä»¬è‡ªå·±çˆ½çš„åŒæ—¶å…¶å®é€ æˆäº†ç¤¾åŒºçš„åˆ†è£‚ï¼Œå¾ˆéš¾ç§¯ç´¯ã€‚æœ‰äº† ES2015 Modules ä¹‹åï¼ŒJS å¼€å‘è€…ç»ˆäºå¯ä»¥åƒ Java å¼€å‘è€…åå¹´å‰ä¸€æ ·ä½¿ç”¨ä¸€è‡´çš„æ–¹å¼æ„‰å¿«çš„äº’ç›¸å¼•ç”¨æ¨¡å—ã€‚</p>\n<p>ä¸è¿‡ ES2015 Modules ä¹Ÿåªæ˜¯è§£å†³äº†å¼€å‘çš„é—®é¢˜ï¼Œç”±äºæµè§ˆå™¨çš„ç‰¹æ®Šæ€§ï¼Œè¿˜æ˜¯è¦ç»è¿‡ç¹çæ‰“åŒ…çš„è¿‡ç¨‹ï¼Œç­‰ Importï¼ŒExport å’Œ HTTP 2.0 è¢«ä¸»æµæµè§ˆå™¨æ”¯æŒï¼Œé‚£æ—¶å€™æ‰æ˜¯å½»åº•çš„æ¨¡å—åŒ–ã€‚</p>\n<h3 id="http-20-åå°±ä¸éœ€è¦æ„å»ºå·¥å…·äº†å—ï¼Ÿ"><a href="#http-20-%E5%90%8E%E5%B0%B1%E4%B8%8D%E9%9C%80%E8%A6%81%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E4%BA%86%E5%90%97%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Http 2.0 åå°±ä¸éœ€è¦æ„å»ºå·¥å…·äº†å—ï¼Ÿ</h3>\n<blockquote>\n<p>çœ‹åˆ°å¤§å®¶åŸºæœ¬éƒ½æåˆ°äº† HTTP/2ï¼Œå¯¹è¿™é¡¹æŠ€æœ¯è§£å†³å‰ç«¯æ¨¡å—åŒ–åŠèµ„æºæ‰“åŒ…ç­‰å·¥ç¨‹é—®é¢˜æŠ±æœ‰éå¸¸å¤§çš„æœŸå¾…ã€‚å¾ˆå¤šäººä¹Ÿè®¤ä¸º HTTP/2 æ™®åŠåï¼ŒåŸºæœ¬å°±æ²¡æœ‰ Webpack ä»€ä¹ˆäº‹æƒ…äº†ã€‚</p>\n</blockquote>\n<p>ä¸è¿‡ Webpack ä½œè€… @sokra åœ¨ä»–çš„æ–‡ç«  <a href="https://medium.com/webpack/webpack-http-2-7083ec3f3ce6#.zdo4juvgo" target="_blank" rel="nofollow noreferrer noopener">webpack &#x26; HTTP/2</a> é‡Œæåˆ°äº†ä¸€ä¸ªæ–°çš„ Webpack æ’ä»¶ <code class="language-text">AggressiveSplittingPlugin</code>ã€‚ç®€å•çš„è¯´ï¼Œè¿™æ¬¾æ’ä»¶å°±æ˜¯ä¸ºäº†å……åˆ†åˆ©ç”¨ HTTP/2 çš„æ–‡ä»¶ç¼“å­˜èƒ½åŠ›ï¼Œå°†ä½ çš„ä¸šåŠ¡ä»£ç è‡ªåŠ¨æ‹†åˆ†æˆè‹¥å¹²ä¸ªæ•°å KB çš„å°æ–‡ä»¶ã€‚åç»­è‹¥å…¶ä¸­ä»»æ„ä¸€ä¸ªæ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼Œå¯ä»¥ä¿è¯å…¶ä»–çš„å° chunck ä¸éœ€è¦é‡æ–°ä¸‹è½½ã€‚</p>\n<p>å¯è§ï¼Œ<strong>å³ä½¿ä¸æ–­çš„æœ‰æ–°æŠ€æœ¯å‡ºç°ï¼Œä¹Ÿä¾ç„¶éœ€è¦é…å¥—çš„å·¥å…·æ¥å°†å‰ç«¯å·¥ç¨‹é—®é¢˜è§£å†³æ–¹æ¡ˆæ¨å‘æè‡´ã€‚</strong></p>\n<h3 id="æ¨¡å—åŒ–æ˜¯å¤§å‹é¡¹ç›®çš„é“¶å¼¹å—ï¼Ÿ"><a href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E6%98%AF%E5%A4%A7%E5%9E%8B%E9%A1%B9%E7%9B%AE%E7%9A%84%E9%93%B6%E5%BC%B9%E5%90%97%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ¨¡å—åŒ–æ˜¯å¤§å‹é¡¹ç›®çš„é“¶å¼¹å—ï¼Ÿ</h3>\n<blockquote>\n<p>åªè¦éµå¾ªäº†æœ€æ–°æ¨¡å—åŒ–è§„èŒƒï¼Œå°±å¯ä»¥ä½¿é¡¹ç›®å…·æœ‰æœ€å¥½çš„å¯ç»´æŠ¤æ€§å—ï¼Ÿ Js æ¨¡å—åŒ–çš„ç›®çš„æ˜¯æ”¯æŒå‰ç«¯æ—¥ç›Šä¸Šå‡çš„å¤æ‚åº¦ï¼Œä½†ç»ä¸æ˜¯å”¯ä¸€çš„è§£å†³æ–¹æ¡ˆã€‚</p>\n</blockquote>\n<p>åˆ†æä¸‹ JavaScript ä¸ºä»€ä¹ˆæ²¡æœ‰æ¨¡å—åŒ–ï¼Œä¸ºä»€ä¹ˆåˆéœ€è¦æ¨¡å—åŒ–ï¼šè¿™ä¸ª 95 å¹´è¢«è®¾è®¡å‡ºæ¥çš„æ—¶å€™ï¼Œè¯­è¨€çš„å¼€å‘è€…æ ¹æœ¬æ²¡æœ‰æƒ³åˆ°å®ƒä¼šå¦‚æ­¤çš„å¤§æ”¾å¼‚å½©ï¼Œä¹Ÿæ²¡æœ‰å°†å®ƒè®¾è®¡æˆä¸€ç§æ¨¡å—åŒ–è¯­è¨€ã€‚æŒ‰ç…§æ–‡ä¸­çš„è¯´æ³•ï¼Œ99 å¹´ä¹Ÿå°±æ˜¯ 4 å¹´åå¼€å§‹å‡ºç°äº†æ¨¡å—åŒ–çš„éœ€æ±‚ã€‚å¦‚æœåªæœ‰å‡ è¡Œä»£ç ç”¨æ¨¡å—åŒ–æ˜¯æ‰¯ï¼Œåˆå§‹çš„ web å¼€å‘ä¸šåŠ¡é€»è¾‘éƒ½å†™åœ¨ server ç«¯ï¼Œjs çš„ä½œç”¨å°ä¹‹åˆå°ã€‚è€Œç°åœ¨ spa éƒ½å‡ºç°äº†ï¼Œå‡ ä¹æ‰€æœ‰çš„æ¸²æŸ“é€»è¾‘éƒ½åœ¨å‰ç«¯ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æœ‰æ¨¡å—åŒ–çš„ç»„ç»‡ï¼Œå¼€å‘è¿‡ç¨‹ä¼šè¶Šæ¥è¶Šéš¾ï¼Œç»´æŠ¤ä¹Ÿæ˜¯æ›´ç—›è‹¦ã€‚</p>\n<p>æ–‡ä¸­å·²ç»è¯¦ç»†è¯´æ˜äº†æ¨¡å—åŒ–çš„å‘å±•å’Œä¼˜åŠ£ï¼Œè¿™é‡Œä¸å‡†å¤‡åšè¿‡å¤šçš„è®¨è®ºã€‚æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œ<strong>åœ¨æ¨¡å—åŒ–ä¹‹åè¿˜æœ‰ä¸€ä¸ªæ¨¡å—é—´è€¦åˆçš„é—®é¢˜ï¼Œå¦‚æœæ¨¡å—é—´è€¦åˆåº¦å¤§ä¹Ÿä¼šé™ä½ä»£ç çš„å¯é‡ç”¨æ€§æˆ–è€…è¯´å¤ç”¨æ€§</strong>ã€‚æ‰€ä»¥ä¹Ÿå‡ºç°äº†é™ä½è€¦åˆçš„è§‚å¯Ÿè€…æ¨¡å¼æˆ–è€…å‘å¸ƒ/è®¢é˜…æ¨¡å¼ã€‚è¿™å¯¹äºæå‡ä»£ç é‡ç”¨ï¼Œå¤ç”¨æ€§å’Œé¿å…å•ç‚¹æ•…éšœç­‰éƒ½å¾ˆé‡è¦ã€‚è¯´åˆ°è¿™é‡Œï¼Œè¿˜æƒ³é¡ºä¾¿æä¸€ä¸‹æœ€è¿‘æµè¡Œèµ·æ¥çš„å“åº”å¼ç¼–ç¨‹ï¼ˆRxJSï¼‰ï¼Œå“åº”å¼ç¼–ç¨‹ä¸­æœ‰ä¸€ä¸ªå¾ˆæ ¸å¿ƒçš„æ¦‚å¿µå°±æ˜¯ observableï¼Œä¹Ÿå°±æ˜¯ Rx ä¸­çš„æµï¼ˆstreamï¼‰ã€‚å®ƒå¯ä»¥è¢« subscribeï¼Œå…¶å®ä¹Ÿå°±æ˜¯è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ã€‚</p>\n<h3 id="è¡¥å……é˜…è¯»"><a href="#%E8%A1%A5%E5%85%85%E9%98%85%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>è¡¥å……é˜…è¯»</h3>\n<ul>\n<li><a href="https://huangxuan.me/2015/07/09/js-module-7day/" target="_blank" rel="nofollow noreferrer noopener">JavaScript æ¨¡å—åŒ–ä¸ƒæ—¥è°ˆ</a></li>\n<li><a href="https://yuguo.us/weblog/javascript-module-development-history/" target="_blank" rel="nofollow noreferrer noopener">JavaScript æ¨¡å—åŒ–ç¼–ç¨‹ç®€å²ï¼ˆ2009-2016ï¼‰</a></li>\n</ul>\n<h1 id="æ€»ç»“"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ€»ç»“</h1>\n<p>æœªæ¥å‰ç«¯å¤æ‚åº¦ä¸æ–­å¢åŠ å·²æˆå®šè®ºï¼Œéšç€åç«¯æˆç†Ÿï¼Œè‡ªç„¶ä¼šå°†ç„¦ç‚¹è½¬ç§»åˆ°å‰ç«¯é¢†åŸŸï¼Œè€Œä¸”æœåŠ¡åŒ–ã€ç”¨æˆ·ä½“éªŒè¶Šæ¥è¶Šé‡è¦ï¼Œå‰ç«¯ä½“éªŒæ—©ä¸æ˜¯å½“åˆèƒ½çœ‹å°±è¡Œï¼Œä»»ä½•ç½‘é¡µçš„å¼‚å¸¸ã€è§†è§‰çš„å·®å¼‚ï¼Œæˆ–æ–‡æ¡ˆçš„æ¨¡ç³Šï¼Œéƒ½ä¼šå¯¼è‡´ç”¨æˆ·æµå¤±ï¼Œæ”¯ä»˜ä¸­æ–­ã€‚å‰ç«¯å¯¹å…¬å¸è¥æ”¶çš„å½±å“ï¼Œæ¸æ¸ä¸åç«¯æœåŠ¡å®•æœºåŒç­‰ä¸¥é‡ï¼Œæ‰€ä»¥å‰ç«¯ä¼šè¶Šæ¥è¶Šé‡ï¼Œå¼‚å¸¸ç›‘æ§ï¼Œæ€§èƒ½æ£€æµ‹ï¼Œå·¥å…·é“¾ï¼Œå¯è§†åŒ–ç­‰ç­‰éƒ½æ˜¯è¿™å‡ å¹´å¤§å®¶é€æ¸é‡è§†èµ·æ¥çš„ã€‚</p>\n<p>æˆ‘ä»¬æ—©å·²ä¸èƒ½å°† javascript æ—©æœŸç©å…·æ€§è´¨çš„æ¨¡å—åŒ–æ–¹æ¡ˆç”¨äºç°ä»£è¶Šæ¥è¶Šé‡è¦çš„ç³»ç»Ÿä¸­ï¼Œå‰ç«¯ç•Œå¿…ç„¶å‡ºç°åŒç­‰é‡é‡çº§çš„æ¨¡å—åŒ–ç®¡ç†æ–¹æ¡ˆï¼Œæ„Ÿè°¢ TC39 åˆ¶å®šçš„ ES2015 æ¨¡å—åŒ–è§„èŒƒï¼Œæˆ‘ä»¬å·²ç»ç¦»ä¸å¼€å®ƒï¼Œå“ªæ€•æ‰€æœ‰äººå¿…é¡»ä½¿ç”¨ babelã€‚</p>\n<p>è¯è¯´å›æ¥ï¼Œæ ‡å‡†æ¨è¿›çš„å¤ªæ…¢ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠç¼–è¯‘å·¥å…·å½“ä½œå¸¸æ€ï¼ŒæŠ±ç€å“ªæ€•æ”¯æŒäº† ES2015 æ‰€æœ‰ç‰¹æ€§ï¼Œbabel ä¾ç„¶è¿˜æœ‰ç”¨çš„å¿ƒæ€ï¼Œå°†é¢„ç¼–è¯‘è¿›è¡Œåˆ°åº•ã€‚ä¸€å¥è¯ï¼Œæ¨¡å—åŒ–ä»åœ¨è·¯ä¸Šã€‚js æ¨¡å—åŒ–çš„çŸ›å¤´å·²ç»å¯¹å‡†äº† css ä¸ htmlï¼Œè¿™ä¸¤ä½å…ƒè€ä¹Ÿè¯¥å‘å‰å«çš„ js å­¦ä¹ å­¦ä¹ äº†ã€‚</p>\n<p>æœªæ¥ cssã€html çš„æ¨¡å—åŒ–ä¼šè‡ªç«‹é—¨æˆ·ï¼Œè¿˜æ˜¯èµ‹äºˆ js æ›´å¼ºçš„èƒ½åŠ›ï¼Œè®©ä¸¤è€…çš„æ¨¡å—åŒ–ä¾é™„äº js çš„èƒ½åŠ›å‘¢ï¼Ÿç›®å‰ html æœ‰è‡ªç«‹é—¨æˆ·çš„è‹—å¤´ï¼ˆhtmlModulesï¼‰ï¼Œè€Œ css è¿Ÿè¿Ÿæ²¡æœ‰æ”¹å˜ï¼Œç¤¾åŒºå‡ºç°çš„ <code class="language-text">styled-component</code> å·²ç»ç”¨ js å°† css æ¨¡å—åŒ–å¾—å¾ˆå¥½äº†ï¼Œæœ€æ–° css è§„èŒƒä¹Ÿæ”¯æŒäº†ä¸ js çš„å˜é‡é€šä¿¡ï¼Œéš¾é“å¸Œæœ›ä¾é™„äº js å—ï¼Ÿè¿™é‡Œå¸Œæœ›å¾—åˆ°å¤§å®¶æ›´å¹¿æ³›çš„è®¨è®ºã€‚</p>\n<p>æˆ‘ä¹Ÿè®¤åŒï¼Œæ¯•ç«Ÿå‹ç¼©ã€æ··æ·†ã€md5ã€æˆ–è€…åˆ©ç”¨ <a href="https://www.thepolyglotdeveloper.com/2015/03/create-a-random-nonce-string-using-javascript/" target="_blank" rel="nofollow noreferrer noopener">nonce</a> å±æ€§å¯¹ script æ ‡ç­¾åŠ å¯†ï¼Œéƒ½ç¦»ä¸å¼€æœ¬åœ°æ„å»ºå·¥å…·ã€‚</p>\n<p>æ®è¯´ http2 çš„ä¼˜åŒ–ä¸­ï¼Œæœ‰ä¸ªæœ€ä½³æ–‡ä»¶å¤§å°ä¸æ•°é‡çš„æ¯”ä¾‹ï¼Œé‚£ä¹ˆè¿˜æ˜¯è„±ç¦»ä¸äº†æ„å»ºå·¥å…·ï¼Œå‰ç«¯æœªæ¥ä¼šè¶Šæ¥è¶Šå¤æ‚ï¼ŒåŒæ—¶ä¹Ÿè¶Šæ¥è¶Šç¾å¥½ã€‚</p>\n<p>è‡³æ­¤ï¼Œå¯¹äº javascript æ¨¡å—åŒ–è®¨è®ºå·²æ¥è¿‘å°¾å£°ï¼Œå¯¹å…¶ä¼˜ç¼ºç‚¹ä¹ŸåŸºæœ¬è¾¾æˆäº†ä¸€è‡´ã€‚å‰ç«¯å¤æ‚åº¦ä¸æ–­æé«˜ï¼Œä¿ƒä½¿ç€æ¨¡å—åŒ–çš„æ”¹è¿›ï¼Œä»£ç†ï¼ˆæµè§ˆå™¨ã€nodeï¼‰ çš„æ”¯æŒç¨‹åº¦ï¼Œä¸å‰ç«¯ç‰¹æ®Šæ€§ï¼ˆæµé‡ã€ç¼“å­˜ï¼‰å¯èƒ½å‰ç«¯æ°¸è¿œä¹Ÿç¦»ä¸å¼€æ„å»ºå·¥å…·ï¼Œæ–°çš„æ ‡å‡†ä¼šè®©è¿™äº›å·¥ä½œåšçš„æ›´å¥½ï¼ŒåŒæ—¶å–ä»£ã€å¢å¼ºéƒ¨åˆ†ç‰¹å¾ï¼Œå‰ç«¯çš„æœªæ¥æ˜¯æ›´åŠ ç¾å¥½çš„ï¼Œå¤æ‚åº¦ä¹Ÿæ›´é«˜ã€‚</p>',id:"/github/workspace/blog/å‰ç«¯jsæ¨¡å—åŒ–å‘å±•/index.md absPath of file >>> MarkdownRemark",timeToRead:5,frontmatter:{date:"2019-06-04 12:03:01",path:"/frontend-module-development/",tags:"å‰ç«¯, å‰ç«¯æ¨¡å—åŒ–",title:"å‰ç«¯jsæ¨¡å—åŒ–å‘å±•",draft:null}}],page:22,pagesSum:38,length:186,prevPath:"/page/21",nextPath:"/page/23"}}}});