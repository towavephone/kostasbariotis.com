webpackJsonp([62655446722822],{1324:function(n,a){n.exports={data:{site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"需求背景 解决 react-player 控件在 IE 浏览器下声音的播放 核心思路 ReactPlayer 底层调用了 audio 标签来播放音频，video 标签来播放视频，因为在 IE 浏览器下是没有 audio 标签的，所以使用了 embed 标签，其在 IE 下是调用 windows media player，关于其用法如下 功能 播放: MediaPlayer.Play() 暂停: MediaPlayer.Pause() 定位: MediaPlayer.SetCurrentEntry…",html:'<h1 id="需求背景"><a href="#%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需求背景</h1>\n<p>解决 react-player 控件在 IE 浏览器下声音的播放</p>\n<h1 id="核心思路"><a href="#%E6%A0%B8%E5%BF%83%E6%80%9D%E8%B7%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>核心思路</h1>\n<p>ReactPlayer 底层调用了 audio 标签来播放音频，video 标签来播放视频，因为在 IE 浏览器下是没有 audio 标签的，所以使用了 embed 标签，其在 IE 下是调用 windows media player，关于其用法如下</p>\n<h2 id="功能"><a href="#%E5%8A%9F%E8%83%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>功能</h2>\n<blockquote>\n<p>播放: MediaPlayer.Play()<br>\n暂停: MediaPlayer.Pause()<br>\n定位:</p>\n<ul>\n<li>MediaPlayer.SetCurrentEntry(lWhichEntry)</li>\n<li>MediaPlayer.Next()</li>\n<li>MediaPlayer.Previous()</li>\n</ul>\n<p>循环: MediaPlayer.PlayCount = 0</p>\n<ul>\n<li>0: the clip plays repeatedly</li>\n<li>1: once</li>\n</ul>\n<p>停止: MediaPlayer.Stop()</p>\n</blockquote>\n<h2 id="属性"><a href="#%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>属性</h2>\n<blockquote>\n<p>AllowChangeDisplaySize 返回或设置最终用户是否能设置显示尺寸(逻辑型)<br>\nAllowScan 返回或设置是否允许扫描(逻辑型)<br>\nAnimationAtStart 返回或设置控件开始播放之前是否先播放一个动画序列(逻辑型)<br>\nAudioStream 返回或设置音频流的编号(用于多音频流的剪辑，默认为-1)(长整型)<br>\nAutoRewind 返回或设置媒体文件播放完毕后是否自动回绕(逻辑型)<br>\nAutoSize 返回或设置是否自动调整控件大小来适应载入的媒体(逻辑型)<br>\nAutoStart 返回或设置在载入媒体文件之后是否自动开始播放(逻辑型)<br>\nBalance 返回或设置指定立体声媒体文件的播放声道(-10000 为左声道，10000 为右声道，0 为立体声)(长整型)<br>\nBandwidth 返回或设置当前文件的带宽(长整型)<br>\nBaseURL 返回基本的 HTTP URL(字符串)<br>\nBufferingCount 返回媒体文件回放时缓冲的总时间(长整型)<br>\nBufferingProgress 返回缓冲完成的百分比(长整型)<br>\nBufferingTime 返回缓冲的时间(双精度型)<br>\nCanPreview 返回或设置当前显示的剪辑是能否被预览(逻辑型)<br>\nCanScan 返回或设置当前文件是否支持快进或快退(逻辑型)<br>\nCanSeek 返回或设置当前文件是否能搜索并定位到某个时间(逻辑型)<br>\nCanSeekToMarkers 返回或设置文件是否支持搜索到标签(逻辑型)<br>\nCaptioningID 返回在标题中显示的帧或控件的名称(字符串)<br>\nChannelDescription 返回电台的描述(字符串)<br>\nChannelName 返回电台的名称(字符串)<br>\nChannelURL 返回电台的元文件的位置(字符串)<br>\nClickToPlay 返回或设置是否可以通过点击图像暂停或播放剪辑(逻辑型)<br>\nClientID 返回客户端唯一的标识符(字符串)<br>\nCodecCount 返回文件使用的可安装的 codecs 的个数(长整型)<br>\nContactAddress 返回电台的联系地址(字符串)<br>\nContactEmail 返回电台的联系电子邮件地址(字符串)<br>\nContactPhone 返回电台的联系电话(字符串)<br>\nCreationDate 返回剪辑的创建日期(日期型)<br>\nCurrentMarker 返回或设置当前书签号码(长整型)<br>\nCurrentPosition 返回或设置剪辑的当前位置(双精度型)<br>\nCursorType 返回或设置指针类型(长整型)<br>\nDefaultFrame 返回或设置控件的默认目标 Http 帧(字符串)<br>\nDisplayBackColor 返回或设置显示面板的背景色(OLE<em>COLOR 值)<br>\nDisplayForeColor 返回或设置显示面板的前景色(OLE_COLOR 值)<br>\nDisplayMode 返回或设置显示面板是否用秒或帧的形式显示当前位置(MPDisplayModeConstants 值)<br>\nDisplaySize 返回或设置图像显示窗口的大小(MPDisplaySizeConstant 值)<br>\nDuration 返回或设置剪辑剪辑的播放时间(双精度型)<br>\nEnableContextMenu 返回或设置是否允许使用上下文菜单(逻辑型)<br>\nEnabled 返回或设置控件是否可用(逻辑型)<br>\nEnableFullScreenControls 返回或设置全屏幕控制是否可用(逻辑型)<br>\nEnablePositionControls 返回或设置位置控制是否可用(逻辑型)<br>\nEnableTracker 返回或设置搜索栏控制是否可用(逻辑型)<br>\nErrorCode 返回当前错误代码(长整型)<br>\nErrorCorrection 返回当前剪辑的错误修正类型(长整型)<br>\nErrorDescription 返回当前错误的描述(字符串)<br>\nFileName 返回或设置要播放的剪辑的文件名称(字符串)<br>\nHasError 返回控件是否发生错误(逻辑型)<br>\nHasMultipleItems 返回或设置控件是否包含某些多重项目的内容(逻辑型)<br>\nImageSourceHeight 返回或设置当前剪辑的原始图像高度(长整型)<br>\nImageSourceWidth 返回或设置当前剪辑的原始图像宽度(长整型)<br>\nInvokeURLs 返回或设置 URL 是否自动发送请求(逻辑型)<br>\nIsBroadcast 返回或设置源是否进行广播(逻辑型)<br>\nIsDurationValid 返回或设置持续时间值是否有效(逻辑型)<br>\nLanguage 返回或设置用于本地化语言支持的当前区域语言(长整型)<br>\nLostPackets 返回丢失的数据包数量(长整型)<br>\nMarkerCount 返回文件书签的数量(长整型)<br>\nMute 返回或设置控件是否播放声音(逻辑型)<br>\nOpenState 返回控件的内容源状态(长整型)<br>\nPlayCount 返回或设置一个剪辑播放的次数(长整型)<br>\nPlayState 返回控件的当前操作状态(长整型)<br>\nPreviewMode 返回或设置控件是否处在预览模式(逻辑型)<br>\nRate 返回或设置回放帧频(双精度型)<br>\nReadyState 返回控件是否准备就绪(ReadyStateConstant 值)<br>\nReceivedPackets 返回已接收到的数据包的数量(长整型)<br>\nReceptionQuality 返回最后 30 秒接收到的数据包的百分比(长整型)<br>\nRecoveredPackets 返回已转换的数据包的数量(长整型)<br>\nSAMIFileName 返回或设置 closed-captioning 文件名(字符串)<br>\nSAMILang 返回或设置 closed captioning 语言(字符串)<br>\nSAMIStyle 返回或设置 closed captioning 风格(字符串)<br>\nSelectionEnd 返回或设置流的结束位置(双精度型)<br>\nSelectionStart 返回或设置流的起始位置(双精度型)<br>\nSendErrorEvents 返回或设置控件是否发送错误事件(逻辑型)<br>\nSendKeyboardEvents 返回或设置控件是否发送键盘事件(逻辑型)<br>\nSendMouseClickEvents 返回或设置控件是否发送鼠标单击事件(逻辑型)<br>\nSendMouseMoveEvents 返回或设置控件是否发送鼠标移动事件(逻辑型)<br>\nSendOpenStateChangeEvents 返回或设置控件是否发送打开状态改变事件(逻辑型)<br>\nSendPlayStateChangeEvents 返回或设置控件是否发送播放状态改变事件(逻辑型)<br>\nSendWarningEvents 返回或设置控件是否发送警告事件(逻辑型)<br>\nShowAudioControls 返回或设置是否显示音频控制(逻辑型)<br>\nShowCaptioning 返回或设置是否显示字幕(逻辑型)<br>\nShowControls 返回或设置控制面板是否可见(逻辑型)<br>\nShowDisplay 返回或设置是否显示显示面板(逻辑型)<br>\nShowGotoBar 返回或设置是否显示跳转栏(逻辑型)<br>\nShowPositionControls 返回或设置是否显示位置控制(逻辑型)<br>\nShowStatusBar 返回或设置是否显示状态栏(逻辑型)<br>\nShowTracker 返回或设置是否显示搜索栏(逻辑型)<br>\nSourceLink 返回内容文件的路径(字符串)<br>\nSourceProtocol 返回用于接收数据的协议(长整型)<br>\nStreamCount 返回媒体帧的数量(长整型)<br>\nTransparentAtStart 返回或设置在开始播放之前和停止之后控件是否透明(逻辑型)<br>\nVideoBorder3D 返回或设置视频边框是否显示为 3D 效果(逻辑型)<br>\nVideoBorderColor 返回或设置视频边框的颜色(OLE</em>颜色)<br>\nVideoBorderWidth 返回或设置视频边框的宽度(长整型)<br>\nVolume 返回或设置音量(长整型)</p>\n</blockquote>\n<h1 id="解决方案"><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>解决方案</h1>\n<p>兼容 IE9~IE11 的 react-player</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10740017588423268000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import React from \'react\';\nimport PropTypes from \'prop-types\';\n\nfunction noop() {}\n\n// IE下的audio标签不能播放wav文件，改用embed标签播放，兼容版本：IE9~11\nexport class IEReactPlayer extends React.PureComponent {\n  static propTypes = {\n    url: PropTypes.string, // 播放路径\n    playing: PropTypes.bool, // 播放状态\n    onProgress: PropTypes.func, // 进度更新回调，返回已播放百分比\n    onDuration: PropTypes.func, // 录音长度回调，返回录音总时长，单位为秒\n    onEnded: PropTypes.func, // 录音结束回调，无返回值\n    volume: PropTypes.number, // 音量属性，范围0~1，此属性调整音量不生效，待解决\n    autostart: PropTypes.string, // 是否自动播放，此属性为了兼容Audio组件点击按钮后才请求url，防止点击两次播放按钮才开始播放的情况出现\n    progressInterval: PropTypes.number // 进度刷新间隔，默认100\n  };\n\n  static defaultProps = {\n    url: \'\',\n    playing: false,\n    autostart: \'false\',\n    progressInterval: 100\n  };\n\n  componentDidMount() {\n    const { progressInterval } = this.props;\n    this.timer = setInterval(() => {\n      // 0：停止状态，1：暂停状态，2：播放状态，4:资源加载完成\n      const { onProgress = noop, onDuration = noop, onEnded = noop } = this.props;\n      if (this.embed && this.embed.ReadyState === 4) {\n        onDuration(this.embed.Duration);\n        if (this.embed.PlayState !== 2) {\n          onEnded();\n        }\n        if (this.embed.PlayState === 2 || this.embed.PlayState === 0) {\n          onProgress({\n            played: this.embed.CurrentPosition / this.embed.Duration\n          });\n        }\n      }\n    }, progressInterval);\n  }\n\n  componentWillUnmount() {\n    this.timer && clearInterval(this.timer);\n  }\n\n  seekTo = (value) => {\n    // 设置播放位置，以秒为单位\n    this.embed.CurrentPosition = value * this.embed.Duration;\n  };\n\n  render() {\n    const { url, playing, volume, autostart } = this.props;\n    if (this.embed && this.embed.ReadyState === 4) {\n      if (playing) {\n        this.embed.play();\n      } else {\n        this.embed.pause();\n      }\n      this.embed.Volume = volume * 100;\n    }\n    return (\n      <div>\n        {url && (\n          <embed\n            ref={(r) => {\n              this.embed = r;\n            }}\n            src={url}\n            autostart={autostart}\n            hidden\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default IEReactPlayer;`, `10740017588423268000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">\'prop-types\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">noop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token comment">// IE下的audio标签不能播放wav文件，改用embed标签播放，兼容版本：IE9~11</span>\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">IEReactPlayer</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>\n  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>\n    url<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> <span class="token comment">// 播放路径</span>\n    playing<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">,</span> <span class="token comment">// 播放状态</span>\n    onProgress<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span> <span class="token comment">// 进度更新回调，返回已播放百分比</span>\n    onDuration<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span> <span class="token comment">// 录音长度回调，返回录音总时长，单位为秒</span>\n    onEnded<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span> <span class="token comment">// 录音结束回调，无返回值</span>\n    volume<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span> <span class="token comment">// 音量属性，范围0~1，此属性调整音量不生效，待解决</span>\n    autostart<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> <span class="token comment">// 是否自动播放，此属性为了兼容Audio组件点击按钮后才请求url，防止点击两次播放按钮才开始播放的情况出现</span>\n    progressInterval<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>number <span class="token comment">// 进度刷新间隔，默认100</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>\n    url<span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span>\n    playing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    autostart<span class="token punctuation">:</span> <span class="token string">\'false\'</span><span class="token punctuation">,</span>\n    progressInterval<span class="token punctuation">:</span> <span class="token number">100</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> progressInterval <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token comment">// 0：停止状态，1：暂停状态，2：播放状态，4:资源加载完成</span>\n      <span class="token keyword">const</span> <span class="token punctuation">{</span> onProgress <span class="token operator">=</span> noop<span class="token punctuation">,</span> onDuration <span class="token operator">=</span> noop<span class="token punctuation">,</span> onEnded <span class="token operator">=</span> noop <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>ReadyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">onDuration</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>PlayState <span class="token operator">!==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token function">onEnded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>PlayState <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>PlayState <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token function">onProgress</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n            played<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>CurrentPosition <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>Duration\n          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> progressInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function-variable function">seekTo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token comment">// 设置播放位置，以秒为单位</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>CurrentPosition <span class="token operator">=</span> value <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>Duration<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> url<span class="token punctuation">,</span> playing<span class="token punctuation">,</span> volume<span class="token punctuation">,</span> autostart <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>ReadyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>playing<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>Volume <span class="token operator">=</span> volume <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token punctuation">{</span>url <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embed</span>\n            <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n              <span class="token keyword">this</span><span class="token punctuation">.</span>embed <span class="token operator">=</span> r<span class="token punctuation">;</span>\n            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span>\n            <span class="token attr-name">autostart</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>autostart<span class="token punctuation">}</span></span>\n            <span class="token attr-name">hidden</span>\n          <span class="token punctuation">/></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> IEReactPlayer<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="实现效果"><a href="#%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现效果</h1>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-2936c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 71.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZElEQVQoz41Su07EMBD0l9LxDTR8BQX/QIsQJaKgAyFRIEBUp0hwcnIJeTj2rl9M4rsoF+DEyLHs3Z3d2XVE27Z5nocQYoxhRPwfnHOCmZVS2LXW3vu5G4mstTASEbwLMryi7/uyLKWUWZbh0HXdlAKHoiiqqlqv1yjws7hAVjjqut5sNtjRAvhTbrhwRYHhCqlhWFNjAumh2e6ATngHjANqk4UIMRwjDSuwMabvlYCPZoB1OoOZrvgsU9XR+YM7vfV3Kzbdl8yLJXkOqJ2TtaGLZ3t27x4/2Bo01B8iN02DEBpFK01Pn/wm+b3gvEU+jUYOkTECEFHbMZUdndz44+twdBUuX9mbDkIGMrSlCS3IGD5GPdknP1owIwTSIwIPglC7z08Rv4raklPlrKIXSW1PPI5nV4r/6ggUvIVw3htiZbjVvEAaWOp8gS1ZcZAqGhdbG1d1tC5M8CNC2LOAk0ThD/sGEMUrqJkTcrQAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 02 13 20 52 02"\n        title=""\n        src="/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-fee1c.png"\n        srcset="/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-a67b7.png 200w,\n/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-0b187.png 400w,\n/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-fee1c.png 800w,\n/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-2936c.png 850w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>',id:"/github/workspace/blog/ReactPlayer之IE兼容性研究/index.md absPath of file >>> MarkdownRemark",timeToRead:4,frontmatter:{date:"2019-02-13 19:50:08",path:"/reactplayer-ie-compatibility/",tags:"前端, ReactPlayer, IE兼容性, 预研",title:"ReactPlayer之IE兼容性研究",draft:null}}],length:1,tag:"ReactPlayer",pagesSum:1,page:1}}}});