webpackJsonp([0xb9a98c33a688],{1196:function(n,a){n.exports={data:{site:{siteMetadata:{description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"一、事务 概念 事务指的是满足 ACID 特性的一系列操作。在数据库中，可以通过 Commit 提交一个事务，也可以使用 Rollback 进行回滚。 四大特性 1. 原子性（Atomicity） 事务被视为不可分割的最小单元，要么全部提交成功，要么全部失败回滚。 2. 一致性（Consistency） 事务执行前后都保持一致性状态。在一致性状态下，所有事务对一个数据的读取结果都是相同的。 3. 隔离性（Isolation） 一个事务所做的修改在最终提交以前，对其它事务是不可见的。…",html:'<h1 id="一、事务"><a href="#%E4%B8%80%E3%80%81%E4%BA%8B%E5%8A%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一、事务</h1>\n<h2 id="概念"><a href="#%E6%A6%82%E5%BF%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概念</h2>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/185b9c49-4c13-4241-a848-fbff85c03a64-1593ee610d4d693b24ead2d9b9472d75-1857e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 448px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 97.54464285714285%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACp0lEQVQ4y5VUW08aQRT2/7/VxyZN0/RBmya9GMsDRERUwFSEQhWEvSDX3YW9X5DL7tczs4CrlERPcjKTmZNvvu9cZg8Ji6IIr7VdsXsvA8IwhOdZ8H0LQWBjOnXIbb5nZ75v8xgWn/Q1xhag41gYTzK4b33FZeED6n8PkM+/R7H0EaqWortTetDdyXgL0PMcaOM8MSlCUbM4O/uEi4vP0A12VsBkUoRhGMQ4oFiP3OeMdzJkK2Og62OYlgHXZVJdApnwNQim6A/KGI4y5Fk8dNOw7fFzwCQYs+VySR7yl9nKbD6fb+T1+leQO98hiD8gSj9hWeo2YBTFiY6L4vGA2WxG/sj3TOJiseB73/coBRrJV+DYBp3PnwBflp+xW58lWSX3cVy4uyhqT4JQycMyDcrLCPV6HY1GgyruoNfroVqtQpIkaJrG94IgwHFddMQWxEoOxuSFZOn2N+7PvkAW27i5qSCTTqNQKHCQk5MTnJ/nUS5f4/LyArncKUqlIgS6y2WO0cofYiC3YkBK117cew72999BVTWqrg5ZlqmZpxs5jO18HkuUpAequLO5c2yHp2krh9XqH2SzWS6LFYPljBWn3x9gpPRg2SK1h0jVvaZVgmkK1FZtIqM+z2GyKJ1Oh6SV0Ww2V97AeGxgMLhFq32I27sD6rsf1IdHq/Ub5fwKMcFoxXCNnphl0zS5dF2fUGsYkOQaOg/HJPcXMUzRA2kMhhkCTGE0qiAelOj5pCzC3T9NGC75p/D46PLPIghiZ2fTqY+nXl4B9sU7NIspSrDJL4fDIbrdLhRF2ST8tV9ZDNiuQSwdwTZ1sCvWe6xlWE6TFdzlWwwVRUWlUiVJs1g+jdh6zN768XLAWq22aRlmbFJYtZns5OuvBmT9NqKR+1++3sKO2T8QGvk3ERwtgwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="185b9c49 4c13 4241 a848 fbff85c03a64"\n        title=""\n        src="/static/185b9c49-4c13-4241-a848-fbff85c03a64-1593ee610d4d693b24ead2d9b9472d75-1857e.png"\n        srcset="/static/185b9c49-4c13-4241-a848-fbff85c03a64-1593ee610d4d693b24ead2d9b9472d75-15195.png 200w,\n/static/185b9c49-4c13-4241-a848-fbff85c03a64-1593ee610d4d693b24ead2d9b9472d75-82e6d.png 400w,\n/static/185b9c49-4c13-4241-a848-fbff85c03a64-1593ee610d4d693b24ead2d9b9472d75-1857e.png 448w"\n        sizes="(max-width: 448px) 100vw, 448px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>事务指的是满足 ACID 特性的一系列操作。在数据库中，可以通过 Commit 提交一个事务，也可以使用 Rollback 进行回滚。</p>\n<h2 id="四大特性"><a href="#%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>四大特性</h2>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/09e6e8d4-4d83-4949-b908-6d6b4c2fd064-84169f9332e0d89e63ce04b06efa8338-4b0e9.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 571px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 38.00350262697023%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABhElEQVQoz21S71OiUBTt//9r+rT1xdUgtS1rlDLgPRAIHgIiiIChNZ69D5ad2llmztx7frxzv3Bx+vjEe3PqcDyhOX20s9ca2o9S+yfTfM0QP5/PkN/Fmz5DYk6x4feIzTuw2QCRMUXCfrUQr2OwhwE2tEtfajIT6pP2TUpwFgrKfdEVpuYEiCg4vwLEHeL5D+L3qNlPHFcKEEw7jbwDHwLxw1+eatf4dFVUbIgiT7tCT6N2doPMuEHBFLDxJXJjhEwfEVexWQ5gklbZY+z5LUqugk0usdWHhBFpKt4er7DL/hQ6KxtRGMDUl1gLH8sXDVmawPccrCxGngA3dXiODW3+hE28xuvLM9b0xuYGhO/BsS3sdnlXmGU54iTBbPYIIUKk2y2qqgZjHJr2jKLYE6/geh4URW29PN9hm2VYLDTohkFlBcqy7Ap936drIUJCEATgnLdT6oKm67pwHAdRFNFBgTiOYVlWm5FcQvryaFvYNA3qum5xOBy+7T167X/oM/1v8xuGZE32f9SFxAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="09e6e8d4 4d83 4949 b908 6d6b4c2fd064"\n        title=""\n        src="/static/09e6e8d4-4d83-4949-b908-6d6b4c2fd064-84169f9332e0d89e63ce04b06efa8338-4b0e9.png"\n        srcset="/static/09e6e8d4-4d83-4949-b908-6d6b4c2fd064-84169f9332e0d89e63ce04b06efa8338-b8aee.png 200w,\n/static/09e6e8d4-4d83-4949-b908-6d6b4c2fd064-84169f9332e0d89e63ce04b06efa8338-fe23d.png 400w,\n/static/09e6e8d4-4d83-4949-b908-6d6b4c2fd064-84169f9332e0d89e63ce04b06efa8338-4b0e9.png 571w"\n        sizes="(max-width: 571px) 100vw, 571px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="1-原子性（atomicity）"><a href="#1-%E5%8E%9F%E5%AD%90%E6%80%A7%EF%BC%88atomicity%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 原子性（Atomicity）</h3>\n<p>事务被视为不可分割的最小单元，要么全部提交成功，要么全部失败回滚。</p>\n<h3 id="2-一致性（consistency）"><a href="#2-%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%88consistency%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 一致性（Consistency）</h3>\n<p>事务执行前后都保持一致性状态。在一致性状态下，所有事务对一个数据的读取结果都是相同的。</p>\n<h3 id="3-隔离性（isolation）"><a href="#3-%E9%9A%94%E7%A6%BB%E6%80%A7%EF%BC%88isolation%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 隔离性（Isolation）</h3>\n<p>一个事务所做的修改在最终提交以前，对其它事务是不可见的。</p>\n<h3 id="4-持久性（durability）"><a href="#4-%E6%8C%81%E4%B9%85%E6%80%A7%EF%BC%88durability%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 持久性（Durability）</h3>\n<p>一旦事务提交，则其所做的修改将会永远保存到数据库中。即使系统发生崩溃，事务执行的结果也不能丢失。可以通过数据库备份和恢复来保证持久性。</p>\n<h1 id="二、并发一致性问题"><a href="#%E4%BA%8C%E3%80%81%E5%B9%B6%E5%8F%91%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二、并发一致性问题</h1>\n<p>在并发环境下，一个事务如果受到另一个事务的影响，那么事务操作就无法满足一致性条件。</p>\n<h2 id="问题"><a href="#%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>问题</h2>\n<h3 id="1-丢失修改"><a href="#1-%E4%B8%A2%E5%A4%B1%E4%BF%AE%E6%94%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 丢失修改</h3>\n<p>T<sub>1</sub> 和 T<sub>2</sub> 两个事务都对一个数据进行修改，T<sub>1</sub> 先修改，T<sub>2</sub> 随后修改，T<sub>2</sub> 的修改覆盖了 T<sub>1</sub> 的修改。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/88ff46b3-028a-4dbb-a572-1f062b8b96d3-5a79cd6225b81f7bb28610f322457a11-5751a.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 447px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 126.62192393736018%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADAUlEQVQ4y5VViW7aQBDN//9EpVY9pDYNbUrSiIjgQgKh3IQAscPhC2xOm9sHr+sNdrBNonQla8ezu7Nv3szOHIGM7XZLP2fM53Os12sE9e7Y102nUxiG4emdcbS/0RmapmG5XPp0weHqFUXBZrMJG3R/nMVqtQqO4zzdIYTuxaVSCZIk+Q06s/uzWCxwfXODcrkMy7Ke9AG3XXk4HIJhGLAsG0ToHHhG0O20MZ/pIQOHOHQ8sW07iPBJkGQFrU4PsXgS2TxxuyUS0vVX3RZFMbROObTMNdJFAeeZMS7SCqJJCZErAc3HHt3koggi5Hk+xPURnbY27poCUvkumAyL63wHiQwHUR7sDG7/w+BOsMwNttYa1XIBstiBba7IJhtPF259B92P5wXf/3Pa2BYqdQHM3y4iv3OIpZpIZNvgRdWHMMglz3dD3FKDtrVBMsvh468aPp0W8T32QOUGJ3ocegiJ3OsPIPWGOL+Ik+AJJKCql+Cey4PhmGwaoVpjSbQlgk7BbL4I8aZrE1ymu/jJSCR4Io5jHL5dNNFXR+GXQg2rCkxzE0oRd16tlsgUWpSWWKqBeJpDLHmPyS7FPIRuasiyTF/MIWNBDuu1Cjlo+Dl8q0FXXq+XuC0+0rT6EvmDKzIzt+wzwuDNKnHZMF52eaZPcRqv491xEe9PcvgcreFDpIi+MvK77FQPTV8gncmi3njAZKIRvlYhhDZJsR45LMojlCoNCPKQBtCLsps2mWIHJ5csvp6VEWVaVObavVfzUJbEw3m4tU3kqzyiCRY/YhXErls4Y1i0ecUzuO+6vUPc7fJ0zd5/KV46LBckGHN0Oh1a62a6BjNQ3oO8BovrwaDkcjkIgvCmnhKPx6Hrerg4eBWbvIxUMolioUCKhRkysC+rqopEIoFms+lb8yE0yXxXv0eLlCVv0wsNysmASqVC6dnP4yOvbzgGByNYY9Ia5T4MdXAQIS11pN84CCeTCa2Js9nM/1LcjcZgCFPTsemrMEbjVw06LdTp4U4b2G+7/wC8iIINCOrKcAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="88ff46b3 028a 4dbb a572 1f062b8b96d3"\n        title=""\n        src="/static/88ff46b3-028a-4dbb-a572-1f062b8b96d3-5a79cd6225b81f7bb28610f322457a11-5751a.png"\n        srcset="/static/88ff46b3-028a-4dbb-a572-1f062b8b96d3-5a79cd6225b81f7bb28610f322457a11-a742c.png 200w,\n/static/88ff46b3-028a-4dbb-a572-1f062b8b96d3-5a79cd6225b81f7bb28610f322457a11-4517e.png 400w,\n/static/88ff46b3-028a-4dbb-a572-1f062b8b96d3-5a79cd6225b81f7bb28610f322457a11-5751a.png 447w"\n        sizes="(max-width: 447px) 100vw, 447px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="2-读脏数据"><a href="#2-%E8%AF%BB%E8%84%8F%E6%95%B0%E6%8D%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 读脏数据</h3>\n<p>T<sub>1</sub> 修改一个数据，T<sub>2</sub> 随后读取这个数据。如果 T<sub>1</sub> 撤销了这次修改，那么 T<sub>2</sub> 读取的数据是脏数据。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/dd782132-d830-4c55-9884-cfac0a541b8e-bda57d5228f69ce8752268817a4003b4-9c82e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 495px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 115.55555555555554%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACsklEQVQ4y5VViXLaMBDl/7+jM+1MSdK0zdGGlCPkIuEoGBowro2x8Qk2DZcN5lVyMPUBnWRnNFpp1k/7VvvkFDa2Xq/9QW2xWGA2myX24+vpdOrHhvdTCFkQSMHG43FkbxfgaDTCZDKJxKXCQcEmwzRRLlfgOG4CJJhd10WpVEKn04lmGAej9pvrgmnUE5mHfTpXq1WIorif8nw+R6+volxronBdIr5GqD/vBVVVNVJDn7KiKNA0DQNZwkAd4uCCw4eTJo6zAj5lJbS5QSKzMCBNIpLharUCHXTxPJmi8SSh3ODx+JMjvgxzaL8acHspgVHg6XSCbpdFrVbzfddx/kt5J2CwUDQTn7McTgo9HGXaOMywYHnlbYDU8TaL4WiM7B2HH7ddZMm4vOXQl423Zxg3a6ijL/LB53iJfWUNaadTCdmWhYGi4yz/hPTpIxllnF91wYtqAsjzvJcSKWpEoj4glQ+VmWHoECUFRxdNpM9qOM60cPj9FzhB2YL45dmAUTMMw1dMuBQRyjSYUtB0A5Ik+374g8AoI8uyUXp4RLvDEk1bfodsLyUuvfDjEOhW13WYpgllIKHFKvj4rY30OYMveQGZeyoOPdk2K5IhzVKWJCL6tu8vycl0pofMZnOS9QwCkeTlDYvL6ycUHnjcVkVYtp0EHBkaWvkDVDPv8XD2Du2rNAY9NkHZ8yi9FTlYxPMfm6zdaA0DQHtkonN/jtbNCZjiV7D3p9Dl3ibYSzxztASO6+5XSnCDQq+HBsNs5OjF2ubfTdfrdb91djZ2+ORKpYLrYhHL5XLvw0AvKpfLoVGvJ99DfxHRtEreQvFFGzGa25kMXhCgE9phjFRcn958AUfowxFluOZwb4aOqmGpGVh0ebjGMNnY249o65B/iUcorTfNugvQc5fwSElobDjuL0IV7InW+ZOXAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="dd782132 d830 4c55 9884 cfac0a541b8e"\n        title=""\n        src="/static/dd782132-d830-4c55-9884-cfac0a541b8e-bda57d5228f69ce8752268817a4003b4-9c82e.png"\n        srcset="/static/dd782132-d830-4c55-9884-cfac0a541b8e-bda57d5228f69ce8752268817a4003b4-84a0c.png 200w,\n/static/dd782132-d830-4c55-9884-cfac0a541b8e-bda57d5228f69ce8752268817a4003b4-afbfd.png 400w,\n/static/dd782132-d830-4c55-9884-cfac0a541b8e-bda57d5228f69ce8752268817a4003b4-9c82e.png 495w"\n        sizes="(max-width: 495px) 100vw, 495px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="3-不可重复读"><a href="#3-%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 不可重复读</h3>\n<p>T<sub>2</sub> 读取一个数据，T<sub>1</sub> 对该数据做了修改。如果 T<sub>2</sub> 再次读取这个数据，此时读取的结果和和第一次读取的结果不同。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/c8d18ca9-0b09-441a-9a0c-fb063630d708-09ff5455ff3b7713436373dd3a4ea61e-a3fce.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 515px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 113.7864077669903%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACyElEQVQ4y4VVa3OaQBT1//+KTj8kM+0kmSZ1OrHNJI5JbOL7VaMGASG80aCAguIpi6JQN/bOMLvA2bP3cfZuBhRbr9fU+f8wZMzQQGR0XRdBEFAXx++LxQKO46QwGRoZMV3X4fs+9V882rYd4ZIbZeJJcmfLslCtVjFk2eg96en+ARhmiFqtDs/zj4ccztBs1KCp8p4IW+8S+BHPovT8O7V+52EQbKCG+Q5BniD/UEGnx0OUzZ2HwWpFVsENQ+3031Cs9JG7K6PRFaHq400OCViSJKiqisnYQLXF49NFE58vyvhy/Yrz6zY83wNCsvlIxEpWITU7+PEo4jTbwVWex9kvDn1W3RAS71YheOPFGrppYcDpqDQGaPUEcKKxz+E2tGWIF99UMKyIRqsLXpAxndnpKsdmzyxYYxXlp3uMhj1MJ8YuHcnCEVutfOiaSs9hDBy9VKFULiFXs+CKZ2CesqHePKpsiA5lWU4p4YDQUEQoTANs5xn8nxKkYSdKCY3Q8zwoikIXdmzufAHL9vBUroMdSbBd70NhUwmJq4ZhRGKWJRG1NofT702cfCvhPNfD1U0nWrhblIiGCFpVtW3I633IhMwJz67jzPDKyrgtDvCz0MbNwwseywMsl8tdlZPCXsxtiAKXLgo+sPeJCd+b74nCSMgTugLXcdF9lVAsdZG7fUbrRYRuvB8WZXNiNtXSNB2zrbai8FQdi1DU/pCHMhgiez/CyVULl3ccvuYY9IbKYVGS1SZdhHST3ffYw9BIFxLeNDCchEa7D05QYE1nxwlN00wR7jCJLAbBMiyofjyHcciiKKY9jDdLbOqEueT5UVrYNO+IkPP5fAjmD/4l5wzDoFAopBssrR8Sz+r1OgRBSO3+LyEbNmCCSzZgqofkntA0LToFH10DRJvj8Tg6y0THRwkJ2XQ6jfI4n8+phOQSI0ogxUsev7/hMe6vsu2iCQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="c8d18ca9 0b09 441a 9a0c fb063630d708"\n        title=""\n        src="/static/c8d18ca9-0b09-441a-9a0c-fb063630d708-09ff5455ff3b7713436373dd3a4ea61e-a3fce.png"\n        srcset="/static/c8d18ca9-0b09-441a-9a0c-fb063630d708-09ff5455ff3b7713436373dd3a4ea61e-96d1c.png 200w,\n/static/c8d18ca9-0b09-441a-9a0c-fb063630d708-09ff5455ff3b7713436373dd3a4ea61e-2b9d0.png 400w,\n/static/c8d18ca9-0b09-441a-9a0c-fb063630d708-09ff5455ff3b7713436373dd3a4ea61e-a3fce.png 515w"\n        sizes="(max-width: 515px) 100vw, 515px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="4-幻影读"><a href="#4-%E5%B9%BB%E5%BD%B1%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 幻影读</h3>\n<p>T<sub>1</sub> 读取某个范围的数据，T<sub>2</sub> 在这个范围内插入新的数据，T<sub>1</sub> 再次读取这个范围的数据，此时读取的结果和和第一次读取的结果不同。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/688dacfe-1057-412f-b3a1-86abb5b0f914-f2283e443153dce590f8d847cc601df5-6dd13.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 459px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 124.61873638344227%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC6klEQVQ4y5VVDVuiQBD2//+PfkB1dZ2ZX2GSqehpXVqoKAKLomCo+AHv7RKY+HXdPs84u+Pyzs7Mu7MxBMPzPF+vViuMx+OIbXeEdtM0Ydv2xsYktrtpvV5jMBhs1odAQxtzvOt8D7DT6YDjOCiKchAwXDuOg1KphGKxCNd1N//tARqGAZ7n/XBOATL98vKCWq0WDTmcMAk9SZKEbftu+KGeTCYghERDPpR2VVWO5m3bwS7gZ8j0ZzS2QHQD+nAEVRvgNpGCSgYY0LVGhjT8SeSjkydcLhyk+TckCjqSBQ23vIKbXBeJRxXJJ4JfeRXc0zvd6jLf/wZcODNkChJ+ZGVkBAsXqTYuM2zdpbqDy2wfD4IMz13thTybTjEcDqMhr5YL5GtdcLURuKoOTiBIFWTcl7XP+ZOCR6G1c8LPvMp9FWKrEwDii4ej2jOGrw0YVD4sE43GKw3Hgv0x8bXjzP3NIQvUXgut6j2E+2uUs1foPeeprR1UmUKvTQuePYM3mwee+wer7AWA8lsFzfQZfifOID2eQy+fQ2pU4IWA+7RRDwOGV240hNIVIb3/wWtdgErn5tj4CtmZzzG1PzCfzWDRG5LLcZhObSpTXy+Xyz1QNuzpjFLLiDiNLXzaNJEtE2SKfaSf+viZfUe2pPpFSfA9FKtikMOA3EHoE4vyl2iR/MZYwuOciOucilTJxHlSxJVPGUYdCRcZGXylGwU8xUMGeMeLSJUNpAUDyaKOO0pwRupUkeDmQQFfFr8PyI5POl3021RaEi2/gkq15l9BotPkqzpM6z+unrdaY/HWgqsRuPqAZRpE077VHFi3Zs14r2N7gfgdm55YECqbEN0D7SssQJ/ytd1uR4uyCSPshR0J8Xg80toPnY4BFAoF5PP5029Kr9fz27pFKXGqY7PHrF6v+7I9Yrv5YXlhp2O5YR8dyx8jOysK27ftPALINomi6L8nzWbTf4iOAbLryR4yJrIsH3+kjlX3u7a/3eR+6ZR27yUAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="688dacfe 1057 412f b3a1 86abb5b0f914"\n        title=""\n        src="/static/688dacfe-1057-412f-b3a1-86abb5b0f914-f2283e443153dce590f8d847cc601df5-6dd13.png"\n        srcset="/static/688dacfe-1057-412f-b3a1-86abb5b0f914-f2283e443153dce590f8d847cc601df5-fad05.png 200w,\n/static/688dacfe-1057-412f-b3a1-86abb5b0f914-f2283e443153dce590f8d847cc601df5-a671c.png 400w,\n/static/688dacfe-1057-412f-b3a1-86abb5b0f914-f2283e443153dce590f8d847cc601df5-6dd13.png 459w"\n        sizes="(max-width: 459px) 100vw, 459px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="解决方法"><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>解决方法</h2>\n<p>产生并发不一致性问题主要原因是破坏了事务的隔离性，解决方法是通过并发控制来保证隔离性。</p>\n<p>在没有并发的情况下，事务以串行的方式执行，互不干扰，因此可以保证隔离性。在并发的情况下，如果能通过并发控制，让事务的执行结果和某一个串行执行的结果相同，就认为事务的执行结果满足隔离性要求，也就是说是正确的。把这种事务执行方式称为 <strong>可串行化调度</strong> 。</p>\n<p><strong>并发控制可以通过封锁来实现，但是封锁操作需要用户自己控制，相当复杂。数据库管理系统提供了事务的隔离级别，让用户以一种更轻松的方式处理并发一致性问题。</strong></p>\n<h1 id="三、封锁"><a href="#%E4%B8%89%E3%80%81%E5%B0%81%E9%94%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三、封锁</h1>\n<h2 id="封锁粒度"><a href="#%E5%B0%81%E9%94%81%E7%B2%92%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>封锁粒度</h2>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/1a851e90-0d5c-4d4f-ac54-34c20ecfb903-52bf098a69c66740636507d9638776ca-cba36.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 432px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 80.0925925925926%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAezU0mgH/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAIBERID/9oACAEBAAEFAujZFuYH0LdH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAABARITEi/9oACAEBAAY/Askxclr/xAAbEAEAAwADAQAAAAAAAAAAAAABABEhEDFBYf/aAAgBAQABPyFAJo1EFaL5KmXW/ssz3j//2gAMAwEAAgADAAAAEHDP/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEh/9oACAEDAQE/EKx//8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEh/9oACAECAQE/EIh//8QAHRABAAICAgMAAAAAAAAAAAAAAREhADEQUXGR4f/aAAgBAQABPxCVGodV4xyhBW6wAVPvI5sTsGz5vIdGthpeP//Z\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="1a851e90 0d5c 4d4f ac54 34c20ecfb903"\n        title=""\n        src="/static/1a851e90-0d5c-4d4f-ac54-34c20ecfb903-52bf098a69c66740636507d9638776ca-cba36.jpg"\n        srcset="/static/1a851e90-0d5c-4d4f-ac54-34c20ecfb903-52bf098a69c66740636507d9638776ca-d4ced.jpg 200w,\n/static/1a851e90-0d5c-4d4f-ac54-34c20ecfb903-52bf098a69c66740636507d9638776ca-88845.jpg 400w,\n/static/1a851e90-0d5c-4d4f-ac54-34c20ecfb903-52bf098a69c66740636507d9638776ca-cba36.jpg 432w"\n        sizes="(max-width: 432px) 100vw, 432px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>应该尽量只锁定需要修改的那部分数据，而不是所有的资源。锁定的数据量越少，发生锁争用的可能就越小，系统的并发程度就越高。</p>\n<p>但是加锁需要消耗资源，锁的各种操作，包括获取锁，检查锁是否已经解除、释放锁，都会增加系统开销。因此封锁粒度越小，系统开销就越大。需要在锁开销以及数据安全性之间做一个权衡。</p>\n<p>MySQL 中提供了两种封锁粒度：行级锁以及表级锁。</p>\n<h2 id="封锁类型"><a href="#%E5%B0%81%E9%94%81%E7%B1%BB%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>封锁类型</h2>\n<h3 id="1-排它锁与共享锁"><a href="#1-%E6%8E%92%E5%AE%83%E9%94%81%E4%B8%8E%E5%85%B1%E4%BA%AB%E9%94%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 排它锁与共享锁</h3>\n<ul>\n<li>排它锁（Exclusive），简写为 X 锁，又称写锁。</li>\n<li>共享锁（Shared），简写为 S 锁，又称读锁。</li>\n</ul>\n<p>有以下两个规定：</p>\n<ol>\n<li>一个事务对数据对象 A 加了 X 锁，就可以对 A 进行读取和更新。加锁期间其它事务不能对 A 加任何锁。</li>\n<li>一个事务对数据对象 A 加了 S 锁，可以对 A 进行读取操作，但是不能进行更新操作。加锁期间其它事务能对 A 加 S 锁，但是不能加 X 锁。</li>\n</ol>\n<p>锁的兼容关系如下：</p>\n<table>\n<thead>\n<tr>\n<th align="center">-</th>\n<th align="center">X</th>\n<th align="center">S</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">X</td>\n<td align="center">No</td>\n<td align="center">No</td>\n</tr>\n<tr>\n<td align="center">S</td>\n<td align="center">No</td>\n<td align="center">Yes</td>\n</tr>\n</tbody>\n</table>\n<h3 id="2-意向锁"><a href="#2-%E6%84%8F%E5%90%91%E9%94%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 意向锁</h3>\n<p>意向锁（Intention Locks）可以支持多粒度封锁。它本身是一个表锁，通过在原来的 X/S 锁之上引入了 IX/IS，用来表示一个事务想要在某个数据行上加 X 锁或 S 锁。</p>\n<p>有以下两个规定：</p>\n<ol>\n<li>一个事务在获得某个数据行对象的 S 锁之前，必须先获得 IS 锁或者更强的锁；</li>\n<li>一个事务在获得某个数据行对象的 X 锁之前，必须先获得 IX 锁。</li>\n</ol>\n<p>各种锁的兼容关系如下：</p>\n<table>\n<thead>\n<tr>\n<th align="center">-</th>\n<th align="center">X</th>\n<th align="center">IX</th>\n<th align="center">S</th>\n<th align="center">IS</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">X</td>\n<td align="center">No</td>\n<td align="center">No</td>\n<td align="center">No</td>\n<td align="center">No</td>\n</tr>\n<tr>\n<td align="center">IX</td>\n<td align="center">No</td>\n<td align="center">Yes</td>\n<td align="center">No</td>\n<td align="center">Yes</td>\n</tr>\n<tr>\n<td align="center">S</td>\n<td align="center">No</td>\n<td align="center">No</td>\n<td align="center">Yes</td>\n<td align="center">Yes</td>\n</tr>\n<tr>\n<td align="center">IS</td>\n<td align="center">No</td>\n<td align="center">Yes</td>\n<td align="center">Yes</td>\n<td align="center">Yes</td>\n</tr>\n</tbody>\n</table>\n<h2 id="封锁协议"><a href="#%E5%B0%81%E9%94%81%E5%8D%8F%E8%AE%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>封锁协议</h2>\n<h3 id="1-三级封锁协议"><a href="#1-%E4%B8%89%E7%BA%A7%E5%B0%81%E9%94%81%E5%8D%8F%E8%AE%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 三级封锁协议</h3>\n<p><strong>一级封锁协议</strong></p>\n<p>事务 T 要修改数据 A 时必须加 X 锁，直到 T 结束才释放锁。</p>\n<p>可以解决丢失修改问题，因为不能同时有两个事务对同一个数据进行修改，那么一个事务的修改就不会被覆盖。</p>\n<table>\n<thead>\n<tr>\n<th align="center">T\n<sub>\n1\n</sub></th>\n<th align="center">T\n<sub>\n1\n</sub></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">lock-x(A)</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">read A=20</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">lock-x(A)</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">wait</td>\n</tr>\n<tr>\n<td align="center">write A=19</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">commit</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">unlock-x(A)</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">obtain</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">read A=19</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">write A=21</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">commit</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">unlock-x(A)</td>\n</tr>\n</tbody>\n</table>\n<p><strong>二级封锁协议</strong></p>\n<p>在一级的基础上，要求读取数据 A 时必须加 S 锁，读取完马上释放 S 锁。</p>\n<p>可以解决读脏数据问题，因为如果一个事务在对数据 A 进行修改，根据 1 级封锁协议，会加 X 锁，那么就不能再加 S 锁了，也就是不会读入数据。</p>\n<table>\n<thead>\n<tr>\n<th align="center">T\n<sub>\n1\n</sub></th>\n<th align="center">T\n<sub>\n1\n</sub></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">lock-x(A)</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">read A=20</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">write A=19</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">lock-s(A)</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">wait</td>\n</tr>\n<tr>\n<td align="center">rollback</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">A=20</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">unlock-x(A)</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">obtain</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">read A=20</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">commit</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">unlock-s(A)</td>\n</tr>\n</tbody>\n</table>\n<p><strong>三级封锁协议</strong></p>\n<p>在二级的基础上，要求读取数据 A 时必须加 S 锁，直到事务结束了才能释放 S 锁。</p>\n<p>可以解决不可重复读的问题，因为读 A 时，其它事务不能对 A 加 X 锁，从而避免了在读的期间数据发生改变。</p>\n<table>\n<thead>\n<tr>\n<th align="center">T\n<sub>\n1\n</sub></th>\n<th align="center">T\n<sub>\n1\n</sub></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">lock-s(A)</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">read A=20</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">lock-x(A)</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">wait</td>\n</tr>\n<tr>\n<td align="center">read A=20</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">commit</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center">unlock-s(A)</td>\n<td align="center"></td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">obtain</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">read A=20</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">write A=19</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">commit</td>\n</tr>\n<tr>\n<td align="center"></td>\n<td align="center">unlock-X(A)</td>\n</tr>\n</tbody>\n</table>\n<h3 id="2-两段锁协议"><a href="#2-%E4%B8%A4%E6%AE%B5%E9%94%81%E5%8D%8F%E8%AE%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 两段锁协议</h3>\n<p>加锁和解锁分为两个阶段进行，事务 T 对数据 A 进行读或者写操作之前，必须先获得对 A 的封锁，并且在释放一个封锁之后，T 不能再获得任何的其它锁。</p>\n<p>事务遵循两段锁协议是保证并发操作可串行化调度的充分条件。例如以下操作满足两段锁协议，它是可串行化调度。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92886057136626900000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`lock-x(A)...lock-s(B)...lock-s(c)...unlock(A)...unlock(C)...unlock(B)`, `92886057136626900000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">lock-x(A)...lock-s(B)...lock-s(c)...unlock(A)...unlock(C)...unlock(B)</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>但不是必要条件，例如以下操作不满足两段锁协议，但是它还是可串行化调度。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5510137821506444000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`lock-x(A)...unlock(A)...lock-s(B)...unlock(B)...lock-s(c)...unlock(C)...`, `5510137821506444000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">lock-x(A)...unlock(A)...lock-s(B)...unlock(B)...lock-s(c)...unlock(C)...</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h1 id="四、隔离级别"><a href="#%E5%9B%9B%E3%80%81%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>四、隔离级别</h1>\n<p><font size=4> <strong>1. 未提交读（READ UNCOMMITTED）</strong> </font> </br></p>\n<p>事务中的修改，即使没有提交，对其它事务也是可见的。</p>\n<p><font size=4> <strong>2. 提交读（READ COMMITTED）</strong> </font> </br></p>\n<p>一个事务只能读取已经提交的事务所做的修改。换句话说，一个事务所做的修改在提交之前对其它事务是不可见的。</p>\n<p><font size=4> <strong>3. 可重复读（REPEATABLE READ）</strong> </font> </br></p>\n<p>保证在同一个事务中多次读取同样数据的结果是一样的。</p>\n<p><font size=4> <strong>4. 可串行化（SERIALIXABLE）</strong> </font> </br></p>\n<p>强制事务串行执行。</p>\n<p><font size=4> <strong>四个隔离级别的对比</strong> </font> </br></p>\n<table>\n<thead>\n<tr>\n<th align="center">隔离级别</th>\n<th align="center">脏读</th>\n<th align="center">不可重复读</th>\n<th align="center">幻影读</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">未提交读</td>\n<td align="center">YES</td>\n<td align="center">YES</td>\n<td align="center">YES</td>\n</tr>\n<tr>\n<td align="center">提交读</td>\n<td align="center">NO</td>\n<td align="center">YES</td>\n<td align="center">YES</td>\n</tr>\n<tr>\n<td align="center">可重复读</td>\n<td align="center">NO</td>\n<td align="center">NO</td>\n<td align="center">YES</td>\n</tr>\n<tr>\n<td align="center">可串行化</td>\n<td align="center">NO</td>\n<td align="center">NO</td>\n<td align="center">NO</td>\n</tr>\n</tbody>\n</table>\n<h1 id="五、多版本并发控制"><a href="#%E4%BA%94%E3%80%81%E5%A4%9A%E7%89%88%E6%9C%AC%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>五、多版本并发控制</h1>\n<p>（Multi-Version Concurrency Control, MVCC）是 MySQL 的 InnoDB 存储引擎实现隔离级别的一种具体方式，用于实现提交读和可重复读这两种隔离级别。而未提交读隔离级别总是读取最新的数据行，无需使用 MVCC；可串行化隔离级别需要对所有读取的行都加锁，单纯使用 MVCC 无法实现。</p>\n<h2 id="版本号"><a href="#%E7%89%88%E6%9C%AC%E5%8F%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>版本号</h2>\n<ul>\n<li>系统版本号：是一个递增的数字，每开始一个新的事务，系统版本号就会自动递增。</li>\n<li>事务版本号：事务开始时的系统版本号。</li>\n</ul>\n<p>InooDB 的 MVCC 在每行记录后面都保存着两个隐藏的列，用来存储两个版本号：</p>\n<ul>\n<li>创建版本号：指示创建一个数据行的快照时的系统版本号；</li>\n<li>删除版本号：如果该快照的删除版本号大于当前事务版本号表示该快照有效，否则表示该快照已经被删除了。</li>\n</ul>\n<h2 id="undo-日志"><a href="#undo-%E6%97%A5%E5%BF%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Undo 日志</h2>\n<p>InnoDB 的 MVCC 使用到的快照存储在 Undo 日志中，该日志通过回滚指针把一个数据行（Record）的所有快照连接起来。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/e41405a8-7c05-4f70-8092-e961e28d3112-e4fb40fe4b5144998bf1b1179d8da315-6ce5d.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 536px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 36.38059701492538%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3QUD/8QAFRABAQAAAAAAAAAAAAAAAAAAEDH/2gAIAQEAAQUCj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABkQAAIDAQAAAAAAAAAAAAAAAAABESFRYf/aAAgBAQABPyG+iXgj/9oADAMBAAIAAwAAABDwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQADAAMAAAAAAAAAAAAAAAEAETEhQZH/2gAIAQEAAT8QSxNPc58exKWlT//Z\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="e41405a8 7c05 4f70 8092 e961e28d3112"\n        title=""\n        src="/static/e41405a8-7c05-4f70-8092-e961e28d3112-e4fb40fe4b5144998bf1b1179d8da315-6ce5d.jpg"\n        srcset="/static/e41405a8-7c05-4f70-8092-e961e28d3112-e4fb40fe4b5144998bf1b1179d8da315-60771.jpg 200w,\n/static/e41405a8-7c05-4f70-8092-e961e28d3112-e4fb40fe4b5144998bf1b1179d8da315-bb403.jpg 400w,\n/static/e41405a8-7c05-4f70-8092-e961e28d3112-e4fb40fe4b5144998bf1b1179d8da315-6ce5d.jpg 536w"\n        sizes="(max-width: 536px) 100vw, 536px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="实现过程"><a href="#%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现过程</h2>\n<p>以下过程针对可重复读隔离级别。</p>\n<h3 id="1-select"><a href="#1-select" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. SELECT</h3>\n<p>该操作必须保证多个事务读取到同一个数据行的快照，这个快照是最近的一个有效快照。但是也有例外，如果有一个事务正在修改该数据行，那么它可以读取事务本身所做的修改，而不用和其它事务的读取结果一致。</p>\n<p>当开始新一个事务时，该事务的版本号肯定会大于当前所有数据行快照的创建版本号，理解这一点很关键。</p>\n<p>把没对一个数据行做修改的事务称为 T，T 所要读取的数据行快照的创建版本号必须小于 T 的版本号，因为如果大于或者等于 T 的版本号，那么表示该数据行快照是其它事务的最新修改，因此不能去读取它。</p>\n<p>除了上面的要求，T 所要读取的数据行快照的删除版本号必须大于 T 的版本号，因为如果小于等于 T 的版本号，那么表示该数据行快照是已经被删除的，不应该去读取它。</p>\n<h3 id="2-insert"><a href="#2-insert" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. INSERT</h3>\n<p>将系统版本号作为数据行快照的创建版本号。</p>\n<h3 id="3-delete"><a href="#3-delete" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. DELETE</h3>\n<p>将系统版本号作为数据行快照的删除版本号。</p>\n<h3 id="4-update"><a href="#4-update" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. UPDATE</h3>\n<p>将系统版本号作为更新后的数据行快照的创建版本号，同时将系统版本号作为作为更新前的数据行快照的删除版本号。可以理解为先执行 DELETE 后执行 INSERT。</p>\n<h2 id="快照读与当前读"><a href="#%E5%BF%AB%E7%85%A7%E8%AF%BB%E4%B8%8E%E5%BD%93%E5%89%8D%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>快照读与当前读</h2>\n<h3 id="1-当前读"><a href="#1-%E5%BD%93%E5%89%8D%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 当前读</h3>\n<p>读取最新的数据。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9039484105325690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`select * from table ....;`, `9039484105325690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="2-快照读"><a href="#2-%E5%BF%AB%E7%85%A7%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 快照读</h3>\n<p>读取快照中的数据。</p>\n<p>引入快照读的目的主要是为了免去加锁操作带来的性能开销，但是当前读需要加锁。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34784421896430960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`select * from table where ? lock in share mode;\nselect * from table where ? for update;\ninsert;\nupdate ;\ndelete;`, `34784421896430960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token keyword">where</span> ? <span class="token keyword">lock</span> <span class="token operator">in</span> <span class="token keyword">share</span> <span class="token keyword">mode</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token keyword">where</span> ? <span class="token keyword">for</span> <span class="token keyword">update</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span><span class="token punctuation">;</span>\n<span class="token keyword">update</span> <span class="token punctuation">;</span>\n<span class="token keyword">delete</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="六、next-key-locks"><a href="#%E5%85%AD%E3%80%81next-key-locks" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>六、Next-Key Locks</h1>\n<p>Next-Key Locks 也是 MySQL 的 InnoDB 存储引擎的一种锁实现。MVCC 不能解决幻读的问题，Next-Key Locks 就是为了解决这个问题而存在的。在可重复读隔离级别下，MVCC + Next-Key Locks，就可以防止幻读的出现。</p>\n<h2 id="record-locks"><a href="#record-locks" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Record Locks</h2>\n<p>锁定的对象是索引，而不是数据。如果表没有设置索引，InnoDB 会自动在主键上创建隐藏的聚集索引，因此 Record Locks 依然可以使用。</p>\n<h2 id="grap-locks"><a href="#grap-locks" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Grap Locks</h2>\n<p>锁定一个范围内的索引，例如当一个事务执行以下语句，其它事务就不能在 t.c 中插入 15。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95848175127416320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT c FROM t WHERE c BETWEEN 10 and 20 FOR UPDATE;`, `95848175127416320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> c <span class="token keyword">FROM</span> t <span class="token keyword">WHERE</span> c <span class="token operator">BETWEEN</span> <span class="token number">10</span> <span class="token operator">and</span> <span class="token number">20</span> <span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="next-key-locks"><a href="#next-key-locks" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Next-Key Locks</h2>\n<p>它是 Record Locks 和 Gap Locks 的结合。在 user 中有以下记录：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="20191781063228700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`|   id | last_name   | first_name   |   age |\n|------|-------------|--------------|-------|\n|    4 | stark       | tony         |    21 |\n|    1 | tom         | hiddleston   |    30 |\n|    3 | morgan      | freeman      |    40 |\n|    5 | jeff        | dean         |    50 |\n|    2 | donald      | trump        |    80 |\n+------|-------------|--------------|-------+`, `20191781063228700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token operator">|</span>   id <span class="token operator">|</span> last_name   <span class="token operator">|</span> first_name   <span class="token operator">|</span>   age <span class="token operator">|</span>\n<span class="token operator">|</span><span class="token comment">------|-------------|--------------|-------|</span>\n<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> stark       <span class="token operator">|</span> tony         <span class="token operator">|</span>    <span class="token number">21</span> <span class="token operator">|</span>\n<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> tom         <span class="token operator">|</span> hiddleston   <span class="token operator">|</span>    <span class="token number">30</span> <span class="token operator">|</span>\n<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> morgan      <span class="token operator">|</span> freeman      <span class="token operator">|</span>    <span class="token number">40</span> <span class="token operator">|</span>\n<span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span> jeff        <span class="token operator">|</span> dean         <span class="token operator">|</span>    <span class="token number">50</span> <span class="token operator">|</span>\n<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> donald      <span class="token operator">|</span> trump        <span class="token operator">|</span>    <span class="token number">80</span> <span class="token operator">|</span>\n<span class="token operator">+</span><span class="token comment">------|-------------|--------------|-------+</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>那么就需要锁定以下范围：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39592284133333870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`(-∞, 21]\n(21, 30]\n(30, 40]\n(40, 50]\n(50, 80]\n(80, ∞)`, `39592284133333870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token punctuation">(</span><span class="token operator">-</span>∞<span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">]</span>\n<span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span>\n<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span>\n<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span>\n<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">]</span>\n<span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> ∞<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="七、关系数据库设计理论"><a href="#%E4%B8%83%E3%80%81%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%90%86%E8%AE%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>七、关系数据库设计理论</h1>\n<h2 id="函数依赖"><a href="#%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>函数依赖</h2>\n<p>记 A->B 表示 A 函数决定 B，也可以说 B 函数依赖于 A。</p>\n<p>如果 {A1，A2，… ，An} 是关系的一个或多个属性的集合，该集合决定了关系的其它所有属性并且是最小的，那么该集合就称为键码。</p>\n<p>对于 W->A，如果能找到 W 的真子集 W’，使得 W’-> A，那么 W->A 就是部分函数依赖，否则就是完全函数依赖；</p>\n<h2 id="异常"><a href="#%E5%BC%82%E5%B8%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>异常</h2>\n<p>以下的学生课程关系的函数依赖为 Sno, Cname -> Sname, Sdept, Mname, Grade，键码为 {Sno, Cname}。也就是说，确定学生和课程之后，就能确定其它信息。</p>\n<table>\n<thead>\n<tr>\n<th align="center">Sno</th>\n<th align="center">Sname</th>\n<th align="center">Sdept</th>\n<th align="center">Mname</th>\n<th align="center">Cname</th>\n<th align="center">Grade</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">1</td>\n<td align="center">学生-1</td>\n<td align="center">学院-1</td>\n<td align="center">院长-1</td>\n<td align="center">课程-1</td>\n<td align="center">90</td>\n</tr>\n<tr>\n<td align="center">2</td>\n<td align="center">学生-2</td>\n<td align="center">学院-2</td>\n<td align="center">院长-2</td>\n<td align="center">课程-2</td>\n<td align="center">80</td>\n</tr>\n<tr>\n<td align="center">2</td>\n<td align="center">学生-2</td>\n<td align="center">学院-2</td>\n<td align="center">院长-2</td>\n<td align="center">课程-1</td>\n<td align="center">100</td>\n</tr>\n</tbody>\n</table>\n<p>不符合范式的关系，会产生很多异常，主要有以下四种异常：</p>\n<ol>\n<li>冗余数据，例如学生-2 出现了两次。</li>\n<li>修改异常，修改了一个记录中的信息，但是另一个记录中相同的信息却没有被修改。</li>\n<li>删除异常，删除一个信息，那么也会丢失其它信息。例如如果删除了课程-1，需要删除第二行和第三行，那么学生-1 的信息就会丢失。</li>\n<li>插入异常，例如想要插入一个学生的信息，如果这个学生还没选课，那么就无法插入。</li>\n</ol>\n<h2 id="范式"><a href="#%E8%8C%83%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>范式</h2>\n<p>范式理论是为了解决以上提到四种异常。高级别范式的依赖于低级别的范式。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/c2d343f7-604c-4856-9a3c-c71d6f67fecc-1589066cae8d56b32413e5a67016f2da-1c0b9.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 472px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 83.68644067796612%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB7klEQVQ4y4WU147CQAxF8/+/xANCPACigwBRRRW99+rVsdZRJmG1I0XT7Otjz0w8+W2fz0fCjbX7/S6Xy0W2262cz2e53W7yfr8l7Ge9x8AmOO52O3m9XnI8HlWE73Q6qQj7+/1eNpuN2oXF6B3BVqsl8XhcjZ/Pp0/B+Hq9Ki3f4/HQ+Wq10rFDGI4AQbValVwup3TMCQAl1IfDQeeskz60QVGHcL1eKwFC7XZbCUiffUsXMUQRR8xK49SQRgps0BCZTqeafr1eVzoOxGwhCtICQkBHkGjUijlkjBFKJBKSSqUkmUzKeDzWNYQQIAgQy+XSh/GC6dLMgUZ0nOj7/b5/MNTOUqUMi8VCRcnMIWSMGA6kxRoNUQJmMhnpdrt+WaBkHbvRaBQV5K4ZugljxB59p9PRmlJfiLChPBAOh0P1jwiSCqmROj1CFgSiRqMhsVhMZrOZBkScQPRODTEmIjWiNyGjZk4tCZLP5yWbzUqv19NUK5WK1jLy9EiD0zUBu7QIEQh6yNLptBSLRT39UqmkL8y/2MGXghiiOCNmL8EuO3SQcOLlclmFeVGRlxIW5eRwpODQ2fWAjrs4GAykUCgo3b9v2Xp7WvP5XOtEvbgyzWZTarWaTCaTr78w76//Go0DgYCU7VIbkdmG/X4Atn0a//WMfsMAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="c2d343f7 604c 4856 9a3c c71d6f67fecc"\n        title=""\n        src="/static/c2d343f7-604c-4856-9a3c-c71d6f67fecc-1589066cae8d56b32413e5a67016f2da-1c0b9.png"\n        srcset="/static/c2d343f7-604c-4856-9a3c-c71d6f67fecc-1589066cae8d56b32413e5a67016f2da-689e7.png 200w,\n/static/c2d343f7-604c-4856-9a3c-c71d6f67fecc-1589066cae8d56b32413e5a67016f2da-d007c.png 400w,\n/static/c2d343f7-604c-4856-9a3c-c71d6f67fecc-1589066cae8d56b32413e5a67016f2da-1c0b9.png 472w"\n        sizes="(max-width: 472px) 100vw, 472px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="1-第一范式-1nf"><a href="#1-%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F-1nf" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 第一范式 (1NF)</h3>\n<p>属性不可分；</p>\n<h3 id="2-第二范式-2nf"><a href="#2-%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F-2nf" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 第二范式 (2NF)</h3>\n<p>每个非主属性完全函数依赖于键码。</p>\n<p>可以通过分解来满足。</p>\n<p><font size=4> <strong>分解前</strong> </font><br></p>\n<table>\n<thead>\n<tr>\n<th align="center">Sno</th>\n<th align="center">Sname</th>\n<th align="center">Sdept</th>\n<th align="center">Mname</th>\n<th align="center">Cname</th>\n<th align="center">Grade</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">1</td>\n<td align="center">学生-1</td>\n<td align="center">学院-1</td>\n<td align="center">院长-1</td>\n<td align="center">课程-1</td>\n<td align="center">90</td>\n</tr>\n<tr>\n<td align="center">2</td>\n<td align="center">学生-2</td>\n<td align="center">学院-2</td>\n<td align="center">院长-2</td>\n<td align="center">课程-2</td>\n<td align="center">80</td>\n</tr>\n<tr>\n<td align="center">2</td>\n<td align="center">学生-2</td>\n<td align="center">学院-2</td>\n<td align="center">院长-2</td>\n<td align="center">课程-1</td>\n<td align="center">100</td>\n</tr>\n</tbody>\n</table>\n<p>以上学生课程关系中，{Sno, Cname} 为键码，有如下函数依赖：</p>\n<ul>\n<li>Sno, Cname -> Sname, Sdept, Mname</li>\n<li>Sno -> Sname, Sdept</li>\n<li>Sdept -> Mname</li>\n<li>Sno -> Manme</li>\n<li>Sno, Cname-> Grade</li>\n</ul>\n<p>Grade 完全函数依赖于键码，它没有任何冗余数据，每个学生的每门课都有特定的成绩。</p>\n<p>Sname, Sdept 和 Manme 都函数依赖于 Sno，而部分依赖于键码。当一个学生选修了多门课时，这些数据就会出现多次，造成大量冗余数据。</p>\n<p><font size=4> <strong>分解后</strong> </font><br></p>\n<p>关系-1</p>\n<table>\n<thead>\n<tr>\n<th align="center">Sno</th>\n<th align="center">Sname</th>\n<th align="center">Sdept</th>\n<th align="center">Mname</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">1</td>\n<td align="center">学生-1</td>\n<td align="center">学院-1</td>\n<td align="center">院长-1</td>\n</tr>\n<tr>\n<td align="center">2</td>\n<td align="center">学生-2</td>\n<td align="center">学院-2</td>\n<td align="center">院长-2</td>\n</tr>\n</tbody>\n</table>\n<p>有以下函数依赖：</p>\n<ul>\n<li>Sno -> Sname, Sdept, Mname</li>\n<li>Sdept -> Mname</li>\n</ul>\n<p>关系-2</p>\n<table>\n<thead>\n<tr>\n<th align="center">Sno</th>\n<th align="center">Cname</th>\n<th align="center">Grade</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">1</td>\n<td align="center">课程-1</td>\n<td align="center">90</td>\n</tr>\n<tr>\n<td align="center">2</td>\n<td align="center">课程-2</td>\n<td align="center">80</td>\n</tr>\n<tr>\n<td align="center">2</td>\n<td align="center">课程-1</td>\n<td align="center">100</td>\n</tr>\n</tbody>\n</table>\n<p>有以下函数依赖：</p>\n<ul>\n<li>Sno, Cname -> Grade</li>\n</ul>\n<h3 id="3-第三范式-3nf"><a href="#3-%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F-3nf" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 第三范式 (3NF)</h3>\n<p>非主属性不传递依赖于键码。</p>\n<p>上面的关系-1 中存在以下传递依赖：Sno -> Sdept -> Mname，可以进行以下分解：</p>\n<p>关系-11</p>\n<table>\n<thead>\n<tr>\n<th align="center">Sno</th>\n<th align="center">Sname</th>\n<th align="center">Sdept</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">1</td>\n<td align="center">学生-1</td>\n<td align="center">学院-1</td>\n</tr>\n<tr>\n<td align="center">2</td>\n<td align="center">学生-2</td>\n<td align="center">学院-2</td>\n</tr>\n</tbody>\n</table>\n<p>关系-12</p>\n<table>\n<thead>\n<tr>\n<th align="center">Sdept</th>\n<th align="center">Mname</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">学院-1</td>\n<td align="center">院长-1</td>\n</tr>\n<tr>\n<td align="center">学院-2</td>\n<td align="center">院长-2</td>\n</tr>\n</tbody>\n</table>\n<h3 id="4-bc-范式（bcnf）"><a href="#4-bc-%E8%8C%83%E5%BC%8F%EF%BC%88bcnf%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. BC 范式（BCNF）</h3>\n<p>所有属性不传递依赖于键码。</p>\n<p>关系 STC(Sname, Tname, Cname, Grade) 的四个属性分别为学生姓名、教师姓名、课程名和成绩，它的键码为 (Sname, Cname, Tname)，有以下函数依赖：</p>\n<ul>\n<li>Sname, Cname -> Tname</li>\n<li>Sname, Cname -> Grade</li>\n<li>Sname, Tname -> Cname</li>\n<li>Sname, Tname -> Grade</li>\n<li>Tname -> Cname</li>\n</ul>\n<p>存在着以下函数传递依赖：</p>\n<ul>\n<li>Sname -> Tname -> Cname</li>\n</ul>\n<p>可以分解成 SC(Sname, Cname, Grade) 和 ST(Sname, Tname)，对于 ST，属性之间是多对多关系，无函数依赖。</p>\n<h1 id="八、数据库系统概述"><a href="#%E5%85%AB%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>八、数据库系统概述</h1>\n<h2 id="基本术语"><a href="#%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>基本术语</h2>\n<h3 id="1-数据模型"><a href="#1-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 数据模型</h3>\n<p>由数据结构、数据操作和完整性三个要素组成。</p>\n<h3 id="2-数据库系统"><a href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 数据库系统</h3>\n<p>数据库系统包含所有与数据库相关的内容，包括数据库、数据库管理系统、应用程序以及数据库管理员和用户，还包括相关的硬件和软件。</p>\n<h2 id="数据库的三层模式和两层映像"><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%89%E5%B1%82%E6%A8%A1%E5%BC%8F%E5%92%8C%E4%B8%A4%E5%B1%82%E6%98%A0%E5%83%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数据库的三层模式和两层映像</h2>\n<ul>\n<li>外模式：局部逻辑结构</li>\n<li>模式：全局逻辑结构</li>\n<li>内模式：物理结构</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/20150928140509757-59885160d78d971e00c05f3efd44ab88-b5415.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 95.72446555819477%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB1klEQVQ4y4XT2Y4aUQwEUP7/13hBQgSJtdl3EEuzQ3JoM81MK1H8MGPqXruq7Nul31mcz+f1en273Z7P52q1Oh6PwP1+v9lsINfrFXg6nYCubbdboLwU/5zVarX5fJ6mabPZbLVaj8djMBgAIbvdTjIcDoGNRqPdbnc6ncPh8C7G0O12o+t0Ou31elTolSTJIYt+vw+/3++SyWTiAjmlkH25XGazmWK98oR4ub5qxuMxFzqORiO9cADfxbIwybyz+BnBKtxtiaaUO4W8PMeNmAE9lUqFYQyBh6nlcgmv1+uULxYLAzKFT7FO+qHlMw6+B/1qQpGbJJjiZ9rhR6LYkDGYh59EGjKfRMkhueEfzFGsq00YUq4ZZ5L00vQADE7Iu9g8mUQYjSPcC/3r9Wq5XOjrtgs4SIilvoptrFwu0xY8MXllxNfrv4xqMhkfvwLueVSrVdt+rYoHDmMH+YRRwYGcwyEeAsF68e9vPNui5+DHwJh7FEl2WUQviUZRVZx2/uAw2yc2R2kW8PhCco4ic3imCq2PwVXm87UxzGPO8ZdiXb0WCG92E5USgoG55k+xyu+riseg+JaFV2HU+TqKxYXQyAp92FaqS6Hvf4qR8OY9xFP7V/wB4yxC5vYZ92AAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="20150928140509757"\n        title=""\n        src="/static/20150928140509757-59885160d78d971e00c05f3efd44ab88-fee1c.png"\n        srcset="/static/20150928140509757-59885160d78d971e00c05f3efd44ab88-a67b7.png 200w,\n/static/20150928140509757-59885160d78d971e00c05f3efd44ab88-0b187.png 400w,\n/static/20150928140509757-59885160d78d971e00c05f3efd44ab88-fee1c.png 800w,\n/static/20150928140509757-59885160d78d971e00c05f3efd44ab88-b5415.png 842w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="1-外模式"><a href="#1-%E5%A4%96%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 外模式</h3>\n<p>又称用户模式，是用户和数据库系统的接口，特定的用户只能访问数据库系统提供给他的外模式中的数据。例如不同的用户创建了不同数据库，那么一个用户只能访问他有权限访问的数据库。</p>\n<p>一个数据库可以有多个外模式，一个用户只能有一个外模式，但是一个外模式可以给多个用户使用。</p>\n<h3 id="2-模式"><a href="#2-%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 模式</h3>\n<p>可以分为概念模式和逻辑模式，概念模式可以用概念-关系来描述；逻辑模式使用特定的数据模式（比如关系模型）来描述数据的逻辑结构，这种逻辑结构包括数据的组成、数据项的名称、类型、取值范围。不仅如此，逻辑模式还要描述数据之间的关系、数据的完整性与安全性要求。</p>\n<h3 id="3-内模式"><a href="#3-%E5%86%85%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 内模式</h3>\n<p>又称为存储模式，描述记录的存储方式，例如索引的组织方式、数据是否压缩以及是否加密等等。</p>\n<h3 id="4-外模式模式映像"><a href="#4-%E5%A4%96%E6%A8%A1%E5%BC%8F%E6%A8%A1%E5%BC%8F%E6%98%A0%E5%83%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 外模式/模式映像</h3>\n<p>把外模式的局部逻辑结构和模式的全局逻辑结构联系起来。该映像可以保证数据和应用程序的逻辑独立性。</p>\n<h3 id="5-模式内模式映像"><a href="#5-%E6%A8%A1%E5%BC%8F%E5%86%85%E6%A8%A1%E5%BC%8F%E6%98%A0%E5%83%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. 模式/内模式映像</h3>\n<p>把模式的全局逻辑结构和内模式的物理结构联系起来，该映像可以保证数据和应用程序的物理独立性。</p>\n<h1 id="九、关系数据库建模"><a href="#%E4%B9%9D%E3%80%81%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BB%BA%E6%A8%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>九、关系数据库建模</h1>\n<h2 id="er-图"><a href="#er-%E5%9B%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ER 图</h2>\n<p>Entity-Relationship，有三个组成部分：实体、属性、联系。</p>\n<h3 id="1-实体的三种联系"><a href="#1-%E5%AE%9E%E4%BD%93%E7%9A%84%E4%B8%89%E7%A7%8D%E8%81%94%E7%B3%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 实体的三种联系</h3>\n<p>联系包含一对一，一对多，多对多三种。</p>\n<p>如果 A 到 B 是一对多关系，那么画个带箭头的线段指向 B；如果是一对一，画两个带箭头的线段；如果是多对多，画两个不带箭头的线段。下图的 Course 和 Student 是一对多的关系。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/292b4a35-4507-4256-84ff-c218f108ee31-bbd0031829e7578e92a5f8222b8fffb1-763cb.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 413px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 14.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3AWD/8QAFhABAQEAAAAAAAAAAAAAAAAAAAFB/9oACAEBAAEFAmR//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAERMSGR8P/aAAgBAQABPyGMO9kdZQ//2gAMAwEAAgADAAAAEAAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAIDAQAAAAAAAAAAAAAAAQAxESFRkf/aAAgBAQABPxADt9IFs31Bgz//2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="292b4a35 4507 4256 84ff c218f108ee31"\n        title=""\n        src="/static/292b4a35-4507-4256-84ff-c218f108ee31-bbd0031829e7578e92a5f8222b8fffb1-763cb.jpg"\n        srcset="/static/292b4a35-4507-4256-84ff-c218f108ee31-bbd0031829e7578e92a5f8222b8fffb1-819b6.jpg 200w,\n/static/292b4a35-4507-4256-84ff-c218f108ee31-bbd0031829e7578e92a5f8222b8fffb1-a059c.jpg 400w,\n/static/292b4a35-4507-4256-84ff-c218f108ee31-bbd0031829e7578e92a5f8222b8fffb1-763cb.jpg 413w"\n        sizes="(max-width: 413px) 100vw, 413px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="2-表示出现多次的关系"><a href="#2-%E8%A1%A8%E7%A4%BA%E5%87%BA%E7%8E%B0%E5%A4%9A%E6%AC%A1%E7%9A%84%E5%85%B3%E7%B3%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 表示出现多次的关系</h3>\n<p>一个实体在联系出现几次，就要用几条线连接。下图表示一个课程的先修关系，先修关系出现两个 Course 实体，第一个是先修课程，后一个是后修课程，因此需要用两条线来表示这种关系。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/8b798007-e0fb-420c-b981-ead215692417-7153f449cde16ea60d36fd8e4e2a6192-ce34b.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 309px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 43.689320388349515%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdxUmUGH/8QAFxAAAwEAAAAAAAAAAAAAAAAAAQIQMf/aAAgBAQABBQKnEn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAAhACD/2gAIAQEABj8CSM//xAAbEAACAwADAAAAAAAAAAAAAAABEQAhMRBBgf/aAAgBAQABPyFk1RMPf1wNWFNJg8f/2gAMAwEAAgADAAAAEAAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHhAAAgEDBQAAAAAAAAAAAAAAAREAECExUWGhscH/2gAIAQEAAT8QeIbGQfY8zfAyZjRucAzq0//Z\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="8b798007 e0fb 420c b981 ead215692417"\n        title=""\n        src="/static/8b798007-e0fb-420c-b981-ead215692417-7153f449cde16ea60d36fd8e4e2a6192-ce34b.jpg"\n        srcset="/static/8b798007-e0fb-420c-b981-ead215692417-7153f449cde16ea60d36fd8e4e2a6192-767ab.jpg 200w,\n/static/8b798007-e0fb-420c-b981-ead215692417-7153f449cde16ea60d36fd8e4e2a6192-ce34b.jpg 309w"\n        sizes="(max-width: 309px) 100vw, 309px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="3-联系的多向性"><a href="#3-%E8%81%94%E7%B3%BB%E7%9A%84%E5%A4%9A%E5%90%91%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 联系的多向性</h3>\n<p>虽然老师可以开设多门课，并且可以教授多名学生，但是对于特定的学生和课程，只有一个老师教授，这就构成了一个三元联系。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/423f2a40-bee1-488e-b460-8e76c48ee560-5f658bcb0080609b788bff1bc60d9289-24d05.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 436px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 25.688073394495415%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAv0lEQVQY04WQ2QqDQAxF/f9PU/RJUNz3BxfEGRRxu+WmKBRKG7jMJCEni3GeJ9q2Rd/38i7Lgl92Xdejbzlj33fYtg3TNEVhGGIcR8zzLHCttTRTSmHbtg8Aaxmj+KcZpLJomiYBMUnfcRxYliUNyrJEHMdwXVd8Nui6Tnzf9+F5HqqqegNJZvBWXdcYhkEAQRAgTVMURYE8zyXGHKfnxFmWIYoiJEki5xIgJ2JXFlNN02Bd12et4zgEcK/0774vexF751si7eQAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="423f2a40 bee1 488e b460 8e76c48ee560"\n        title=""\n        src="/static/423f2a40-bee1-488e-b460-8e76c48ee560-5f658bcb0080609b788bff1bc60d9289-24d05.png"\n        srcset="/static/423f2a40-bee1-488e-b460-8e76c48ee560-5f658bcb0080609b788bff1bc60d9289-7ab77.png 200w,\n/static/423f2a40-bee1-488e-b460-8e76c48ee560-5f658bcb0080609b788bff1bc60d9289-a60d7.png 400w,\n/static/423f2a40-bee1-488e-b460-8e76c48ee560-5f658bcb0080609b788bff1bc60d9289-24d05.png 436w"\n        sizes="(max-width: 436px) 100vw, 436px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>一般只使用二元联系，可以把多元关系转换为二元关系。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/de9b9ea0-1327-4865-93e5-6f805c48bc9e-e39b524fd68912ef582338d1bf6d8de2-c347e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 555px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 35.67567567567567%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA8ElEQVQoz42R52qFQBSEff8nE/wliPXaOzYsqNgmmQXl5hJCBo4re8ruNyvhW77vQ1EUqKqKPM9xHAeWZcE4jtj3nSW4rgvneYr1r5BY3Pc9yrJEXdfoug6e58EwDFiWJYK5/0ri1E9xb5omtG2LdV3xer2gaRrCMBRRFMVzYx4WBAHSNBVk0jvOjfQpNtAO13Wh6zqyLHtypmlClmVRQ3t+veE8zwK/aRrhaVVVT45N3GOeg1nzA5kfPsAwDAKT4TiOOJk34j99vUm2bUMURbBtWwR7KdI9A+M4FkjESZJEeMFG+ncT3K94i/l3z+/1C4RTGgNbubvMAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="de9b9ea0 1327 4865 93e5 6f805c48bc9e"\n        title=""\n        src="/static/de9b9ea0-1327-4865-93e5-6f805c48bc9e-e39b524fd68912ef582338d1bf6d8de2-c347e.png"\n        srcset="/static/de9b9ea0-1327-4865-93e5-6f805c48bc9e-e39b524fd68912ef582338d1bf6d8de2-58c7f.png 200w,\n/static/de9b9ea0-1327-4865-93e5-6f805c48bc9e-e39b524fd68912ef582338d1bf6d8de2-5d49f.png 400w,\n/static/de9b9ea0-1327-4865-93e5-6f805c48bc9e-e39b524fd68912ef582338d1bf6d8de2-c347e.png 555w"\n        sizes="(max-width: 555px) 100vw, 555px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="4-表示子类"><a href="#4-%E8%A1%A8%E7%A4%BA%E5%AD%90%E7%B1%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 表示子类</h3>\n<p>用一个三角形和两条线来连接类和子类，与子类有关的属性和联系都连到子类上，而与父类和子类都有关的连到父类上。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/7ec9d619-fa60-4a2b-95aa-bf1a62aad408-59a43cdcd46a0629465eff0144fbcbb1-1c373.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 501px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 43.31337325349301%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd1azGAP/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAExEBH/2gAIAQEAAQUC6MUxT//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABsQAAEFAQEAAAAAAAAAAAAAABEAARBBUSEx/9oACAEBAAE/IXA7SDviwh7g/9oADAMBAAIAAwAAABBTz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAAMAAQUAAAAAAAAAAAAAAAABEUEQMWFxsf/aAAgBAQABPxB8nOhmI2ea2iYpTh3T3No//9k=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="7ec9d619 fa60 4a2b 95aa bf1a62aad408"\n        title=""\n        src="/static/7ec9d619-fa60-4a2b-95aa-bf1a62aad408-59a43cdcd46a0629465eff0144fbcbb1-1c373.jpg"\n        srcset="/static/7ec9d619-fa60-4a2b-95aa-bf1a62aad408-59a43cdcd46a0629465eff0144fbcbb1-145e4.jpg 200w,\n/static/7ec9d619-fa60-4a2b-95aa-bf1a62aad408-59a43cdcd46a0629465eff0144fbcbb1-9ffa4.jpg 400w,\n/static/7ec9d619-fa60-4a2b-95aa-bf1a62aad408-59a43cdcd46a0629465eff0144fbcbb1-1c373.jpg 501w"\n        sizes="(max-width: 501px) 100vw, 501px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="十、约束"><a href="#%E5%8D%81%E3%80%81%E7%BA%A6%E6%9D%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十、约束</h1>\n<h2 id="1-键码"><a href="#1-%E9%94%AE%E7%A0%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 键码</h2>\n<p>用于唯一表示一个实体。</p>\n<p>键码可以由多个属性构成，每个构成键码的属性称为码。</p>\n<h2 id="2-单值约束"><a href="#2-%E5%8D%95%E5%80%BC%E7%BA%A6%E6%9D%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 单值约束</h2>\n<p>某个属性的值是唯一的。</p>\n<h2 id="3-引用完整性约束"><a href="#3-%E5%BC%95%E7%94%A8%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 引用完整性约束</h2>\n<p>一个实体的属性引用的值在另一个实体的某个属性中存在。</p>\n<h2 id="4-域约束"><a href="#4-%E5%9F%9F%E7%BA%A6%E6%9D%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 域约束</h2>\n<p>某个属性的值在特定范围之内。</p>\n<h2 id="5-一般约束"><a href="#5-%E4%B8%80%E8%88%AC%E7%BA%A6%E6%9D%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. 一般约束</h2>\n<p>比如大小约束，数量约束。</p>\n<h1 id="参考资料"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>参考资料</h1>\n<ul>\n<li>史嘉权. 数据库系统概论[M]. 清华大学出版社有限公司, 2006.</li>\n<li>施瓦茨. 高性能 MYSQL(第 3 版) [M]. 电子工业出版社, 2013.</li>\n<li><a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-storage-engine.html" target="_blank" rel="nofollow noreferrer noopener">The InnoDB Storage Engine</a></li>\n<li><a href="https://www.slideshare.net/ErnestoHernandezRodriguez/transaction-isolation-levels" target="_blank" rel="nofollow noreferrer noopener">Transaction isolation levels</a></li>\n<li><a href="http://scanftree.com/dbms/2-phase-locking-protocol" target="_blank" rel="nofollow noreferrer noopener">Concurrency Control</a></li>\n<li><a href="https://www.slideshare.net/brshristov/the-nightmare-of-locking-blocking-and-isolation-levels-46391666" target="_blank" rel="nofollow noreferrer noopener">The Nightmare of Locking, Blocking and Isolation Levels!</a></li>\n<li><a href="http://blog.csdn.net/d2457638978/article/details/48783923" target="_blank" rel="nofollow noreferrer noopener">三级模式与两级映像</a></li>\n<li><a href="https://aksakalli.github.io/2012/03/12/database-normalization-and-normal-forms-with-an-example.html" target="_blank" rel="nofollow noreferrer noopener">Database Normalization and Normal Forms with an Example</a></li>\n<li><a href="https://blog.jcole.us/2014/04/16/the-basics-of-the-innodb-undo-logging-and-history-system/" target="_blank" rel="nofollow noreferrer noopener">The basics of the InnoDB undo logging and history system</a></li>\n<li><a href="https://www.brightbox.com/blog/2013/10/31/on-mysql-locks/" target="_blank" rel="nofollow noreferrer noopener">MySQL locking for the busy web developer</a></li>\n<li><a href="https://draveness.me/mysql-innodb" target="_blank" rel="nofollow noreferrer noopener">浅入浅出 MySQL 和 InnoDB</a></li>\n<li><a href="https://tech.meituan.com/innodb-lock.html" target="_blank" rel="nofollow noreferrer noopener">fd945daf-4a6c-4f20-b9c2-5390f5955ce5.jpg</a></li>\n</ul>',
id:"/github/workspace/blog/数据库系统原理/index.md absPath of file >>> MarkdownRemark",timeToRead:18,frontmatter:{date:"2018-04-03 15:09:47",path:"/database-principle/",tags:"面试, 数据库",title:"数据库系统原理",draft:null}},{excerpt:"一、设计原则 S.O.L.I.D 简写 全拼 中文翻译 SRP The Single Responsibility Principle 单一责任原则 OCP The Open Closed Principle 开放封闭原则 LSP The Liskov Substitution Principle 里氏替换原则 ISP The Interface Segregation Principle 接口分离原则 DIP The Dependency Inversion Principle…",html:'<h1 id="一、设计原则"><a href="#%E4%B8%80%E3%80%81%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一、设计原则</h1>\n<h2 id="solid"><a href="#solid" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>S.O.L.I.D</h2>\n<table>\n<thead>\n<tr>\n<th align="center">简写</th>\n<th align="center">全拼</th>\n<th align="center">中文翻译</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">SRP</td>\n<td align="center">The Single Responsibility Principle</td>\n<td align="center">单一责任原则</td>\n</tr>\n<tr>\n<td align="center">OCP</td>\n<td align="center">The Open Closed Principle</td>\n<td align="center">开放封闭原则</td>\n</tr>\n<tr>\n<td align="center">LSP</td>\n<td align="center">The Liskov Substitution Principle</td>\n<td align="center">里氏替换原则</td>\n</tr>\n<tr>\n<td align="center">ISP</td>\n<td align="center">The Interface Segregation Principle</td>\n<td align="center">接口分离原则</td>\n</tr>\n<tr>\n<td align="center">DIP</td>\n<td align="center">The Dependency Inversion Principle</td>\n<td align="center">依赖倒置原则</td>\n</tr>\n</tbody>\n</table>\n<h3 id="1-单一责任原则"><a href="#1-%E5%8D%95%E4%B8%80%E8%B4%A3%E4%BB%BB%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 单一责任原则</h3>\n<blockquote>\n<p>修改一个类的原因应该只有一个。</p>\n</blockquote>\n<p>换句话说就是让一个类只负责一件事，当这个类需要做过多事情的时候，就需要分解这个类。</p>\n<p>如果一个类承担的职责过多，就等于把这些职责耦合在了一起，一个职责的变化可能会削弱这个类完成其它职责的能力。</p>\n<h3 id="2-开放封闭原则"><a href="#2-%E5%BC%80%E6%94%BE%E5%B0%81%E9%97%AD%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 开放封闭原则</h3>\n<blockquote>\n<p>类应该对扩展开放，对修改关闭。</p>\n</blockquote>\n<p>扩展就是添加新功能的意思，因此该原则要求在添加新功能时不需要修改代码。</p>\n<p>符合开闭原则最典型的设计模式是装饰者模式，它可以动态地将责任附加到对象上，而不用去修改类的代码。</p>\n<h3 id="3-里氏替换原则"><a href="#3-%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 里氏替换原则</h3>\n<blockquote>\n<p>子类对象必须能够替换掉所有父类对象。</p>\n</blockquote>\n<p>继承是一种 IS-A 关系，子类需要能够当成父类来使用，并且需要比父类更特殊。</p>\n<p>如果不满足这个原则，那么各个子类的行为上就会有很大差异，增加继承体系的复杂度。</p>\n<h3 id="4-接口分离原则"><a href="#4-%E6%8E%A5%E5%8F%A3%E5%88%86%E7%A6%BB%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 接口分离原则</h3>\n<blockquote>\n<p>不应该强迫客户依赖于它们不用的方法。</p>\n</blockquote>\n<p>因此使用多个专门的接口比使用单一的总接口要好。</p>\n<h3 id="5-依赖倒置原则"><a href="#5-%E4%BE%9D%E8%B5%96%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. 依赖倒置原则</h3>\n<blockquote>\n<p>高层模块不应该依赖于低层模块，二者都应该依赖于抽象；</br>抽象不应该依赖于细节，细节应该依赖于抽象。</p>\n</blockquote>\n<p>高层模块包含一个应用程序中重要的策略选择和业务模块，如果高层模块依赖于低层模块，那么低层模块的改动就会直接影响到高层模块，从而迫使高层模块也需要改动。</p>\n<p>依赖于抽象意味着：</p>\n<ul>\n<li>任何变量都不应该持有一个指向具体类的指针或者引用；</li>\n<li>任何类都不应该从具体类派生；</li>\n<li>任何方法都不应该覆写它的任何基类中的已经实现的方法。</li>\n</ul>\n<h2 id="其他常见原则"><a href="#%E5%85%B6%E4%BB%96%E5%B8%B8%E8%A7%81%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他常见原则</h2>\n<p>除了上述的经典原则，在实际开发中还有下面这些常见的设计原则。</p>\n<table>\n<thead>\n<tr>\n<th align="center">简写</th>\n<th align="center">全拼</th>\n<th align="center">中文翻译</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">LOD</td>\n<td align="center">The Law of Demeter</td>\n<td align="center">迪米特法则</td>\n</tr>\n<tr>\n<td align="center">CRP</td>\n<td align="center">The Composite Reuse Principle</td>\n<td align="center">合成复用原则</td>\n</tr>\n<tr>\n<td align="center">CCP</td>\n<td align="center">The Common Closure Principle</td>\n<td align="center">共同封闭原则</td>\n</tr>\n<tr>\n<td align="center">SAP</td>\n<td align="center">The Stable Abstractions Principle</td>\n<td align="center">稳定抽象原则</td>\n</tr>\n<tr>\n<td align="center">SDP</td>\n<td align="center">The Stable Dependencies Principle</td>\n<td align="center">稳定依赖原则</td>\n</tr>\n</tbody>\n</table>\n<h3 id="1-迪米特法则"><a href="#1-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 迪米特法则</h3>\n<p>迪米特法则又叫作最少知识原则（Least Knowledge Principle，简写 LKP），就是说一个对象应当对其他对象有尽可能少的了解，不和陌生人说话。</p>\n<h3 id="2-合成复用原则"><a href="#2-%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 合成复用原则</h3>\n<p>尽量使用对象组合，而不是继承来达到复用的目的。</p>\n<h3 id="3-共同封闭原则"><a href="#3-%E5%85%B1%E5%90%8C%E5%B0%81%E9%97%AD%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 共同封闭原则</h3>\n<p>一起修改的类，应该组合在一起（同一个包里）。如果必须修改应用程序里的代码，我们希望所有的修改都发生在一个包里（修改关闭），而不是遍布在很多包里。</p>\n<h3 id="4-稳定抽象原则"><a href="#4-%E7%A8%B3%E5%AE%9A%E6%8A%BD%E8%B1%A1%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 稳定抽象原则</h3>\n<p>最稳定的包应该是最抽象的包，不稳定的包应该是具体的包，即包的抽象程度跟它的稳定性成正比。</p>\n<h3 id="5-稳定依赖原则"><a href="#5-%E7%A8%B3%E5%AE%9A%E4%BE%9D%E8%B5%96%E5%8E%9F%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. 稳定依赖原则</h3>\n<p>包之间的依赖关系都应该是稳定方向依赖的，包要依赖的包要比自己更具有稳定性。</p>\n<h1 id="二、三大特性"><a href="#%E4%BA%8C%E3%80%81%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二、三大特性</h1>\n<h2 id="封装"><a href="#%E5%B0%81%E8%A3%85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>封装</h2>\n<p>利用抽象数据类型将数据和基于数据的操作封装在一起，使其构成一个不可分割的独立实体。数据被保护在抽象数据类型的内部，尽可能地隐藏内部的细节，只保留一些对外接口使之与外部发生联系。用户无需知道对象内部的细节，但可以通过对象对外提供的接口来访问该对象。</p>\n<p>封装有三大好处：</p>\n<ol>\n<li>减少耦合</li>\n<li>隐藏内部细节，因此内部结构可以自由修改</li>\n<li>可以对成员进行更精确的控制</li>\n</ol>\n<p>以下 Person 类封装 name、gender、age 等属性，外界只能通过 get() 方法获取一个 Person 对象的 name 属性和 gender 属性，而无法获取 age 属性，但是 age 属性可以供 work() 方法使用。</p>\n<p>注意到 gender 属性使用 int 数据类型进行存储，封装使得用户注意不到这种实现细节。并且在需要修改 gender 属性使用的数据类型时，也可以在不影响客户端代码的情况下进行。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5221131389631539000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Person {\n    private String name;\n    private int gender;\n    private int age;\n\n    public String getName() {\n        return name;\n    }\n\n    public String getGender() {\n        return gender == 0 ? &quot;man&quot; : &quot;woman&quot;;\n    }\n\n    public void work() {\n        if(18 <= age && age <= 50) {\n            System.out.println(name + &quot; is working very hard!&quot;);\n        } else {\n            System.out.println(name + &quot; can\'t work any more!&quot;);\n        }\n    }\n}`, `5221131389631539000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>\n    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> gender<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> name<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> gender <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">"man"</span> <span class="token operator">:</span> <span class="token string">"woman"</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">18</span> <span class="token operator">&lt;=</span> age <span class="token operator">&amp;&amp;</span> age <span class="token operator">&lt;=</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">" is working very hard!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">" can\'t work any more!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="继承"><a href="#%E7%BB%A7%E6%89%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>继承</h2>\n<p>继承实现了 <strong>IS-A</strong> 关系，例如 Cat 和 Animal 就是一种 IS-A 关系，因此 Cat 可以继承自 Animal，从而获得 Animal 非 private 的属性和方法。</p>\n<p>Cat 可以当做 Animal 来使用，也就是说可以使用 Animal 引用 Cat 对象。父类引用指向子类对象称为 <strong>向上转型</strong> 。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41525537824820000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`Animal animal = new Cat();`, `41525537824820000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>继承应该遵循里氏替换原则，子类对象必须能够替换掉所有父类对象。</p>\n<h2 id="多态"><a href="#%E5%A4%9A%E6%80%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多态</h2>\n<p>多态分为编译时多态和运行时多态。编译时多态主要指方法的重载，运行时多态指程序中定义的对象引用所指向的具体类型在运行期间才确定。</p>\n<p>运行时多态有三个条件：</p>\n<ol>\n<li>继承</li>\n<li>覆盖</li>\n<li>向上转型</li>\n</ol>\n<p>下面的代码中，乐器类（Instrument）有两个子类：Wind 和 Percussion，它们都覆盖了父类的 play() 方法，并且在 main() 方法中使用父类 Instrument 来引用 Wind 和 Percussion 对象。在 Instrument 引用调用 play() 方法时，会执行实际引用对象所在类的 play() 方法，而不是 Instrument 类的方法。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66332822408320590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Instrument {\n    public void play() {\n        System.out.println(&quot;Instument is playing...&quot;);\n    }\n}\n\npublic class Wind extends Instrument {\n    public void play() {\n        System.out.println(&quot;Wind is playing...&quot;);\n    }\n}\n\npublic class Percussion extends Instrument {\n    public void play() {\n        System.out.println(&quot;Percussion is playing...&quot;);\n    }\n}\n\npublic class Music {\n    public static void main(String[] args) {\n        List<Instrument> instruments = new ArrayList<>();\n        instruments.add(new Wind());\n        instruments.add(new Percussion());\n        for(Instrument instrument : instruments) {\n            instrument.play();\n        }\n    }\n}`, `66332822408320590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Instrument</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Instument is playing..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Wind</span> <span class="token keyword">extends</span> <span class="token class-name">Instrument</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Wind is playing..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Percussion</span> <span class="token keyword">extends</span> <span class="token class-name">Instrument</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Percussion is playing..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Music</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Instrument</span><span class="token punctuation">></span></span> instruments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        instruments<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Wind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        instruments<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Percussion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Instrument</span> instrument <span class="token operator">:</span> instruments<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            instrument<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="三、类图"><a href="#%E4%B8%89%E3%80%81%E7%B1%BB%E5%9B%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三、类图</h1>\n<h2 id="泛化关系-generalization"><a href="#%E6%B3%9B%E5%8C%96%E5%85%B3%E7%B3%BB-generalization" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>泛化关系 (Generalization)</h2>\n<p>用来描述继承关系，在 Java 中使用 extends 关键字。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/b418ca51-f005-4510-b7ad-f092eb6aeb24-ef4cb70b1a8b8360d703a28766b35014-49b3a.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 326px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 73.00613496932516%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACCklEQVQ4y5WUa3OaQBSG/f9/pZ1O+qHTdFrTVo02xiaohJsgCMtdTdSopAJvdxeIqSZpe2aOLLuPj+vZAzUcRJ7zT/wt8gJ8vFZRO4QqYBoH8MgYcehgGhEEnoUosPncfB4/K3tWyGK3yzDzJSSzK2j9U1x33uHW/QFLrmNO2ohchf+Hpxt4VZhmOYgpwB83qOwE3cZbKjuDIpxiotRh6cL/CHNQH1SxDaLVEZotLiajr3xsSZ8gDztHJXpVyC7uRMHopolB7zMs7QK6dF6M1Q4MbfjvwgrYbhMMBiJsm/D75eoeoijBdX1kWfbyKVeSKhnMYrG4gyxLVLwpv5jBsixYplncl9KnebTDKnZpDs8Pjw6LRRTPsNk+vNibtfksRkBkRJ6GkCiI/RE/RcccwLUVpGlW/kiK0DPhTUS+zriA8pGnwCc6X+c7dB0DWN9gFfbws/UGw+4J7b2PtIgyXKONzWbLwfUmQUz6nGXrNm2f4eV7pIs+QvsKy+V9ISS2ganToXkBV2/QFjmHN27hzr+EOjijoqKG2+QXJnqPNjjljBbnWDLOkNtYrdaF0BqrcNQvCGivhWYTgdkox9/R7374Q6iJTYTjb3S9yRnWnxHlJKG+F97Op7QmfZgsR/tkc6p8jSR5KJ+eDK6jU04o2DJZPY2R+MjVqjcM65bDZPOHzXvIpNn+DcW434SvcyGdFtuuAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="b418ca51 f005 4510 b7ad f092eb6aeb24"\n        title=""\n        src="/static/b418ca51-f005-4510-b7ad-f092eb6aeb24-ef4cb70b1a8b8360d703a28766b35014-49b3a.png"\n        srcset="/static/b418ca51-f005-4510-b7ad-f092eb6aeb24-ef4cb70b1a8b8360d703a28766b35014-6cc38.png 200w,\n/static/b418ca51-f005-4510-b7ad-f092eb6aeb24-ef4cb70b1a8b8360d703a28766b35014-49b3a.png 326w"\n        sizes="(max-width: 326px) 100vw, 326px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="实现关系-realization"><a href="#%E5%AE%9E%E7%8E%B0%E5%85%B3%E7%B3%BB-realization" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现关系 (Realization)</h2>\n<p>用来实现一个接口，在 Java 中使用 implement 关键字。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/27cd6f0c-f581-45da-b8c9-fed026830560-a6b1e410d757f76a6d400fd1f03004dc-3091a.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 361px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 78.67036011080333%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB6UlEQVQ4y51UiW7aQBDl//+klVoliipVaptAFEoIsTHhqDhsDuPFJY6P9YWx8evYJJQWsEpXGu3I+/T2zczzlnBkpWmKovV2fgxXOgWO4xieayMMXIQ+z/fAdyjcwktPEnrcRLP2Ea36JYTqB8ov0H64QL99t8OdpXAVOJj1byDdX6JeeY9R5wt6whVURcBmkyPPI/Q9C5ZWw3JahTYsw2YPMKZ3YBMRyf8QZv1jEwFs/IgX1sbPWRPqqIap/EQK0/MI34C6vkS704Xr+rAsB6IowTSt4h7uW2A/smWaJhaM5fmGGrdYMFLunsRne6nIAmEYHrQi+5YWePMPhRk4CHxEUQTOnVzher3+rYBUcs5hGAY2SYLVagXf93PMTuFuCJ4LfSqAL1tgyj1mw2qeq4pIl2yV2pYBTa7B1iVI9U+YU24xATO5dUjokqIX7REJ75BVvkMdlJF6XahynVRt+2abz/lZwrvkzXfQRreITAmTQQM5zT6h49hk3q+YD68pbijK5L9r9KRv4K6XY4znBX6IV0RUhq7cgskVTHqf0ZUqhwrDMKDyWphTieprzMci5EFzV7LLbSj9BrSxRGVmmCamowaUYfv4lJMkpYHEiNbJNqIEMf0W+9aI/8ZQJK+Ygymffq7+/Vn7BYVv0DEhHw75AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="27cd6f0c f581 45da b8c9 fed026830560"\n        title=""\n        src="/static/27cd6f0c-f581-45da-b8c9-fed026830560-a6b1e410d757f76a6d400fd1f03004dc-3091a.png"\n        srcset="/static/27cd6f0c-f581-45da-b8c9-fed026830560-a6b1e410d757f76a6d400fd1f03004dc-07e05.png 200w,\n/static/27cd6f0c-f581-45da-b8c9-fed026830560-a6b1e410d757f76a6d400fd1f03004dc-3091a.png 361w"\n        sizes="(max-width: 361px) 100vw, 361px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="聚合关系-aggregation"><a href="#%E8%81%9A%E5%90%88%E5%85%B3%E7%B3%BB-aggregation" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>聚合关系 (Aggregation)</h2>\n<p>表示整体由部分组成，但是整体和部分不是强依赖的，整体不存在了部分还是会存在。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-dc136807f748d699c6045a9f68acfe2e-a64ad.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 450px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 51.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABnElEQVQoz31SiU7CQBDt//+F/2AMHvHAgKBEjHJYCk1Lt6hle29v2ufuRghRcJJN29c3b+bNjoJf0TSNPCISFsF1TNAvA767QlVVO86xUA6JbRNCzwaZXeO2dQKyeABj7E/Ro4JbgnjWdS3f7aWKxagFfXyO6csFfD+Q+Pb/oW6V/a72KwdBiLk2xWzyCNsc43XYhabNURTFHzf7RznUdhzHoJRyiwlWqy9sNoBFbBRlCdd1d9YPWt5wdsWJTVPL6r7v8+6Cn0thCPi3CMaLbPEg8OF5HvI8R8lzaq5RSg3eIYvWmI/v8Nw7A9EHSLMcaUxhqh28Dlqg9huyvJS3rI1usJi0ob/3wZIUzocBZznAZHiFT+tNiiqBS2BOL6EOT2HN2txeA59asNQrqC+n+DR6iFkq12c5vZBcbXTNCxeIPALHuJMXZ/MtSNMMCnUskHkHlAygjdsoqw0EZi+6EjNmD0iSDO6aYKV3eUePMLU+T845bwlLu8faeoKu9pBlXFAsq5ibmImYkZhDVZU7LAxDiQk7/2FRFMp1+gZ5FfkWqSJuuAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="aa42f9c6 ad7a 48f4 8e8b f3b6de3feaec"\n        title=""\n        src="/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-dc136807f748d699c6045a9f68acfe2e-a64ad.png"\n        srcset="/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-dc136807f748d699c6045a9f68acfe2e-a484f.png 200w,\n/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-dc136807f748d699c6045a9f68acfe2e-d7c5d.png 400w,\n/static/aa42f9c6-ad7a-48f4-8e8b-f3b6de3feaec-dc136807f748d699c6045a9f68acfe2e-a64ad.png 450w"\n        sizes="(max-width: 450px) 100vw, 450px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82002075674869970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Computer\n    private KeyBoard keyboard;\n    private Mouse mouse;\n\n    public void Running()\n    {\n        keyboard.running();\n        mouse.running();\n    }\n} `, `82002075674869970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span>\n    <span class="token keyword">private</span> KeyBoard keyboard<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> Mouse mouse<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Running</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        keyboard<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        mouse<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span> </code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="组合关系-composition"><a href="#%E7%BB%84%E5%90%88%E5%85%B3%E7%B3%BB-composition" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>组合关系 (Composition)</h2>\n<p>和聚合不同，组合中整体和部分是强依赖的，整体不存在了部分也不存在了。比如公司和部门，公司没了部门就不存在了。但是公司和员工就属于聚合关系了，因为公司没了员工还在。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/0e34263d-7287-4ffe-a716-37c53d1a2526-21f1edcd11fc74e57aa63b784835d6c6-6db8f.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 383px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 63.44647519582245%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABy0lEQVQ4y52TW2+iUBSF/f+PfZlJH5r5B02mZh7aWrUXm6kXhGqrDCKColyqCKi0Amv2QWukoZf0JCcb2Itvr8Pe5LC34jhO4nq9hm0ZeLINODMbs6kF09CxWPgpXdbKZQF9bw7P5OFbHHrtc4zlazzPBJi6tNO9B80Eeq6DSf8W5uAGvdYZ1G4JtnoDTXn4HtBxpuTsgoAVDB4L0HtXGIpFSF1uq4u+DnwV1qsVHP48wEvg4rJ0il9HPxCsFoi2mneB8Z6A7TAMk0S1WkOt1kiuXdfHyUkeYRSlCu+DX2Muq4rnefD9TUfDcL17btt2pqt9tzm6I4BPLlwsl8skyrJMI7JIuYjInaYNYRgTrFarROs482TEUg6D4BnWqAVTvcNj8xxSuwRj8BfG8IHVShrA1tQeYz7hIQoFiPcX6PIFPI0aNKvjNJBVM9UGdKkE4e43OtwfTOQytF6dvlm8A1qGBkenopRv1/Pgbo9plCoYj5Rd5zfAICBnNBpSkcbjknYZaucMLa6YcsheFHlW7Iq0ZZjKNRXPQxtIaSDrqqZ00Zd49P8JFAXIYhOK3NkCN0dx5zPK80meRYWi1GFHNj/v8tvuffTvvs3/B5/x4RqoCEmjAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="0e34263d 7287 4ffe a716 37c53d1a2526"\n        title=""\n        src="/static/0e34263d-7287-4ffe-a716-37c53d1a2526-21f1edcd11fc74e57aa63b784835d6c6-6db8f.png"\n        srcset="/static/0e34263d-7287-4ffe-a716-37c53d1a2526-21f1edcd11fc74e57aa63b784835d6c6-89fca.png 200w,\n/static/0e34263d-7287-4ffe-a716-37c53d1a2526-21f1edcd11fc74e57aa63b784835d6c6-6db8f.png 383w"\n        sizes="(max-width: 383px) 100vw, 383px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36965086327264120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Company\n{\n    private DepartmentA departmentA;\n    private DepartmentB departmentB;\n    public Company()\n    {\n        departmentA = new DepartmentA();\n        departmentB = new DepartmentB();\n    }\n}  `, `36965086327264120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Company</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> DepartmentA departmentA<span class="token punctuation">;</span>\n    <span class="token keyword">private</span> DepartmentB departmentB<span class="token punctuation">;</span>\n    <span class="token keyword">public</span> <span class="token function">Company</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        departmentA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DepartmentA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        departmentB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DepartmentB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>  </code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="关联关系-association"><a href="#%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB-association" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关联关系 (Association)</h2>\n<p>表示不同类对象之间有关联，这是一种静态关系，与运行过程的状态无关，在最开始就可以确定。因此也可以用 1 对 1、多对 1、多对多这种关联关系来表示。比如学生和学校就是一种关联关系，一个学校可以有很多学生，但是一个学生只属于一个学校，因此这是一种多对一的关系，在运行开始之前就可以确定。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2017511e-22f0-4d74-873d-1261b71cf5a4-a61ee12f3e78feae17b5f903655dd4b9-960c5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 229px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 138.42794759825327%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACY0lEQVRIx6VWaW/aQBDl//+Jqt+q9kOrNKoUtSTEDleAgOOAwTdgmyMkQLgD5nXWqQkQjkVd6TG7o923M8vMkyP4N5bL5cryYv1cOCK7COkXx8Z2AB8I1zf5ZOZzH/MFwzKYv4ZrsmR2BLEnwtlsBlOT4FgFgoSaUYBXldFySqibElyal+UEer1nvpRfXgZoVTPAqwqMFajSL2TFr7i++Ixx547CN9GyBLiOfTjl0DkYDNGws8BIgT9Q0LTieMic4/f5J3Q9umimwzME1KomJ+FwBKVwSUQiXF1Ew7xBu5pEp5aitUDzBKT0D9iWzh+hKsfw7CTxSIdDtO14gB5FWcr95CccjcYo5q9QrcRglmKwlBiM4iVqqkg+IbDZ+Hd+Qmb7/T48z4Prumg0Gkgmk5AkCbIso9lswnEcymTwodz21uH2sG07ILYsC8f2Rw61nu+/VbCu66sDzLfdensjXCdf32gYBhaLxc5LD6a8r1/XCfeJwsmEPG999A1DH3tD9sfU6/XVu54oX5vDNA10Op2glLYJmdQdly/Sr1CqmEtVNYRnmH/hL/nLZjKZQiul4Zi3qBsZWJUkKvI1bDWFmpaGZ+fwcBfFU6d9inxl3+RrUkYxe4Z7EoN07Av1ZYlC1KmnRTh160T5GpfhD5VAaR5JaRxNwLQrA1ONFEjkl6/hhnwJgXw1GaybgJRdIKVOlq8rdF0WWWITVZKvxi3J1xkRanyE48kE+UwUcu4C9xlC9h0SrYv5PxCj36gujWOE76RzajOWOot2J4ZDTKdTvl4+1FaH2pO79Y59OXCpzf98jvwF0/1zuRIm3g4AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2017511e 22f0 4d74 873d 1261b71cf5a4"\n        title=""\n        src="/static/2017511e-22f0-4d74-873d-1261b71cf5a4-a61ee12f3e78feae17b5f903655dd4b9-960c5.png"\n        srcset="/static/2017511e-22f0-4d74-873d-1261b71cf5a4-a61ee12f3e78feae17b5f903655dd4b9-6f066.png 200w,\n/static/2017511e-22f0-4d74-873d-1261b71cf5a4-a61ee12f3e78feae17b5f903655dd4b9-960c5.png 229w"\n        sizes="(max-width: 229px) 100vw, 229px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="71028461302368040000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class School\n{\n    private Student[] students;\n\n    public void GoToSchool()\n    {\n        students.study();\n    }\n}`, `71028461302368040000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">School</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">private</span> Student<span class="token punctuation">[</span><span class="token punctuation">]</span> students<span class="token punctuation">;</span>\n\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">GoToSchool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        students<span class="token punctuation">.</span><span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="依赖关系-dependency"><a href="#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB-dependency" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>依赖关系 (Dependency)</h2>\n<p>和关联关系不同的是，依赖关系是在运行过程中起作用的。A 类和 B 类是依赖关系主要有三种形式：</p>\n<ol>\n<li>A 类是 B 类中的（某中方法的）局部变量；</li>\n<li>A 类是 B 类方法当中的一个参数；</li>\n<li>A 类向 B 类发送消息，从而影响 B 类发生变化；</li>\n</ol>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-194efdf2696397cd87be1d887dc1bc29-95c58.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 477px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 49.05660377358491%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABcElEQVQoz42Se0/CMBTF+f5fxsQQ/8JXiAiKcb6mbupwm3ODMdiLR7fxswyIEFG8yVnb9fbcc9tTYRmz2YxdscqZLefbUNlIlONkMmU6FRRFgcgyhMjKf0XxnfNX8Q3C8TglcB/o2Qqqcoypt3CMNgP3njgKVjrLbxIP6LodfM+i55kEvkMmBVTWK6ZJhG+18M0G6lUVWz/BfavTt87xPk1yqXJ+KIpTdLWFflNFae7xrFSx9DpJEq8Ii5JwlEYY6iHmUw1bO+Zdjp+vp2jKAa7zXhIKMWU0nuCYj+h3Ndpn+2i3NYynM9I0WbW8aGZ+V7Zxy4vaxHi+pKNdYL225brBcOBv3JUQgjiOpIhEth+VyPOcSlHk9HoG3a5GEBhy/ob98YjjGFLRotgCm6/566NkmcD3W/T7dcKwKStdMBw2sO0j2UK41S78ZZs5oefdEEV3kmiBMLyXRa4ZjeIfVtmpcL6ZlX4TpefWsU7y3/gCFgAAw5nMK9YAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="c7d4956c 9988 4a10 a704 28fdae7f3d28"\n        title=""\n        src="/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-194efdf2696397cd87be1d887dc1bc29-95c58.png"\n        srcset="/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-194efdf2696397cd87be1d887dc1bc29-9ffd2.png 200w,\n/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-194efdf2696397cd87be1d887dc1bc29-bef37.png 400w,\n/static/c7d4956c-9988-4a10-a704-28fdae7f3d28-194efdf2696397cd87be1d887dc1bc29-95c58.png 477w"\n        sizes="(max-width: 477px) 100vw, 477px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85806232919185850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`public class Transport\n{\n    public void Run\n    {\n    }\n    // way 代表行驶方式\n    public void Fly(Way way)\n    {\n        way.fly();\n    }\n}`, `85806232919185850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="cpp"><pre style="counter-reset: linenumber NaN" class="language-cpp line-numbers"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Transport</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> Run\n    <span class="token punctuation">{</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">// way 代表行驶方式</span>\n    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Fly</span><span class="token punctuation">(</span>Way way<span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        way<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="参考资料"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>参考资料</h1>\n<ul>\n<li>Java 编程思想</li>\n<li>敏捷软件开发：原则、模式与实践</li>\n<li><a href="http://www.cnblogs.com/shanyou/archive/2009/09/21/1570716.html" target="_blank" rel="nofollow noreferrer noopener">面向对象设计的 SOLID 原则</a></li>\n<li><a href="http://design-patterns.readthedocs.io/zh_CN/latest/read_uml.html#generalization" target="_blank" rel="nofollow noreferrer noopener">看懂 UML 类图和时序图</a></li>\n<li><a href="http://www.cnblogs.com/wolf-sun/p/UML-Sequence-diagram.html" target="_blank" rel="nofollow noreferrer noopener">UML 系列——时序图（顺序图）sequence diagram</a></li>\n<li><a href="http://blog.csdn.net/jianyuerensheng/article/details/51602015" target="_blank" rel="nofollow noreferrer noopener">面向对象编程三大特性 ------ 封装、继承、多态</a></li>\n</ul>',
id:"/github/workspace/blog/面向对象思想/index.md absPath of file >>> MarkdownRemark",timeToRead:7,frontmatter:{date:"2018-04-02 17:54:51",path:"/object-oriented-thinking/",tags:"面试, 面向对象",title:"面向对象思想",draft:null}},{excerpt:"以下是 sql 常用语句整理：",html:'<p>以下是 sql 常用语句整理：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18900017352558000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`drop database  if exists Student_Course_Database ;\ncreate database Student_Course_Database;\nalter database Student_Course_Database character set utf8;\nuse Student_Course_Database;\ncreate table student\n(sno char(9) primary key,\n sname char(20) unique,\n ssex char(2),\n sage smallint,\n sdept char(20)\n);\ncreate table course\n(cno char(4) primary key,\n cname char(40),\n cpno char(4),\n ccredit smallint,\n foreign key (cpno) references course(cno)\n);\ncreate table sc\n(sno char(9),\ncno char(4),\ngrade smallint ,\nprimary key (sno,cno),\nforeign key (sno) references student(sno),\nforeign key (cno) references course(cno)\n);\ninsert into student values(\'200215121\',\'李勇\',\'男\',20,\'CS\');\ninsert into student values(\'200215122\',\'刘晨\',\'女\',19,\'CS\');\ninsert into student values(\'200215123\',\'王敏\',\'女\',18,\'MA\');\ninsert into student values(\'200215125\',\'张立\',\'男\',19,\'IS\');\ninsert into student values(\'200215124\',\'刘武汉\',\'男\',21,\'PE\');\ninsert into student values(\'200215126\',\'李四\',\'男\',16,\'MA\');\ninsert into student values(\'200215128\',\'欧阳雨\',\'女\',17,\'CS\');\ninsert into student values(\'200215127\',\'欧阳杰\',\'男\',14,\'PY\');\n\ninsert into course(Cno,Cname,Ccredit) values(\'6\',\'数据处理\',2);\ninsert into course(Cno,Cname,Ccredit) values(\'2\',\'数学\',2);\ninsert into course values(\'8\',\'数字系统设计\',\'2\',5);\ninsert into course values(\'7\',\'PASCAL语言\',\'6\',4);\ninsert into course values(\'5\',\'数据结构\',\'7\',4);\ninsert into course values(\'4\',\'操作系统\',\'6\',3);\ninsert into course values(\'1\',\'数据库\',\'5\',4);\ninsert into course values(\'3\',\'信息系统\',\'1\',4);\ninsert into course values(\'9\',\'DB_Design\',\'1\',2);\n\n\ninsert into sc values(\'200215121\',\'1\',92);\ninsert into sc values(\'200215121\',\'2\',85);\ninsert into sc values(\'200215121\',\'3\',30);\ninsert into sc values(\'200215121\',\'4\',97);\ninsert into sc values(\'200215121\',\'6\',59);\ninsert into sc values(\'200215121\',\'5\',54);\ninsert into sc values(\'200215122\',\'2\',90);\ninsert into sc values(\'200215122\',\'4\',96);\ninsert into sc values(\'200215122\',\'3\',80);\ninsert into sc values(\'200215123\',\'6\',65);\ninsert into sc values(\'200215123\',\'5\',10);\ninsert into sc(sno,cno) values(\'200215127\',\'2\');\n\n#1\t查询全体学生的学号与姓名\nselect sno,sname from student;\n#2\t查询全体学生的学号与姓名与所在系\nselect sname,sno,sdept from student;\n#3\t查询全体学生的详细记录\nselect *from student;\n#4\t查询全体学生的姓名及出生年份\nselect sname,2004-sage from student;\n#5\t查询全体学生的姓名，出生年份和所在的院系，要求用小写字母表示所有系名\nselect sname,\'Year of Birth:\',2004-sage,lower(sdept) from student;\nselect sname NAME,\'Year of Birth:\' BIRTH,2004-sage BIRTHDAY,lower(sdept) DEPARTMENT from student;\n#6\t查询选修了课程的学生学号\nselect all sno from sc;\nselect distinct sno from sc;\n#7\t查询计算机科学系全体学生的名单\nselect sname from student where sdept=\'CS\';\n#8\t查询所有年龄在20岁以下的学生姓名及年龄\nselect sname,sage from student where sage<20;\n#9\t查询考试成绩有不及格的学生学号\nselect distinct sno from sc where grade <60;\n#10\t查询年龄在20~23岁之间的学生姓名，系别和年龄\nselect sname,sdept,sage from student where sage between 20 and 23;\n#11\t查询年龄不在20~23之间的学生姓名，系别和年龄\nselect sname,sdept,sage from student where sage not between 20 and 23;\n#12\t查询计算机科学系，数学系，信息系学生的姓名与性别\nselect sname,ssex,sdept from student where sdept in(\'CS\',\'MA\',\'IS\');\nselect sname,ssex,sdept from student where sdept =\'CS\' or sdept=\'MA\' or sdept=\'IS\';\n#13\t查询既不是计算机系，数学系，也不是信息系的学生姓名与性别\nselect sname,ssex,sdept from student where sdept not in (\'CS\',\'MA\',\'IS\');\n#14\t查询学号为200215121的学生的详细情况\nselect *from student where sno like \'200215121\';\n#15\t查询所有姓刘的学生的学生姓名，学号，性别\nselect sname,sno,ssex from student where sname like \'刘%\';\n#16\t查询姓“欧阳”且全名为3个汉字的学生姓名\nselect sname from student where sname like \'欧阳_\';\n#17\t查询名字中第二个字为“阳”字的学生姓名与学号\nselect sname,sno from student where sname like \'_阳%\';\n#18\t查询所有不姓刘的学生姓名，学号，性别\nselect sname,sno,ssex from student where sname not like \'刘%\';\n#19\t查询DB_Design课程的课程号和学分\nselect cno,ccredit from course where cname like \'DB@_Design\' escape \'@\';\nselect cno,ccredit from course where cname = \'DB_Design\' ;\n#20\t查询以“DB_”开头，且倒数第三个字符为i的详细情况\nselect *from course where cname like \'DB@_%i__\'escape \'@\';\n#21\t查询缺少成绩的学生学号和相应的课程号\nselect sno,cno from sc where grade is null;\n#22\t查询所有有成绩的学生学号和课程号\nselect sno,cno from sc where grade is not null;\n#23\t查询计算机系年龄在20岁以下的学生姓名\nselect sname,sdept,sage from student where sdept=\'CS\' and sage<20;\n#24\t查询选修了2号课程的学生学号及其成绩，查询结果按分数降序排列\nselect sno,grade from sc where cno=\'2\' order by grade desc;\n#25\t查询全体学生情况，查询结果按所在系的系号升序排列，同一系中的学生按年龄降序排列\nselect *from student order by sdept,sage desc;\n#26\t查询学生总人数\nselect count(*) from student;\n#27\t查询选修了课程的学生人数\nselect count(distinct sno)from sc;\n#28\t计算3号课程的学生平均成绩\nselect avg(grade) from sc where cno=\'3\';\n#29\t计算3号课程的学生最高成绩\nselect max(grade)from sc where cno=\'3\';\n#30\t查询学生200215122选修课程的总学分数\nselect sum(ccredit) from sc,course where sno=\'200215122\' and sc.cno=course.cno;\n#31\t求各个课程及相应的选课人数\nselect cno,count(sno) from sc group by cno;\n#32\t查询选修了3门以上课程的学生学号\nselect sno from sc group by sno having count(*)>3;\n#33\t查询每个学生及其选修课程的情况\nselect student.*,sc.* from student,sc where student.sno=sc.sno;\n#34\t对例33用自然连接完成\nselect student.sno,sname,ssex,sage,sdept,cno,grade from student,sc where student.sno=sc.sno;\n#35\t查询每一门课的间接先行课\nselect first.cno,second.cpno from course first,course second where first.cpno=second.cno;\nselect first.cno,second.cpno from course first,course second where first.cpno=second.cno and second.cpno is not null;\n#36\t对例33的改写\nselect student.sno,sname,ssex,sage,sdept,cno,grade from student left join sc on(student.sno=sc.sno);\nselect student.sno,sname,ssex,sage,sdept,cno,grade from student left join sc using(sno);\nselect student.sno,sname,ssex,sage,sdept,cno,grade from student right join sc on(student.sno=sc.sno);\n#37\t查询选修了1号课程且平均成绩在90分以上的所有学生\nselect student.sno,sname from student,sc where student.sno=sc.sno and cno=\'1\' and grade>90;\n#38\t查询每个学生的学号，姓名，选修的课程名及成绩\nselect student.sno,sname,cname,grade from student,sc,course where student.sno=sc.sno and sc.cno=course.cno;\n#39\t查询与刘晨在同一系学习的学生\nselect sname,sname,sdept from student where sdept in (select sdept from student where sname=\'刘晨\');\nselect s1.sno,s1.sname,s1.sdept from student s1,student s2 where s1.sdept=s2.sdept and s2.sname=\'刘晨\';\nselect sno,sname,sdept from student s1 where exists ( select* from student s2 where s2.sdept=s1.sdept and s2.sname=\'刘晨\');\n#40\t查询选修了课程名为信息系统的学生学号与姓名\nselect sno,sname from student where sno in (select sno from sc where cno in(select cno from course where cname=\'信息系统\'));\nselect student.sno,sname from student,sc,course where student.sno=sc.sno and sc.cno=course.cno and cname=\'信息系统\';\n#41\t找出每个学生超过他选修课程平均成绩的课程号\nselect sno,cno from sc x where grade>=(select avg(grade) from sc y where y.sno=x.sno);\nselect sc.sno,cno from sc,(select sno,avg(grade) A_G from sc group by sno) y where sc.sno=y.sno and sc.grade>=y.A_G;\n#42\t查询其他系中比计算机系某一学生年龄小的学生姓名与年龄\nselect sname,sage from student where sage<any(select sage from student where sdept=\'CS\') and sdept<>\'CS\';\nselect sname,sage from student where sage<(select max(sage) from student where sdept=\'CS\')and sdept<>\'CS\';\n#43\t查询其他系比计算机系所有学生年龄小的学生姓名及年龄\nselect sname,sage from student where sage<all(select sage from student where sdept=\'CS\')and sdept<>\'CS\';\nselect sname,sage from student where sage<(select min(sage) from student where sdept=\'CS\')and sdept<>\'CS\';\n#44\t查询所有选修了1号课程的学生姓名\nselect sname from student where exists(select * from sc where sno=student.sno and cno=\'1\');\n#45\t查询没有选修1号课程的学生姓名\nselect sname from student where not exists (select * from sc where sno=student.sno and cno=\'1\');\n#46\n#查询选修了全部课程的学生姓名\nselect sname from student where not exists ( select * from course where not exists( select * from sc where sno=student.sno and cno=course.cno));\n#查询选修了全部已开课程的学生姓名\nselect sname from student where not exists( select * from sc x where not exists( select * from sc y where sno=student.sno and x.cno=y.cno));\n#47\n#查询至少选修了学生200215122选修的全部课程的学生号码\nselect distinct sno from sc scx where not exists( select * from sc scy where sno=\'200215122\' and not exists( select * from sc scz where scz.sno=scx.sno and scz.cno=scy.cno));\n#48\t查询计算机系学生及年龄不大于19岁的学生\n select * from student where sdept=\'CS\' union select * from student where sage<=19;\n #49\t查询选修了课程1或2号的学生\n select sno from sc where cno=\'1\' union select sno from sc where cno=\'2\';\n #50\t查询计算机学生与年龄不大于19岁的学生的交集\n #select * from student where sdept=\'CS\' intersect select * from student where sage<=19;\nselect s1.* from student s1 left join(student s2) on(s1.sno=s2.sno) where s1.sdept=\'CS\' and s1.sage<=19;\n select * from student where sdept=\'CS\' and sage<=19;\n #51\t查询既选修了课程1又选修了课程2的学生\n #select sno from sc where cno=\'1\' intersect select sno from sc where cno=\'2\';\n select sno from sc where cno=\'1\' and sno in (select sno from sc where cno=\'2\');\n select scx.sno from sc scx,sc scy where scx.sno=scy.sno and scx.cno=\'1\' and scy.cno=\'2\';\n #52\t查询计算机系的学生与年龄不大于19岁学生的差集\n #select * from student where sdept=\'CS\' except select * from student where sage<=19;\n select * from student where sdept=\'CS\' and sage>19;\n #53\t将一个新学生元组插入到student表中\n insert into student (sno,sname,ssex,sdept,sage) values (\'200215129\',\'陈东\',\'男\',\'IS\',18);\n #54\t将学生张成民的信息插入到student表中\n insert into student values (\'200215130\',\'张成民\',\'男\',18,\'CS\');\n#55\t插入一条选课记录\ninsert into sc (sno,cno) values (\'200215128\',\'1\');\ninsert into sc values (\'200215129\',\'1\',null);\n#56\t对每一个系，求学生的平均年龄，并把结果存入数据库\ncreate table  dept_age\n( sdept char(15) primary  key ,\navg_age smallint\n);\ninsert into dept_age (sdept,avg_age) select sdept,avg(sage) from student group by sdept;\nselect *from dept_age;\n#57\t将学生200215121的年龄改为22岁\nupdate student set sage=22 where sno=\'200215121\';\n#58\t将所有学生的年龄加1岁\nupdate student set sage=sage+1;\n#59\t将计算机系的全体学生的成绩置0\nupdate sc set  grade=0 where \'CS\'=( select sdept from  student where student.sno=sc.sno);\nupdate sc set  grade=100 where sno in  (select sno from  student where sdept=\'CS\');\n#60\t建立计算机系学生的视图\ncreate view CS_Student as select sno,sname,sage from student where sdept=\'CS\';\n#61\t建立计算机系学生的视图，并按要求进行修改和插入时仍需保证该视图只有计算机系的学生\ncreate view CS_Student_Check as select sno,sname,sage from student where sdept=\'CS\' with check option;\n#62\t建立计算机系选修了1号课程的学生的视图\ncreate view CS_S1(sno,sname,grade) as select student.sno,sname,grade  from student,sc where sdept=\'CS\' and student.sno=sc.sno and sc.cno=\'1\';\n#63\t建立计算机系选修了1号课程且成绩在90分以上的学生的视图\ncreate view CS_S2 as select sno,sname,grade from CS_S1 where grade>=90;\n#64\t定义一个反映学生出生年份的视图\ncreate view BT_S(sno,sname,sbirth) as select sno,sname,2004-sage from student ;\n#65 将学生的学号及他的平均成绩定义为一个视图\ncreate view S_G(sno,gavg) as select sno,avg(grade) from sc group  by sno;\n#66\t将student表中的所有女生记录定义为一个视图\ncreate view F_Student as select * from student where ssex=\'女\';\n#67\t在计算机系学生的视图中找出年龄小于20岁的学生\nselect sno,sage from CS_Student where sage<=20;\n#68\t查询选修了1号课程的计算机系的学生\nselect CS_Student.sno,sname from CS_Student,sc where CS_Student.sno=sc.sno and sc.cno=\'1\';\n#69\t在S_G视图中查询平均成绩在90分以上的学生学号和平均成绩\nselect * from S_G where gavg>=90;\nselect sno,avg( grade) from sc group  by sno having avg( grade)>=90;\n#70\t将计算机系学生视图CS_Student中学号为200215122的学生姓名改为刘辰\nupdate CS_Student set sname=\'刘辰\' where sno=\'200215122\';\nupdate student set sname=\'刘辰\' where sno=\'200215122\' and sdept=\'CS\';\n#71\t向计算机系的学生视图CS_Student中插入一个新的学生记录，其中学号为200215129，姓名为赵新，年龄为20岁\ninsert into CS_Student values ( \'200215131\',\'赵新\',20);#不能自动插入系名\'CS\'\ninsert into student(sno,sname,sage,sdept) values ( \'200215131\',\'赵新\',20,\'CS\');\n#72\t删除计算机学生视图CS_Student中学号为200215129的记录\ndelete from CS_Student where sno=\'200215131\';#不能删除此人\ndelete from student where sno=\'200215131\' and sdept=\'CS\';#去掉sdept=\'CS\'可删除此人\n#73\t删除学号为200215128的学生记录\ndelete from sc where sno=\'200215128\';\ndelete from student where sno=\'200215128\';\n#74\t删除计算机系所有学生的选课记录\ndelete from sc where \'CS\'=(select sdept from  student where student.sno=sc.sno);\n#75\t删除所有学生的选课记录\ndelete from sc;\n#76 删除视图\ndrop view\tBT_S;\ndrop view  CS_S1 cascade;`, `18900017352558000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">drop</span> <span class="token keyword">database</span>  <span class="token keyword">if</span> <span class="token keyword">exists</span> Student_Course_Database <span class="token punctuation">;</span>\n<span class="token keyword">create</span> <span class="token keyword">database</span> Student_Course_Database<span class="token punctuation">;</span>\n<span class="token keyword">alter</span> <span class="token keyword">database</span> Student_Course_Database <span class="token keyword">character</span> <span class="token keyword">set</span> utf8<span class="token punctuation">;</span>\n<span class="token keyword">use</span> Student_Course_Database<span class="token punctuation">;</span>\n<span class="token keyword">create</span> <span class="token keyword">table</span> student\n<span class="token punctuation">(</span>sno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>\n sname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>\n ssex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n sage <span class="token keyword">smallint</span><span class="token punctuation">,</span>\n sdept <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">create</span> <span class="token keyword">table</span> course\n<span class="token punctuation">(</span>cno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>\n cname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n cpno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n ccredit <span class="token keyword">smallint</span><span class="token punctuation">,</span>\n <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>cpno<span class="token punctuation">)</span> <span class="token keyword">references</span> course<span class="token punctuation">(</span>cno<span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">create</span> <span class="token keyword">table</span> sc\n<span class="token punctuation">(</span>sno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\ncno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\ngrade <span class="token keyword">smallint</span> <span class="token punctuation">,</span>\n<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>sno<span class="token punctuation">,</span>cno<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>sno<span class="token punctuation">)</span> <span class="token keyword">references</span> student<span class="token punctuation">(</span>sno<span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>cno<span class="token punctuation">)</span> <span class="token keyword">references</span> course<span class="token punctuation">(</span>cno<span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'李勇\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215122\'</span><span class="token punctuation">,</span><span class="token string">\'刘晨\'</span><span class="token punctuation">,</span><span class="token string">\'女\'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215123\'</span><span class="token punctuation">,</span><span class="token string">\'王敏\'</span><span class="token punctuation">,</span><span class="token string">\'女\'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">\'MA\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215125\'</span><span class="token punctuation">,</span><span class="token string">\'张立\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token string">\'IS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215124\'</span><span class="token punctuation">,</span><span class="token string">\'刘武汉\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token string">\'PE\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215126\'</span><span class="token punctuation">,</span><span class="token string">\'李四\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token string">\'MA\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215128\'</span><span class="token punctuation">,</span><span class="token string">\'欧阳雨\'</span><span class="token punctuation">,</span><span class="token string">\'女\'</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215127\'</span><span class="token punctuation">,</span><span class="token string">\'欧阳杰\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token string">\'PY\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course<span class="token punctuation">(</span>Cno<span class="token punctuation">,</span>Cname<span class="token punctuation">,</span>Ccredit<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token string">\'数据处理\'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course<span class="token punctuation">(</span>Cno<span class="token punctuation">,</span>Cname<span class="token punctuation">,</span>Ccredit<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'2\'</span><span class="token punctuation">,</span><span class="token string">\'数学\'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'8\'</span><span class="token punctuation">,</span><span class="token string">\'数字系统设计\'</span><span class="token punctuation">,</span><span class="token string">\'2\'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'7\'</span><span class="token punctuation">,</span><span class="token string">\'PASCAL语言\'</span><span class="token punctuation">,</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'5\'</span><span class="token punctuation">,</span><span class="token string">\'数据结构\'</span><span class="token punctuation">,</span><span class="token string">\'7\'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'4\'</span><span class="token punctuation">,</span><span class="token string">\'操作系统\'</span><span class="token punctuation">,</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token string">\'数据库\'</span><span class="token punctuation">,</span><span class="token string">\'5\'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'3\'</span><span class="token punctuation">,</span><span class="token string">\'信息系统\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'9\'</span><span class="token punctuation">,</span><span class="token string">\'DB_Design\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token number">92</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'2\'</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'3\'</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'4\'</span><span class="token punctuation">,</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'5\'</span><span class="token punctuation">,</span><span class="token number">54</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215122\'</span><span class="token punctuation">,</span><span class="token string">\'2\'</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215122\'</span><span class="token punctuation">,</span><span class="token string">\'4\'</span><span class="token punctuation">,</span><span class="token number">96</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215122\'</span><span class="token punctuation">,</span><span class="token string">\'3\'</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215123\'</span><span class="token punctuation">,</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215123\'</span><span class="token punctuation">,</span><span class="token string">\'5\'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>cno<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215127\'</span><span class="token punctuation">,</span><span class="token string">\'2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">#1\t查询全体学生的学号与姓名</span>\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> student<span class="token punctuation">;</span>\n<span class="token comment">#2\t查询全体学生的学号与姓名与所在系</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sno<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student<span class="token punctuation">;</span>\n<span class="token comment">#3\t查询全体学生的详细记录</span>\n<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> student<span class="token punctuation">;</span>\n<span class="token comment">#4\t查询全体学生的姓名及出生年份</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span><span class="token number">2004</span><span class="token operator">-</span>sage <span class="token keyword">from</span> student<span class="token punctuation">;</span>\n<span class="token comment">#5\t查询全体学生的姓名，出生年份和所在的院系，要求用小写字母表示所有系名</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span><span class="token string">\'Year of Birth:\'</span><span class="token punctuation">,</span><span class="token number">2004</span><span class="token operator">-</span>sage<span class="token punctuation">,</span>lower<span class="token punctuation">(</span>sdept<span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>\n<span class="token keyword">select</span> sname NAME<span class="token punctuation">,</span><span class="token string">\'Year of Birth:\'</span> BIRTH<span class="token punctuation">,</span><span class="token number">2004</span><span class="token operator">-</span>sage BIRTHDAY<span class="token punctuation">,</span>lower<span class="token punctuation">(</span>sdept<span class="token punctuation">)</span> DEPARTMENT <span class="token keyword">from</span> student<span class="token punctuation">;</span>\n<span class="token comment">#6\t查询选修了课程的学生学号</span>\n<span class="token keyword">select</span> <span class="token keyword">all</span> sno <span class="token keyword">from</span> sc<span class="token punctuation">;</span>\n<span class="token keyword">select</span> <span class="token keyword">distinct</span> sno <span class="token keyword">from</span> sc<span class="token punctuation">;</span>\n<span class="token comment">#7\t查询计算机科学系全体学生的名单</span>\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\n<span class="token comment">#8\t查询所有年龄在20岁以下的学生姓名及年龄</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>\n<span class="token comment">#9\t查询考试成绩有不及格的学生学号</span>\n<span class="token keyword">select</span> <span class="token keyword">distinct</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> grade <span class="token operator">&lt;</span><span class="token number">60</span><span class="token punctuation">;</span>\n<span class="token comment">#10\t查询年龄在20~23岁之间的学生姓名，系别和年龄</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage <span class="token operator">between</span> <span class="token number">20</span> <span class="token operator">and</span> <span class="token number">23</span><span class="token punctuation">;</span>\n<span class="token comment">#11\t查询年龄不在20~23之间的学生姓名，系别和年龄</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage <span class="token operator">not</span> <span class="token operator">between</span> <span class="token number">20</span> <span class="token operator">and</span> <span class="token number">23</span><span class="token punctuation">;</span>\n<span class="token comment">#12\t查询计算机科学系，数学系，信息系学生的姓名与性别</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">\'CS\'</span><span class="token punctuation">,</span><span class="token string">\'MA\'</span><span class="token punctuation">,</span><span class="token string">\'IS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept <span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">or</span> sdept<span class="token operator">=</span><span class="token string">\'MA\'</span> <span class="token operator">or</span> sdept<span class="token operator">=</span><span class="token string">\'IS\'</span><span class="token punctuation">;</span>\n<span class="token comment">#13\t查询既不是计算机系，数学系，也不是信息系的学生姓名与性别</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">\'CS\'</span><span class="token punctuation">,</span><span class="token string">\'MA\'</span><span class="token punctuation">,</span><span class="token string">\'IS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#14\t查询学号为200215121的学生的详细情况</span>\n<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> student <span class="token keyword">where</span> sno <span class="token operator">like</span> <span class="token string">\'200215121\'</span><span class="token punctuation">;</span>\n<span class="token comment">#15\t查询所有姓刘的学生的学生姓名，学号，性别</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sno<span class="token punctuation">,</span>ssex <span class="token keyword">from</span> student <span class="token keyword">where</span> sname <span class="token operator">like</span> <span class="token string">\'刘%\'</span><span class="token punctuation">;</span>\n<span class="token comment">#16\t查询姓“欧阳”且全名为3个汉字的学生姓名</span>\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> sname <span class="token operator">like</span> <span class="token string">\'欧阳_\'</span><span class="token punctuation">;</span>\n<span class="token comment">#17\t查询名字中第二个字为“阳”字的学生姓名与学号</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sno <span class="token keyword">from</span> student <span class="token keyword">where</span> sname <span class="token operator">like</span> <span class="token string">\'_阳%\'</span><span class="token punctuation">;</span>\n<span class="token comment">#18\t查询所有不姓刘的学生姓名，学号，性别</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sno<span class="token punctuation">,</span>ssex <span class="token keyword">from</span> student <span class="token keyword">where</span> sname <span class="token operator">not</span> <span class="token operator">like</span> <span class="token string">\'刘%\'</span><span class="token punctuation">;</span>\n<span class="token comment">#19\t查询DB_Design课程的课程号和学分</span>\n<span class="token keyword">select</span> cno<span class="token punctuation">,</span>ccredit <span class="token keyword">from</span> course <span class="token keyword">where</span> cname <span class="token operator">like</span> <span class="token string">\'DB@_Design\'</span> <span class="token keyword">escape</span> <span class="token string">\'@\'</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> cno<span class="token punctuation">,</span>ccredit <span class="token keyword">from</span> course <span class="token keyword">where</span> cname <span class="token operator">=</span> <span class="token string">\'DB_Design\'</span> <span class="token punctuation">;</span>\n<span class="token comment">#20\t查询以“DB_”开头，且倒数第三个字符为i的详细情况</span>\n<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> course <span class="token keyword">where</span> cname <span class="token operator">like</span> <span class="token string">\'DB@_%i__\'</span><span class="token keyword">escape</span> <span class="token string">\'@\'</span><span class="token punctuation">;</span>\n<span class="token comment">#21\t查询缺少成绩的学生学号和相应的课程号</span>\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>cno <span class="token keyword">from</span> sc <span class="token keyword">where</span> grade <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>\n#<span class="token number">22</span>\t查询所有有成绩的学生学号和课程号\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>cno <span class="token keyword">from</span> sc <span class="token keyword">where</span> grade <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>\n#<span class="token number">23</span>\t查询计算机系年龄在<span class="token number">20</span>岁以下的学生姓名\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> sage<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>\n<span class="token comment">#24\t查询选修了2号课程的学生学号及其成绩，查询结果按分数降序排列</span>\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'2\'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> grade <span class="token keyword">desc</span><span class="token punctuation">;</span>\n<span class="token comment">#25\t查询全体学生情况，查询结果按所在系的系号升序排列，同一系中的学生按年龄降序排列</span>\n<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> student <span class="token keyword">order</span> <span class="token keyword">by</span> sdept<span class="token punctuation">,</span>sage <span class="token keyword">desc</span><span class="token punctuation">;</span>\n<span class="token comment">#26\t查询学生总人数</span>\n<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>\n<span class="token comment">#27\t查询选修了课程的学生人数</span>\n<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> sno<span class="token punctuation">)</span><span class="token keyword">from</span> sc<span class="token punctuation">;</span>\n<span class="token comment">#28\t计算3号课程的学生平均成绩</span>\n<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'3\'</span><span class="token punctuation">;</span>\n<span class="token comment">#29\t计算3号课程的学生最高成绩</span>\n<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span><span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'3\'</span><span class="token punctuation">;</span>\n<span class="token comment">#30\t查询学生200215122选修课程的总学分数</span>\n<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>ccredit<span class="token punctuation">)</span> <span class="token keyword">from</span> sc<span class="token punctuation">,</span>course <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215122\'</span> <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno<span class="token punctuation">;</span>\n<span class="token comment">#31\t求各个课程及相应的选课人数</span>\n<span class="token keyword">select</span> cno<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span> <span class="token keyword">from</span> sc <span class="token keyword">group</span> <span class="token keyword">by</span> cno<span class="token punctuation">;</span>\n<span class="token comment">#32\t查询选修了3门以上课程的学生学号</span>\n<span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">group</span> <span class="token keyword">by</span> sno <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">3</span><span class="token punctuation">;</span>\n<span class="token comment">#33\t查询每个学生及其选修课程的情况</span>\n<span class="token keyword">select</span> student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\n<span class="token comment">#34\t对例33用自然连接完成</span>\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\n<span class="token comment">#35\t查询每一门课的间接先行课</span>\n<span class="token keyword">select</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cno<span class="token punctuation">,</span><span class="token keyword">second</span><span class="token punctuation">.</span>cpno <span class="token keyword">from</span> course <span class="token keyword">first</span><span class="token punctuation">,</span>course <span class="token keyword">second</span> <span class="token keyword">where</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cpno<span class="token operator">=</span><span class="token keyword">second</span><span class="token punctuation">.</span>cno<span class="token punctuation">;</span>\n<span class="token keyword">select</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cno<span class="token punctuation">,</span><span class="token keyword">second</span><span class="token punctuation">.</span>cpno <span class="token keyword">from</span> course <span class="token keyword">first</span><span class="token punctuation">,</span>course <span class="token keyword">second</span> <span class="token keyword">where</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cpno<span class="token operator">=</span><span class="token keyword">second</span><span class="token punctuation">.</span>cno <span class="token operator">and</span> <span class="token keyword">second</span><span class="token punctuation">.</span>cpno <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>\n<span class="token comment">#36\t对例33的改写</span>\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student <span class="token keyword">left</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student <span class="token keyword">left</span> <span class="token keyword">join</span> sc <span class="token keyword">using</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student <span class="token keyword">right</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#37\t查询选修了1号课程且平均成绩在90分以上的所有学生</span>\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span> <span class="token operator">and</span> grade<span class="token operator">></span><span class="token number">90</span><span class="token punctuation">;</span>\n<span class="token comment">#38\t查询每个学生的学号，姓名，选修的课程名及成绩</span>\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>cname<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc<span class="token punctuation">,</span>course <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno<span class="token punctuation">;</span>\n<span class="token comment">#39\t查询与刘晨在同一系学习的学生</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sname<span class="token operator">=</span><span class="token string">\'刘晨\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> s1<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>s1<span class="token punctuation">.</span>sname<span class="token punctuation">,</span>s1<span class="token punctuation">.</span>sdept <span class="token keyword">from</span> student s1<span class="token punctuation">,</span>student s2 <span class="token keyword">where</span> s1<span class="token punctuation">.</span>sdept<span class="token operator">=</span>s2<span class="token punctuation">.</span>sdept <span class="token operator">and</span> s2<span class="token punctuation">.</span>sname<span class="token operator">=</span><span class="token string">\'刘晨\'</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student s1 <span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span> <span class="token keyword">select</span><span class="token operator">*</span> <span class="token keyword">from</span> student s2 <span class="token keyword">where</span> s2<span class="token punctuation">.</span>sdept<span class="token operator">=</span>s1<span class="token punctuation">.</span>sdept <span class="token operator">and</span> s2<span class="token punctuation">.</span>sname<span class="token operator">=</span><span class="token string">\'刘晨\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#40\t查询选修了课程名为信息系统的学生学号与姓名</span>\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> student <span class="token keyword">where</span> sno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno <span class="token operator">in</span><span class="token punctuation">(</span><span class="token keyword">select</span> cno <span class="token keyword">from</span> course <span class="token keyword">where</span> cname<span class="token operator">=</span><span class="token string">\'信息系统\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc<span class="token punctuation">,</span>course <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno <span class="token operator">and</span> cname<span class="token operator">=</span><span class="token string">\'信息系统\'</span><span class="token punctuation">;</span>\n<span class="token comment">#41\t找出每个学生超过他选修课程平均成绩的课程号</span>\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>cno <span class="token keyword">from</span> sc x <span class="token keyword">where</span> grade<span class="token operator">>=</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> sc y <span class="token keyword">where</span> y<span class="token punctuation">.</span>sno<span class="token operator">=</span>x<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> sc<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>cno <span class="token keyword">from</span> sc<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> sno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> A_G <span class="token keyword">from</span> sc <span class="token keyword">group</span> <span class="token keyword">by</span> sno<span class="token punctuation">)</span> y <span class="token keyword">where</span> sc<span class="token punctuation">.</span>sno<span class="token operator">=</span>y<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>grade<span class="token operator">>=</span>y<span class="token punctuation">.</span>A_G<span class="token punctuation">;</span>\n<span class="token comment">#42\t查询其他系中比计算机系某一学生年龄小的学生姓名与年龄</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token keyword">any</span><span class="token punctuation">(</span><span class="token keyword">select</span> sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span> <span class="token operator">and</span> sdept<span class="token operator">&lt;></span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sage<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token operator">and</span> sdept<span class="token operator">&lt;></span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\n<span class="token comment">#43\t查询其他系比计算机系所有学生年龄小的学生姓名及年龄</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token keyword">all</span><span class="token punctuation">(</span><span class="token keyword">select</span> sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token operator">and</span> sdept<span class="token operator">&lt;></span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>sage<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token operator">and</span> sdept<span class="token operator">&lt;></span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\n<span class="token comment">#44\t查询所有选修了1号课程的学生姓名</span>\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token keyword">exists</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">and</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#45\t查询没有选修1号课程的学生姓名</span>\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">and</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#46</span>\n<span class="token comment">#查询选修了全部课程的学生姓名</span>\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> course <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">and</span> cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#查询选修了全部已开课程的学生姓名</span>\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc x <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc y <span class="token keyword">where</span> sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">and</span> x<span class="token punctuation">.</span>cno<span class="token operator">=</span>y<span class="token punctuation">.</span>cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#47</span>\n<span class="token comment">#查询至少选修了学生200215122选修的全部课程的学生号码</span>\n<span class="token keyword">select</span> <span class="token keyword">distinct</span> sno <span class="token keyword">from</span> sc scx <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc scy <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215122\'</span> <span class="token operator">and</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc scz <span class="token keyword">where</span> scz<span class="token punctuation">.</span>sno<span class="token operator">=</span>scx<span class="token punctuation">.</span>sno <span class="token operator">and</span> scz<span class="token punctuation">.</span>cno<span class="token operator">=</span>scy<span class="token punctuation">.</span>cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#48\t查询计算机系学生及年龄不大于19岁的学生</span>\n <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span>\n <span class="token comment">#49\t查询选修了课程1或2号的学生</span>\n <span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'2\'</span><span class="token punctuation">;</span>\n <span class="token comment">#50\t查询计算机学生与年龄不大于19岁的学生的交集</span>\n <span class="token comment">#select * from student where sdept=\'CS\' intersect select * from student where sage&lt;=19;</span>\n<span class="token keyword">select</span> s1<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> student s1 <span class="token keyword">left</span> <span class="token keyword">join</span><span class="token punctuation">(</span>student s2<span class="token punctuation">)</span> <span class="token keyword">on</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>sno<span class="token operator">=</span>s2<span class="token punctuation">.</span>sno<span class="token punctuation">)</span> <span class="token keyword">where</span> s1<span class="token punctuation">.</span>sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> s1<span class="token punctuation">.</span>sage<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span>\n <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> sage<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span>\n <span class="token comment">#51\t查询既选修了课程1又选修了课程2的学生</span>\n <span class="token comment">#select sno from sc where cno=\'1\' intersect select sno from sc where cno=\'2\';</span>\n <span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span> <span class="token operator">and</span> sno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token keyword">select</span> scx<span class="token punctuation">.</span>sno <span class="token keyword">from</span> sc scx<span class="token punctuation">,</span>sc scy <span class="token keyword">where</span> scx<span class="token punctuation">.</span>sno<span class="token operator">=</span>scy<span class="token punctuation">.</span>sno <span class="token operator">and</span> scx<span class="token punctuation">.</span>cno<span class="token operator">=</span><span class="token string">\'1\'</span> <span class="token operator">and</span> scy<span class="token punctuation">.</span>cno<span class="token operator">=</span><span class="token string">\'2\'</span><span class="token punctuation">;</span>\n <span class="token comment">#52\t查询计算机系的学生与年龄不大于19岁学生的差集</span>\n <span class="token comment">#select * from student where sdept=\'CS\' except select * from student where sage&lt;=19;</span>\n <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> sage<span class="token operator">></span><span class="token number">19</span><span class="token punctuation">;</span>\n <span class="token comment">#53\t将一个新学生元组插入到student表中</span>\n <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>sage<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215129\'</span><span class="token punctuation">,</span><span class="token string">\'陈东\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token string">\'IS\'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token comment">#54\t将学生张成民的信息插入到student表中</span>\n <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215130\'</span><span class="token punctuation">,</span><span class="token string">\'张成民\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#55\t插入一条选课记录</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token punctuation">(</span>sno<span class="token punctuation">,</span>cno<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215128\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215129\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#56\t对每一个系，求学生的平均年龄，并把结果存入数据库</span>\n<span class="token keyword">create</span> <span class="token keyword">table</span>  dept_age\n<span class="token punctuation">(</span> sdept <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span> <span class="token keyword">primary</span>  <span class="token keyword">key</span> <span class="token punctuation">,</span>\navg_age <span class="token keyword">smallint</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> dept_age <span class="token punctuation">(</span>sdept<span class="token punctuation">,</span>avg_age<span class="token punctuation">)</span> <span class="token keyword">select</span> sdept<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sage<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">group</span> <span class="token keyword">by</span> sdept<span class="token punctuation">;</span>\n<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> dept_age<span class="token punctuation">;</span>\n<span class="token comment">#57\t将学生200215121的年龄改为22岁</span>\n<span class="token keyword">update</span> student <span class="token keyword">set</span> sage<span class="token operator">=</span><span class="token number">22</span> <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215121\'</span><span class="token punctuation">;</span>\n<span class="token comment">#58\t将所有学生的年龄加1岁</span>\n<span class="token keyword">update</span> student <span class="token keyword">set</span> sage<span class="token operator">=</span>sage<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token comment">#59\t将计算机系的全体学生的成绩置0</span>\n<span class="token keyword">update</span> sc <span class="token keyword">set</span>  grade<span class="token operator">=</span><span class="token number">0</span> <span class="token keyword">where</span> <span class="token string">\'CS\'</span><span class="token operator">=</span><span class="token punctuation">(</span> <span class="token keyword">select</span> sdept <span class="token keyword">from</span>  student <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">update</span> sc <span class="token keyword">set</span>  grade<span class="token operator">=</span><span class="token number">100</span> <span class="token keyword">where</span> sno <span class="token operator">in</span>  <span class="token punctuation">(</span><span class="token keyword">select</span> sno <span class="token keyword">from</span>  student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#60\t建立计算机系学生的视图</span>\n<span class="token keyword">create</span> <span class="token keyword">view</span> CS_Student <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\n<span class="token comment">#61\t建立计算机系学生的视图，并按要求进行修改和插入时仍需保证该视图只有计算机系的学生</span>\n<span class="token keyword">create</span> <span class="token keyword">view</span> CS_Student_Check <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">;</span>\n<span class="token comment">#62\t建立计算机系选修了1号课程的学生的视图</span>\n<span class="token keyword">create</span> <span class="token keyword">view</span> CS_S1<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>grade<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>grade  <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">;</span>\n<span class="token comment">#63\t建立计算机系选修了1号课程且成绩在90分以上的学生的视图</span>\n<span class="token keyword">create</span> <span class="token keyword">view</span> CS_S2 <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>grade <span class="token keyword">from</span> CS_S1 <span class="token keyword">where</span> grade<span class="token operator">>=</span><span class="token number">90</span><span class="token punctuation">;</span>\n<span class="token comment">#64\t定义一个反映学生出生年份的视图</span>\n<span class="token keyword">create</span> <span class="token keyword">view</span> BT_S<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sbirth<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span><span class="token number">2004</span><span class="token operator">-</span>sage <span class="token keyword">from</span> student <span class="token punctuation">;</span>\n<span class="token comment">#65 将学生的学号及他的平均成绩定义为一个视图</span>\n<span class="token keyword">create</span> <span class="token keyword">view</span> S_G<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>gavg<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> sc <span class="token keyword">group</span>  <span class="token keyword">by</span> sno<span class="token punctuation">;</span>\n<span class="token comment">#66\t将student表中的所有女生记录定义为一个视图</span>\n<span class="token keyword">create</span> <span class="token keyword">view</span> F_Student <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> ssex<span class="token operator">=</span><span class="token string">\'女\'</span><span class="token punctuation">;</span>\n<span class="token comment">#67\t在计算机系学生的视图中找出年龄小于20岁的学生</span>\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>sage <span class="token keyword">from</span> CS_Student <span class="token keyword">where</span> sage<span class="token operator">&lt;=</span><span class="token number">20</span><span class="token punctuation">;</span>\n<span class="token comment">#68\t查询选修了1号课程的计算机系的学生</span>\n<span class="token keyword">select</span> CS_Student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> CS_Student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> CS_Student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">;</span>\n<span class="token comment">#69\t在S_G视图中查询平均成绩在90分以上的学生学号和平均成绩</span>\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> S_G <span class="token keyword">where</span> gavg<span class="token operator">>=</span><span class="token number">90</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span> grade<span class="token punctuation">)</span> <span class="token keyword">from</span> sc <span class="token keyword">group</span>  <span class="token keyword">by</span> sno <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span> grade<span class="token punctuation">)</span><span class="token operator">>=</span><span class="token number">90</span><span class="token punctuation">;</span>\n<span class="token comment">#70\t将计算机系学生视图CS_Student中学号为200215122的学生姓名改为刘辰</span>\n<span class="token keyword">update</span> CS_Student <span class="token keyword">set</span> sname<span class="token operator">=</span><span class="token string">\'刘辰\'</span> <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215122\'</span><span class="token punctuation">;</span>\n<span class="token keyword">update</span> student <span class="token keyword">set</span> sname<span class="token operator">=</span><span class="token string">\'刘辰\'</span> <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215122\'</span> <span class="token operator">and</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\n<span class="token comment">#71\t向计算机系的学生视图CS_Student中插入一个新的学生记录，其中学号为200215129，姓名为赵新，年龄为20岁</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> CS_Student <span class="token keyword">values</span> <span class="token punctuation">(</span> <span class="token string">\'200215131\'</span><span class="token punctuation">,</span><span class="token string">\'赵新\'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">#不能自动插入系名\'CS\'</span>\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span> <span class="token string">\'200215131\'</span><span class="token punctuation">,</span><span class="token string">\'赵新\'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#72\t删除计算机学生视图CS_Student中学号为200215129的记录</span>\n<span class="token keyword">delete</span> <span class="token keyword">from</span> CS_Student <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215131\'</span><span class="token punctuation">;</span><span class="token comment">#不能删除此人</span>\n<span class="token keyword">delete</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215131\'</span> <span class="token operator">and</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">;</span><span class="token comment">#去掉sdept=\'CS\'可删除此人</span>\n<span class="token comment">#73\t删除学号为200215128的学生记录</span>\n<span class="token keyword">delete</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215128\'</span><span class="token punctuation">;</span>\n<span class="token keyword">delete</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215128\'</span><span class="token punctuation">;</span>\n<span class="token comment">#74\t删除计算机系所有学生的选课记录</span>\n<span class="token keyword">delete</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> <span class="token string">\'CS\'</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> sdept <span class="token keyword">from</span>  student <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">#75\t删除所有学生的选课记录</span>\n<span class="token keyword">delete</span> <span class="token keyword">from</span> sc<span class="token punctuation">;</span>\n<span class="token comment">#76 删除视图</span>\n<span class="token keyword">drop</span> <span class="token keyword">view</span>\tBT_S<span class="token punctuation">;</span>\n<span class="token keyword">drop</span> <span class="token keyword">view</span>  CS_S1 <span class="token keyword">cascade</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>',
id:"/github/workspace/blog/数据库常用语句/index.md absPath of file >>> MarkdownRemark",timeToRead:8,frontmatter:{date:"2018-04-02 17:45:38",path:"/database-commonly-used-statements/",tags:"面试, 数据库",title:"数据库常用语句",draft:null}},{excerpt:"常用操作以及概念 求助 1. help 指令的基本用法与选项介绍。 2. man man 是 manual 的缩写，将指令的具体信息显示出来。 当执行 man date 时，有 DATE(1) 出现，其中的数字代表指令的类型，常用的数字及其类型如下： 代号 类型 1 用户在 shell 环境中可以操作的指令或者可执行文件 5 配置文件 8 系统管理员可以使用的管理指令 3. info info 与 man 类似，但是 info 将文档分成一个个页面，每个页面可以进行跳转。 关机 1. sync…",html:'<h1 id="常用操作以及概念"><a href="#%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E4%BB%A5%E5%8F%8A%E6%A6%82%E5%BF%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>常用操作以及概念</h1>\n<h2 id="求助"><a href="#%E6%B1%82%E5%8A%A9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>求助</h2>\n<h3 id="1-help"><a href="#1-help" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. help</h3>\n<p>指令的基本用法与选项介绍。</p>\n<h3 id="2-man"><a href="#2-man" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. man</h3>\n<p>man 是 manual 的缩写，将指令的具体信息显示出来。</p>\n<p>当执行 man date 时，有 DATE(1) 出现，其中的数字代表指令的类型，常用的数字及其类型如下：</p>\n<table>\n<thead>\n<tr>\n<th align="center">代号</th>\n<th>类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">1</td>\n<td>用户在 shell 环境中可以操作的指令或者可执行文件</td>\n</tr>\n<tr>\n<td align="center">5</td>\n<td>配置文件</td>\n</tr>\n<tr>\n<td align="center">8</td>\n<td>系统管理员可以使用的管理指令</td>\n</tr>\n</tbody>\n</table>\n<h3 id="3-info"><a href="#3-info" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. info</h3>\n<p>info 与 man 类似，但是 info 将文档分成一个个页面，每个页面可以进行跳转。</p>\n<h2 id="关机"><a href="#%E5%85%B3%E6%9C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关机</h2>\n<h3 id="1-sync"><a href="#1-sync" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. sync</h3>\n<p>为了加快对磁盘文件的读写速度，位于内存中的文件数据不会立即同步到磁盘上，因此关机之前需要先进行 sync 同步操作。</p>\n<h3 id="2-shutdown"><a href="#2-shutdown" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. shutdown</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86668072764074890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# /sbin/shutdown [-krhc] [时间] [警告讯息]\n-k ： 不会关机，只是发送警告讯息，通知所有在线的用户\n-r ： 将系统的服务停掉后就重新启动\n-h ： 将系统的服务停掉后就立即关机\n-c ： 取消已经在进行的 shutdown 指令内容`, `86668072764074890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># /sbin/shutdown [-krhc] [时间] [警告讯息]</span>\n-k ： 不会关机，只是发送警告讯息，通知所有在线的用户\n-r ： 将系统的服务停掉后就重新启动\n-h ： 将系统的服务停掉后就立即关机\n-c ： 取消已经在进行的 <span class="token function">shutdown</span> 指令内容</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="3-其它关机指令"><a href="#3-%E5%85%B6%E5%AE%83%E5%85%B3%E6%9C%BA%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 其它关机指令</h3>\n<p>reboot、halt、poweroff。</p>\n<h2 id="path"><a href="#path" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PATH</h2>\n<p>可以在环境变量 PATH 中声明可执行文件的路径，路径之间用 : 分隔。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44194345046469706000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/dmtsai/.local/bin:/home/dmtsai/bin`, `44194345046469706000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/home/dmtsai/.local/bin:/home/dmtsai/bin</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="运行等级"><a href="#%E8%BF%90%E8%A1%8C%E7%AD%89%E7%BA%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行等级</h2>\n<ul>\n<li>0：关机模式</li>\n<li>1：单用户模式（可用于破解 root 密码）</li>\n<li>2：无网络支持的多用户模式</li>\n<li>3：有网络支持的多用户模式（文本模式，工作中最常用的模式）</li>\n<li>4：保留，未使用</li>\n<li>5：有网络支持的 X-windows 多用户模式（桌面）</li>\n<li>6：重新引导系统，即重启</li>\n</ul>\n<h2 id="sudo"><a href="#sudo" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sudo</h2>\n<p>使用 sudo 允许一般用户使用 root 可执行的命令，只有在 /etc/sudoers 配置文件中添加的用户才能使用该指令。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23346177822605087000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# User privilege specification\nroot    ALL=(ALL:ALL) ALL\ntowavephone ALL=(ALL:ALL) ALL`, `23346177822605087000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># User privilege specification</span>\nroot    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL:ALL<span class="token punctuation">)</span> ALL\ntowavephone <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL:ALL<span class="token punctuation">)</span> ALL</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="gnu"><a href="#gnu" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GNU</h2>\n<p>GNU 计划，译为革奴计划，它的目标是创建一套完全自由的操作系统，称为 GNU，其内容软件完全以 GPL 方式发布。其中 GPL 全称为 GNU 通用公共许可协议，包含了以下内容：</p>\n<ul>\n<li>以任何目的运行此程序的自由；</li>\n<li>再复制的自由；</li>\n<li>改进此程序，并公开发布改进的自由。</li>\n</ul>\n<h2 id="包管理工具"><a href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>包管理工具</h2>\n<p>RPM 和 DPKG 为最常见的两类软件包管理工具。RPM 全称为 Redhat Package Manager，最早由 Red Hat 公司制定实施，随后被 GNU 开源操作系统接受并成为很多 Linux 系统 (RHEL) 的既定软件标准。与 RPM 进行竞争的是基于 Debian 操作系统 (UBUNTU) 的 DEB 软件包管理工具－ DPKG，全称为 Debian Package，功能方面与 RPM 相似。</p>\n<p>YUM 基于 RPM 包管理工具，具有依赖管理功能，并具有软件升级的功能。</p>\n<h2 id="发行版"><a href="#%E5%8F%91%E8%A1%8C%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>发行版</h2>\n<p>Linux 发行版是 Linux 内核及各种应用软件的集成版本。</p>\n<table>\n<thead>\n<tr>\n<th>基于的包管理工具</th>\n<th>商业发行版</th>\n<th>社区发行版</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DPKG</td>\n<td>Ubuntu</td>\n<td>Debian</td>\n</tr>\n<tr>\n<td>RPM</td>\n<td>Red Hat</td>\n<td>Fedora / CentOS</td>\n</tr>\n</tbody>\n</table>\n<h2 id="vim-三个模式"><a href="#vim-%E4%B8%89%E4%B8%AA%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>VIM 三个模式</h2>\n<ul>\n<li>一般指令模式（Command mode）：进入 VIM 的默认模式，可以用于移动游标查看内容；</li>\n<li>编辑模式（Insert mode）：按下 “i” 等按键之后进入，可以对文本进行编辑；</li>\n<li>指令列模式（Bottom-line mode）：按下 ”:” 按键之后进入，用于保存退出等操作。</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-3d6dd.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 591px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 84.26395939086294%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQDAgX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQMC/9oADAMBAAIQAxAAAAH09pK5uduW86Ss+wH/xAAeEAACAgAHAAAAAAAAAAAAAAAAAgESAxETISIxMv/aAAgBAQABBQKcQvx1pL7pOaVQf0vR/8QAGREAAQUAAAAAAAAAAAAAAAAAEgABAhBR/9oACAEDAQE/ASZFHL//xAAaEQEAAQUAAAAAAAAAAAAAAAACAQAQEjFR/9oACAECAQE/ASHG5rF9v//EABsQAAEEAwAAAAAAAAAAAAAAAAABEBEhICIx/9oACAEBAAY/AiaZdSzmH//EABwQAAICAgMAAAAAAAAAAAAAAAABETEhURBx8P/aAAgBAQABPyF8tOSU7IoWlDZoS3sRhYo90y7op4//2gAMAwEAAgADAAAAEKffAP/EABYRAQEBAAAAAAAAAAAAAAAAAAERIP/aAAgBAwEBPxCqQwv/xAAWEQEBAQAAAAAAAAAAAAAAAAARASD/2gAIAQIBAT8QTrYH/8QAHRABAAICAgMAAAAAAAAAAAAAAQARITEQcUGh8P/aAAgBAQABPxAQyPIGI0JoSWzK+W7Em2AF2KlGOyoBbguoPk7nrHH/2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="5942debd fc00 477a b390 7c5692cc8070"\n        title=""\n        src="/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-3d6dd.jpg"\n        srcset="/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-57fa5.jpg 200w,\n/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-8f26e.jpg 400w,\n/static/5942debd-fc00-477a-b390-7c5692cc8070-a769a78fca460ef2f1ce7e1973b7c8e8-3d6dd.jpg 591w"\n        sizes="(max-width: 591px) 100vw, 591px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>在指令列模式下，有以下命令用于离开或者保存文件。</p>\n<table>\n<thead>\n<tr>\n<th align="center">命令</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">:w</td>\n<td>写入磁盘</td>\n</tr>\n<tr>\n<td align="center">:w!</td>\n<td>当文件为只读时，强制写入磁盘。到底能不能写入，与用户对该文件的权限有关</td>\n</tr>\n<tr>\n<td align="center">:q</td>\n<td>离开</td>\n</tr>\n<tr>\n<td align="center">:q!</td>\n<td>强制离开不保存</td>\n</tr>\n<tr>\n<td align="center">:wq</td>\n<td>写入磁盘后离开</td>\n</tr>\n<tr>\n<td align="center">:wq!</td>\n<td>强制写入磁盘后离开</td>\n</tr>\n</tbody>\n</table>\n<h1 id="分区"><a href="#%E5%88%86%E5%8C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分区</h1>\n<h2 id="磁盘的文件名"><a href="#%E7%A3%81%E7%9B%98%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>磁盘的文件名</h2>\n<p>Linux 中每个硬件都被当做一个文件，包括磁盘。常见磁盘的文件名如下：</p>\n<ul>\n<li>SCSI/SATA/USB 磁盘：/dev/sd[a-p]</li>\n<li>IDE 磁盘：/dev/hd[a-d]</li>\n</ul>\n<p>其中文件名后面的序号的确定与磁盘插入的顺序有关，而与磁盘所插入的插槽位置无关。</p>\n<h2 id="分区表"><a href="#%E5%88%86%E5%8C%BA%E8%A1%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分区表</h2>\n<p>磁盘分区表主要有两种格式，一种是限制较多的 MBR 分区表，一种是较新且限制较少的 GPT 分区表。</p>\n<h3 id="1-mbr"><a href="#1-mbr" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. MBR</h3>\n<p>MBR 中，第一个扇区最重要，里面有主要开机记录（Master boot record, MBR）及分区表（partition table），其中 MBR 占 446 bytes，分区表占 64 bytes。</p>\n<p>分区表只有 64 bytes，最多只能存储 4 个分区，这 4 个分区为主分区（Primary）和扩展分区（Extended）。其中扩展分区只有一个，它将其它空间用来记录分区表，因此通过扩展分区可以分出更多分区，这些分区称为逻辑分区。</p>\n<p>Linux 也把分区当成文件，分区文件的命名方式为：磁盘文件名 + 编号，例如 /dev/sda1。注意，逻辑分区的编号从 5 开始。</p>\n<h3 id="2-gpt"><a href="#2-gpt" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. GPT</h3>\n<p>不同的磁盘有不同的扇区大小，例如 512 bytes 和最新磁盘的 4 k。GPT 为了兼容所有磁盘，在定义扇区上使用逻辑区块地址（Logical Block Address, LBA）。</p>\n<p>GPT 第 1 个区块记录了 MBR，紧接着是 33 个区块记录分区信息，并把最后的 33 个区块用于对分区信息进行备份。</p>\n<p>GPT 没有扩展分区概念，都是主分区，最多可以分 128 个分区。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/GUID_Partition_Table_Scheme.svg-3206264fe6c6c261e8fc0c6008627f5f-59d2e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 400px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 137.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsSAAALEgHS3X78AAAE3klEQVRIx7WVe0xTVxzHb1/3tuX9tDwEcRABwZYii4AjmplhxpK5ZUSNzoiOERk4BIEVKG0F+gBp6ZOWAm0REBzIQ2Ay3lQFBpsG/MMsbGZZJro/jJvxj2ULd+eWU3YlbEGTneST3z3nnvO95/c45yLI/9TCATzAm4BIQAwgkEqlcplMZoybm1uQi4tLGIZhRD+azWbvBISB593EOIvFCgPzQwGoU5APOAKJBxygUChpwKYC3oH4AFIA7wKS4YeJ9/uh/Qjg5RREyerOVi4SeZlMpnhjfT1PIpYkqJTKOLVaHacEVlQu2kv0zWYzv06lity4NgRAbJtJCHO5XDYxWFpSmjkyMoIPDg6uGurrca1OixsMBryhoQGXy+X4ldbW1YmJCbypqWkFTKeQBYMgLgCWXwCHsJTjn2UdttlHbZJGw7VipaJHoKntKtEqewFdRUpF38UaaZ9xuN9a3WapQ65U+yH4A4ZTMBAKYgBGcMQbxE6RYwXnDxnsw0rVSL9cfNWiU/R3aqq62zSy3qtKaU97raitSWecGVfKO2xlyJAphvrTpD/ZZSJLLMLlbSHBhEXSc7Le1o7e0JvvjCnqp26qrAv2msaZcQeWhWmZfnxQabo1oq1sMUuRAWMQ8nDM1ynoDTNEozMYiO2724545FRXZow8+0Vq/+Np6cCjZXHLvRl56+KsrPuHpYrWpbnqseePhfY/n10SG7VZiE4QwX4yw9msJinvZ56mEQ8niy6ktty9Yxh//ljStbwob5qbrLMs2FXt9+drwG7VAyvLVaO/r8h0Q9eFSN6peDr+q7tTJBQWtx/hMgYqFVj6Lj6PC0QTThTm8c6KBNyLemU0wfla6W6w+xgwHnemXMDbezBlPxLoQjuK4+u7ohPJ2Jh60Pw39F0B7jDWVNK4j/va+s0bHV2rcRqdFgDcdyyMSuAzGCi6CxCNYthOV08Pz/VTgWEchE5jbOWME6XEhuWEQg8ocHcMeBAYsErorypIQIPQ4QdeWTCAFFcaqV45MJ7Otu11BKmwHwwF3V5HkHDZA+7GleQ6E4bCDdodWxUM3eLEHTAk/9ko4MaOjI1LQlGMGQVqhkdYFGXGrlmMx0CxPd6+HE/wHE6hs9zJi5mk4ia37aQC3mgRUnw94Y3+0gUbAK8xlruHt6PmYnj7uLnFlw8WS0yJ2QWyxMJyfWKeQJV8oaQuuVBkSDqXL00E75LSjpw8HHV01itNgTPIsdoOM+ju48shEkD54FhWmrimraPa0NcslFstMk2XuVLVaSVQ6HtsQpnVKlV3tRSLNDW80/djU4px/01jBxY6XDmekf/e6MJvFYCyodtPJN2jP1ZcH3t46cb0IzGw4q/nngon7r6QyDUdoogPp4IPCPB1t52l4TjEpz4VOAT38JP5rf2LlfPLeEnf5M8VjZ2ziuauefm1m99Lm7/8pmri3ouymQd4mcE2LEtMb0jdJ/pHMATGjwguFhwS7rixP8kVHwKCuvrWqTpT+y2Nsc2ubuyc0eqsY2BsWquzjest3d9q9ZavxDEn5sPfKlrlkP8pzupHffw4RNYp6R/nxiv0vcXn8mXC7AK5JDNXIvpcoKooEOqEIFllZ7KFlV9UmMsqa21n+RlLoUkFf72UaSrEcQGATNNIpUT7F6hwDo2Ts3a5/g23C6i1n8JdtAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="GUID Partition Table Scheme svg"\n        title=""\n        src="/static/GUID_Partition_Table_Scheme.svg-3206264fe6c6c261e8fc0c6008627f5f-59d2e.png"\n        srcset="/static/GUID_Partition_Table_Scheme.svg-3206264fe6c6c261e8fc0c6008627f5f-01f55.png 200w,\n/static/GUID_Partition_Table_Scheme.svg-3206264fe6c6c261e8fc0c6008627f5f-59d2e.png 400w"\n        sizes="(max-width: 400px) 100vw, 400px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="开机检测程序"><a href="#%E5%BC%80%E6%9C%BA%E6%A3%80%E6%B5%8B%E7%A8%8B%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>开机检测程序</h2>\n<h3 id="1-bios"><a href="#1-bios" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. BIOS</h3>\n<p>BIOS 是开机的时候计算机执行的第一个程序，这个程序知道可以开机的磁盘，并读取磁盘第一个扇区的 MBR，由 MBR 执行其中的开机管理程序，这个开机管理程序会加载操作系统的核心文件。</p>\n<p>MBR 中的开机管理程序提供以下功能：选单、载入核心文件以及转交其它开机管理程序。转交这个功能可以用来实现了多重引导，只需要将另一个操作系统的开机管理程序安装在其它分区的启动扇区上，在启动 MBR 中的开机管理程序时，就可以选择启动当前的操作系统或者转交给其它开机管理程序从而启动另一个操作系统。</p>\n<p>安装多重引导，最好先安装 Windows 再安装 Linux。因为安装 Windows 时会覆盖掉 MBR，而 Linux 可以选择将开机管理程序安装在 MBR 或者其它分区的启动扇区，并且可以设置开机管理程序的选单。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-6953a.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 642px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 60.74766355140188%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe5ZTQP/xAAVEAEBAAAAAAAAAAAAAAAAAAAQAv/aAAgBAQABBQJp/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAEhEBExUWGR/9oACAEBAAE/IXDej0QnWWnLp//aAAwDAQACAAMAAAAQwM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAACAgIDAQAAAAAAAAAAAAABIQARQXEQMVGh/9oACAEBAAE/EGFlLPfyCmaAr2ZbhLBAMIxdDPH/2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="f900f266 a323 42b2 bc43 218fdb8811a8"\n        title=""\n        src="/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-6953a.jpg"\n        srcset="/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-e852a.jpg 200w,\n/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-f7f98.jpg 400w,\n/static/f900f266-a323-42b2-bc43-218fdb8811a8-0812cc1a9b1537e5b086423318bee80f-6953a.jpg 642w"\n        sizes="(max-width: 642px) 100vw, 642px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="2-uefi"><a href="#2-uefi" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. UEFI</h3>\n<p>UEFI 相比于 BIOS 来说功能更为全面，也更为安全。</p>\n<h2 id="挂载"><a href="#%E6%8C%82%E8%BD%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>挂载</h2>\n<p>挂载利用目录作为分区的进入点，也就是说，进入目录之后就可以读取分区的数据。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-32829.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 683px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 46.559297218155194%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHbWsksKL//xAAWEAEBAQAAAAAAAAAAAAAAAAAAASD/2gAIAQEAAQUCTEf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAABIP/aAAgBAQAGPwJr/8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERITFR/9oACAEBAAE/IcqJu2sbROno+o4P/9oADAMBAAIAAwAAABC8z//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EGf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAHRAAAgIBBQAAAAAAAAAAAAAAAAERITFBUXGhsf/aAAgBAQABPxBQXiQHi9iGzabdUJSV4ajuGbk//9k=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="249f3bb1 feee 4805 a259 a72699d638ca"\n        title=""\n        src="/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-32829.jpg"\n        srcset="/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-f352d.jpg 200w,\n/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-0ba2d.jpg 400w,\n/static/249f3bb1-feee-4805-a259-a72699d638ca-4edd15f99ed86848980ad29c0582b8fd-32829.jpg 683w"\n        sizes="(max-width: 683px) 100vw, 683px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="文件"><a href="#%E6%96%87%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件</h1>\n<h2 id="文件权限概念"><a href="#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E6%A6%82%E5%BF%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件权限概念</h2>\n<p>把用户分为三种：文件拥有者、群组以及其它人，对不同的用户有不同的文件权限。</p>\n<p>使用 ls 查看一个文件时，会显示一个文件的信息，例如 <code class="language-text">drwxr-xr-x. 3 root root 17 May 6 00:14 .config</code>，对这个信息的解释如下：</p>\n<ul>\n<li>drwxr-xr-x：文件类型以及权限，第 1 位为文件类型字段，后 9 位为文件权限字段。</li>\n<li>3：链接数；</li>\n<li>root：文件拥有者；</li>\n<li>root：所属群组；</li>\n<li>17：文件大小；</li>\n<li>May 6 00:14：文件最后被修改的时间；</li>\n<li>.config：文件名。</li>\n</ul>\n<p>常见的文件类型及其含义有：</p>\n<ul>\n<li>d：目录；</li>\n<li>-：文件；</li>\n<li>l：链接文件；</li>\n</ul>\n<p>9 位的文件权限字段中，每 3 个为一组，共 3 组，每一组分别代表对文件拥有者、所属群组以及其它人的文件权限。一组权限中的 3 位分别为 r、w、x 权限，表示可读、可写、可执行。</p>\n<h2 id="文件属性以及权限的修改"><a href="#%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7%E4%BB%A5%E5%8F%8A%E6%9D%83%E9%99%90%E7%9A%84%E4%BF%AE%E6%94%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件属性以及权限的修改</h2>\n<h3 id="1-修改文件所属群组"><a href="#1-%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%89%80%E5%B1%9E%E7%BE%A4%E7%BB%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 修改文件所属群组</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31345981041887216000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chgrp [-R] groupname dirname/filename -R：递归修改`, `31345981041887216000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># chgrp [-R] groupname dirname/filename -R：递归修改</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="2-修改文件拥有者"><a href="#2-%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%8B%A5%E6%9C%89%E8%80%85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 修改文件拥有者</h3>\n<p>不仅可以修改文件拥有者，也可以修改文件所属群组。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10845373060845408000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chown [-R] 用户名:群组名 dirname/filename`, `10845373060845408000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># chown [-R] 用户名:群组名 dirname/filename</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="3-修改权限"><a href="#3-%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 修改权限</h3>\n<p>可以将一组权限用数字来表示，此时一组权限的 3 个位当做二进制数字的位，从左到右每个位的权值为 4、2、1，即每个权限对应的数字权值为 r : 4、w : 2、x : 1。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21214453318397550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chmod [-R] xyz dirname/filename`, `21214453318397550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># chmod [-R] xyz dirname/filename</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>范例：将 .bashrc 文件的权限修改为 -rwxr-xr—。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98199828268566710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chmod 754 .bashrc`, `98199828268566710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># chmod 754 .bashrc</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>也可以使用符号来设定权限。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59368147798456476000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chmod [ugoa] [+-=] [rwx] dirname/filename - u：拥有者 - g：所属群组 - o：其他人 - a：所有人 - +：添加权限 -\n-：移除权限 - =：设定权限`, `59368147798456476000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># chmod [ugoa] [+-=] [rwx] dirname/filename - u：拥有者 - g：所属群组 - o：其他人 - a：所有人 - +：添加权限 -\n-：移除权限 - =：设定权限</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>范例：为 .bashrc 文件的所有用户添加写权限。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84550628152209110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# chmod a+w .bashrc`, `84550628152209110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># chmod a+w .bashrc</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="目录的权限"><a href="#%E7%9B%AE%E5%BD%95%E7%9A%84%E6%9D%83%E9%99%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>目录的权限</h2>\n<p>文件名不是存储在一个文件的内容中，而是存储在一个文件所在的目录中。因此，拥有文件的 w 权限并不能对文件名进行修改。</p>\n<p>目录存储文件列表，一个目录的权限也就是对其文件列表的权限。因此，目录的 r 权限表示可以读取文件列表；w 权限表示可以修改文件列表，具体来说，就是添加删除文件，对文件名进行修改；x 权限可以让该目录成为工作目录，x 权限是 r 和 w 权限的基础，如果不能使一个目录成为工作目录，也就没办法读取文件列表以及对文件列表进行修改了。</p>\n<h2 id="文件默认权限"><a href="#%E6%96%87%E4%BB%B6%E9%BB%98%E8%AE%A4%E6%9D%83%E9%99%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件默认权限</h2>\n<ul>\n<li>文件默认权限：文件默认没有可执行权限，因此为 666，也就是 -rw-rw-rw- 。</li>\n<li>目录默认权限：目录必须要能够进入，也就是必须拥有可执行权限，因此为 777 ，也就是 drwxrwxrwx。</li>\n</ul>\n<p>可以通过 umask 设置或者查看文件的默认权限，通常以掩码的形式来表示，例如 002 表示其它用户的权限去除了一个 2 的权限，也就是写权限，因此建立新文件时默认的权限为 -rw-rw-r— 。</p>\n<h2 id="目录配置"><a href="#%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>目录配置</h2>\n<p>为了使不同 Linux 发行版本的目录结构保持一致性，Filesystem Hierarchy Standard (FHS) 规定了 Linux 的目录结构。最基础的三个目录如下：</p>\n<ul>\n<li>/ (root, 根目录)</li>\n<li>/usr (unix software resource)：所有系统默认软件都会安装到这个目录；</li>\n<li>/var (variable)：存放系统或程序运行过程中的数据文件。</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/linux-filesystem-bee94538cf084ef7522069597a772def-c319d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 660px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 47.42424242424243%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVQoz2PYcOAc4////xkZgABIM0FpRhj73L41lo/O7bh46/jmfqgcA7J6EB8E7nz4zyQtp8CADLigNDuUBhnICsSM+SmRGkCaGyrGgqYeBDjgrIUb9npPX7qxwtnTX2LRxn3TMwor9eet2ZnSP2d5eGVLn9X8dXvyFPWtxeav3zulffI8l55ZSy1mLNtUbuPoKg5UP2Xq4vUhBVXNRkBz2hxcvVkYlmw5aDFn9fbohMxCuRXbj+ZmFtdoL1i/x3vywrVuLRNmmyzdcjAoODJefvGm/fntU+ZbT120zgioJzw6JVt22bbDOZMXrHEqrm3XBrKTrB3cIK6fvnSD/IL1u2eD2EADZi1cv8cBaGg4UGN3VWu/wJLNB+aA5JZsOZACdFVlY+80daCaBWCxzQdc5q/b3QX38qbDV0AGcs1YtkGqf84KFqBLFNbtPSG0cP0OodW7j0hMW7yau3/OMlWf4DDuzKIKubSCcqX4jBzR/jlL5UCRk1teL9M3a4nSq3//mV7/e8nIMHP5JrjhkQl+MCYoFpmBmA0a4HxALMiACpigEcgG5bPAZdomz2GYt2Y5OCms2rGCd+W2JYtXbFvSD6Q3Ld20oGfDvjX9SzYuqFu9Y1lDYVU+//ItizfOXz2rbPmWRb2LN8zPAapZsmjd3Cogvx9u6NJNC8H05Hn9zFsPb1Bfu3uF8s4TW7RXbV+qtO3oRuU1u5bLbz+6ST45K4F17e6VRkDNikALNBatnye/ascyvWWbFyqv3bVCAwDBHxHbobhdpgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="linux filesystem"\n        title=""\n        src="/static/linux-filesystem-bee94538cf084ef7522069597a772def-c319d.png"\n        srcset="/static/linux-filesystem-bee94538cf084ef7522069597a772def-19de3.png 200w,\n/static/linux-filesystem-bee94538cf084ef7522069597a772def-3e86e.png 400w,\n/static/linux-filesystem-bee94538cf084ef7522069597a772def-c319d.png 660w"\n        sizes="(max-width: 660px) 100vw, 660px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="文件时间"><a href="#%E6%96%87%E4%BB%B6%E6%97%B6%E9%97%B4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件时间</h2>\n<ol>\n<li>modification time (mtime)：文件的内容更新就会更新；</li>\n<li>status time (ctime)：文件的状态（权限、属性）更新就会更新；</li>\n<li>access time (atime)：读取文件时就会更新。</li>\n</ol>\n<h2 id="文件与目录的基本操作"><a href="#%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件与目录的基本操作</h2>\n<h3 id="1-ls"><a href="#1-ls" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. ls</h3>\n<p>列出文件或者目录的信息，目录的信息就是其中包含的文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47805729359668070000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ls [-aAdfFhilnrRSt] file|dir -a ：列出全部的文件 -d ：仅列出目录本身 -l\n：以长数据串行列出，包含文件的属性与权限等等数据`, `47805729359668070000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># ls [-aAdfFhilnrRSt] file|dir -a ：列出全部的文件 -d ：仅列出目录本身 -l\n：以长数据串行列出，包含文件的属性与权限等等数据</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="2-cp"><a href="#2-cp" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. cp</h3>\n<p>复制操作。</p>\n<p>如果源文件有两个以上，则目的文件一定要是目录才行。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19031552436718522000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`cp [-adfilprsu] source destination -a ：相当于 -dr --preserve=all 的意思，至于 dr 请参考下列说明 -d\n：若来源文件为链接文件，则复制链接文件属性而非文件本身 -i ：若目标文件已经存在时，在覆盖前会先询问 -p\n：连同文件的属性一起复制过去 -r ：递归持续复制 -u ：destination 比 source 旧才更新 destination，或 destination\n不存在的情况下才复制 --preserve=all ：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了`, `19031552436718522000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">cp [-adfilprsu] source destination -a ：相当于 -dr --preserve=all 的意思，至于 dr 请参考下列说明 -d\n：若来源文件为链接文件，则复制链接文件属性而非文件本身 -i ：若目标文件已经存在时，在覆盖前会先询问 -p\n：连同文件的属性一起复制过去 -r ：递归持续复制 -u ：destination 比 source 旧才更新 destination，或 destination\n不存在的情况下才复制 --preserve=all ：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="3-rm"><a href="#3-rm" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. rm</h3>\n<p>移除操作。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26818172017343623000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# rm [-fir] 文件或目录 -r ：递归删除`, `26818172017343623000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># rm [-fir] 文件或目录 -r ：递归删除</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="4-mv"><a href="#4-mv" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. mv</h3>\n<p>移动操作。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76655479384433440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# mv [-fiu] source destination # mv [options] source1 source2 source3 .... directory -f ： force\n强制的意思，如果目标文件已经存在，不会询问而直接覆盖`, `76655479384433440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># mv [-fiu] source destination # mv [options] source1 source2 source3 .... directory -f ： force\n强制的意思，如果目标文件已经存在，不会询问而直接覆盖</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="获取文件内容"><a href="#%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>获取文件内容</h2>\n<h3 id="1-cat"><a href="#1-cat" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. cat</h3>\n<p>取得文件内容。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63861741444932930000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# cat [-AbEnTv] filename -n ：打印出行号，连同空白行也会有行号，-b 不会`, `63861741444932930000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># cat [-AbEnTv] filename -n ：打印出行号，连同空白行也会有行号，-b 不会</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="2-tac"><a href="#2-tac" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. tac</h3>\n<p>是 cat 的反向操作，从最后一行开始打印。</p>\n<h3 id="3-more"><a href="#3-more" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. more</h3>\n<p>可以一页一页查看文件内容，和文本编辑器类似。</p>\n<h3 id="4-less"><a href="#4-less" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. less</h3>\n<p>和 more 类似。</p>\n<h3 id="5-head"><a href="#5-head" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. head</h3>\n<p>可以取得文件前几行。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52980061494289660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# head [-n number] filename -n ：后面接数字，代表显示几行的意思`, `52980061494289660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># head [-n number] filename -n ：后面接数字，代表显示几行的意思</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="6-tail"><a href="#6-tail" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. tail</h3>\n<p>是 head 的反向操作，只是取得是后几行。</p>\n<h3 id="7-od"><a href="#7-od" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. od</h3>\n<p>可以以字符或者十六进制的形式显示二进制文件。</p>\n<h3 id="8-touch"><a href="#8-touch" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8. touch</h3>\n<p>修改文件时间或者建立新文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49531694008996530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# touch [-acdmt] filename -a ： 更新 atime -c ： 更新 ctime，若该文件不存在则不建立新文件 -m ： 更新 mtime -d ：\n后面可以接更新日期而不使用当前日期，也可以使用 --date=&quot;日期或时间&quot; -t ：\n后面可以接更新时间而不使用当前时间，格式为[YYYYMMDDhhmm]`, `49531694008996530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># touch [-acdmt] filename -a ： 更新 atime -c ： 更新 ctime，若该文件不存在则不建立新文件 -m ： 更新 mtime -d ：\n后面可以接更新日期而不使用当前日期，也可以使用 --date="日期或时间" -t ：\n后面可以接更新时间而不使用当前时间，格式为[YYYYMMDDhhmm]</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="指令与文件搜索"><a href="#%E6%8C%87%E4%BB%A4%E4%B8%8E%E6%96%87%E4%BB%B6%E6%90%9C%E7%B4%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>指令与文件搜索</h2>\n<h3 id="1-which"><a href="#1-which" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. which</h3>\n<p>指令搜索。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56438939626882270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# which [-a] command -a ：将所有指令列出，而不是只列第一个`, `56438939626882270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># which [-a] command -a ：将所有指令列出，而不是只列第一个</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="2-whereis"><a href="#2-whereis" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. whereis</h3>\n<p>whereis 搜索文件的速度比较快，因为它只搜索几个特定的目录。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51345329714299400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# whereis [-bmsu] dirname/filename`, `51345329714299400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># whereis [-bmsu] dirname/filename</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="3-locate"><a href="#3-locate" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. locate</h3>\n<p>locate 可以用关键字或者正则表达式进行搜索。</p>\n<p>locate 使用 /var/lib/mlocate/ 这个数据库来进行搜索，它存储在内存中，并且每天更新一次，所以无法用 locate 搜索新建的文件。可以使用 updatedb 来立即更新数据库。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="32050891280890114000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# locate [-ir] keyword -r：接正则表达式`, `32050891280890114000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># locate [-ir] keyword -r：接正则表达式</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="4-find"><a href="#4-find" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. find</h3>\n<p>find 可以使用文件的属性和权限进行搜索。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="86219407358448040000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# find filename [option]`, `86219407358448040000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># find filename [option]</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>（一）与时间有关的选项</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63491156326144570000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`-mtime n ：列出在 n 天前的那一天修改过内容的文件 -mtime +n ：列出在 n 天之前 (不含 n 天本身) 修改过内容的文件 -mtime -n\n：列出在 n 天之内 (含 n 天本身) 修改过内容的文件 -newer file ： 列出比 file 更新的文件`, `63491156326144570000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">-mtime n ：列出在 n 天前的那一天修改过内容的文件 -mtime +n ：列出在 n 天之前 (不含 n 天本身) 修改过内容的文件 -mtime -n\n：列出在 n 天之内 (含 n 天本身) 修改过内容的文件 -newer file ： 列出比 file 更新的文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>+4、4 和 -4 的指示的时间范围如下：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/658fc5e7-79c0-4247-9445-d69bf194c539-776cccdb1419de61f7a2160471d56e59-6a7be.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 524px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 30.91603053435114%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAu0lEQVQY04WQ2wqDQBBD/f9f891HQUVQvN/vppyBtVBKO5BdZjabhPHu+9YvjOOoruv0r+BS3i/SeZ7K81xhGGqaJu37rm3bHtBjBs+JehzDMDyET0AmZVVVaprGUNe1AbEgCDTP81sQId/3lWWZiqJQHMdK01RJkli6KIq0rquBlBhw8w+h67rs7RE8jsM+LstiQNSlILlLxhzTvu+NzzuzsizVtu1b8NvecMUIAjc9c7crN6MwwMgJvgASG9JdUS4HbgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="658fc5e7 79c0 4247 9445 d69bf194c539"\n        title=""\n        src="/static/658fc5e7-79c0-4247-9445-d69bf194c539-776cccdb1419de61f7a2160471d56e59-6a7be.png"\n        srcset="/static/658fc5e7-79c0-4247-9445-d69bf194c539-776cccdb1419de61f7a2160471d56e59-88dc0.png 200w,\n/static/658fc5e7-79c0-4247-9445-d69bf194c539-776cccdb1419de61f7a2160471d56e59-98f22.png 400w,\n/static/658fc5e7-79c0-4247-9445-d69bf194c539-776cccdb1419de61f7a2160471d56e59-6a7be.png 524w"\n        sizes="(max-width: 524px) 100vw, 524px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>（二）与文件拥有者和所属群组有关的选项</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90183044907633500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`-uid n -gid n -user name -group name -nouser ：搜索拥有者不存在 /etc/passwd 的文件 -nogroup：搜索所属群组不存在于\n/etc/group 的文件`, `90183044907633500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">-uid n -gid n -user name -group name -nouser ：搜索拥有者不存在 /etc/passwd 的文件 -nogroup：搜索所属群组不存在于\n/etc/group 的文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>（三）与文件权限和名称有关的选项</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9045561588342443000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`-name filename -size [+-]SIZE：搜寻比 SIZE 还要大 (+) 或小 (-) 的文件。这个 SIZE 的规格有：c: 代表 byte，k: 代表\n1024bytes。所以，要找比 50KB 还要大的文件，就是 -size +50k -type TYPE -perm mode ：搜索权限等于 mode 的文件 -perm -mode\n：搜索权限包含 mode 的文件 -perm /mode ：搜索权限包含任一 mode 的文件`, `9045561588342443000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">-name filename -size [+-]SIZE：搜寻比 SIZE 还要大 (+) 或小 (-) 的文件。这个 SIZE 的规格有：c: 代表 byte，k: 代表\n1024bytes。所以，要找比 50KB 还要大的文件，就是 -size +50k -type TYPE -perm mode ：搜索权限等于 mode 的文件 -perm -mode\n：搜索权限包含 mode 的文件 -perm /mode ：搜索权限包含任一 mode 的文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="磁盘与文件系统"><a href="#%E7%A3%81%E7%9B%98%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>磁盘与文件系统</h1>\n<h2 id="文件系统的组成"><a href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%84%E6%88%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件系统的组成</h2>\n<p>对分区进行格式化是为了在分区上建立文件系统。一个分区通常只能格式化为一个文件系统，但是磁盘阵列等技术可以将一个分区格式化为多个文件系统，因此只有文件系统能被挂载，而分区不能被挂载。</p>\n<p>文件系统有以下三个结构：</p>\n<ol>\n<li>superblock：记录文件系统的整体信息，包括 inode 和 block 的总量、使用量、剩余量，以及文件系统的格式与相关信息等；</li>\n<li>inode：一个文件占用一个 inode，记录文件的属性，同时记录此文件的内容所在的 block 号码；</li>\n<li>block：记录文件的内容，文件太大时，会占用多个 block。</li>\n</ol>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/ff0c019c-6461-467d-a266-0455341fd4f4-d4583d780e382c3e205f94497db66f31-41127.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 21.8052738336714%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA8ElEQVQY0zWQTU/CQBBA+f9/wosxwoF40guJiQGCxqSoUaJQoS30Y4EKy7ZV291nu+Bc3mQ+XibTMsbQRFn+IlWOLyTzaEecKozRtsdpRkSfJKuZzbU26Lre7P+zGWtZWaUp8oxwI+n2p5zdjBm+hbamspxXL2XsCkTwwH45QPljDp5jKU9UwRNlkR2FE3fJZpuS1Fe1bye10OHuOcDoijhZc9X/4Lz3Quxes3e7BIMLolGHcNRmNbwkuu9Ylrk8CrP8m0wpxJei5/hW8PgeUxQ5VX19IPb1G1J2mzlqO0MmNZMFh4ZiQbb2kPEcXf7wB7VrKFt1a8V+AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="ff0c019c 6461 467d a266 0455341fd4f4"\n        title=""\n        src="/static/ff0c019c-6461-467d-a266-0455341fd4f4-d4583d780e382c3e205f94497db66f31-fee1c.png"\n        srcset="/static/ff0c019c-6461-467d-a266-0455341fd4f4-d4583d780e382c3e205f94497db66f31-a67b7.png 200w,\n/static/ff0c019c-6461-467d-a266-0455341fd4f4-d4583d780e382c3e205f94497db66f31-0b187.png 400w,\n/static/ff0c019c-6461-467d-a266-0455341fd4f4-d4583d780e382c3e205f94497db66f31-fee1c.png 800w,\n/static/ff0c019c-6461-467d-a266-0455341fd4f4-d4583d780e382c3e205f94497db66f31-41127.png 986w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>当要读取一个文件的内容时，先在 inode 中去查找文件内容所在的所有 block，然后把所有 block 的内容读出来。</p>\n<p>磁盘碎片是指一个文件内容所在的 block 过于分散。</p>\n<h2 id="inode"><a href="#inode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>inode</h2>\n<p>Ext2 文件系统支持的 block 大小有 1k、2k 和 4k 三种，不同的 block 大小限制了单一文件的大小。而每个 inode 大小是固定为 128 bytes。</p>\n<p>inode 中记录了文件内容所在的 block，但是每个 block 非常小，一个大文件随便都需要几十万的 block。而一个 inode 大小有限，无法直接引用这么多 block。因此引入了间接、双间接、三间接引用。间接引用是指，让 inode 记录的引用 block 块当成 inode 用来记录引用信息。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/1bfa3118-f3cd-4480-a950-cf6d646015db-a56a0cf857603c36529a7801c740d4d4-77bdb.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 62.336114421930866%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACD0lEQVQoz3VSaW/aQBDl//+IqlKEVCUNamnyoR+aXokUEo6ScJtiAsY2vr3e9REfr2sbQxLUkUaz3tE+v/dmalmWIY8giOATGaErgBoThI6AyDdQRgZfXyLQRV5FMOIgSVJEYVh2OUaFU6sOHg1Atj14qyakx5OiMnNc9GzLhHR7js1NHdt2A7a2gayo6Pf7/wHkyfwIVB/AWX7BZvgBZHUJVxsWPwoDH0QW4G0mIJspqGsj5W+SJDkG3GkCZWEBaAgfIXbfF9VWHhBGCbfDhzFrwZxcw5q38BzQvRUVUBU1URTR63XhEsa9G8CcN7B+rMP82wDRhwUgcR0onQuod+fQ/lwiovaeGV6wy2uNMQaLe1RJthefSkAOHPDBVBEHBAnP2CdIk/gIMCsvXktm5gju0wWU8Rn3ssknPS96aZq+kvVW5su7/VAoZ+jpDzCFMyy776DPTvn3ENXTJI5hKCtE3M88mCmDiG24i3tQRThIrpApC+AZM7jSD6xHn8G2NwjJinsYg1IKz1Qh3F/BUZ/43TPkWQ9K6xTr6zps4XYHmB4Ac1n5GqRpuQq6rmEyHiMfmqrIkPlQ7MFXyO0mZ7pGFkfcEpXnFqFnHRi+9aQ6u65bLK4kSWCcoT76BWP4DcboOxxTg7aawZ7+hjX+CSKNjiXvlzM73q2cfdnndTcgaz3FttOEcteAs+jsJf8DGyKOgNoJyV4AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="1bfa3118 f3cd 4480 a950 cf6d646015db"\n        title=""\n        src="/static/1bfa3118-f3cd-4480-a950-cf6d646015db-a56a0cf857603c36529a7801c740d4d4-fee1c.png"\n        srcset="/static/1bfa3118-f3cd-4480-a950-cf6d646015db-a56a0cf857603c36529a7801c740d4d4-a67b7.png 200w,\n/static/1bfa3118-f3cd-4480-a950-cf6d646015db-a56a0cf857603c36529a7801c740d4d4-0b187.png 400w,\n/static/1bfa3118-f3cd-4480-a950-cf6d646015db-a56a0cf857603c36529a7801c740d4d4-fee1c.png 800w,\n/static/1bfa3118-f3cd-4480-a950-cf6d646015db-a56a0cf857603c36529a7801c740d4d4-77bdb.png 839w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>inode 具体包含以下信息：</p>\n<ul>\n<li>该文件的存取模式 (read/write/excute)；</li>\n<li>该文件的拥有者与群组 (owner/group)；</li>\n<li>该文件的容量；</li>\n<li>该文件建立或状态改变的时间 (ctime)；</li>\n<li>最近一次的读取时间 (atime)；</li>\n<li>最近修改的时间 (mtime)；</li>\n<li>定义文件特性的旗标 (flag)，如 SetUID…；</li>\n<li>该文件真正内容的指向 (pointer)。</li>\n</ul>\n<h2 id="目录的-inode-与-block"><a href="#%E7%9B%AE%E5%BD%95%E7%9A%84-inode-%E4%B8%8E-block" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>目录的 inode 与 block</h2>\n<p>建立一个目录时，会分配一个 inode 与至少一个 block。block 记录的内容是目录下所有文件的 inode 编号以及文件名。可以看出文件的 inode 本身不记录文件名，文件名记录在目录中，因此新增文件、删除文件、更改文件名这些操作与目录的 w 权限有关。</p>\n<h2 id="实体链接与符号链接"><a href="#%E5%AE%9E%E4%BD%93%E9%93%BE%E6%8E%A5%E4%B8%8E%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实体链接与符号链接</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15680038768197857000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ln [-sf] source_filename dist_filename -s ：默认是 hard link，加 -s 为 symbolic link -f\n：如果目标文件存在时，先删除目标文件`, `15680038768197857000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># ln [-sf] source_filename dist_filename -s ：默认是 hard link，加 -s 为 symbolic link -f\n：如果目标文件存在时，先删除目标文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="1-实体链接"><a href="#1-%E5%AE%9E%E4%BD%93%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 实体链接</h3>\n<p>它和普通文件类似，实体链接文件的 inode 都指向源文件所在的 block 上，也就是说读取文件直接从源文件的 block 上读取。</p>\n<p>删除任意一个条目，文件还是存在，只要引用数量不为 0。</p>\n<p>有以下限制：不能跨越 File System、不能对目录进行链接。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52205185369063140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ln /etc/crontab . # ll -i /etc/crontab crontab 34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 crontab 34474855\n-rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab`, `52205185369063140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># ln /etc/crontab . # ll -i /etc/crontab crontab 34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 crontab 34474855\n-rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="2-符号链接"><a href="#2-%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 符号链接</h3>\n<p>符号链接文件保存着源文件所在的绝对路径，在读取时会定位到源文件上，可以理解为 Windows 的快捷方式。</p>\n<p>当源文件被删除了，链接文件就打不开了。</p>\n<p>可以为目录建立链接。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30588818261504057000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ll -i /etc/crontab /root/crontab2 34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab 53745909 lrwxrwxrwx. 1\nroot root 12 Jun 23 22:31 /root/crontab2 -> /etc/crontab`, `30588818261504057000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"># ll -i /etc/crontab /root/crontab2 34474855 -rw-r--r--. 2 root root 451 Jun 10 2014 /etc/crontab 53745909 lrwxrwxrwx. 1\nroot root 12 Jun 23 22:31 /root/crontab2 -> /etc/crontab</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h1 id="压缩与打包"><a href="#%E5%8E%8B%E7%BC%A9%E4%B8%8E%E6%89%93%E5%8C%85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>压缩与打包</h1>\n<h2 id="压缩"><a href="#%E5%8E%8B%E7%BC%A9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>压缩</h2>\n<p>Linux 底下有很多压缩文件的扩展名，常见的如下：</p>\n<table>\n<thead>\n<tr>\n<th>扩展名</th>\n<th>压缩程序</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>*\n.Z</td>\n<td>compress</td>\n</tr>\n<tr>\n<td>*\n.zip</td>\n<td>zip</td>\n</tr>\n<tr>\n<td>*\n.gz</td>\n<td>gzip</td>\n</tr>\n<tr>\n<td>*\n.bz2</td>\n<td>bzip2</td>\n</tr>\n<tr>\n<td>*\n.xz</td>\n<td>xz</td>\n</tr>\n<tr>\n<td>*\n.tar</td>\n<td>tar 程序打包的数据，没有经过压缩</td>\n</tr>\n<tr>\n<td>*\n.tar.gz</td>\n<td>tar 程序打包的文件，经过 gzip 的压缩</td>\n</tr>\n<tr>\n<td>*\n.tar.bz2</td>\n<td>tar 程序打包的文件，经过 bzip2 的压缩</td>\n</tr>\n<tr>\n<td>*\n.tar.xz</td>\n<td>tar 程序打包的文件，经过 xz 的压缩</td>\n</tr>\n</tbody>\n</table>\n<h3 id="1-gzip"><a href="#1-gzip" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. gzip</h3>\n<p>gzip 是 Linux 使用最广的压缩指令，可以解开 compress、zip 与 gzip 所压缩的文件。</p>\n<p>经过 gzip 压缩过，源文件就不存在了。</p>\n<p>有 9 个不同的压缩等级可以使用。</p>\n<p>可以使用 zcat、zmore、zless 来读取压缩文件的内容。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23587100814347297000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ gzip [-cdtv#] filename -c ：将压缩的数据输出到屏幕上 -d ：解压缩 -t ：检验压缩文件是否出错 -v ：显示压缩比等信息 -# ：\n# 为数字的意思，代表压缩等级，数字越大压缩比越高，默认为 6`, `23587100814347297000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ gzip [-cdtv#] filename -c ：将压缩的数据输出到屏幕上 -d ：解压缩 -t ：检验压缩文件是否出错 -v ：显示压缩比等信息 -# ：\n# 为数字的意思，代表压缩等级，数字越大压缩比越高，默认为 6</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h3 id="2-bzip2"><a href="#2-bzip2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. bzip2</h3>\n<p>提供比 gzip 更高的压缩比。</p>\n<p>查看命令：bzcat、bzmore、bzless、bzgrep。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91875409941885390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ bzip2 [-cdkzv#] filename -k ：保留源文件`, `91875409941885390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ bzip2 [-cdkzv#] filename -k ：保留源文件</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="3-xz"><a href="#3-xz" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. xz</h3>\n<p>提供比 bzip2 更佳的压缩比。</p>\n<p>可以看到，gzip、bzip2、xz 的压缩比不断优化。不过要注意的是，压缩比越高，压缩的时间也越长。</p>\n<p>查看命令：xzcat、xzmore、xzless、xzgrep。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76877878236919870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ xz [-dtlkc#] filename`, `76877878236919870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ xz [-dtlkc#] filename</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="打包"><a href="#%E6%89%93%E5%8C%85" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>打包</h2>\n<p>压缩指令只能对一个文件进行压缩，而打包能够将多个文件打包成一个大文件。tar 不仅可以用于打包，也可以使用 gip、bzip2、xz 将打包文件进行压缩。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="46377332264860980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ tar [-z|-j|-J] [cv] [-f 新建的 tar 文件] filename... ==打包压缩 \\$ tar [-z|-j|-J] [tv] [-f 已有的 tar 文件] ==查看 \\$\ntar [-z|-j|-J] [xv] [-f 已有的 tar 文件] [-C 目录] ==解压缩 -z ：使用 zip； -j ：使用 bzip2； -J ：使用 xz； -c\n：新建打包文件； -t ：查看打包文件里面有哪些文件； -x ：解打包或解压缩的功能； -v\n：在压缩/解压缩的过程中，显示正在处理的文件名； -f : filename：要处理的文件； -C 目录 ： 在特定目录解压缩。`, `46377332264860980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ tar [-z|-j|-J] [cv] [-f 新建的 tar 文件] filename... ==打包压缩 $ tar [-z|-j|-J] [tv] [-f 已有的 tar 文件] ==查看 $\ntar [-z|-j|-J] [xv] [-f 已有的 tar 文件] [-C 目录] ==解压缩 -z ：使用 zip； -j ：使用 bzip2； -J ：使用 xz； -c\n：新建打包文件； -t ：查看打包文件里面有哪些文件； -x ：解打包或解压缩的功能； -v\n：在压缩/解压缩的过程中，显示正在处理的文件名； -f : filename：要处理的文件； -C 目录 ： 在特定目录解压缩。</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<table>\n<thead>\n<tr>\n<th>使用方式</th>\n<th>命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>打包压缩</td>\n<td>tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称</td>\n</tr>\n<tr>\n<td>查 看</td>\n<td>tar -jtv -f filename.tar.bz2</td>\n</tr>\n<tr>\n<td>解压缩</td>\n<td>tar -jxv -f filename.tar.bz2 -C 要解压缩的目录</td>\n</tr>\n</tbody>\n</table>\n<h1 id="bash"><a href="#bash" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bash</h1>\n<p>可以通过 Shell 请求内核提供服务，Bash 正是 Shell 的一种。</p>\n<h2 id="特性"><a href="#%E7%89%B9%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>特性</h2>\n<ol>\n<li>\n<p>命令历史：记录使用过的命令。本次登录所执行的命令都会暂时存放到内存中，~/.bash_history 文件中记录的是前一次登录所执行过的命令。</p>\n</li>\n<li>\n<p>命令与文件补全：快捷键：tab。</p>\n</li>\n<li>\n<p>命名别名：例如 lm 是 ls -al 的别名。</p>\n</li>\n<li>\n<p>shell scripts。</p>\n</li>\n<li>\n<p>通配符：例如 ls -l /usr/bin/X* 列出 /usr/bin 下面所有以 X 开头的文件。</p>\n</li>\n</ol>\n<h2 id="变量操作"><a href="#%E5%8F%98%E9%87%8F%E6%93%8D%E4%BD%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>变量操作</h2>\n<ul>\n<li>对一个变量赋值直接使用 = ；</li>\n<li>对变量取用需要在变量前加上 $ ，也可以用 ${} 的形式；</li>\n<li>输出变量使用 echo 命令。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29088811124831280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ var=abc\n\\$ echo \\$var\n\\$ echo \\${var}`, `29088811124831280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token assign-left variable">var</span><span class="token operator">=</span>abc\n$ <span class="token builtin class-name">echo</span> <span class="token variable">$var</span>\n$ <span class="token builtin class-name">echo</span> <span class="token variable">${var}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>变量内容如果有空格，必须需要使用双引号或者单引号。</p>\n<ul>\n<li>双引号内的特殊字符可以保留原本特性，例如 var=“lang is $LANG”，则 var 的值为 lang is zh_TW.UTF-8；</li>\n<li>单引号内的特殊字符就是特殊字符本身，例如 var=‘lang is $LANG’，则 var 的值为 lang is $LANG。</li>\n</ul>\n<p>可以使用 `指令` 或者 $(指令) 的方式将指令的执行结果赋值给变量。例如 version=$(uname -r)，则 version 的值为 3.10.0-229.el7.x86_64。</p>\n<p>可以使用 export 命令将自定义变量转成环境变量，环境变量可以在子程序中使用，所谓子程序就是由当前 Bash 而产生的子 Bash。</p>\n<p>Bash 的变量可以声明为数组和整数数字。注意数字类型没有浮点数。如果不进行声明，默认是字符串类型。变量的声明使用 declare 命令：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42653106210438455000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ declare [-aixr] variable -a ： 定义为数组类型 -i ： 定义为整数类型 -x ： 定义为环境变量 -r ： 定义为 readonly 类型`, `42653106210438455000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ declare [-aixr] variable -a ： 定义为数组类型 -i ： 定义为整数类型 -x ： 定义为环境变量 -r ： 定义为 readonly 类型</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>使用 [ ] 来对数组进行索引操作：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64683109758745690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ array[1]=a\n\\$ array[2]=b\n\\$ echo \\${array[1]}`, `64683109758745690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ array<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>a\n$ array<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span>b\n$ <span class="token builtin class-name">echo</span> <span class="token variable">${array<span class="token punctuation">[</span>1<span class="token punctuation">]</span>}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="指令搜索顺序"><a href="#%E6%8C%87%E4%BB%A4%E6%90%9C%E7%B4%A2%E9%A1%BA%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>指令搜索顺序</h2>\n<ol>\n<li>以绝对或相对路径来执行指令，例如 /bin/ls 或者 ./ls ；</li>\n<li>由别名找到该指令来执行；</li>\n<li>由 Bash 内建的指令来执行；</li>\n<li>按 $PATH 变量指定的搜索路径的顺序找到第一个指令来执行。</li>\n</ol>\n<h2 id="数据流重定向"><a href="#%E6%95%B0%E6%8D%AE%E6%B5%81%E9%87%8D%E5%AE%9A%E5%90%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数据流重定向</h2>\n<p>重定向指的是使用文件代替标准输入、标准输出和标准错误输出。</p>\n<table>\n<thead>\n<tr>\n<th align="center">1</th>\n<th align="center">代码</th>\n<th align="center">运算符</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">标准输入 (stdin)</td>\n<td align="center">0</td>\n<td align="center">&#x3C; 或 &#x3C;&#x3C;</td>\n</tr>\n<tr>\n<td align="center">标准输出 (stdout)</td>\n<td align="center">1</td>\n<td align="center">> 或 >></td>\n</tr>\n<tr>\n<td align="center">标准错误输出 (stderr)</td>\n<td align="center">2</td>\n<td align="center">2> 或 2>></td>\n</tr>\n</tbody>\n</table>\n<p>其中，有一个箭头的表示以覆盖的方式重定向，而有两个箭头的表示以追加的方式重定向。</p>\n<p>可以将不需要的标准输出以及标准错误输出重定向到 /dev/null，相当于扔进垃圾箱。</p>\n<p>如果需要将标准输出以及标准错误输出同时重定向到一个文件，需要将某个输出转换为另一个输出，例如 2>&#x26;1 表示将标准错误输出转换为标准输出。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81809236469743140"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ find /home -name .bashrc > list 2>&1`, `81809236469743140`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">find</span> /home -name .bashrc <span class="token operator">></span> list <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h1 id="管线指令"><a href="#%E7%AE%A1%E7%BA%BF%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>管线指令</h1>\n<p>管线是将一个命令的标准输出作为另一个命令的标准输入，在数据需要经过多个步骤的处理之后才能得到我们想要的内容时就可以使用管线。在命令之间使用 | 分隔各个管线命令。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50447366806725970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ ls -al /etc | less`, `50447366806725970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">ls</span> -al /etc <span class="token operator">|</span> <span class="token function">less</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="提取指令"><a href="#%E6%8F%90%E5%8F%96%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>提取指令</h2>\n<p>cut 对数据进行切分，取出想要的部分。提取过程一行一行地进行。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70808038884029200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ cut -d ：分隔符 -f ：经过 -d 分隔后，使用 -f n 取出第 n 个区间 -c ：以字符为单位取出区间`, `70808038884029200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ cut -d ：分隔符 -f ：经过 -d 分隔后，使用 -f n 取出第 n 个区间 -c ：以字符为单位取出区间</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>范例 1：last 将显示的登入者的信息，要求仅显示用户名。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14636572335143682000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last root pts/1 192.168.201.101 Sat Feb 7 12:35 still logged in root pts/1 192.168.201.101 Fri Feb 6 12:13 - 18:46\n(06:33) root pts/1 192.168.201.254 Thu Feb 5 22:37 - 23:53 (01:16) \\$ last | cut -d \' \' -f 1`, `14636572335143682000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ last root pts/1 192.168.201.101 Sat Feb 7 12:35 still logged in root pts/1 192.168.201.101 Fri Feb 6 12:13 - 18:46\n(06:33) root pts/1 192.168.201.254 Thu Feb 5 22:37 - 23:53 (01:16) $ last | cut -d \' \' -f 1</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>范例 2：将 export 输出的讯息，取得第 12 字符以后的所有字符串。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4044713598581628400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ export declare -x HISTCONTROL=&quot;ignoredups&quot; declare -x HISTSIZE=&quot;1000&quot; declare -x HOME=&quot;/home/dmtsai&quot; declare -x\nHOSTNAME=&quot;study.centos.vbird&quot; .....(其他省略)..... \\$ export | cut -c 12`, `4044713598581628400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ export declare -x HISTCONTROL="ignoredups" declare -x HISTSIZE="1000" declare -x HOME="/home/dmtsai" declare -x\nHOSTNAME="study.centos.vbird" .....(其他省略)..... $ export | cut -c 12</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="排序指令"><a href="#%E6%8E%92%E5%BA%8F%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>排序指令</h2>\n<p><strong>sort</strong> 进行排序。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69503333278580740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ sort [-fbMnrtuk] [file or stdin] -f ：忽略大小写 -b ：忽略最前面的空格 -M ：以月份的名字来排序，例如 JAN，DEC -n\n：使用数字 -r ：反向排序 -u ：相当于 unique，重复的内容只出现一次 -t ：分隔符，默认为 tab -k ：指定排序的区间`, `69503333278580740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ sort [-fbMnrtuk] [file or stdin] -f ：忽略大小写 -b ：忽略最前面的空格 -M ：以月份的名字来排序，例如 JAN，DEC -n\n：使用数字 -r ：反向排序 -u ：相当于 unique，重复的内容只出现一次 -t ：分隔符，默认为 tab -k ：指定排序的区间</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>范例：/etc/passwd 内容是以 : 来分隔的，以第三栏来排序。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33441524975093563000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ cat /etc/passwd | sort -t \':\' -k 3 root❌0:0:root:/root:/bin/bash dmtsai❌1000:1000:dmtsai:/home/dmtsai:/bin/bash\nalex❌1001:1002::/home/alex:/bin/bash arod❌1002:1003::/home/arod:/bin/bash`, `33441524975093563000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ cat /etc/passwd | sort -t \':\' -k 3 root❌0:0:root:/root:/bin/bash dmtsai❌1000:1000:dmtsai:/home/dmtsai:/bin/bash\nalex❌1001:1002::/home/alex:/bin/bash arod❌1002:1003::/home/arod:/bin/bash</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p><strong>uniq</strong> 可以将重复的数据只取一个。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16853565282511452000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ uniq [-ic] -i ：忽略大小写 -c ：进行计数`, `16853565282511452000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ uniq [-ic] -i ：忽略大小写 -c ：进行计数</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>范例：取得每个人的登录总次数</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50696041783627250000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last | cut -d \' \' -f 1 | sort | uniq -c 1 6 (unknown 47 dmtsai 4 reboot 7 root 1 wtmp`, `50696041783627250000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ last | cut -d \' \' -f 1 | sort | uniq -c 1 6 (unknown 47 dmtsai 4 reboot 7 root 1 wtmp</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="双向输出重定向"><a href="#%E5%8F%8C%E5%90%91%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>双向输出重定向</h2>\n<p>输出重定向会将输出内容重定向到文件中，而 <strong>tee</strong> 不仅能够完成这个功能，还能保留屏幕上的输出。也就是说，使用 tee 指令，一个输出会同时传送到文件和屏幕上。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17098500138753892000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ tee [-a] file`, `17098500138753892000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ tee [-a] file</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="字符转换指令"><a href="#%E5%AD%97%E7%AC%A6%E8%BD%AC%E6%8D%A2%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>字符转换指令</h2>\n<p><strong>tr</strong> 用来删除一行中的字符，或者对字符进行替换。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99765292846895870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ tr [-ds] SET1 ... -d ： 删除行中 SET1 这个字符串`, `99765292846895870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ tr [-ds] SET1 ... -d ： 删除行中 SET1 这个字符串</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>范例，将 last 输出的信息所有小写转换为大写。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="83916664190150670000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last | tr \'[a-z]\' \'[A-Z]\'`, `83916664190150670000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ last | tr \'[a-z]\' \'[A-Z]\'</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><strong>col</strong> 将 tab 字符转为空格字符。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56012877510423700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ col [-xb] -x ： 将 tab 键转换成对等的空格键`, `56012877510423700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ col [-xb] -x ： 将 tab 键转换成对等的空格键</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><strong>expand</strong> 将 tab 转换一定数量的空格，默认是 8 个。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60021068264567770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ expand [-t] file -t ：tab 转为空格的数量`, `60021068264567770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ expand [-t] file -t ：tab 转为空格的数量</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p><strong>join</strong> 将有相同数据的那一行合并在一起。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35279872305382500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ join [-ti12] file1 file2 -t ：分隔符，默认为空格 -i ：忽略大小写的差异 -1 ：第一个文件所用的比较字段 -2\n：第二个文件所用的比较字段`, `35279872305382500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ join [-ti12] file1 file2 -t ：分隔符，默认为空格 -i ：忽略大小写的差异 -1 ：第一个文件所用的比较字段 -2\n：第二个文件所用的比较字段</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p><strong>paste</strong> 直接将两行粘贴在一起。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33305026287828808000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ paste [-d] file1 file2 -d ：分隔符，默认为 tab`, `33305026287828808000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ paste [-d] file1 file2 -d ：分隔符，默认为 tab</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="分区指令"><a href="#%E5%88%86%E5%8C%BA%E6%8C%87%E4%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分区指令</h2>\n<p><strong>split</strong> 将一个文件划分成多个文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93124128231762260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ split [-bl] file PREFIX -b ：以大小来进行分区，可加单位，例如 b, k, m 等 -l ：以行数来进行分区。 - PREFIX\n：分区文件的前导名称`, `93124128231762260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ split [-bl] file PREFIX -b ：以大小来进行分区，可加单位，例如 b, k, m 等 -l ：以行数来进行分区。 - PREFIX\n：分区文件的前导名称</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h1 id="正则表达式"><a href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>正则表达式</h1>\n<h2 id="grep"><a href="#grep" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>grep</h2>\n<p>使用正则表示式把匹配的行提取出来。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79840254003952400000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ grep [-acinv] [--color=auto] 搜寻字符串 filename -a ： 将 binary 文件以 text 文件的方式进行搜寻 -c ： 计算找到个数 -i\n： 忽略大小写 -n ： 输出行号 -v ： 反向选择，亦即显示出没有 搜寻字符串 内容的那一行 --color=auto\n：找到的关键字加颜色显示`, `79840254003952400000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ grep [-acinv] [--color=auto] 搜寻字符串 filename -a ： 将 binary 文件以 text 文件的方式进行搜寻 -c ： 计算找到个数 -i\n： 忽略大小写 -n ： 输出行号 -v ： 反向选择，亦即显示出没有 搜寻字符串 内容的那一行 --color=auto\n：找到的关键字加颜色显示</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>范例：把含有 the 字符串的行提取出来（注意默认会有 —color=auto 选项，因此以下内容在 Linux 中有颜色显示 the 字符串）</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="36070352817936003000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ grep -n \'the\' regular_express.txt 8:I can\'t finish the test. 12:the symbol \'*\' is represented as start. 15:You are the\nbest is mean you are the no. 1. 16:The world Happy is the same with &quot;glad&quot;. 18:google is the best tools for search\nkeyword`, `36070352817936003000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ grep -n \'the\' regular_express.txt 8:I can\'t finish the test. 12:the symbol \'*\' is represented as start. 15:You are the\nbest is mean you are the no. 1. 16:The world Happy is the same with "glad". 18:google is the best tools for search\nkeyword</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>因为 { 和 } 在 shell 是有特殊意义的，因此必须要使用转义字符进行转义。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60712445227330036000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ grep -n \'go\\{2,5\\}g\' regular_express.txt`, `60712445227330036000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ grep -n \'go\\{2,5\\}g\' regular_express.txt</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="printf"><a href="#printf" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>printf</h2>\n<p>用于格式化输出。</p>\n<p>它不属于管道命令，在给 printf 传数据时需要使用 $( ) 形式。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68508980433622810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ printf \'%10s %5i %5i %5i %8.2f \\n\' \\$(cat printf.txt) DmTsai 80 60 92 77.33 VBird 75 55 80 70.00 Ken 60 90 70 73.33`, `68508980433622810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ printf \'%10s %5i %5i %5i %8.2f \\n\' $(cat printf.txt) DmTsai 80 60 92 77.33 VBird 75 55 80 70.00 Ken 60 90 70 73.33</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="awk"><a href="#awk" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>awk</h2>\n<p>可以根据字段的某些条件进行匹配，例如匹配字段小于某个值的那一行数据。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10016736824371585000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ awk \' 条件类型 1 {动作 1} 条件类型 2 {动作 2} ...\' filename`, `10016736824371585000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ awk \' 条件类型 1 {动作 1} 条件类型 2 {动作 2} ...\' filename</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>awk 每次处理一行，处理的最小单位是字段，每个字段的命名方式为：$n，n 为字段号，从 1 开始，$0 表示一整行。</p>\n<p>范例 1：取出登录用户的用户名和 ip</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18829968854726808000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last -n 5 dmtsai pts/0 192.168.1.100 Tue Jul 14 17:32 still logged in dmtsai pts/0 192.168.1.100 Thu Jul 9 23:36 -\n02:58 (03:22) dmtsai pts/0 192.168.1.100 Thu Jul 9 17:23 - 23:36 (06:12) dmtsai pts/0 192.168.1.100 Thu Jul 9 08:02 -\n08:17 (00:14) dmtsai tty1 Fri May 29 11:55 - 12:11 (00:15) \\$ last -n 5 | awk \'{print \\$1 &quot;\\t&quot; \\$3}`, `18829968854726808000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ last -n 5 dmtsai pts/0 192.168.1.100 Tue Jul 14 17:32 still logged in dmtsai pts/0 192.168.1.100 Thu Jul 9 23:36 -\n02:58 (03:22) dmtsai pts/0 192.168.1.100 Thu Jul 9 17:23 - 23:36 (06:12) dmtsai pts/0 192.168.1.100 Thu Jul 9 08:02 -\n08:17 (00:14) dmtsai tty1 Fri May 29 11:55 - 12:11 (00:15) $ last -n 5 | awk \'{print $1 "\\t" $3}</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>awk 变量：</p>\n<table>\n<thead>\n<tr>\n<th>变量名称</th>\n<th>代表意义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>NF</td>\n<td>每一行拥有的字段总数</td>\n</tr>\n<tr>\n<td>NR</td>\n<td>目前所处理的是第几行数据</td>\n</tr>\n<tr>\n<td>FS</td>\n<td>目前的分隔字符，默认是空格键</td>\n</tr>\n</tbody>\n</table>\n<p>范例 2：输出正在处理的行号，并显示每一行有多少字段</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23982369474025832000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ last -n 5 | awk \'{print \\$1 &quot;\\t lines: &quot; NR &quot;\\t columns: &quot; NF}\' dmtsai lines: 1 columns: 10 dmtsai lines: 2 columns: 10\ndmtsai lines: 3 columns: 10 dmtsai lines: 4 columns: 10 dmtsai lines: 5 columns: 9`, `23982369474025832000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">$ last -n 5 | awk \'{print $1 "\\t lines: " NR "\\t columns: " NF}\' dmtsai lines: 1 columns: 10 dmtsai lines: 2 columns: 10\ndmtsai lines: 3 columns: 10 dmtsai lines: 4 columns: 10 dmtsai lines: 5 columns: 9</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>可以使用条件，其中等于使用 ==。</p>\n<p>范例 3：/etc/passwd 文件第三个字段为 UID，对 UID 小于 10 的数据进行处理。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76513311491455700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`\\$ cat /etc/passwd | awk \'BEGIN {FS=&quot;:&quot;} \\$3 < 10 {print \\$1 &quot;\\t &quot; \\$3}\'\nroot 0\nbin 1\ndaemon 2`, `76513311491455700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">$ cat /etc/passwd | awk &#39;BEGIN {FS=&quot;:&quot;} $3 &lt; 10 {print $1 &quot;\\t &quot; $3}&#39;\nroot 0\nbin 1\ndaemon 2</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="进程管理"><a href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程管理</h1>\n<h2 id="查看进程"><a href="#%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查看进程</h2>\n<h3 id="1-ps"><a href="#1-ps" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. ps</h3>\n<p>查看某个时间点的进程信息</p>\n<p>示例一：查看自己的进程</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="718837790168236300"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ps -l`, `718837790168236300`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ps -l</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>示例二：查看系统所有进程</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68545802611774700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ps aux`, `68545802611774700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ps aux</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>示例三：查看特定的进程</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99764816993984760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# ps aux | grep threadx`, `99764816993984760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># ps aux | grep threadx</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="2-top"><a href="#2-top" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. top</h3>\n<p>实时显示进程信息</p>\n<p>示例：两秒钟刷新一次</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66418011440043740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# top -d 2`, `66418011440043740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># top -d 2</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="3-pstree"><a href="#3-pstree" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. pstree</h3>\n<p>查看进程树</p>\n<p>示例：查看所有进程树</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37165778035456820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# pstree -A`, `37165778035456820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># pstree -A</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="4-netstat"><a href="#4-netstat" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. netstat</h3>\n<p>查看占用端口的进程</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79691459588348870000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# netstat -anp | grep port`, `79691459588348870000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token comment"># netstat -anp | grep port</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="进程状态"><a href="#%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程状态</h2>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/76a49594323247f21c9b3a69945445ee-582d9a140d4c8746e70dc0d885948cb0-08e5b.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 430px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 30.69767441860465%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAArUlEQVQY032Q2w6CMBBEq+KtKIhawdCowXs08cH//zen9ZDwopOc0JDd2dk15qu+GIie2Iq7OImXuIqHqMx/JfRHs7Vw4ixKMeN7FEuRi7kY0dgaVPRtREFdVCheYDSGMOTSKbIYFJg04il2YiVSaqJSDA2mYU1PwpD6Lfa8HcMCNQMy+qeG2zl+3Ijvedfc0nGasrsWyqjPO6HMUExY1dLoSXFgJdse/YdCuuQDVuQHi8oiMA0AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="76a49594323247f21c9b3a69945445ee"\n        title=""\n        src="/static/76a49594323247f21c9b3a69945445ee-582d9a140d4c8746e70dc0d885948cb0-08e5b.png"\n        srcset="/static/76a49594323247f21c9b3a69945445ee-582d9a140d4c8746e70dc0d885948cb0-7277b.png 200w,\n/static/76a49594323247f21c9b3a69945445ee-582d9a140d4c8746e70dc0d885948cb0-7ec4d.png 400w,\n/static/76a49594323247f21c9b3a69945445ee-582d9a140d4c8746e70dc0d885948cb0-08e5b.png 430w"\n        sizes="(max-width: 430px) 100vw, 430px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<table>\n<thead>\n<tr>\n<th align="center">状态</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">R</td>\n<td>running or runnable (on run queue)</td>\n</tr>\n<tr>\n<td align="center">D</td>\n<td>uninterruptible sleep (usually IO)</td>\n</tr>\n<tr>\n<td align="center">S</td>\n<td>interruptible sleep (waiting for an event to complete)</td>\n</tr>\n<tr>\n<td align="center">Z</td>\n<td>defunct/zombie, terminated but not reaped by its parent</td>\n</tr>\n<tr>\n<td align="center">T</td>\n<td>stopped, either by a job control signal or because it is being traced</td>\n</tr>\n</tbody>\n</table>\n<h2 id="sigchild"><a href="#sigchild" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SIGCHILD</h2>\n<p>当一个子进程改变了它的状态时：停止运行，继续运行或者退出，有两件事会发生在父进程中：</p>\n<ul>\n<li>得到 SIGCHLD 信号；</li>\n<li>阻塞的 waitpid(2)（或者 wait）调用会返回。</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/flow-8c4141ad2fba885cf4739035630836e4-aa752.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 339px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 110.02949852507373%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC20lEQVQ4y61UW2sTQRT+dpuku0l2s0n20k1q0lu0N5W2auuDFFSkfVEQFbwgKlKx9VaLrdLSWm8tFUVFCipoXxR89cf0zX/gs6/1zMyJbGoULR74dpjZOd+cc74zA/TGgZXAx5uwQAjxPChgOk+LZPMuamyB50eSwJLv4x35rIZFLHqOXF8J6PM2TGE8O46T9hxO29O47Ezjsb9dEXhaDeF9T42vmmzczI3hhD1LPnO45x7XN77ypid+EnfyZ3HRuYZzmeuYyF7FI69V/pvM1RJOZNX4LEhjinzO0/5Lzg3MuqO1qbxsSuJ9IYO1oo0PBYsijhKlCDZBrYUxtfqpaOJj0aIyZShlQ67tM+lz1I5SU3GQZoIMjzsI/YSAycX/RkI7us02bJzRa6PL0vwb+QwYOjoSOtUHKCtNsGmriI8g6tuGuFbBLT+PxVAdEIOI0oxuFik14M8mnCzpmNKT+N5nopQYoHmJDhdKu5sJq2OCEOcDYpG5Ro7az9jXWlIYSnkyQkOLoUZCFVs3oSLKS9jD807CToKIpJewn1Hhg35jij3gtKoRFVmUDq6dyTCkOOVEGmOuijaM16XUWUWLFRcHtMgaKUEamVCXER5IV7De0yi9D1l14xTp9RF6OD3R4Lt4vYp+WYIYyrKGS8Vk/ZRVDVs5ulQkUtGLDqM6L9H+EiZ9B6slUwoX14zNjabh7y0gimZ8brPQZVRkOXTkaPS2SqjsS4dNhJ0y8rQeYyHZXJmzB9VNQowueSOUwttY5VZupWb2+lVaejGAGVfDKVs0bQ+Smk1jyOoKogKrLOZleYdVO9lUNxMJTTW8UT9BnW+G6L1Bwl5WdjdDqD/Eo3jLDrNYEXvR1ICZ/CDu5odpHMbt3EF6sXPyXzGms/7Ra1mFwambtYSvQ5vevykcs54SlnHBeYBlv1v+W2/Hv9usG8e8N0zP+ChFNiJf3wVPyX8li/9nD/0tuf0AAK9WwPCNOu0AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="flow"\n        title=""\n        src="/static/flow-8c4141ad2fba885cf4739035630836e4-aa752.png"\n        srcset="/static/flow-8c4141ad2fba885cf4739035630836e4-bb04d.png 200w,\n/static/flow-8c4141ad2fba885cf4739035630836e4-aa752.png 339w"\n        sizes="(max-width: 339px) 100vw, 339px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="孤儿进程和僵死进程"><a href="#%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%83%B5%E6%AD%BB%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>孤儿进程和僵死进程</h2>\n<h3 id="1-孤儿进程"><a href="#1-%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 孤儿进程</h3>\n<p>一个父进程退出，而它的一个或多个子进程还在运行，那么这些子进程将成为孤儿进程。孤儿进程将被 init 进程（进程号为 1）所收养，并由 init 进程对它们完成状态收集工作。</p>\n<p>由于孤儿进程会被 init 进程收养，所以孤儿进程不会对系统造成危害。</p>\n<h3 id="2-僵死进程"><a href="#2-%E5%83%B5%E6%AD%BB%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 僵死进程</h3>\n<p>一个子进程的进程描述符在子进程退出时不会释放，只有当父进程通过 wait 或 waitpid 获取了子进程信息后才会释放。如果子进程退出，而父进程并没有调用 wait 或 waitpid，那么子进程的进程描述符仍然保存在系统中，这种进程称之为僵死进程。</p>\n<p>僵死进程通过 ps 命令显示出来的状态为 Z。</p>\n<p>系统所能使用的进程号是有限的，如果大量的产生僵死进程，将因为没有可用的进程号而导致系统不能产生新的进程。</p>\n<p>要消灭系统中大量的僵死进程，只需要将其父进程杀死，此时所有的僵死进程就会变成孤儿进程，从而被 init 所收养，这样 init 就会释放所有的僵死进程所占有的资源，从而结束僵死进程。</p>\n<h1 id="io-复用"><a href="#io-%E5%A4%8D%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I/O 复用</h1>\n<h2 id="概念理解"><a href="#%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概念理解</h2>\n<p>I/O Multiplexing 又被称为 Event Driven I/O，它可以让单个进程具有处理多个 I/O 事件的能力。</p>\n<p>当某个 I/O 事件条件满足时，进程会收到通知。</p>\n<p>如果一个 Web 服务器没有 I/O 复用，那么每一个 Socket 连接都需要创建一个线程去处理。如果同时连接几万个连接，那么就需要创建相同数量的线程。并且相比于多进程和多线程技术，I/O 复用不需要进程线程创建和切换的开销，系统开销更小。</p>\n<h2 id="io-模型"><a href="#io-%E6%A8%A1%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I/O 模型</h2>\n<ul>\n<li>阻塞（Blocking）</li>\n<li>非阻塞（Non-blocking）</li>\n<li>同步（Synchronous）</li>\n<li>异步（Asynchronous）</li>\n</ul>\n<p>阻塞非阻塞是等待 I/O 完成的方式，阻塞要求用户程序停止执行，直到 I/O 完成，而非阻塞在 I/O 完成之前还可以继续执行。</p>\n<p>同步异步是获知 I/O 完成的方式，同步需要时刻关心 I/O 是否已经完成，异步无需主动关心，在 I/O 完成时它会收到通知。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-b880fcff964dc6036240131759e53e62-59771.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 548px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 64.05109489051095%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABoUlEQVQ4y5VT2U7CUBTk/3/DF6PRV3gw4hLgARNJpAlUKEtLW5bShS6UpWPnSpEWonGSyU1uz50zZ2kJByRJcjwzZtjv9xfvi3c8SzjBaTCxXC6haRqKMAwDiqLg0tvSaSZiu93CNE1Mp1P0+310Oh3MZjNMJhPoui7uZVmGJEkijlyv1z8Oi648zxMCRfCh67pnVTiOg8VikS+ZmVer1VHQtm3sdjsRSPEoimBZFsIwxGazwXw+F6SzIAjEt5wgxRiYCZIcBMsjKUQncRyLOLplIgqSOcFLJY/Hapo5hJ9m9/0AYepQGQzEMHzfF66yk9XlSj4XdDFqVeH16rDlGpzPOrx+A0qzAkPX4KYJ2UuSySnI8nMlM1t8mBQFl90X7Ec1mK0y2tVrRL1nWNIDosAXMewp3RFsx1kP2SeKCvG0n4O3Cj5r95CebtEsX6H7eoeP6k0q+D04uuOOZmb+6KGLafsRUOvYpi534zoStQHjvQzXttJhJWIDODTy4toUF9vQhjDGCgxVEaepDqANe8fFzhaa5KByi/3br/cfZG+/ACWh6GoXq3Y9AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="54cb3f21 485b 4159 8bf5 dcde1c4d4c36"\n        title=""\n        src="/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-b880fcff964dc6036240131759e53e62-59771.png"\n        srcset="/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-b880fcff964dc6036240131759e53e62-46aad.png 200w,\n/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-b880fcff964dc6036240131759e53e62-692ce.png 400w,\n/static/54cb3f21-485b-4159-8bf5-dcde1c4d4c36-b880fcff964dc6036240131759e53e62-59771.png 548w"\n        sizes="(max-width: 548px) 100vw, 548px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="1-同步-阻塞"><a href="#1-%E5%90%8C%E6%AD%A5-%E9%98%BB%E5%A1%9E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 同步-阻塞</h3>\n<p>这是最常见的一种模型，用户程序在使用 read() 时会执行系统调用从而陷入内核，之后就被阻塞直到系统调用完成。</p>\n<p>应该注意到，在阻塞的过程中，其他程序还可以执行，因此阻塞不意味着整个操作系统都被阻塞。因为其他程序还可以执行，因此不消耗 CPU 时间，这种模型的执行效率会比较高。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/5e9b10f3-9504-4483-9667-d4770adebf9f-23da4e070f4437208d90834b766b106b-f4ef4.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 705px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 57.304964539007095%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRklEQVQoz41SXW+DMAzk//+87aEPHa3W8hmSJgUGhCTc4jA6ylA1SxHBsu/O50TTNIEOhR4GZGmKLMtgjMFeUD71NWVZYhzHkFv66RttGz5TBiHbcO+6DlprDJ6o7/vwT73O2T9EC2hEF2qwnlk0Ld5PV/DqBqUkkiQJSvI8D6ro1HWNJC3AhQoETdMEsodCAqMGZw0O8QmJuMGZEa9C3JQHlLjflSdWz4A0EinB5HApSlw5AZqXgOaHcLFj7WVQSEuYnAOvG2RSYbIzIGMMx+MR5/MZcRyH8SgKJpAXDFJKcM7Rtu0v4Oyhnj30gG8fF0/AfK73gFWwo6oqFIX3jQuvRgew9qvbX8pmV7ikJSp+fzmy1oPftAsbXz+7h8J1kvwhG5aC7aGgJVhrn5QtEa0bKchgMnuv+N+A29e+vu8BzuPu13wDr0pb3ChyjKsAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="5e9b10f3 9504 4483 9667 d4770adebf9f"\n        title=""\n        src="/static/5e9b10f3-9504-4483-9667-d4770adebf9f-23da4e070f4437208d90834b766b106b-f4ef4.png"\n        srcset="/static/5e9b10f3-9504-4483-9667-d4770adebf9f-23da4e070f4437208d90834b766b106b-3d360.png 200w,\n/static/5e9b10f3-9504-4483-9667-d4770adebf9f-23da4e070f4437208d90834b766b106b-f7ff6.png 400w,\n/static/5e9b10f3-9504-4483-9667-d4770adebf9f-23da4e070f4437208d90834b766b106b-f4ef4.png 705w"\n        sizes="(max-width: 705px) 100vw, 705px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="2-同步-非阻塞"><a href="#2-%E5%90%8C%E6%AD%A5-%E9%9D%9E%E9%98%BB%E5%A1%9E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 同步-非阻塞</h3>\n<p>非阻塞意味着用户程序在执行系统调用后还可以继续执行，内核并不是马上执行完 I/O，而是以一个错误码来告知用户程序 I/O 还未完成。为了获得 I/O 完成事件，用户程序必须调用多次系统调用去询问内核，甚至是忙等，也就是在一个循环里面一直询问并等待。</p>\n<p>由于 CPU 要处理更多的用户程序的询问，因此这种模型的效率是比较低的。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/1582217a-ed46-4cac-811e-90d13a65163b-5298939abd38a0d93075e77ac6a4850e-b2e17.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 623px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 72.23113964686999%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB80lEQVQ4y41Ti5KiQAz0/z9Oz9MFFdEF5CmKIC8f2JeOB6VlbdVOVYphkukk3ZkRZNV1jTzPcTqdcD6fcb1eeYzH4/Fht9sNZVkiyzK9w7s87+NH3FQSYK/XME0DYRih6zr8tOgjkGku4Lqugr8mVMDu0eFUVFjZnl5ipYfDAUVR6GVW0xt99/sdbdsMlb0uBazbFn6cwt56Ethiv99LBSYsy8JaKzfVDMNAEAS4SMzC+kZxrtA0zUAX9wqYlxW8RAA3njrIISsMwxBJkiCKIt3zW0osAZdrB34QIY4jLSCOY+VTATMRYhPEsNbPlpmRxoxVVSlP/FIwnrPVi7b8yfVo4EHILoqnasw4nU4xm80wn39hMpmojcdjOI6DtqkxN2yc8vITMDse4fgBNuEehrlR4gmapqm22LdDY/sUin7X81E3rf4zlj52MiJAeswQHjI4bojfrq3EertACjhqEQQlLc85lEy+iBKEiQbTSRH68aGxUp5xz/XtBqJy+fPYxFKhL8JQiKPQ4HkeVqsVbNvGYrHQPUeGgI20TJXzohyGfRjsXpT7/yfFoWXAbrcTQeZYLpcK2gN23TPeWHlI0mx4cm8V7qU10wnw56+lJBOY49G/lH5cSAF9FCWOk7c3/wZ4EUck2WbG9teikJr+zb8C/gMmiTCemXarwQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="1582217a ed46 4cac 811e 90d13a65163b"\n        title=""\n        src="/static/1582217a-ed46-4cac-811e-90d13a65163b-5298939abd38a0d93075e77ac6a4850e-b2e17.png"\n        srcset="/static/1582217a-ed46-4cac-811e-90d13a65163b-5298939abd38a0d93075e77ac6a4850e-5d0dd.png 200w,\n/static/1582217a-ed46-4cac-811e-90d13a65163b-5298939abd38a0d93075e77ac6a4850e-d9bec.png 400w,\n/static/1582217a-ed46-4cac-811e-90d13a65163b-5298939abd38a0d93075e77ac6a4850e-b2e17.png 623w"\n        sizes="(max-width: 623px) 100vw, 623px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="3-异步-阻塞"><a href="#3-%E5%BC%82%E6%AD%A5-%E9%98%BB%E5%A1%9E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 异步-阻塞</h3>\n<p>这是 I/O 复用使用的一种模式，通过使用 select，它可以监听多个 I/O 事件，当这些事件至少有一个发生时，用户程序会收到通知。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-6e6e8.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 704px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 64.0625%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd0guD//xAAYEAACAwAAAAAAAAAAAAAAAAAQEQAhQf/aAAgBAQABBQLbCiH/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAACAwEBAAAAAAAAAAAAAAABEQAQQSEx/9oACAEBAAE/IfeIkyixgXa//9oADAMBAAIAAwAAABBwz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEBAQEBAQAAAAAAAAAAAAERACFRQWH/2gAIAQEAAT8QqVfL3KKq5+4X00TsJJNE9tPNDw3/2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="dbc5c9f1 c13c 4d06 86ba 7cc949eb4c8f"\n        title=""\n        src="/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-6e6e8.jpg"\n        srcset="/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-6b746.jpg 200w,\n/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-006bd.jpg 400w,\n/static/dbc5c9f1-c13c-4d06-86ba-7cc949eb4c8f-28cd27b8ae9d552ef20a2dd1d9b84a24-6e6e8.jpg 704w"\n        sizes="(max-width: 704px) 100vw, 704px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="4-异步-非阻塞"><a href="#4-%E5%BC%82%E6%AD%A5-%E9%9D%9E%E9%98%BB%E5%A1%9E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 异步-非阻塞</h3>\n<p>该模式下，I/O 操作会立即返回，之后可以处理其它操作，并且在 I/O 完成时会收到一个通知，此时会中断正在处理的操作，然后继续之前的操作。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-fb06a.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 647px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 69.55177743431221%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAQAF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3URqP//EABUQAQEAAAAAAAAAAAAAAAAAACBB/9oACAEBAAEFAqf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAQIDH/2gAIAQEABj8CSj//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAQQWH/2gAIAQEAAT8h4hdIs5Eaf//aAAwDAQACAAMAAAAQIA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhQYEx/9oACAEBAAE/EC12FqBG07zIXWley5hMclX1PhArqz//2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="b4b29aa9 dd2c 467b b75f ca6541cb25b5"\n        title=""\n        src="/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-fb06a.jpg"\n        srcset="/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-ac83e.jpg 200w,\n/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-5292a.jpg 400w,\n/static/b4b29aa9-dd2c-467b-b75f-ca6541cb25b5-87e2157c7c4a48a2f94e2a7f625c330a-fb06a.jpg 647w"\n        sizes="(max-width: 647px) 100vw, 647px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="select-poll-epoll"><a href="#select-poll-epoll" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>select poll epoll</h2>\n<p>这三个都是 I/O 多路复用的具体实现，select 出现的最早，之后是 poll，再是 epoll。</p>\n<h3 id="1-select"><a href="#1-select" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. select</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4893974870411810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`int select (int n, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout);`, `4893974870411810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">int</span> select <span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>readfds<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>writefds<span class="token punctuation">,</span> fd_set <span class="token operator">*</span>exceptfds<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">timeval</span> <span class="token operator">*</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<ul>\n<li>fd_set 表示描述符集合；</li>\n<li>readset、writeset 和 exceptset 这三个参数指定让操作系统内核测试读、写和异常条件的描述符；</li>\n<li>timeout 参数告知内核等待所指定描述符中的任何一个就绪可花多少时间；</li>\n<li>成功调用返回结果大于 0；出错返回结果为 -1；超时返回结果为 0。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="52646658038944285000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`fd_set fd_in, fd_out;\nstruct timeval tv;\n\n// Reset the sets\nFD_ZERO( &fd_in );\nFD_ZERO( &fd_out );\n\n// Monitor sock1 for input events\nFD_SET( sock1, &fd_in );\n\n// Monitor sock2 for output events\nFD_SET( sock2, &fd_out );\n\n// Find out which socket has the largest numeric value as select requires it\nint largest_sock = sock1 > sock2 ? sock1 : sock2;\n\n// Wait up to 10 seconds\ntv.tv_sec = 10;\ntv.tv_usec = 0;\n\n// Call the select\nint ret = select( largest_sock + 1, &fd_in, &fd_out, NULL, &tv );\n\n// Check if select actually succeed\nif ( ret == -1 )\n    // report error and abort\nelse if ( ret == 0 )\n    // timeout; no event detected\nelse\n{\n    if ( FD_ISSET( sock1, &fd_in ) )\n        // input event on sock1\n\n    if ( FD_ISSET( sock2, &fd_out ) )\n        // output event on sock2\n}`, `52646658038944285000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c">fd_set fd_in<span class="token punctuation">,</span> fd_out<span class="token punctuation">;</span>\n<span class="token keyword">struct</span> <span class="token class-name">timeval</span> tv<span class="token punctuation">;</span>\n\n<span class="token comment">// Reset the sets</span>\n<span class="token function">FD_ZERO</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>fd_in <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">FD_ZERO</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>fd_out <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor sock1 for input events</span>\n<span class="token function">FD_SET</span><span class="token punctuation">(</span> sock1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_in <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor sock2 for output events</span>\n<span class="token function">FD_SET</span><span class="token punctuation">(</span> sock2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_out <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Find out which socket has the largest numeric value as select requires it</span>\n<span class="token keyword">int</span> largest_sock <span class="token operator">=</span> sock1 <span class="token operator">></span> sock2 <span class="token operator">?</span> sock1 <span class="token operator">:</span> sock2<span class="token punctuation">;</span>\n\n<span class="token comment">// Wait up to 10 seconds</span>\ntv<span class="token punctuation">.</span>tv_sec <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\ntv<span class="token punctuation">.</span>tv_usec <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Call the select</span>\n<span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token function">select</span><span class="token punctuation">(</span> largest_sock <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_in<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_out<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>tv <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Check if select actually succeed</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>\n    <span class="token comment">// report error and abort</span>\n<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n    <span class="token comment">// timeout; no event detected</span>\n<span class="token keyword">else</span>\n<span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">FD_ISSET</span><span class="token punctuation">(</span> sock1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_in <span class="token punctuation">)</span> <span class="token punctuation">)</span>\n        <span class="token comment">// input event on sock1</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">FD_ISSET</span><span class="token punctuation">(</span> sock2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>fd_out <span class="token punctuation">)</span> <span class="token punctuation">)</span>\n        <span class="token comment">// output event on sock2</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>每次调用 select() 都需要将 fd<em>set *readfds, fd</em>set *writefds, fd<em>set *exceptfds 链表内容全部从用户进程内存中复制到操作系统内核中，内核需要将所有 fd</em>set 遍历一遍，这个过程非常低效。</p>\n<p>返回结果中内核并没有声明哪些 fd<em>set 已经准备好了，所以如果返回值大于 0 时，程序需要遍历所有的 fd</em>set 判断哪个 I/O 已经准备好。</p>\n<p>在 Linux 中 select 最多支持 1024 个 fd<em>set 同时轮询，其中 1024 由 Linux 内核的 FD</em>SETSIZE 决定。如果需要打破该限制可以修改 FD_SETSIZE，然后重新编译内核。</p>\n<h3 id="2-poll"><a href="#2-poll" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. poll</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8415154577458673000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`int poll (struct pollfd *fds, unsigned int nfds, int timeout);`, `8415154577458673000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">int</span> poll <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">pollfd</span> <span class="token operator">*</span>fds<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> nfds<span class="token punctuation">,</span> <span class="token keyword">int</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18887062517099710000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`struct pollfd {\n    int fd;       //文件描述符\n    short events; //监视的请求事件\n    short revents; //已发生的事件\n};`, `18887062517099710000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">struct</span> <span class="token class-name">pollfd</span> <span class="token punctuation">{</span>\n    <span class="token keyword">int</span> fd<span class="token punctuation">;</span>       <span class="token comment">//文件描述符</span>\n    <span class="token keyword">short</span> events<span class="token punctuation">;</span> <span class="token comment">//监视的请求事件</span>\n    <span class="token keyword">short</span> revents<span class="token punctuation">;</span> <span class="token comment">//已发生的事件</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73993563438186840000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// The structure for two events\nstruct pollfd fds[2];\n\n// Monitor sock1 for input\nfds[0].fd = sock1;\nfds[0].events = POLLIN;\n\n// Monitor sock2 for output\nfds[1].fd = sock2;\nfds[1].events = POLLOUT;\n\n// Wait 10 seconds\nint ret = poll( &fds, 2, 10000 );\n// Check if poll actually succeed\nif ( ret == -1 )\n    // report error and abort\nelse if ( ret == 0 )\n    // timeout; no event detected\nelse\n{\n    // If we detect the event, zero it out so we can reuse the structure\n    if ( pfd[0].revents & POLLIN )\n        pfd[0].revents = 0;\n        // input event on sock1\n\n    if ( pfd[1].revents & POLLOUT )\n        pfd[1].revents = 0;\n        // output event on sock2\n}`, `73993563438186840000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token comment">// The structure for two events</span>\n<span class="token keyword">struct</span> <span class="token class-name">pollfd</span> fds<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor sock1 for input</span>\nfds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fd <span class="token operator">=</span> sock1<span class="token punctuation">;</span>\nfds<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>events <span class="token operator">=</span> POLLIN<span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor sock2 for output</span>\nfds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fd <span class="token operator">=</span> sock2<span class="token punctuation">;</span>\nfds<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>events <span class="token operator">=</span> POLLOUT<span class="token punctuation">;</span>\n\n<span class="token comment">// Wait 10 seconds</span>\n<span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token function">poll</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>fds<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// Check if poll actually succeed</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>\n    <span class="token comment">// report error and abort</span>\n<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n    <span class="token comment">// timeout; no event detected</span>\n<span class="token keyword">else</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">// If we detect the event, zero it out so we can reuse the structure</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span> pfd<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">&amp;</span> POLLIN <span class="token punctuation">)</span>\n        pfd<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token comment">// input event on sock1</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span> pfd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">&amp;</span> POLLOUT <span class="token punctuation">)</span>\n        pfd<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>revents <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n        <span class="token comment">// output event on sock2</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>它和 select() 功能基本相同。同样需要每次将 struct pollfd *fds 复制到内核，返回后同样需要进行轮询每一个 pollfd 是否已经 I/O 准备好。poll() 取消了 1024 个描述符数量上限，但是数量太大以后不能保证执行效率，因为复制大量内存到内核十分低效，所需时间与描述符数量成正比。poll() 在 pollfd 的重复利用上比 select() 的 fd_set 会更好。</p>\n<p>如果在多线程下，如果一个线程对某个描述符调用了 poll() 系统调用，但是另一个线程关闭了该描述符，会导致 poll() 调用结果不确定，该问题同样出现在 select() 中。</p>\n<h3 id="3-epoll"><a href="#3-epoll" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. epoll</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49109733989420020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`int epoll_create(int size);\nint epoll_ctl(int epfd, int op, int fd, struct epoll_event *event)；\nint epoll_wait(int epfd, struct epoll_event * events, int maxevents, int timeout);`, `49109733989420020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">int</span> <span class="token function">epoll_create</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">int</span> <span class="token function">epoll_ctl</span><span class="token punctuation">(</span><span class="token keyword">int</span> epfd<span class="token punctuation">,</span> <span class="token keyword">int</span> op<span class="token punctuation">,</span> <span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> <span class="token operator">*</span>event<span class="token punctuation">)</span>；\n<span class="token keyword">int</span> <span class="token function">epoll_wait</span><span class="token punctuation">(</span><span class="token keyword">int</span> epfd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> <span class="token operator">*</span> events<span class="token punctuation">,</span> <span class="token keyword">int</span> maxevents<span class="token punctuation">,</span> <span class="token keyword">int</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30525129481204806000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// Create the epoll descriptor. Only one is needed per app, and is used to monitor all sockets.\n// The function argument is ignored (it was not before, but now it is), so put your favorite number here\nint pollingfd = epoll_create( 0xCAFE );\n\nif ( pollingfd < 0 )\n // report error\n\n// Initialize the epoll structure in case more members are added in future\nstruct epoll_event ev = { 0 };\n\n// Associate the connection class instance with the event. You can associate anything\n// you want, epoll does not use this information. We store a connection class pointer, pConnection1\nev.data.ptr = pConnection1;\n\n// Monitor for input, and do not automatically rearm the descriptor after the event\nev.events = EPOLLIN | EPOLLONESHOT;\n// Add the descriptor into the monitoring list. We can do it even if another thread is\n// waiting in epoll_wait - the descriptor will be properly added\nif ( epoll_ctl( epollfd, EPOLL_CTL_ADD, pConnection1->getSocket(), &ev ) != 0 )\n    // report error\n\n// Wait for up to 20 events (assuming we have added maybe 200 sockets before that it may happen)\nstruct epoll_event pevents[ 20 ];\n\n// Wait for 10 seconds, and retrieve less than 20 epoll_event and store them into epoll_event array\nint ready = epoll_wait( pollingfd, pevents, 20, 10000 );\n// Check if epoll actually succeed\nif ( ret == -1 )\n    // report error and abort\nelse if ( ret == 0 )\n    // timeout; no event detected\nelse\n{\n    // Check if any events detected\n    for ( int i = 0; i < ret; i++ )\n    {\n        if ( pevents[i].events & EPOLLIN )\n        {\n            // Get back our connection pointer\n            Connection * c = (Connection*) pevents[i].data.ptr;\n            c->handleReadEvent();\n         }\n    }\n}`, `30525129481204806000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token comment">// Create the epoll descriptor. Only one is needed per app, and is used to monitor all sockets.</span>\n<span class="token comment">// The function argument is ignored (it was not before, but now it is), so put your favorite number here</span>\n<span class="token keyword">int</span> pollingfd <span class="token operator">=</span> <span class="token function">epoll_create</span><span class="token punctuation">(</span> <span class="token number">0xCAFE</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span> pollingfd <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n <span class="token comment">// report error</span>\n\n<span class="token comment">// Initialize the epoll structure in case more members are added in future</span>\n<span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> ev <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Associate the connection class instance with the event. You can associate anything</span>\n<span class="token comment">// you want, epoll does not use this information. We store a connection class pointer, pConnection1</span>\nev<span class="token punctuation">.</span>data<span class="token punctuation">.</span>ptr <span class="token operator">=</span> pConnection1<span class="token punctuation">;</span>\n\n<span class="token comment">// Monitor for input, and do not automatically rearm the descriptor after the event</span>\nev<span class="token punctuation">.</span>events <span class="token operator">=</span> EPOLLIN <span class="token operator">|</span> EPOLLONESHOT<span class="token punctuation">;</span>\n<span class="token comment">// Add the descriptor into the monitoring list. We can do it even if another thread is</span>\n<span class="token comment">// waiting in epoll_wait - the descriptor will be properly added</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">epoll_ctl</span><span class="token punctuation">(</span> epollfd<span class="token punctuation">,</span> EPOLL_CTL_ADD<span class="token punctuation">,</span> pConnection1<span class="token operator">-></span><span class="token function">getSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ev <span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n    <span class="token comment">// report error</span>\n\n<span class="token comment">// Wait for up to 20 events (assuming we have added maybe 200 sockets before that it may happen)</span>\n<span class="token keyword">struct</span> <span class="token class-name">epoll_event</span> pevents<span class="token punctuation">[</span> <span class="token number">20</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Wait for 10 seconds, and retrieve less than 20 epoll_event and store them into epoll_event array</span>\n<span class="token keyword">int</span> ready <span class="token operator">=</span> <span class="token function">epoll_wait</span><span class="token punctuation">(</span> pollingfd<span class="token punctuation">,</span> pevents<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// Check if epoll actually succeed</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span>\n    <span class="token comment">// report error and abort</span>\n<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> ret <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span>\n    <span class="token comment">// timeout; no event detected</span>\n<span class="token keyword">else</span>\n<span class="token punctuation">{</span>\n    <span class="token comment">// Check if any events detected</span>\n    <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ret<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span>\n    <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span> pevents<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>events <span class="token operator">&amp;</span> EPOLLIN <span class="token punctuation">)</span>\n        <span class="token punctuation">{</span>\n            <span class="token comment">// Get back our connection pointer</span>\n            Connection <span class="token operator">*</span> c <span class="token operator">=</span> <span class="token punctuation">(</span>Connection<span class="token operator">*</span><span class="token punctuation">)</span> pevents<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>ptr<span class="token punctuation">;</span>\n            c<span class="token operator">-></span><span class="token function">handleReadEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n         <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>epoll 仅仅适用于 Linux OS。</p>\n<p>它是 select 和 poll 的增强版，更加灵活而且没有描述符限制。它将用户关心的描述符放到内核的一个事件表中，从而只需要在用户空间和内核空间拷贝一次。</p>\n<p>select 和 poll 方式中，进程只有在调用一定的方法后，内核才对所有监视的描述符进行扫描。而 epoll 事先通过 epoll<em>ctl() 来注册描述符，一旦基于某个描述符就绪时，内核会采用类似 callback 的回调机制，迅速激活这个描述符，当进程调用 epoll</em>wait() 时便得到通知。</p>\n<p>新版本的 epoll_create(int size) 参数 size 不起任何作用，在旧版本的 epoll 中如果描述符的数量大于 size，不保证服务质量。</p>\n<p>epoll_ctl() 执行一次系统调用，用于向内核注册新的描述符或者是改变某个文件描述符的状态。已注册的描述符在内核中会被维护在一棵红黑树上，通过回调函数内核会将 I/O 准备好的描述符加入到一个链表中管理。</p>\n<p>epoll_wait() 取出在内核中通过链表维护的 I/O 准备好的描述符，将他们从内核复制到程序中，不需要像 select/poll 对注册的所有描述符遍历一遍。</p>\n<p>epoll 对多线程编程更有友好，同时多个线程对同一个描述符调用了 epoll<em>wait 也不会产生像 select/poll 的不确定情况。或者一个线程调用了 epoll</em>wait 另一个线程关闭了同一个描述符也不会产生不确定情况。</p>\n<h2 id="select-和-poll-比较"><a href="#select-%E5%92%8C-poll-%E6%AF%94%E8%BE%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>select 和 poll 比较</h2>\n<h3 id="1-功能"><a href="#1-%E5%8A%9F%E8%83%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. 功能</h3>\n<p>它们提供了几乎相同的功能，但是在一些细节上有所不同：</p>\n<ul>\n<li>select 会修改 fd_set 参数，而 poll 不会；</li>\n<li>select 默认只能监听 1024 个描述符，如果要监听更多的话，需要修改 FD_SETSIZE 之后重新编译；</li>\n<li>poll 提供了更多的事件类型。</li>\n</ul>\n<h3 id="2-速度"><a href="#2-%E9%80%9F%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. 速度</h3>\n<p>poll 和 select 在速度上都很慢。</p>\n<ul>\n<li>它们都采取轮询的方式来找到 I/O 完成的描述符，如果描述符很多，那么速度就会很慢；</li>\n<li>select 只使用每个描述符的 3 位，而 poll 通常需要使用 64 位，因此 poll 需要复制更多的内核空间。</li>\n</ul>\n<h3 id="3-可移植性"><a href="#3-%E5%8F%AF%E7%A7%BB%E6%A4%8D%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. 可移植性</h3>\n<p>几乎所有的系统都支持 select，但是只有比较新的系统支持 poll。</p>\n<h2 id="eopll-工作模式"><a href="#eopll-%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>eopll 工作模式</h2>\n<p>epoll_event 有两种触发模式：LT（level trigger）和 ET（edge trigger）。</p>\n<h3 id="1-lt-模式"><a href="#1-lt-%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. LT 模式</h3>\n<p>当 epoll<em>wait() 检测到描述符事件发生并将此事件通知应用程序，应用程序可以不立即处理该事件。下次调用 epoll</em>wait() 时，会再次响应应用程序并通知此事件。是默认的一种模式，并且同时支持 Blocking 和 No-Blocking。</p>\n<h3 id="2-et-模式"><a href="#2-et-%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. ET 模式</h3>\n<p>当 epoll<em>wait() 检测到描述符事件发生并将此事件通知应用程序，应用程序必须立即处理该事件。如果不处理，下次调用 epoll</em>wait() 时，不会再次响应应用程序并通知此事件。很大程度上减少了 epoll 事件被重复触发的次数，因此效率要比 LT 模式高。只支持 No-Blocking，以避免由于一个文件句柄的阻塞读/阻塞写操作把处理多个文件描述符的任务饿死。</p>\n<h2 id="select-poll-epoll-应用场景"><a href="#select-poll-epoll-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>select poll epoll 应用场景</h2>\n<p>很容易产生一种错觉认为只要用 epoll 就可以了，select poll 都是历史遗留问题，并没有什么应用场景，其实并不是这样的。</p>\n<h3 id="1-select-应用场景"><a href="#1-select-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. select 应用场景</h3>\n<p>select() poll() epoll<em>wait() 都有一个 timeout 参数，在 select() 中 timeout 的精确度为 1ns，而 poll() 和 epoll</em>wait() 中则为 1ms。所以 select 更加适用于实时要求更高的场景，比如核反应堆的控制。</p>\n<p>select 历史更加悠久，它的可移植性更好，几乎被所有主流平台所支持。</p>\n<h3 id="2-poll-应用场景"><a href="#2-poll-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. poll 应用场景</h3>\n<p>poll 没有最大描述符数量的限制，如果平台支持应该采用 poll 且对实时性要求并不是十分严格，而不是 select。</p>\n<p>需要同时监控小于 1000 个描述符。那么也没有必要使用 epoll，因为这个应用场景下并不能体现 epoll 的优势。</p>\n<p>需要监控的描述符状态变化多，而且都是非常短暂的。因为 epoll 中的所有描述符都存储在内核中，造成每次需要对描述符的状态改变都需要通过 epoll_ctl() 进行系统调用，频繁系统调用降低效率。epoll 的描述符存储在内核，不容易调试。</p>\n<h3 id="3-epoll-应用场景"><a href="#3-epoll-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. epoll 应用场景</h3>\n<p>程序只需要运行在 Linux 平台上，有非常大量的描述符需要同时轮询，而且这些连接最好是长连接。</p>\n<h3 id="4-性能对比"><a href="#4-%E6%80%A7%E8%83%BD%E5%AF%B9%E6%AF%94" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. 性能对比</h3>\n<blockquote>\n<p><a href="http://lse.sourceforge.net/epoll/index.html" target="_blank" rel="nofollow noreferrer noopener">epoll Scalability Web Page</a></p>\n</blockquote>',
id:"/github/workspace/blog/鸟哥的Linux私房菜读书笔记/index.md absPath of file >>> MarkdownRemark",timeToRead:29,frontmatter:{date:"2018-04-01 23:33:25",path:"/linux-introduce/",tags:"面试, 系统, Linux, 后端",title:"鸟哥的Linux私房菜读书笔记",draft:null}},{excerpt:"…",html:'<h1 id="一、-概述"><a href="#%E4%B8%80%E3%80%81-%E6%A6%82%E8%BF%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一、 概述</h1>\n<h2 id="操作系统基本特征"><a href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E7%89%B9%E5%BE%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>操作系统基本特征</h2>\n<h3 id="并发"><a href="#%E5%B9%B6%E5%8F%91" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>并发</h3>\n<ul>\n<li>并发性是指宏观上在一段时间内能同时运行多个程序，而并行性则指同一时刻能运行多个指令。</li>\n<li>并行需要硬件支持，如多流水线或者多处理器。</li>\n<li>操作系统通过引入进程和线程，使得程序能够并发运行。</li>\n</ul>\n<h3 id="共享"><a href="#%E5%85%B1%E4%BA%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>共享</h3>\n<ul>\n<li>共享是指系统中的资源可以供多个并发进程共同使用。</li>\n<li>有两种共享方式：互斥共享和同时共享。</li>\n<li>互斥共享的资源称为临界资源，例如打印机等，在同一时间只允许一个进程访问，需要用同步机制来实现对临界资源的访问。</li>\n</ul>\n<h3 id="虚拟"><a href="#%E8%99%9A%E6%8B%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>虚拟</h3>\n<ul>\n<li>虚拟技术把一个物理实体转换为多个逻辑实体。</li>\n<li>主要有两种虚拟技术：时分复用技术和空分复用技术。例如多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占有处理器，每次只执行一小个时间片并快速切换。</li>\n</ul>\n<h3 id="异步"><a href="#%E5%BC%82%E6%AD%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>异步</h3>\n<blockquote>\n<p>异步指进程不是一次性执行完毕，而是走走停停，以不可知的速度向前推进。</p>\n</blockquote>\n<h2 id="操作系统基本功能"><a href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>操作系统基本功能</h2>\n<h3 id="进程管理"><a href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程管理</h3>\n<blockquote>\n<p>进程控制、进程同步、进程通信、死锁处理、处理机调度等。</p>\n</blockquote>\n<h3 id="内存管理"><a href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内存管理</h3>\n<blockquote>\n<p>内存分配、地址映射、内存保护与共享和内存扩充等功能。</p>\n</blockquote>\n<h3 id="文件管理"><a href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文件管理</h3>\n<blockquote>\n<p>文件存储空间的管理、目录管理及文件读写管理和保护等。</p>\n</blockquote>\n<h3 id="设备管理"><a href="#%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设备管理</h3>\n<blockquote>\n<p>完成用户的 I/O 请求，方便用户使用各种设备，并提高设备的利用率，主要包括缓冲管理、设备分配、设备处理和虛拟设备等功能。</p>\n</blockquote>\n<h2 id="系统调用"><a href="#%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>系统调用</h2>\n<blockquote>\n<p>如果一个进程在用户态需要使用内核态的功能，就进行系统调用从而陷入内核，由操作系统代为完成。</p>\n</blockquote>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/tGPV0-4cf15f1ee5f507f7a4beda2b8703d7ff-f4664.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 753px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 61.354581673306775%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABiElEQVQoz3VRbU+DMBDe//8/Rk00MSb6QfcCbOOdsUkc47UtUEqhZZ6Q6Nzmk/Zy1/Tuee5ucvyLthNmQvWMvwXoeYte/OxpR95DmlfseIEJ3L7vv+0Qc86NQ/EcilsrudM/b1bBgx2/J/I1IBkpfz7/Jo+oGcvzHCPUMIYoT2hXNh3momhAjcCkiKIYvkl5kiyEQHkOXtd1vGmyLCvLc4ahnZbS6lw2Y8x13Rwh2914u2Cpm9ra0C17OlMUdTVXVHDWhmk47tq0bc+33A1CCEoD64QQslou0zQ1HVc3Lc/fbrY7w7IXc0XTVqqqzeeKbpjexneHs1A1YJJSgtIJXJAKAecNpfSsq0vEUXRlYKD/sN8HCXrbl6ztoGvZ92PndV3Hcdy2Lfig9Nqq+iOj1UeKH7e4ajjEQn4DeoO6juMEQfA54ArzqDUu2b25P8RpQQgMBnjCMCyKYjqdzmYz8OHxWvKQHVX8wcesFT/lxi3C/sCCCozxv8wV77ysboU8HdKYAxb8U+Yvx8mq/Bryz2sAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="tGPV0"\n        title=""\n        src="/static/tGPV0-4cf15f1ee5f507f7a4beda2b8703d7ff-f4664.png"\n        srcset="/static/tGPV0-4cf15f1ee5f507f7a4beda2b8703d7ff-e4889.png 200w,\n/static/tGPV0-4cf15f1ee5f507f7a4beda2b8703d7ff-63af3.png 400w,\n/static/tGPV0-4cf15f1ee5f507f7a4beda2b8703d7ff-f4664.png 753w"\n        sizes="(max-width: 753px) 100vw, 753px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<blockquote>\n<p>Linux 的系统调用主要有以下这些：</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align="center">Task</th>\n<th align="center">Commands</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align="center">进程控制</td>\n<td align="center">fork(); exit(); wait();</td>\n</tr>\n<tr>\n<td align="center">进程通信</td>\n<td align="center">pipe(); shmget(); mmap();</td>\n</tr>\n<tr>\n<td align="center">文件操作</td>\n<td align="center">open(); read(); write();</td>\n</tr>\n<tr>\n<td align="center">设备操作</td>\n<td align="center">ioctl(); read(); write();</td>\n</tr>\n<tr>\n<td align="center">信息维护</td>\n<td align="center">getpid(); alarm(); sleep();</td>\n</tr>\n<tr>\n<td align="center">安全</td>\n<td align="center">chmod(); umask(); chown();</td>\n</tr>\n</tbody>\n</table>\n<h2 id="大内核和微内核"><a href="#%E5%A4%A7%E5%86%85%E6%A0%B8%E5%92%8C%E5%BE%AE%E5%86%85%E6%A0%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>大内核和微内核</h2>\n<h3 id="大内核"><a href="#%E5%A4%A7%E5%86%85%E6%A0%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>大内核</h3>\n<ul>\n<li>大内核是将操作系统功能作为一个紧密结合的整体放到内核。</li>\n<li>由于各模块共享信息，因此有很高的性能。</li>\n</ul>\n<h3 id="微内核"><a href="#%E5%BE%AE%E5%86%85%E6%A0%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>微内核</h3>\n<ul>\n<li>由于操作系统不断复杂，因此将一部分操作系统功能移出内核，从而降低内核的复杂性。移出的部分根据分层的原则划分成若干服务，相互独立。</li>\n<li>在微内核结构下，操作系统被划分成小的、定义良好的模块，只有微内核这一个模块运行在内核态，其余模块运行在用户态。</li>\n<li>因为需要频繁地在用户态和核心态之间进行切换，所以会有一定的性能损失。</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2_14_microkernelArchitecture-73a84048224908727e103c145aecbaf2-cec2e.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 609px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 48.44006568144499%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB1y9IiYv/xAAXEAADAQAAAAAAAAAAAAAAAAABEDFB/9oACAEBAAEFAhMQX//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAABICEx/9oACAEBAAY/AnRkf//EABsQAQACAgMAAAAAAAAAAAAAAAEAERAhMXGB/9oACAEBAAE/IaACqaSXrueOOBCf/9oADAMBAAIAAwAAABCPz//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxCFf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQABBQEAAAAAAAAAAAAAAAEAESExQXFR/9oACAEBAAE/EEASyLd5FrYDUMoIg69Md8lzPkwn/9k=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2 14 microkernelArchitecture"\n        title=""\n        src="/static/2_14_microkernelArchitecture-73a84048224908727e103c145aecbaf2-cec2e.jpg"\n        srcset="/static/2_14_microkernelArchitecture-73a84048224908727e103c145aecbaf2-7d719.jpg 200w,\n/static/2_14_microkernelArchitecture-73a84048224908727e103c145aecbaf2-126ca.jpg 400w,\n/static/2_14_microkernelArchitecture-73a84048224908727e103c145aecbaf2-cec2e.jpg 609w"\n        sizes="(max-width: 609px) 100vw, 609px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="中断分类"><a href="#%E4%B8%AD%E6%96%AD%E5%88%86%E7%B1%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>中断分类</h2>\n<h3 id="外中断"><a href="#%E5%A4%96%E4%B8%AD%E6%96%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>外中断</h3>\n<blockquote>\n<p>由 CPU 执行指令以外的事件引起，如 I/O 结束中断，表示设备输入/输出处理已经完成，处理器能够发送下一个输入/输出请求。此外还有时钟中断、控制台中断等。</p>\n</blockquote>\n<h3 id="异常"><a href="#%E5%BC%82%E5%B8%B8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>异常</h3>\n<blockquote>\n<p>由 CPU 执行指令的内部事件引起，如非法操作码、地址越界、算术溢出等。</p>\n</blockquote>\n<h3 id="陷入"><a href="#%E9%99%B7%E5%85%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>陷入</h3>\n<blockquote>\n<p>在用户程序中使用系统调用。</p>\n</blockquote>\n<h1 id="进程管理-1"><a href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程管理</h1>\n<h2 id="进程与线程"><a href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程与线程</h2>\n<h3 id="进程"><a href="#%E8%BF%9B%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程</h3>\n<ul>\n<li>进程是资源分配的基本单位。</li>\n<li>进程控制块 (Process Control Block, PCB) 描述进程的基本信息和运行状态，所谓的创建进程和撤销进程，都是指对 PCB 的操作。</li>\n<li>下图显示了 4 个程序创建了 4 个进程，这 4 个进程可以并发地执行。</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-f8beaeb2ef3b5e862ae2a6b4a2619350-7b8b1.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 36.36363636363637%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA5ElEQVQoz12RWYuAMAyE/f+/zwdBEPXB+8T77O43UOluICam6Uwm9cyvPc9j9n03x3F8vm2b6tj7vvLruhTd2v/c4wNYVVUmyzITRZEpikI5ddfGcRSJvWzB3NxzL5znaeZ5VnTtvm8RNk3zAUBq+zhDlSZEWt/3kjgMg5rathUw/8hc19WEYag+jGhzerqu+8g9JOJlWRrf902apsrjOBZIEASasK5rTchlogVjuj+S8zw3+DRNaoaZiCR2ZtkBTZJEhKhgv+RIRQWuCVmyfU1r7mu6i1+WRSSQMjmkrIcaK8J+AJZnHZ+jEuYDAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="a6ac2b08 3861 4e85 baa8 382287bfee9f"\n        title=""\n        src="/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-f8beaeb2ef3b5e862ae2a6b4a2619350-fee1c.png"\n        srcset="/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-f8beaeb2ef3b5e862ae2a6b4a2619350-a67b7.png 200w,\n/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-f8beaeb2ef3b5e862ae2a6b4a2619350-0b187.png 400w,\n/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-f8beaeb2ef3b5e862ae2a6b4a2619350-fee1c.png 800w,\n/static/a6ac2b08-3861-4e85-baa8-382287bfee9f-f8beaeb2ef3b5e862ae2a6b4a2619350-7b8b1.png 803w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="线程"><a href="#%E7%BA%BF%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>线程</h3>\n<ul>\n<li>线程是独立调度的基本单位。</li>\n<li>一个进程中可以有多个线程，它们共享进程资源。</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/3cd630ea-017c-488d-ad1d-732b4efeddf5-4235fc5a9707b9a3396a613b38e33150-7320c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 367px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 82.83378746594006%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABk0lEQVQ4y5VUCXLCMAzM//9U+AOlHCXHhByE3AmEG1StGWeMm6RUMxpf8nq1tmw8Hg/qcphpmvQ1nZLF7fdySdfrVcwP7TFowG63G4VhSI7jUFWWYjxkADXCIKAkSSiJY8UTirkti4Jsy6LPyYT2+72Yk+ttLO+Nt1sqOFYwzLKsNw0Y1j3PE/37/d6bLg4UDIs8bwF1+rA0TclcrVrAPmua5gmYK4ASRAX3fZ+WiwVdLpeXNT2TRjLMNYZqUMD6+pxuyjrhYs7n868D3wJUbzjabGjtukL0LnneBkQb+EF722AL4f8NqPbBajwa0+hjJFLWJfkTUBcami3mc5rNZi/surwFlA+yy/BoUXZrd02O7QxWSftsoBEuAGxUxzPZ7XZt6eH5YE6Pk17X9bNSXL7BkusUFZFLZxkwxvzxeKTT6USHw+EZw2u5HptmJCvOqKqqNw2cDGay1ocMB4qUEQzD14TUhXMfZYYg27bJ4g/C93yx4SVOccgjGEZRxJRTUbO6I42aM4A++L5QMV1xICUz/QGZHyf5HH+zwAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="3cd630ea 017c 488d ad1d 732b4efeddf5"\n        title=""\n        src="/static/3cd630ea-017c-488d-ad1d-732b4efeddf5-4235fc5a9707b9a3396a613b38e33150-7320c.png"\n        srcset="/static/3cd630ea-017c-488d-ad1d-732b4efeddf5-4235fc5a9707b9a3396a613b38e33150-3f7ac.png 200w,\n/static/3cd630ea-017c-488d-ad1d-732b4efeddf5-4235fc5a9707b9a3396a613b38e33150-7320c.png 367w"\n        sizes="(max-width: 367px) 100vw, 367px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="区别"><a href="#%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>区别</h3>\n<ul>\n<li>拥有资源：进程是资源分配的基本单位，但是线程不拥有资源，线程可以访问隶属进程的资源。</li>\n<li>调度：线程是独立调度的基本单位，在同一进程中，线程的切换不会引起进程切换，从一个进程内的线程切换到另一个进程中的线程时，会引起进程切换。</li>\n<li>系统开销：由于创建或撤销进程时，系统都要为之分配或回收资源，如内存空间、I/O 设备等，所付出的开销远大于创建或撤销线程时的开销。类似地，在进行进程切换时，涉及当前执行进程 CPU 环境的保存及新调度进程 CPU 环境的设置，而线程切换时只需保存和设置少量寄存器内容，开销很小。</li>\n<li>通信方面：进程间通信 (IPC) 需要进程同步和互斥手段的辅助，以保证数据的一致性。而线程间可以通过直接读/写同一进程中的数据段（如全局变量）来进行通信。</li>\n</ul>\n<p>举例：QQ 和浏览器是两个进程，浏览器进程里面有很多线程，例如 HTTP 请求线程、事件响应线程、渲染线程等等，线程的并发执行使得在浏览器中点击一个新链接从而发起 HTTP 请求时，浏览器还可以响应用户的其它事件。</p>\n<h2 id="进程状态的切换"><a href="#%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E7%9A%84%E5%88%87%E6%8D%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程状态的切换</h2>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/ProcessState-36bc1559611b05e9549101ed5fd512ab-4ddc2.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 679px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 64.50662739322533%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAByUlEQVQoz2VS6W6jMBDm/R+rq/2TFqltGkiAcARjjMHhND6xS5puN01GluWZ+b7xXI59EIRQ3/dsZpTSeaYVxuM4CiGuXmPN9axv5zdxNZkCwiiMoiDYbnewgL7vu66LUHVxG3OLdtYYXHGuxXrf+R5FLaqlbT3gbu70op16rL2j9/K68WLvPIA8avY+23lGimVFy7alUTynJ0WnVY2KYPP2vA/Dv+6fDGcO5RQSCDAoCBymlveYNqnS0i6StzmtIo6Pmg7XnKRWpENFuiFjJ6X4XfMXRPbZXLrsnIl5WNVFzXLIjGbfEC1pHV3Bzm2dPevzBkbJe3h46ml3YWpOpnNWxEH0BkmpJBVtlkbeOob7btcjTk/+q/cOCK7KPavTDrjHbHtMkyDce8lH16Ri6rp+kFLek7USJH9mYi6OAY7T5pS3JQIHH8QhKX0u+V3z/5MrZOmaC80Xxb7rN1dZo3LRxgWwM7ssglnMvzkbO46WUpvntm5s28wTTrXmHeubsaaKLYxM6NDW0+m0AoyQNz8viwXAwsKi0iaJiRPbkwnU4SEOth/bXeKV+YvirEQWI1vAr+we077ZUMskL0mZoASdK6nlj/1OPgH6yuUSEuxjVwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="ProcessState"\n        title=""\n        src="/static/ProcessState-36bc1559611b05e9549101ed5fd512ab-4ddc2.png"\n        srcset="/static/ProcessState-36bc1559611b05e9549101ed5fd512ab-05daf.png 200w,\n/static/ProcessState-36bc1559611b05e9549101ed5fd512ab-38f98.png 400w,\n/static/ProcessState-36bc1559611b05e9549101ed5fd512ab-4ddc2.png 679w"\n        sizes="(max-width: 679px) 100vw, 679px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>就绪状态（ready）：等待被调度</li>\n<li>运行状态（running）</li>\n<li>阻塞状态（waiting）：等待资源</li>\n</ul>\n<p>应该注意以下内容：</p>\n<ul>\n<li>只有就绪态和运行态可以相互转换，其它的都是单向转换。就绪状态的进程通过调度算法从而获得 CPU 时间，转为运行状态；而运行状态的进程，在分配给它的 CPU 时间片用完之后就会转为就绪状态，等待下一次调度。</li>\n<li>阻塞状态是缺少需要的资源从而由运行状态转换而来，但是该资源不包括 CPU 时间，缺少 CPU 时间会从运行态转换为就绪态。</li>\n</ul>\n<h2 id="调度算法"><a href="#%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>调度算法</h2>\n<p>需要针对不同环境来讨论调度算法。</p>\n<h3 id="批处理系统中的调度"><a href="#%E6%89%B9%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E8%B0%83%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>批处理系统中的调度</h3>\n<h4 id="先来先服务"><a href="#%E5%85%88%E6%9D%A5%E5%85%88%E6%9C%8D%E5%8A%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>先来先服务</h4>\n<blockquote>\n<p>first-come first-serverd（FCFS）</p>\n</blockquote>\n<ul>\n<li>调度最先进入就绪队列的作业。</li>\n<li>有利于长作业，但不利于短作业，因为短作业必须一直等待前面的长作业执行完毕才能执行，而长作业又需要执行很长时间，造成了短作业等待时间过长。</li>\n</ul>\n<h4 id="短作业优先"><a href="#%E7%9F%AD%E4%BD%9C%E4%B8%9A%E4%BC%98%E5%85%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>短作业优先</h4>\n<blockquote>\n<p>shortest job first（SJF）</p>\n</blockquote>\n<ul>\n<li>调度估计运行时间最短的作业。</li>\n<li>长作业有可能会饿死，处于一直等待短作业执行完毕的状态。因为如果一直有短作业到来，那么长作业永远得不到调度。</li>\n</ul>\n<h4 id="最短剩余时间优先"><a href="#%E6%9C%80%E7%9F%AD%E5%89%A9%E4%BD%99%E6%97%B6%E9%97%B4%E4%BC%98%E5%85%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最短剩余时间优先</h4>\n<blockquote>\n<p>shortest remaining time next（SRTN）</p>\n</blockquote>\n<ol>\n<li>设定系统中有五个进程，每一个进程用一个进程控制块表示。</li>\n<li>输入每个进程的“优先数”和“要求运行时间”。</li>\n<li>为了调度方便，将五个进程按给定的优先数从大到小连成就绪队列。用一单元指出队列首进程，用指针指出队列的连接情况。</li>\n<li>处理机调度总是选队首进程运行。采用动态优先数算法，进程每运行一次优先数就减“1”，同时将运行时间减“1”。</li>\n<li>若要求运行时间为零，则将其状态置为“结束”,且退出队列。</li>\n<li>运行所设计程序，显示或打印逐次被选中进程的进程名以及进程控制块的动态变化过程。</li>\n</ol>\n<h3 id="交互式系统中的调度"><a href="#%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E8%B0%83%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>交互式系统中的调度</h3>\n<h4 id="优先级调度"><a href="#%E4%BC%98%E5%85%88%E7%BA%A7%E8%B0%83%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优先级调度</h4>\n<ul>\n<li>除了可以手动赋予优先权之外，还可以把响应比作为优先权，这种调度方式叫做高响应比优先调度算法。</li>\n<li>响应比 = (等待时间 + 要求服务时间) / 要求服务时间 = 响应时间 / 要求服务时间</li>\n<li>这种调度算法主要是为了解决短作业优先调度算法长作业可能会饿死的问题，因为随着等待时间的增长，响应比也会越来越高。</li>\n</ul>\n<h4 id="时间片轮转"><a href="#%E6%97%B6%E9%97%B4%E7%89%87%E8%BD%AE%E8%BD%AC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>时间片轮转</h4>\n<ul>\n<li>将所有就绪进程按 FCFS 的原则排成一个队列，每次调度时，把 CPU 时间分配给队首进程，该进程可以执行一个时间片。当时间片用完时，由计时器发出时钟中断，调度程序便停止该进程的执行，并将它送往就绪队列的末尾，同时继续把 CPU 时间分配给队首的进程。</li>\n<li>时间片轮转算法的效率和时间片的大小有很大关系。因为进程切换都要保存进程的信息并且载入新进程的信息，如果时间片太小，会导致进程切换得太频繁，在进程切换上就会花过多时间。</li>\n</ul>\n<h4 id="多级反馈队列"><a href="#%E5%A4%9A%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%98%9F%E5%88%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>多级反馈队列</h4>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-5032e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 438px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 67.12328767123287%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABvElEQVQ4y5WTe2+CQBDE/f5fzKaN/5hojfUBx+NEfIAK+ACmO9ueJbVtUpKNHt7N/WZn7bVti/8+x+Pxx/fU6rkvl8sF1+sV2+0W1q6kYozHY8zncwRBgPV6rVWWJaIwRBhG8t4glN8WyyVut5uK3gW58Xw+wxijAsb4GAwGmEwmmC8WsKsVoihClmW6v20aBeCZqqrQfDrtdS0XRaGbHM1+v1fizWaDlQhynee5XngVIlJVAlJIOZ07IYu9WQhNHMdCE6Lf72M0HmE6nYroVoUOhwNyoQyFNhAXodhfLr0vy06MT13XailNU6VKkkRJ3ZqE/J0Wfw2lK7jb7VSEt7Jfs9kMnufBl76S2lqrop6EkMhFibTByntjAiGsHwmZtO/7GkAcR3h5fsYrQ5GkP9K3Gh7tnU4ntc/KshyNhPQgyEBYJKW1oii1rywKMjQn6Cz+aZkjwNlTm76Hp6c+hsOhUpKaM0dxCsexhRE3dDR9mynIAyFHgn1j/zgmTJcHzH2wE+2hI+xStt05dAvaqapSDmV6sCwr7RWpeBmLa05D91z3s/dwU1MrIf8puTQ8Tddqj4Ew/e7+78XnHW5i5J5nKsJzAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="042cf928 3c8e 4815 ae9c f2780202c68f"\n        title=""\n        src="/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-5032e.png"\n        srcset="/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-86481.png 200w,\n/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-1ca59.png 400w,\n/static/042cf928-3c8e-4815-ae9c-f2780202c68f-d3d513f0606ff99544602ecf603a2489-5032e.png 438w"\n        sizes="(max-width: 438px) 100vw, 438px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>如果一个进程需要执行 100 个时间片，如果采用轮转调度算法，那么需要交换 100 次。多级队列是为这种需要连续执行多个时间片的进程考虑，它设置了多个队列，每个队列时间片大小都不同，例如 1,2,4,8,..。进程在第一个队列没执行完，就会被移到下一个队列。这种方式下，之前的进程只需要交换 7 次。</li>\n<li>每个队列优先权也不同，最上面的优先权最高。因此只有上一个队列没有进程在排队，才能调度当前队列上的进程。</li>\n</ul>\n<h3 id="实时系统中的调度"><a href="#%E5%AE%9E%E6%97%B6%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E8%B0%83%E5%BA%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实时系统中的调度</h3>\n<ul>\n<li>实时系统要求一个服务请求在一个确定时间内得到响应。</li>\n<li>分为硬实时和软实时，前者必须满足绝对的截止时间，后者可以容忍一定的超时。</li>\n</ul>\n<h2 id="进程同步"><a href="#%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程同步</h2>\n<h3 id="临界区"><a href="#%E4%B8%B4%E7%95%8C%E5%8C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>临界区</h3>\n<ul>\n<li>对临界资源进行访问的那段代码称为临界区。</li>\n<li>为了互斥访问临界资源，每个进程在进入临界区之前，需要先进行检查。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="49407912452240340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// entry section // critical section // exit section`, `49407912452240340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html">// entry section // critical section // exit section</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h3 id="同步与互斥"><a href="#%E5%90%8C%E6%AD%A5%E4%B8%8E%E4%BA%92%E6%96%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>同步与互斥</h3>\n<ul>\n<li>同步：多个进程按一定顺序执行；</li>\n<li>互斥：多个进程在同一时刻只有一个进程能进入临界区。</li>\n</ul>\n<h3 id="信号量"><a href="#%E4%BF%A1%E5%8F%B7%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>信号量</h3>\n<ul>\n<li>\n<p>信号量（Semaphore）是一个整型变量，可以对其执行 down 和 up 操作，也就是常见的 P 和 V 操作。</p>\n<ul>\n<li><strong>down</strong> : 如果信号量大于 0 ，执行 -1 操作；如果信号量等于 0，进程睡眠，等待信号量大于 0；</li>\n<li><strong>up</strong> ：对信号量执行 +1 操作，唤醒睡眠的进程让其完成 down 操作。</li>\n</ul>\n</li>\n<li>down 和 up 操作需要被设计成原语，不可分割，通常的做法是在执行这些操作的时候屏蔽中断。</li>\n<li>如果信号量的取值只能为 0 或者 1，那么就成为了 <strong>互斥量（Mutex）</strong> ，0 表示临界区已经加锁，1 表示临界区解锁。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50352611151496000000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`typedef int semaphore;\nsemaphore mutex = 1;\nvoid P1() {\n    down(&mutex);\n    // 临界区\n    up(&mutex);\n}\n\nvoid P2() {\n    down(&mutex);\n    // 临界区\n    up(&mutex);\n}`, `50352611151496000000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> semaphore<span class="token punctuation">;</span>\nsemaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token keyword">void</span> <span class="token function">P1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 临界区</span>\n    <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">P2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 临界区</span>\n    <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><font size=3> <strong>使用信号量实现生产者-消费者问题</strong> </font> 问题描述：使用一个缓冲区来保存物品，只有缓冲区没有满，生产者才可以放入物品；只有缓冲区不为空，消费者才可以拿走物品。</p>\n<ul>\n<li>因为缓冲区属于临界资源，因此需要使用一个互斥量 mutex 来控制对缓冲区的互斥访问。</li>\n<li>为了同步生产者和消费者的行为，需要记录缓冲区中物品的数量。数量可以使用信号量来进行统计，这里需要使用两个信号量：empty 记录空缓冲区的数量，full 记录满缓冲区的数量。其中，empty 信号量是在生产者进程中使用，当 empty 不为 0 时，生产者才可以放入物品；full 信号量是在消费者进程中使用，当 full 信号量不为 0 时，消费者才可以取走物品。</li>\n<li>注意，不能先对缓冲区进行加锁，再测试信号量。也就是说，不能先执行 down(mutex) 再执行 down(empty)。如果这么做了，那么可能会出现这种情况：生产者对缓冲区加锁后，执行 down(empty) 操作，发现 empty = 0，此时生产者睡眠。消费者不能进入临界区，因为生产者对缓冲区加锁了，也就无法执行 up(empty) 操作，empty 永远都为 0，那么生产者和消费者就会一直等待下去，造成死锁。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76385715883638340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#define N 100\ntypedef int semaphore;\nsemaphore mutex = 1;\nsemaphore empty = N;\nsemaphore full = 0;\n\nvoid producer() {\n    while(TRUE){\n        int item = produce_item();\n        down(&empty);\n        down(&mutex);\n        insert_item(item);\n        up(&mutex);\n        up(&full);\n    }\n}\n\nvoid consumer() {\n    while(TRUE){\n        down(&full);\n        down(&mutex);\n        int item = remove_item();\n        up(&mutex);\n        up(&empty);\n        consume_item(item);\n    }\n}`, `76385715883638340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> N 100</span>\n<span class="token keyword">typedef</span> <span class="token keyword">int</span> semaphore<span class="token punctuation">;</span>\nsemaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\nsemaphore empty <span class="token operator">=</span> N<span class="token punctuation">;</span>\nsemaphore full <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token keyword">int</span> item <span class="token operator">=</span> <span class="token function">produce_item</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">insert_item</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span><span class="token punctuation">{</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">int</span> item <span class="token operator">=</span> <span class="token function">remove_item</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">consume_item</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="管程"><a href="#%E7%AE%A1%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>管程</h3>\n<ul>\n<li>使用信号量机制实现的生产者消费者问题需要客户端代码做很多控制，而管程把控制的代码独立出来，不仅不容易出错，也使得客户端代码调用更容易。</li>\n<li>c 语言不支持管程，下面的示例代码使用了类 Pascal 语言来描述管程。示例代码的管程提供了 insert() 和 remove() 方法，客户端代码通过调用这两个方法来解决生产者-消费者问题。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72882670808219300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`monitor ProducerConsumer\n    integer i;\n    condition c;\n\n    procedure insert();\n    begin\n        // ...\n    end;\n\n    procedure remove();\n    begin\n        // ...\n    end;\nend monitor;`, `72882670808219300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="pascal"><pre style="counter-reset: linenumber NaN" class="language-pascal line-numbers"><code class="language-pascal">monitor ProducerConsumer\n    integer i<span class="token punctuation">;</span>\n    condition c<span class="token punctuation">;</span>\n\n    <span class="token keyword">procedure</span> insert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">begin</span>\n        <span class="token comment">// ...</span>\n    <span class="token keyword">end</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">procedure</span> remove<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">begin</span>\n        <span class="token comment">// ...</span>\n    <span class="token keyword">end</span><span class="token punctuation">;</span>\n<span class="token keyword">end</span> monitor<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>管程有一个重要特性：在一个时刻只能有一个进程使用管程。进程在无法继续执行的时候不能一直占用管程，否则其它进程永远不能使用管程。</li>\n<li>管程引入了 <strong>条件变量</strong> 以及相关的操作：<strong>wait()</strong> 和 <strong>signal()</strong> 来实现同步操作。对条件变量执行 wait() 操作会导致调用进程阻塞，把管程让出来给另一个进程持有。signal() 操作用于唤醒被阻塞的进程。</li>\n</ul>\n<p><font size=3> <strong>使用管程实现生成者-消费者问题</strong> </font><br></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="31576004537609450000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 管程\nmonitor ProducerConsumer\n    condition full, empty;\n    integer count := 0;\n    condition c;\n\n    procedure insert(item: integer);\n    begin\n        if count = N then wait(full);\n        insert_item(item);\n        count := count + 1;\n        if count = 1 then signal(empty);\n    end;\n\n    function remove: integer;\n    begin\n        if count = 0 then wait(empty);\n        remove = remove_item;\n        count := count - 1;\n        if count = N -1 then signal(full);\n    end;\nend monitor;\n\n// 生产者客户端\nprocedure producer\nbegin\n    while true do\n    begin\n        item = produce_item;\n        ProducerConsumer.insert(item);\n    end\nend;\n\n// 消费者客户端\nprocedure consumer\nbegin\n    while true do\n    begin\n        item = ProducerConsumer.remove;\n        consume_item(item);\n    end\nend;`, `31576004537609450000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="pascal"><pre style="counter-reset: linenumber NaN" class="language-pascal line-numbers"><code class="language-pascal"><span class="token comment">// 管程</span>\nmonitor ProducerConsumer\n    condition full<span class="token punctuation">,</span> empty<span class="token punctuation">;</span>\n    integer count <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    condition c<span class="token punctuation">;</span>\n\n    <span class="token keyword">procedure</span> insert<span class="token punctuation">(</span>item<span class="token punctuation">:</span> integer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">begin</span>\n        <span class="token keyword">if</span> count <span class="token operator">=</span> N <span class="token keyword">then</span> wait<span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        insert_item<span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        count <span class="token operator">:=</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> count <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">then</span> signal<span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">end</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">function</span> remove<span class="token punctuation">:</span> integer<span class="token punctuation">;</span>\n    <span class="token keyword">begin</span>\n        <span class="token keyword">if</span> count <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">then</span> wait<span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        remove <span class="token operator">=</span> remove_item<span class="token punctuation">;</span>\n        count <span class="token operator">:=</span> count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> count <span class="token operator">=</span> N <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">then</span> signal<span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">end</span><span class="token punctuation">;</span>\n<span class="token keyword">end</span> monitor<span class="token punctuation">;</span>\n\n<span class="token comment">// 生产者客户端</span>\n<span class="token keyword">procedure</span> producer\n<span class="token keyword">begin</span>\n    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>\n    <span class="token keyword">begin</span>\n        item <span class="token operator">=</span> produce_item<span class="token punctuation">;</span>\n        ProducerConsumer<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">end</span>\n<span class="token keyword">end</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 消费者客户端</span>\n<span class="token keyword">procedure</span> consumer\n<span class="token keyword">begin</span>\n    <span class="token keyword">while</span> <span class="token keyword">true</span> <span class="token keyword">do</span>\n    <span class="token keyword">begin</span>\n        item <span class="token operator">=</span> ProducerConsumer<span class="token punctuation">.</span>remove<span class="token punctuation">;</span>\n        consume_item<span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">end</span>\n<span class="token keyword">end</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="经典同步问题"><a href="#%E7%BB%8F%E5%85%B8%E5%90%8C%E6%AD%A5%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>经典同步问题</h2>\n<p>生产者和消费者问题前面已经讨论过了。</p>\n<h3 id="读者-写者问题"><a href="#%E8%AF%BB%E8%80%85-%E5%86%99%E8%80%85%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>读者-写者问题</h3>\n<ul>\n<li>允许多个进程同时对数据进行读操作，但是不允许读和写以及写和写操作同时发生。</li>\n<li>一个整型变量 count 记录在对数据进行读操作的进程数量，一个互斥量 count<em>mutex 用于对 count 加锁，一个互斥量 data</em>mutex 用于对读写的数据加锁。</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="13214044219681110000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`typedef int semaphore;\nsemaphore count_mutex = 1;\nsemaphore data_mutex = 1;\nint count = 0;\n\nvoid reader() {\n    while(TRUE) {\n        down(&count_mutex);\n        count++;\n        if(count == 1) down(&data_mutex); // 第一个读者需要对数据进行加锁，防止写进程访问\n        up(&count_mutex);\n        read();\n        down(&count_mutex);\n        count--;\n        if(count == 0) up(&data_mutex);\n        up(&count_mutex);\n    }\n}\n\nvoid writer() {\n    while(TRUE) {\n        down(&data_mutex);\n        write();\n        up(&data_mutex);\n    }\n}`, `13214044219681110000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> semaphore<span class="token punctuation">;</span>\nsemaphore count_mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\nsemaphore data_mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">void</span> <span class="token function">reader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        count<span class="token operator">++</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第一个读者需要对数据进行加锁，防止写进程访问</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        count<span class="token operator">--</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="哲学家进餐问题"><a href="#%E5%93%B2%E5%AD%A6%E5%AE%B6%E8%BF%9B%E9%A4%90%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>哲学家进餐问题</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/a9077f06-7584-4f2b-8c20-3a8e46928820-e00b6c60b644f0027c5fe554f7602a57-fde94.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 370px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 86.48648648648648%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe5LDRBcw1B//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAECETEy/9oACAEBAAEFAnruyjoWEMP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAWEAADAAAAAAAAAAAAAAAAAAAQESD/2gAIAQEABj8CLr//xAAZEAEBAAMBAAAAAAAAAAAAAAARAQAQITH/2gAIAQEAAT8hYLkBXSlqxHOZBE17a//aAAwDAQACAAMAAAAQ08gA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRAAAgICAwEAAAAAAAAAAAAAAREAIRAxQYGhwf/aAAgBAQABPxAD4q1GlUU+8b8BtMxl6LPyEMFkQ6nux//Z\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="a9077f06 7584 4f2b 8c20 3a8e46928820"\n        title=""\n        src="/static/a9077f06-7584-4f2b-8c20-3a8e46928820-e00b6c60b644f0027c5fe554f7602a57-fde94.jpg"\n        srcset="/static/a9077f06-7584-4f2b-8c20-3a8e46928820-e00b6c60b644f0027c5fe554f7602a57-d8c17.jpg 200w,\n/static/a9077f06-7584-4f2b-8c20-3a8e46928820-e00b6c60b644f0027c5fe554f7602a57-fde94.jpg 370w"\n        sizes="(max-width: 370px) 100vw, 370px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>五个哲学家围着一张圆桌，每个哲学家面前放着食物。哲学家的生活有两种交替活动：吃饭以及思考。当一个哲学家吃饭时，需要先拿起自己左右两边的两根筷子，并且一次只能拿起一根筷子。</p>\n<p>下面是一种错误的解法，考虑到如果所有哲学家同时拿起左手边的筷子，那么就无法拿起右手边的筷子，造成死锁。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28089637234203390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#define N 5\n\nvoid philosopher(int i) {\n    while(TRUE) {\n        think();\n        take(i);       // 拿起左边的筷子\n        take((i+1)%N); // 拿起右边的筷子\n        eat();\n        put(i);\n        put((i+1)%N);\n    }\n}`, `28089637234203390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> N 5</span>\n\n<span class="token keyword">void</span> <span class="token function">philosopher</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">think</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">take</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 拿起左边的筷子</span>\n        <span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拿起右边的筷子</span>\n        <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">put</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为了防止死锁的发生，可以设置两个条件：</p>\n<ol>\n<li>必须同时拿起左右两根筷子；</li>\n<li>只有在两个邻居都没有进餐的情况下才允许进餐。</li>\n</ol>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87413784574590620000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#define N 5\n#define LEFT (i + N - 1) % N // 左邻居\n#define RIGHT (i + 1) % N    // 右邻居\n#define THINKING 0\n#define HUNGRY   1\n#define EATING   2\ntypedef int semaphore;\nint state[N];                // 跟踪每个哲学家的状态\nsemaphore mutex = 1;         // 临界区的互斥\nsemaphore s[N];              // 每个哲学家一个信号量\n\nvoid philosopher(int i) {\n    while(TRUE) {\n        think();\n        take_two(i);\n        eat();\n        put_two(i);\n    }\n}\n\nvoid take_two(int i) {\n    down(&mutex);\n    state[i] = HUNGRY;\n    test(i);\n    up(&mutex);\n    down(&s[i]);\n}\n\nvoid put_two(i) {\n    down(&mutex);\n    state[i] = THINKING;\n    test(LEFT);\n    test(RIGHT);\n    up(&mutex);\n}\n\nvoid test(i) {         // 尝试拿起两把筷子\n    if(state[i] == HUNGRY && state[LEFT] != EATING && state[RIGHT] !=EATING) {\n        state[i] = EATING;\n        up(&s[i]);\n    }\n}`, `87413784574590620000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> N 5</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> LEFT (i + N - 1) % N </span><span class="token comment">// 左邻居</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> RIGHT (i + 1) % N    </span><span class="token comment">// 右邻居</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> THINKING 0</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> HUNGRY   1</span>\n<span class="token macro property">#<span class="token directive keyword">define</span> EATING   2</span>\n<span class="token keyword">typedef</span> <span class="token keyword">int</span> semaphore<span class="token punctuation">;</span>\n<span class="token keyword">int</span> state<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token comment">// 跟踪每个哲学家的状态</span>\nsemaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>         <span class="token comment">// 临界区的互斥</span>\nsemaphore s<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>              <span class="token comment">// 每个哲学家一个信号量</span>\n\n<span class="token keyword">void</span> <span class="token function">philosopher</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">while</span><span class="token punctuation">(</span>TRUE<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">think</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">take_two</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">put_two</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">take_two</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    state<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> HUNGRY<span class="token punctuation">;</span>\n    <span class="token function">test</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">put_two</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">down</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    state<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> THINKING<span class="token punctuation">;</span>\n    <span class="token function">test</span><span class="token punctuation">(</span>LEFT<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">test</span><span class="token punctuation">(</span>RIGHT<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token comment">// 尝试拿起两把筷子</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span>state<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> HUNGRY <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">[</span>LEFT<span class="token punctuation">]</span> <span class="token operator">!=</span> EATING <span class="token operator">&amp;&amp;</span> state<span class="token punctuation">[</span>RIGHT<span class="token punctuation">]</span> <span class="token operator">!=</span>EATING<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        state<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> EATING<span class="token punctuation">;</span>\n        <span class="token function">up</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="进程通信"><a href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程通信</h2>\n<h3 id="进程同步与进程通信的区别"><a href="#%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E4%B8%8E%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E7%9A%84%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程同步与进程通信的区别</h3>\n<ul>\n<li>进程同步：控制多个进程按一定顺序执行；</li>\n<li>进程通信：进程间传输信息。</li>\n<li>进程通信是一种手段，而进程同步是一种目的。也可以说，为了能够达到进程同步的目的，需要让进程进行通信，传输一些进程同步所需要的信息。</li>\n<li>在进程同步中介绍的信号量也属于进程通信的一种方式，但是属于低级别的进程通信，因为它传输的信息非常小。</li>\n</ul>\n<h3 id="进程通信方式"><a href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进程通信方式</h3>\n<h4 id="消息传递"><a href="#%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>消息传递</h4>\n<p>操作系统提供了用于通信的通道（Channel），进程可以通过读写这个通道进行通信。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-d9b7d.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 621px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 78.09983896940419%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeysNFH/xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIxIf/aAAgBAQABBQKtpiymTxn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAQAGPwJj/8QAHBABAAICAwEAAAAAAAAAAAAAAQARMaEQIUFR/9oACAEBAAE/IUe9wKKZXCZUbqAoB7+vH//aAAwDAQACAAMAAAAQGO//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAICAgMAAAAAAAAAAAAAARExACEQoUFhsf/aAAgBAQABPxCPOnl7x4LFa6wEXHdr9wJEil3VlFUO1jU1x//Z\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="037c3a0b 332d 434d a374 f343ef72c8e1"\n        title=""\n        src="/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-d9b7d.jpg"\n        srcset="/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-875ae.jpg 200w,\n/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-1715a.jpg 400w,\n/static/037c3a0b-332d-434d-a374-f343ef72c8e1-63924ac60c8dbcef8770124247d2394a-d9b7d.jpg 621w"\n        sizes="(max-width: 621px) 100vw, 621px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><font size=3> <strong>（一）管道</strong> </font></br></p>\n<ul>\n<li>写进程在管道的尾端写入数据，读进程在管道的首端读出数据。管道提供了简单的流控制机制，进程试图读空管道时，在有数据写入管道前，进程将一直阻塞。同样地，管道已经满时，进程再试图写管道，在其它进程从管道中移走数据之前，写进程将一直阻塞。</li>\n<li>Linux 中管道通过空文件实现。</li>\n<li>\n<p>管道有三种：</p>\n<ol>\n<li>普通管道：有两个限制，一是只能单向传输；二是只能在父子进程之间使用；</li>\n<li>流管道：去除第一个限制，支持双向传输；</li>\n<li>命名管道：去除第二个限制，可以在不相关进程之间进行通信。</li>\n</ol>\n</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-5df5e.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 610px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 55.24590163934426%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB68aKhxw//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAECMSL/2gAIAQEAAQUCumVfM4LT/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAICEiMf/aAAgBAQAGPwLUNdgQZmaf/8QAHRAAAgIBBQAAAAAAAAAAAAAAAREAITEQQVFhcf/aAAgBAQABPyHtBRqFsy7PHsMkUR4hwYAStP/aAAwDAQACAAMAAAAQWC//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPxCH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQEAAgMBAAAAAAAAAAAAAREhADEQQVFx/9oACAEBAAE/EAtXJpBtT69SziYE6QXPb9zLxCZTaszq++AQTs5dRV1++P/Z\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="7f642a65 b167 4c8f b382 8322c6322b2c"\n        title=""\n        src="/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-5df5e.jpg"\n        srcset="/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-980d3.jpg 200w,\n/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-d1b55.jpg 400w,\n/static/7f642a65-b167-4c8f-b382-8322c6322b2c-c4fa984b75d1fbb706cc76828a47f035-5df5e.jpg 610w"\n        sizes="(max-width: 610px) 100vw, 610px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><font size=3> <strong>（二）消息队列</strong> </font></br></p>\n<p>消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-9f30f.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 581px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 60.75731497418244%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHrayYoGh//xAAaEAEAAgMBAAAAAAAAAAAAAAACAAEDESIy/9oACAEBAAEFAm9RZOTeyvNYhSn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAADAAMBAAAAAAAAAAAAAAAAARECECFx/9oACAEBAAY/AuJvwUrp0ZjMdf/EABoQAQADAQEBAAAAAAAAAAAAAAEAIUERURD/2gAIAQEAAT8hXhJ3xOCBMGVHBo+OQBQXGYBH5//aAAwDAQACAAMAAAAQ+y//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAwEBAQEAAAAAAAAAAAABESExAEEQUf/aAAgBAQABPxCBUqTAgNh2/OIpLxlWv8uuIaYFWVRlcdhAuDeDtCEMg+f/2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="d49466db fdd3 4d36 8a86 47dc45c07a1e"\n        title=""\n        src="/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-9f30f.jpg"\n        srcset="/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-6427f.jpg 200w,\n/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-43640.jpg 400w,\n/static/d49466db-fdd3-4d36-8a86-47dc45c07a1e-80cd50fc628c339844c5f0b15d37586d-9f30f.jpg 581w"\n        sizes="(max-width: 581px) 100vw, 581px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><font size=3> <strong>（三）套接字</strong> </font></br></p>\n<p>套接字也是一种进程间通信机制，与其它通信机制不同的是，它可用于不同机器间的进程通信。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-eb775.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 594px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 55.21885521885521%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB7EaLjBcP/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAERIDMv/aAAgBAQABBQJ3zD0oKdKQKHqf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQETFB0f/aAAgBAQAGPwLhengsc//EABoQAAIDAQEAAAAAAAAAAAAAAAERACExUWH/2gAIAQEAAT8hCmpoo1ABM+IbFlr7UCIBZm0Q5P/aAAwDAQACAAMAAAAQvC//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAJ/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBUWGBkf/aAAgBAQABPxC5K8h2Fr0E8roi4XVV1Ho6AcLa5JieCruaXFmPZKND5P/Z\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="699b4f96 d63f 46ea a581 2b3d95eceb6a"\n        title=""\n        src="/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-eb775.jpg"\n        srcset="/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-7983d.jpg 200w,\n/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-81a85.jpg 400w,\n/static/699b4f96-d63f-46ea-a581-2b3d95eceb6a-e3f96d72c78b317fa832b520f1ef965e-eb775.jpg 594w"\n        sizes="(max-width: 594px) 100vw, 594px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h4 id="共享内存"><a href="#%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>共享内存</h4>\n<ul>\n<li>操作系统建立一块共享内存，并将其映射到每个进程的地址空间上，进程就可以直接对这块共享内存进行读写。</li>\n<li>共享内存是最快的进程通信方式。</li>\n</ul>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-79142.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 575px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 64.34782608695653%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHXViGTD//EABoQAAIDAQEAAAAAAAAAAAAAAAECABESAyH/2gAIAQEAAQUCd6h6eK1qRMnQn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAARIUEQElGBsf/aAAgBAQAGPwKdEi9GFubFP//EABsQAAMAAgMAAAAAAAAAAAAAAAABESFBMVGB/9oACAEBAAE/IalEysugnTwOQyl1yELpWPFATB//2gAMAwEAAgADAAAAECzv/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEBAAIDAAMAAAAAAAAAAAABEQAhQVFhMYHB/9oACAEBAAE/EKVnSE9N9w9lJw39YyhAaAPHeGkHzJy5uIAmul7/ADIEdvcz/9k=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="7be0abf9 687c 4451 becd 626b0be7ec22"\n        title=""\n        src="/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-79142.jpg"\n        srcset="/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-91d70.jpg 200w,\n/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-70267.jpg 400w,\n/static/7be0abf9-687c-4451-becd-626b0be7ec22-f978c8460b2da9a89d9d7e6d18af5e68-79142.jpg 575w"\n        sizes="(max-width: 575px) 100vw, 575px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="三、死锁"><a href="#%E4%B8%89%E3%80%81%E6%AD%BB%E9%94%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三、死锁</h1>\n<h2 id="死锁的必要条件"><a href="#%E6%AD%BB%E9%94%81%E7%9A%84%E5%BF%85%E8%A6%81%E6%9D%A1%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁的必要条件</h2>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-454b7.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 560px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 45.53571428571428%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABGUlEQVQoz21Si26DMAzs//9hJzF1ECAJEJ7iDV7ONFE2aslgzvbJPvM4z5NgwzDQNE0cO6zve/YQC3NN03jM4Q8XiCShur4KjuPgd5ZlJIS4Nc3zTLnNpdYxiDPkPWHXdbRt258p0Ogawk3yPPckWisqq8p/e8JxHP1kDtv3/SZD27YUx7EnKMuScinfNQGhtCCmDJvr2nDDfw2hnzGGlFKsY5hjQnymVquqMn6yax3N7nSFu2ZjKqsxVj8/H2VbV1rfGjpbgVn/ZCBfluWGP/D4jiL6ej55mtfPizUSIqFCFyyFlIq1S+yfIO2akEHbHDAcKE1TKoryWhlKogmkKARRZGOlNE+Ao+DamBSHQwzcYdM8cQ0wEP4Cy168PugFLgAAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="c037c901 7eae 4e31 a1e4 9d41329e5c3e"\n        title=""\n        src="/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-454b7.png"\n        srcset="/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-e8c6f.png 200w,\n/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-5aee6.png 400w,\n/static/c037c901-7eae-4e31-a1e4-9d41329e5c3e-75cb3111be7af922c9876acff6ed9edb-454b7.png 560w"\n        sizes="(max-width: 560px) 100vw, 560px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol>\n<li>互斥：每个资源要么已经分配给了一个进程，要么就是可用的。</li>\n<li>占有和等待：已经得到了某个资源的进程可以再请求新的资源。</li>\n<li>不可抢占：已经分配给一个进程的资源不能强制性地被抢占，它只能被占有它的进程显式地释放。</li>\n<li>环路等待：有两个或者两个以上的进程组成一条环路，该环路中的每个进程都在等待下一个进程所占有的资源。</li>\n</ol>\n<h2 id="死锁的处理方法"><a href="#%E6%AD%BB%E9%94%81%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁的处理方法</h2>\n<h3 id="鸵鸟策略"><a href="#%E9%B8%B5%E9%B8%9F%E7%AD%96%E7%95%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>鸵鸟策略</h3>\n<ul>\n<li>把头埋在沙子里，假装根本没发生问题。</li>\n<li>因为解决死锁问题的代价很高，因此鸵鸟策略这种不采取任务措施的方案会获得更高的性能。当发生死锁时不会对用户造成多大影响，或发生死锁的概率很低，可以采用鸵鸟策略。</li>\n<li>大多数操作系统，包括 Unix，Linux 和 Windows，处理死锁问题的办法仅仅是忽略它。</li>\n</ul>\n<h3 id="死锁检测与死锁恢复"><a href="#%E6%AD%BB%E9%94%81%E6%A3%80%E6%B5%8B%E4%B8%8E%E6%AD%BB%E9%94%81%E6%81%A2%E5%A4%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁检测与死锁恢复</h3>\n<p>不试图阻止死锁，而是当检测到死锁发生时，采取措施进行恢复。</p>\n<p><strong>（一）每种类型一个资源的死锁检测</strong></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-aa6cd.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 597px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 51.08877721943048%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABL0lEQVQoz4WSh27DMAxE/f8faSce8N6z8WD12MpQULQlIJiSyePdSd55npLnuSzLIk3TyMfrJTaGYTBr1Py6rvuc/LflAZhlmXR9L49HIPt+3I1NU0tRlj+A/grvuk7pDdi6rhJFoYzjKG3byjRNUhqwPC/0jBobqKGG87qutRZ1kPOs5LbrxPd9bUySRMHKspCqqr+Ai/wGtDWAoo59FEVyHAbQpVt+y+sMOCxszPOsTGxYRm4ArAxdQ5/PUF7mUuI4fgOgmTMbVVVJGIb3fjc9vh9or+canaap5kjhhpnIgi2sXA8ZyL99343UQ1XpLVswvnhIMZ7CCFD8YcC2bTcgzX4Q6H9ylh34Buh6xNT/gh6XuTJ0wfCG28IzpvOFHfLILdvavE9qeac8NxfjE2DoCFJsKKtrAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="b1fa0453 a4b0 4eae a352 48acca8fff74"\n        title=""\n        src="/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-aa6cd.png"\n        srcset="/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-b82a2.png 200w,\n/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-6c81a.png 400w,\n/static/b1fa0453-a4b0-4eae-a352-48acca8fff74-ed62efa7dfe1ae8f19c9a065e67ba11d-aa6cd.png 597w"\n        sizes="(max-width: 597px) 100vw, 597px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>上图为资源分配图，其中方框表示资源，圆圈表示进程。资源指向进程表示该资源已经分配给该进程，进程指向资源表示进程请求获取该资源。</li>\n<li>图 a 可以抽取出环，如图 b 它满足了环路等待条件，因此会发生死锁。</li>\n<li>每种类型一个资源的死锁检测算法是通过检测有向图是否存在环来实现，从一个节点出发进行深度优先搜索，对访问过的节点进行标记，如果访问了已经标记的节点，就表示有向图存在环，也就是检测到死锁的发生。</li>\n</ul>\n<p><strong>（二）每种类型多个资源的死锁检测</strong></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-fda5b7573cc9383034d75d8993277ed5-1857e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 448px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 49.10714285714286%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABUUlEQVQoz3VSi26DMAzs//9emehaVKllC+FdSoFSHrdzRGjYtEiWk9g539nZgWueZ4zjCLufaO6al7Pr/8vZycYepmlEEARo2g5t2yJJEjRNs8Sm1QenE+MdHo8aRVnSP1bQnQUbhheOxyMOhwP2ngfP2xsvD+waTc4nYx80D77vmzdax29AqSgstNaIySiONaIowuVyQV4UK/Pns4PmvY4TpGkCpZTJUyr6K7mua9qbtjUrkwdUtxvu9/umb33fs9Bz884wrComVxXyvGD1lGfZ56aQW71mz7Isw43gaZZvwDY9FJAwvOIahpR6pewY5/MZBUHdpdS3uRe5YfiFYmmJO1gD2HWdAU3ZQ5FV01IyWYfBL2XjJUFKmSzZS6773TY9jFhVJAsrAZMB2WRpi8iUIYgXQFEh3vZ5BbQshmEwAJIg+75/rUnuEGzc2u9P/wPreAXO71uYWAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="e1eda3d5 5ec8 4708 8e25 1a04c5e11f48"\n        title=""\n        src="/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-fda5b7573cc9383034d75d8993277ed5-1857e.png"\n        srcset="/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-fda5b7573cc9383034d75d8993277ed5-15195.png 200w,\n/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-fda5b7573cc9383034d75d8993277ed5-82e6d.png 400w,\n/static/e1eda3d5-5ec8-4708-8e25-1a04c5e11f48-fda5b7573cc9383034d75d8993277ed5-1857e.png 448w"\n        sizes="(max-width: 448px) 100vw, 448px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>\n<p>上图中，有三个进程四个资源，每个数据代表的含义如下：</p>\n<ul>\n<li>E 向量：资源总量</li>\n<li>A 向量：资源剩余量</li>\n<li>C 矩阵：每个进程所拥有的资源数量，每一行都代表一个进程拥有资源的数量</li>\n<li>R 矩阵：每个进程请求的资源数量</li>\n</ul>\n</li>\n<li>进程 P<sub>1</sub> 和 P<sub>2</sub> 所请求的资源都得不到满足，只有进程 P<sub>3</sub> 可以，让 P<sub>3</sub> 执行，之后释放 P<sub>3</sub> 拥有的资源，此时 A = (2 2 2 0)。P<sub>2</sub> 可以执行，执行后释放 P<sub>2</sub> 拥有的资源，A = (4 2 2 1) 。P<sub>1</sub> 也可以执行。所有进程都可以顺利执行，没有死锁。</li>\n<li>\n<p>算法总结如下：每个进程最开始时都不被标记，执行过程有可能被标记。当算法结束时，任何没有被标记的进程都是死锁进程。</p>\n<ol>\n<li>寻找一个没有标记的进程 P<sub>i</sub>，它所请求的资源小于等于 A。</li>\n<li>如果找到了这样一个进程，那么将 C 矩阵的第 i 行向量加到 A 中，标记该进程，并转回 1。</li>\n<li>如果没有这样一个进程，算法终止。</li>\n</ol>\n</li>\n</ul>\n<p><strong>（三）死锁恢复</strong></p>\n<ul>\n<li>利用抢占恢复</li>\n<li>利用回滚恢复</li>\n<li>通过杀死进程恢复</li>\n</ul>\n<h3 id="死锁预防"><a href="#%E6%AD%BB%E9%94%81%E9%A2%84%E9%98%B2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁预防</h3>\n<p>在程序运行之前预防发生死锁。</p>\n<p><strong>（一）破坏互斥条件</strong></p>\n<p>例如假脱机打印机技术允许若干个进程同时输出，唯一真正请求物理打印机的进程是打印机守护进程。</p>\n<p><strong>（二）破坏占有和等待条件</strong></p>\n<p>一种实现方式是规定所有进程在开始执行前请求所需要的全部资源。</p>\n<p><strong>（三）破坏不可抢占条件</strong></p>\n<p><strong>（四）破坏环路等待</strong></p>\n<p>给资源统一编号，进程只能按编号顺序来请求资源。</p>\n<h3 id="死锁避免"><a href="#%E6%AD%BB%E9%94%81%E9%81%BF%E5%85%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>死锁避免</h3>\n<p>在程序运行时避免发生死锁。</p>\n<p><strong>（一）安全状态</strong></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/ed523051-608f-4c3f-b343-383e2d194470-72ae2b390bb3628b373265661676079d-a40ca.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 647px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 27.51159196290572%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABG0lEQVQY01VQgW6CQAzl///MOSACERWRAAciHHKHY3GivrVNZtwlhL729b22zjR9oa5rNE0Dfj/XK06nE5SqMM8z7vc7uq5DWZaYpkk4vdZSN8YKNsOAqqqgdQ9nsfhAGIbYpykGKvi+T5+H3W4nJinll8slNpuNGBdFDtd1hcciLZlz7HmecJ1PKjKpbVuc+x6rVYB9kghmgSzLEEWRTMmT53mOOI7lzzk2Xa9jHEiM6w4XExIYBoNvWik9HBAToSdxa600BEGI4/EIO460lhYBNhoJj6PFdruVDY0Z4HBSqRJ/j29WlgXeX0H3u93mF1ZKYbxcXpgn7TotsfPe+Hw8ZE1el0k8JU/Et9Wa8LmXmIewxoj5v/7nE7/+UsAYWTNCRQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="ed523051 608f 4c3f b343 383e2d194470"\n        title=""\n        src="/static/ed523051-608f-4c3f-b343-383e2d194470-72ae2b390bb3628b373265661676079d-a40ca.png"\n        srcset="/static/ed523051-608f-4c3f-b343-383e2d194470-72ae2b390bb3628b373265661676079d-3426a.png 200w,\n/static/ed523051-608f-4c3f-b343-383e2d194470-72ae2b390bb3628b373265661676079d-f3a4f.png 400w,\n/static/ed523051-608f-4c3f-b343-383e2d194470-72ae2b390bb3628b373265661676079d-a40ca.png 647w"\n        sizes="(max-width: 647px) 100vw, 647px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>图 a 的第二列 Has 表示已拥有的资源数，第三列 Max 表示总共需要的资源数，Free 表示还有可以使用的资源数。从图 a 开始出发，先让 B 拥有所需的所有资源（图 b），运行结束后释放 B，此时 Free 变为 5（图 c）；接着以同样的方式运行 C 和 A，使得所有进程都能成功运行，因此可以称图 a 所示的状态时安全的。</li>\n<li>定义：如果没有死锁发生，并且即使所有进程突然请求对资源的最大需求，也仍然存在某种调度次序能够使得每一个进程运行完毕，则称该状态是安全的。</li>\n<li>安全状态的检测与死锁的检测类似，因为安全状态必须要求不能发生死锁。下面的银行家算法与死锁检测算法非常类似，可以结合着做参考对比。</li>\n</ul>\n<p><strong>（二）单个资源的银行家算法</strong></p>\n<p>一个小城镇的银行家，他向一群客户分别承诺了一定的贷款额度，算法要做的是判断对请求的满足是否会进入不安全状态，如果是，就拒绝请求；否则予以分配。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-849e1f710f9a7cf648c07c69f81a5da3-f79be.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 567px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 40.74074074074074%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOElEQVQoz1WSia6CQAxF/f+vM66gbE9kFTAIAQLIfb1VUJtMhultT0tnVpgm0Nq2QVEUeDweep7EP721qqqQZRmapv3RxnHUeGp936u2ej6fCrLOZ6zXa5xOpwVE7XK54Cza8XiE53mYjQDbcdR/OByQ5/kLyCphGIhgKIwAgmbgbreF57qI4hi+7y/Armux2WxhGAaiKEIuTS3AJElgmqaubyA1+izLgn+9IgiuP8C5Oza0AJnMCuxOE6WLbyCTXNcRWCgr+ADbFvv9XvPCMJSx3V/AWfT+PDgyk6qu8W28EMe2EUhS13WLn3Mu8gKm/HJZlhiG4QOk0cnBMpAiu+OiFeKv34VUG0bdGXu7pejfMJ4VWMnVW7aFSLpI0psG8SlwtnEcIU1T/c4EzJ2FOSa+jlRiqc/Af1otYUjUvKoGAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="d160ec2e cfe2 4640 bda7 62f53e58b8c0"\n        title=""\n        src="/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-849e1f710f9a7cf648c07c69f81a5da3-f79be.png"\n        srcset="/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-849e1f710f9a7cf648c07c69f81a5da3-5ae21.png 200w,\n/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-849e1f710f9a7cf648c07c69f81a5da3-d9cbe.png 400w,\n/static/d160ec2e-cfe2-4640-bda7-62f53e58b8c0-849e1f710f9a7cf648c07c69f81a5da3-f79be.png 567w"\n        sizes="(max-width: 567px) 100vw, 567px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>上图 c 为不安全状态，因此算法会拒绝之前的请求，从而避免进入图 c 中的状态。</p>\n<p><strong>（三）多个资源的银行家算法</strong></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-7ae7ff0a84197797b63e38184a466fc6-352a0.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 511px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 53.62035225048923%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABl0lEQVQoz22SDXOCMAyG/f8/y52OOydCEeRrg4mAgG4Iiu4GZkkmDHS9K9AmPH2TviPAcb1eoR1FUXTftN+PHY9HqOt6EL//f9Qu9vs9eN4b6LoOYRjCer2GoixvoJLXq9UKfN/neJKkHGuaZgAd0aM6ncAwDNA0jYGLhYJwnxPq+htc1+1imhCcW9fNg1IG0gme54G4JZqWBaZpQpqmXQvm8zlYuE+TwLZtwS5LwXEcCKNoqJCAtm2DJEmsQKgqAmQIgoATDoccxuMnhlLJQmiwXC4hWL/DdDoFBfMfgK9YkqIorIxU0ncLLBD4jIfJssxAelNeVVV42KG7xAHQvQG5JCxdxRnH8R/wWWKFVC5NyuuPhx5SybPZC/dRRfB9yZPJhIGknnJIKf3Xt9XgliO0ga4bXDrBhVDh4zPnhO02xp7p4FAML4GgBLxcvv5XyLbBfuR5zsYt0Xs0T2gl2qdZ4n5V/a7LknIKOJ/PvG6NPlBIpqa+RGiBLMvQEhmbN8t2qHALwWYDaZLgOmWbtHlxHDG0D/wBLnk48VsvIbYAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="62e0dd4f 44c3 43ee bb6e fedb9e068519"\n        title=""\n        src="/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-7ae7ff0a84197797b63e38184a466fc6-352a0.png"\n        srcset="/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-7ae7ff0a84197797b63e38184a466fc6-1fc3e.png 200w,\n/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-7ae7ff0a84197797b63e38184a466fc6-43cce.png 400w,\n/static/62e0dd4f-44c3-43ee-bb6e-fedb9e068519-7ae7ff0a84197797b63e38184a466fc6-352a0.png 511w"\n        sizes="(max-width: 511px) 100vw, 511px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>上图中有五个进程，四个资源。左边的图表示已经分配的资源，右边的图表示还需要分配的资源。最右边的 E、P 以及 A 分别表示：总资源、已分配资源以及可用资源，注意这三个为向量，而不是具体数值，例如 A=(1020)，表示 4 个资源分别还剩下 1/0/2/0。</p>\n<p>检查一个状态是否安全的算法如下：</p>\n<ul>\n<li>查找右边的矩阵是否存在一行小于等于向量 A。如果不存在这样的行，那么系统将会发生死锁，状态是不安全的。</li>\n<li>假若找到这样一行，将该进程标记为终止，并将其已分配资源加到 A 中。</li>\n<li>重复以上两步，直到所有进程都标记为终止，则状态时安全的。</li>\n</ul>\n<p>如果一个状态不是安全的，也需要拒绝进入这个状态。</p>\n<h1 id="四、内存管理"><a href="#%E5%9B%9B%E3%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>四、内存管理</h1>\n<h2 id="虚拟内存"><a href="#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>虚拟内存</h2>\n<p>每个程序拥有自己的地址空间，这个地址空间被分割成多个块，每一块称为一页。这些页被映射到物理内存，但不需要映射到连续的物理内存，也不需要所有页都必须在物理内存中。当程序引用到一部分不在物理内存中的地址空间时，由硬件执行必要的映射，将缺失的部分装入物理内存并重新执行失败的指令。</p>\n<h2 id="分页与分段"><a href="#%E5%88%86%E9%A1%B5%E4%B8%8E%E5%88%86%E6%AE%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分页与分段</h2>\n<h3 id="分页"><a href="#%E5%88%86%E9%A1%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分页</h3>\n<p>大部分虚拟内存系统都使用分页技术。把由程序产生的地址称为虚拟地址，它们构成了一个虚拟地址空间。例如有一台计算机可以产生 16 位地址，它的虚拟地址空间为 0~64K，然而计算机只有 32KB 的物理内存，因此虽然可以编写 64KB 的程序，但它们不能被完全调入内存运行。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-ced8c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 491px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 89.81670061099797%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB0ElEQVQ4y5WUC2+CUAyF/f+/yyWaDZ2g8n4JLoATUROjgp613XS4wZw3aVC4fPf0tKWD2jqfz3I9nU5YLpfY7/fX+/Wo7/25Ok3AqirR7/eRpFnjy22wVmCeL6EoCoIwRJZlWK1WOB6PEqz+YYVZlmIymUgogwEsyxbwbDbDbrd7HJgmCZ5fnqHrOqbTKRaLxZ9e1tmtKQuMYjwek7LoBvjLy9q91pQZZJgmDMOA7/s4HA7XPb7vIQxn34fc9TBNMCDvGGhZlhQnz3McqCjcAU/dLl5fR42qG4Hv5Bkr1LQxer0ekiRFmqby37ZtTKlYnuehaqh4q8LhcEjpfipkWBRFAnubz0m9Qh4b/wcW1HdcXQayhxwmpc9exnEEnZ45jvN/4GZdSJUZyKnzy9w6rsfFCCh1VXqy0cPbfvr8XZZH8WmkajAIzECpOillhepohJhS/9mbrcBTVaEoCvlAsLLNZkOHlFJpHkPD0H+10hV4b9ibFh+2Xq8bPxpXhZZlkjeapMen8xxrqirpOY4r1Z5Q2jzX/JyLZn71Ke/NSflNyvM4FuAlbNsR/4IgkGIENB2u60pwD16uDA8Dn+zJb4Hb7RYr8oj9Yp9K8vHRxawPef1j1USePMMAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="7b281b1e 0595 402b ae35 8c91084c33c1"\n        title=""\n        src="/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-ced8c.png"\n        srcset="/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-680fb.png 200w,\n/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-eda79.png 400w,\n/static/7b281b1e-0595-402b-ae35-8c91084c33c1-efa52d2a70fd2d1c4c8bc36fa499a03e-ced8c.png 491w"\n        sizes="(max-width: 491px) 100vw, 491px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>虚拟地址空间划分成固定大小的页，在物理内存中对应的单元称为页框，页和页框大小通常相同，它们之间通过页表进行映射。</p>\n<p>程序最开始只将一部分页调入页框中，当程序引用到没有在页框的页时，产生缺页中断，进行页面置换，按一定的原则将一部分页框换出，并将页调入。</p>\n<h3 id="分段"><a href="#%E5%88%86%E6%AE%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分段</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-820c834474973a36cb177ae0de091d4c-09bf7.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 452px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 76.76991150442478%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB6UlEQVQ4y4VTaW/aUBDk//+JVv3eAoFGIaAAweYOLjaGqGlwudMYcxgwIAPT3ZcYxYRjpdXq6fnNzu6MAziI3W4n6nK5hD2b+e42mw2m06nvO696Efh4wbndbsXZcRzcJdOQZRnFUgn5QgHfg2H8eX72NT/MwLEuHkPDMNDr9dBqtd6zjU6Hs4PxZPLpze4jw38vAzSNvxgMXtBqt6kOUFU1aLU6anpDZFWtCYajkSVGn88XsG2b6gyz9/XsAauKgng8TiNmCUTH76cnxBN3uIndIplMIZW+R/T6hoB1aKqKUrkMRfmFYrGISuUBBaqr1eptZCb7+mqi3+8LZhyWZdEOGSgDiZpwcoPG4yMWizmxmlNdCGbMlM+uuzm/Q28MFsoTbDwe41z4VOYHnsrcXSKFM5IESZJFhsJXqDcaviYnVT70FdumTeIMh0OxDq7dbne/kmNgguE5YzvO8tNIrO4xsIuAPHIulyclFaiaJkweiV4LL56K/cjHAHnkn2STYOgK4UgUwXAEX75+g16vi7EZmFfChjdN8zJDBkym0siQXfL5ArLE9kcoIgArD2XybAJS5h4x8qlO3rzIkE2aIyA5myOwN8DYbQLNpgGb9ji0RpiQhUwSjP+Wi4BcXdfFer32pWerU+/+A+VFbxnYZZ7sAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="22de0538 7c6e 4365 bd3b 8ce3c5900216"\n        title=""\n        src="/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-820c834474973a36cb177ae0de091d4c-09bf7.png"\n        srcset="/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-820c834474973a36cb177ae0de091d4c-eb2f6.png 200w,\n/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-820c834474973a36cb177ae0de091d4c-ffac0.png 400w,\n/static/22de0538-7c6e-4365-bd3b-8ce3c5900216-820c834474973a36cb177ae0de091d4c-09bf7.png 452w"\n        sizes="(max-width: 452px) 100vw, 452px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>上图为一个编译器在编译过程中建立的多个表，有 4 个表是动态增长的，如果使用分页系统的一维地址空间，动态增长的特点会导致覆盖问题的出现。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-40bf9443bde41cdcfb2575436c38fc05-84ce9.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 581px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 49.22547332185886%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABQElEQVQoz31RCXKEMAzj/z/jEdudhZJwkwDhBjdyMWW202YGcliWZDuoqoqcG6jve5rnmbCO46D7er//9x4URcFE+JxzF/D+yduyLLRtG63r+gsjuCDPcwbt+07jOP7pAjuq6bqOhmG4xN+xQVmWl7K1lhPcmQCROykIp2nis7WGbNsyDu0SbAASrTU9Hg9WNsYQ0tECcSyEiAlh68lwBxHyYIoJ4ZBVTiX0dJpGBkmyqDdNQ1mW0meiOAe50nv0lQnrur56CEKoRq8X5Z5YVGWhGmAg1PvWwGUcR6SU/ikZfZELwBAQVyh5WWZOBAkcikjn36oTi7erZBBg0lqnPBCUkaYp78Y09Hx+UBiGFEUxEyOWZRmfYUanmt9QJRPiV/tAkiTfznwAQwI51uqVEZMeNd6AUuoc1MHn2juX4X0B+uAJIstqY8kAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="e0900bb2 220a 43b7 9aa9 1d5cd55ff56e"\n        title=""\n        src="/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-40bf9443bde41cdcfb2575436c38fc05-84ce9.png"\n        srcset="/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-40bf9443bde41cdcfb2575436c38fc05-1b05b.png 200w,\n/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-40bf9443bde41cdcfb2575436c38fc05-f343a.png 400w,\n/static/e0900bb2-220a-43b7-9aa9-1d5cd55ff56e-40bf9443bde41cdcfb2575436c38fc05-84ce9.png 581w"\n        sizes="(max-width: 581px) 100vw, 581px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ul>\n<li>分段的做法是把每个表分成段，一个段构成一个独立的地址空间。每个段的长度可以不同，并且可以动态增长。</li>\n<li>每个段都需要程序员来划分。</li>\n</ul>\n<h3 id="段页式"><a href="#%E6%AE%B5%E9%A1%B5%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>段页式</h3>\n<ul>\n<li>用分段方法来分配和管理虚拟存储器。程序的地址空间按逻辑单位分成基本独立的段，而每一段有自己的段名，再把每段分成固定大小的若干页。</li>\n<li>用分页方法来分配和管理实存。即把整个主存分成与上述页大小相等的存储块，可装入作业的任何一页。</li>\n<li>程序对内存的调入或调出是按页进行的，但它又可按段实现共享和保护。</li>\n</ul>\n<h3 id="分页与分段区别"><a href="#%E5%88%86%E9%A1%B5%E4%B8%8E%E5%88%86%E6%AE%B5%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分页与分段区别</h3>\n<ul>\n<li>对程序员的透明性：分页透明，但是分段需要程序员显示划分每个段。</li>\n<li>地址空间的维度：分页是一维地址空间，分段是二维的。</li>\n<li>大小是否可以改变：页的大小不可变，段的大小可以动态改变。</li>\n<li>出现的原因：分页主要用于实现虚拟内存，从而获得更大的地址空间；分段主要是为了使程序和数据可以被划分为逻辑上独立的地址空间并且有助于共享和保护。</li>\n</ul>\n<h2 id="分页系统地址映射"><a href="#%E5%88%86%E9%A1%B5%E7%B3%BB%E7%BB%9F%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>分页系统地址映射</h2>\n<ul>\n<li>内存管理单元（MMU）：管理着虚拟地址空间和物理内存的转换。</li>\n<li>页表（Page table）：页（虚拟地址空间）和页框（物理内存空间）的映射表。例如下图中，页表的第 0 个表项为 010，表示第 0 个页映射到第 2 个页框。页表项的最后一位用来标记页是否在内存中。</li>\n</ul>\n<p>下图的页表存放着 16 个页，这 16 个页需要用 4 个比特位来进行索引定位。因此对于虚拟地址（0010 000000000100），前 4 位是用来存储页面号，而后 12 位存储在页中的偏移量。</p>\n<p>（0010 000000000100）根据前 4 位得到页号为 2，读取表项内容为（110 1），它的前 3 为为页框号，最后 1 位表示该页在内存中。最后映射得到物理内存地址为（110 000000000100）。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-0f06a.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 643px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 108.24261275272163%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACrElEQVQ4y6VViZLaMAzl//9l+w3lKiQQjiVJZ3ch4UgIJJzhPlU9FQeYhZ3tVDPGji0/S3qSSBHL6XSixWIhY7Va0Xq9pvVmQxseS/7GHtayfxlKP45j2u12pCSFH2zgAMDj0Yh83yfP88j3fGo2m+Q4DvX7fdnHPBgM6Hg80uFwkOG6DlmmScNheAWEFRCXL5dKZWq8vlK1WqVGo0EVo0L1ep0qlQrVajWybVt0z+e/VhlGmX68vJDfD66Ay+XyonTml4bJiKJIXIOb2+1W1kpPzbC62+3K+SdAuILDbCZDmqZTnS3CJQWqPFGA0Fd372J4BTxQu9OmTCZ9AazLPs6fASL+au+hhZ1Oh/L5vMQSsfsvQLAGlzVNExJAChQVIMatPATc7/fJJgSAxWJBWLYs6w5wPp/TVrJi/RwQ+dd2XXEP1sLlXDZLul5KXAYpeNjmB/AYQhKGkZw9tHA6nfLrcZIG6fRP0ooa1aq1O0CTQ1D4lSfHbbMh5+cxVMGG9Ho9KhQKVGPrlMuqJOH6gTPh/FUMb0mBBIOAdCYFVfH+8SEhmc1mSRz/iWW4hTrWtCKXlEEm16jv98lptaSWv502UMQhWMTFDFeKwTVsWqaUYAuAHNtvWwhAWIcLUOhwtYCcMAxpEASck4a4/xXgw9KL2UK0Il3XJY5oX7b9m/vhNsnHR4D4xvoT4IpnMGtbtuQjLEcXgaDJ3sZQgb6/vZHOZToaja+AuAT3hF1Ol9v+V2ZlEGSUDakeEHUrtm1RLpeTLp8AqvYEAiRu3JWxhpXIS/RF1R/H4/Fdx4Yu7iQuw/Q4nrPJkeQbqibmqkFs8A3mscbA2WQykYE1gG6LIqXisN2s2ZUGW+NRwKxGXKdIn4CZ9thCMB7xZZz7vif/HwBFBrjcB/rc/iF/AE9fhoRBQysJAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="cf4386a1 58c9 4eca a17f e12b1e9770eb"\n        title=""\n        src="/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-0f06a.png"\n        srcset="/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-66246.png 200w,\n/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-2dbe7.png 400w,\n/static/cf4386a1-58c9-4eca-a17f-e12b1e9770eb-3f3bbb9c057bc38c7b79ab64720ad9c1-0f06a.png 643w"\n        sizes="(max-width: 643px) 100vw, 643px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="页面置换算法"><a href="#%E9%A1%B5%E9%9D%A2%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>页面置换算法</h2>\n<p>在程序运行过程中，如果要访问的页面不在内存中，就发生缺页中断从而将该页调入内存中。此时如果内存已无空闲空间，系统必须从内存中调出一个页面到磁盘对换区中来腾出空间。</p>\n<p>页面置换算法的主要目标是使页面置换频率最低（也可以说缺页率最低）。</p>\n<h3 id="最佳"><a href="#%E6%9C%80%E4%BD%B3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最佳</h3>\n<blockquote>\n<p>Optimal</p>\n</blockquote>\n<p>所选择的被换出的页面将是最长时间内不再被访问，通常可以保证获得最低的缺页率。</p>\n<p>是一种理论上的算法，因为无法知道一个页面多长时间不再被访问。</p>\n<p>举例：一个系统为某进程分配了三个物理块，并有如下页面引用序列：</p>\n<div align="center"><img src="https://latex.codecogs.com/gif.latex?7&#xFF0C;0&#xFF0C;1&#xFF0C;2&#xFF0C;0&#xFF0C;3&#xFF0C;0&#xFF0C;4&#xFF0C;2&#xFF0C;3&#xFF0C;0&#xFF0C;3&#xFF0C;2&#xFF0C;1&#xFF0C;2&#xFF0C;0&#xFF0C;1&#xFF0C;7&#xFF0C;0&#xFF0C;1"></div>\n<p>开始运行时，先将 7, 0, 1 三个页面装入内存。当进程要访问页面 2 时，产生缺页中断，会将页面 7 换出，因为页面 7 再次被访问的时间最长。</p>\n<h3 id="先进先出"><a href="#%E5%85%88%E8%BF%9B%E5%85%88%E5%87%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>先进先出</h3>\n<blockquote>\n<p>FIFO, First In First Out</p>\n</blockquote>\n<p>所选择换出的页面是最先进入的页面。</p>\n<p>该算法会将那些经常被访问的页面也被换出，从而使缺页率升高。</p>\n<h3 id="最近最久未使用"><a href="#%E6%9C%80%E8%BF%91%E6%9C%80%E4%B9%85%E6%9C%AA%E4%BD%BF%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最近最久未使用</h3>\n<blockquote>\n<p>LRU, Least Recently Used</p>\n</blockquote>\n<p>虽然无法知道将来要使用的页面情况，但是可以知道过去使用页面的情况。LRU 将最近最久未使用的页面换出。</p>\n<p>可以用栈来实现该算法，栈中存储页面的页面号。当进程访问一个页面时，将该页面的页面号从栈移除，并将它压入栈顶。这样，最近被访问的页面总是在栈顶，而最近最久未使用的页面总是在栈底。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/eb859228-c0f2-4bce-910d-d9f76929352b-4abd556878ea4eca029278a6f4588526-8163f.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 537px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 30.91247672253259%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABAElEQVQY0z2Qh47EIAxE9///L4WQrkB6uEhROpq1WR1Ilh+MGYw/9n2x7zue58V9XY7v+8F5npRvvM+Dg85O0i4Ka63LrFn7ej6OA7w+27ahbVssy4K+74m1Z455njEMA7quwzAOmKYRRVGgaRqnMSviPM9/huu6QinlLnERB7PSGnmWQWuFsiwhZeoyG6dpiiRJXCPMbMrZG7IJF9Z1jTiK0NADUkoqkqiqCoUzlD+NaqMo9hyGoTNk3Rkas/gviFhAiJi60giCgPYxsix3eiKE64q1mM4F7f85o59w9jNkYaa58Rd4hsb8Oeaup2nyM+QzYwxa3Xrmu+NINTRvXl+m5L5Sgnz9GgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="eb859228 c0f2 4bce 910d d9f76929352b"\n        title=""\n        src="/static/eb859228-c0f2-4bce-910d-d9f76929352b-4abd556878ea4eca029278a6f4588526-8163f.png"\n        srcset="/static/eb859228-c0f2-4bce-910d-d9f76929352b-4abd556878ea4eca029278a6f4588526-e0dce.png 200w,\n/static/eb859228-c0f2-4bce-910d-d9f76929352b-4abd556878ea4eca029278a6f4588526-184d7.png 400w,\n/static/eb859228-c0f2-4bce-910d-d9f76929352b-4abd556878ea4eca029278a6f4588526-8163f.png 537w"\n        sizes="(max-width: 537px) 100vw, 537px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="时钟"><a href="#%E6%97%B6%E9%92%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>时钟</h3>\n<blockquote>\n<p>Clock</p>\n</blockquote>\n<p>需要用到一个访问位，当一个页面被访问时，将访问位置为 1。</p>\n<p>首先，将内存中的所有页面链接成一个循环队列，当缺页中断发生时，检查当前指针所指向页面的访问位，如果访问位为 0，就将该页面换出；否则将该页的访问位设置为 0，给该页面第二次的机会，移动指针继续检查。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-f978d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 565px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 56.63716814159292%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABYklEQVQoz32TW3OCMBCF+f8/qT60nVp9aPvkSDujnQoVIaCIoOANTnN2Ggpo3ZklhCQn316woK2qKvGyLMXjOEZRFKj0Gudm3XjzjHk3ZjUnnuchyzIEQSCj4zhI0xTXLi3/ucDiJM9zodrtdjidTvUGUlJ4vV63KLrWIuSDQr7vX2w8HA5QSiEMQ5mrwIfjunBmM7h6XCwWclmLkI8kSbDf7+sFhsRQt9stzucz4tVKxo93G73eHQaDIR4f7vHU7yOMli1KESRFUeQ1GQ+b0GkkyXX435pqOHjGy+sbvjTl53QK9UtvRCVk0pnkd3PCPDIC2maTYDKZYDwew7ZtjEYjKSSBomX0l0OGxo+mRZpGMR5q5on0x+NRQJh/FtWkzGqW3XFcTbEREW6az+c1ebMfb1W7JcjbeJAVpyCrzHzesm7DW92uVyqAp4tAUbZEFEXiK11ppUJ5X2rneppmF3/NDzlbVVs2K8QOAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="5f5ef0b6 98ea 497c a007 f6c55288eab1"\n        title=""\n        src="/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-f978d.png"\n        srcset="/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-a539b.png 200w,\n/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-b8a14.png 400w,\n/static/5f5ef0b6-98ea-497c-a007-f6c55288eab1-f5b3b4f58918ea2f0479df3182ffd757-f978d.png 565w"\n        sizes="(max-width: 565px) 100vw, 565px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="设备管理-1"><a href="#%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设备管理</h1>\n<h2 id="磁盘调度算法"><a href="#%E7%A3%81%E7%9B%98%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>磁盘调度算法</h2>\n<ul>\n<li>当多个进程同时请求访问磁盘时，需要进行磁盘调度来控制对磁盘的访问。</li>\n<li>磁盘调度的主要目标是使磁盘的平均寻道时间最少。</li>\n</ul>\n<h3 id="先来先服务-1"><a href="#%E5%85%88%E6%9D%A5%E5%85%88%E6%9C%8D%E5%8A%A1-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>先来先服务</h3>\n<blockquote>\n<p>FCFS, First Come First Served</p>\n</blockquote>\n<p>根据进程请求访问磁盘的先后次序来进行调度。优点是公平和简单，缺点也很明显，因为未对寻道做任何优化，使平均寻道时间可能较长。</p>\n<h3 id="最短寻道时间优先"><a href="#%E6%9C%80%E7%9F%AD%E5%AF%BB%E9%81%93%E6%97%B6%E9%97%B4%E4%BC%98%E5%85%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最短寻道时间优先</h3>\n<blockquote>\n<p>SSTF, Shortest Seek Time First</p>\n</blockquote>\n<p>要求访问的磁道与当前磁头所在磁道距离最近的优先进行调度。这种算法并不能保证平均寻道时间最短，但是比 FCFS 好很多。</p>\n<h3 id="扫描算法"><a href="#%E6%89%AB%E6%8F%8F%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>扫描算法</h3>\n<blockquote>\n<p>SCAN</p>\n</blockquote>\n<ul>\n<li>SSTF 会出现饥饿现象。考虑以下情况，新进程请求访问的磁道与磁头所在磁道的距离总是比一个在等待的进程来的近，那么等待的进程会一直等待下去。</li>\n<li>SCAN 算法在 SSTF 算法之上考虑了磁头的移动方向，要求所请求访问的磁道在磁头当前移动方向上才能够得到调度。因为考虑了移动方向，那么一个进程请求访问的磁道一定会得到调度。</li>\n<li>当一个磁头自里向外移动时，移到最外侧会改变移动方向为自外向里，这种移动的规律类似于电梯的运行，因此又常称 SCAN 算法为电梯调度算法。</li>\n</ul>\n<h3 id="循环扫描算法"><a href="#%E5%BE%AA%E7%8E%AF%E6%89%AB%E6%8F%8F%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>循环扫描算法</h3>\n<blockquote>\n<p>CSCAN</p>\n</blockquote>\n<p>CSCAN 对 SCAN 进行了改动，要求磁头始终沿着一个方向移动。</p>\n<h1 id="链接"><a href="#%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>链接</h1>\n<h2 id="编译系统"><a href="#%E7%BC%96%E8%AF%91%E7%B3%BB%E7%BB%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>编译系统</h2>\n<p>以下是一个 hello.c 程序：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16732045124060168000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#include <stdio.h>\n\nint main()\n{\n    printf(&quot;hello, world\\n&quot;);\n    return 0;\n}`, `16732045124060168000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="c"><pre style="counter-reset: linenumber NaN" class="language-c line-numbers"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>\n\n<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"hello, world\\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>在 Unix 系统上，由编译器把源文件转换为目标文件。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91590805295283320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`gcc -o hello hello.c`, `91590805295283320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">gcc -o hello hello.c</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>这个过程大致如下：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-f913e.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 18.545454545454543%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd2EQH//xAAXEAADAQAAAAAAAAAAAAAAAAAAARAR/9oACAEBAAEFAsjP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAQAGPwKaz//EABkQAQACAwAAAAAAAAAAAAAAAAEAESFhcf/aAAgBAQABPyHplbYG8BP/2gAMAwEAAgADAAAAEIv/AP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQADAQEAAAAAAAAAAAAAAAEAESExgf/aAAgBAQABPxB2e+9mxOFbcNQSuDP/2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="b396d726 b75f 4a32 89a2 03a7b6e19f6f"\n        title=""\n        src="/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-dfbfc.jpg"\n        srcset="/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-75a98.jpg 200w,\n/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-1f451.jpg 400w,\n/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-dfbfc.jpg 800w,\n/static/b396d726-b75f-4a32-89a2-03a7b6e19f6f-251ca50ea259357171f06665b52b468e-f913e.jpg 1100w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol>\n<li>预处理阶段：处理以 # 开头的预处理命令；</li>\n<li>编译阶段：翻译成汇编程序；</li>\n<li>汇编阶段：将汇编程序翻译可重定向目标程序，它是二进制的；</li>\n<li>链接阶段：将可重定向目标程序和 printf.o 等单独预编译好的目标文件进行合并，得到最终的可执行目标程序。</li>\n</ol>\n<h2 id="目标文件"><a href="#%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>目标文件</h2>\n<ol>\n<li>可执行目标文件：可以直接在内存中执行；</li>\n<li>可重定向目标文件：可与其他可重定向目标文件在链接阶段合并，创建一个可执行目标文件；</li>\n<li>共享目标文件：可以在运行时被动态加载进内存并链接；</li>\n</ol>\n<h2 id="静态链接"><a href="#%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>静态链接</h2>\n<p>静态连接器以一组可重定向目标文件为输入，生成一个完全链接的可执行目标文件作为输出。链接器主要完成以下两个任务：</p>\n<ol>\n<li>符号解析：每个符号对应于一个函数、一个全局变量或一个静态变量，符号解析的目的是将每个符号引用与一个符号定义关联起来。</li>\n<li>重定位：编译器和汇编器生成从地址 0 开始的代码和数据节，链接器通过把每个符号定义与一个内存位置关联起来，从而重定位这些节，然后修改所有对这些符号的引用，使得它们指向这个内存位置。</li>\n</ol>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-d358a.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 444px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 75.45045045045046%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3E4FwEf/xAAZEAACAwEAAAAAAAAAAAAAAAAAIQEQEUH/2gAIAQEAAQUCeupOn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABUQAQEAAAAAAAAAAAAAAAAAABAx/9oACAEBAAY/AmP/xAAaEAACAwEBAAAAAAAAAAAAAAAAAREhMUFx/9oACAEBAAE/IfAdrNI9CrAnJ//aAAwDAQACAAMAAAAQEC//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEBAQEAAgMAAAAAAAAAAAABESEAMVGBobH/2gAIAQEAAT8Qff4OdowkMD74QWPyTi8tTW896AyQ/byCyd//2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="47d98583 8bb0 45cc 812d 47eefa0a4a40"\n        title=""\n        src="/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-d358a.jpg"\n        srcset="/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-57274.jpg 200w,\n/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-1aeea.jpg 400w,\n/static/47d98583-8bb0-45cc-812d-47eefa0a4a40-ab240a3c2455130f811ede48a4363e1f-d358a.jpg 444w"\n        sizes="(max-width: 444px) 100vw, 444px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="动态链接"><a href="#%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>动态链接</h2>\n<p>静态库有以下两个问题：</p>\n<ul>\n<li>当静态库更新时那么整个程序都要重新进行链接；</li>\n<li>对于 printf 这种标准函数库，如果每个程序都要有代码，这会极大浪费资源。</li>\n</ul>\n<p>共享库是为了解决静态库的这两个问题而设计的，在 Linux 系统中通常用 .so 后缀来表示，Windows 系统上它们被称为 DLL。它具有以下特点：</p>\n<ol>\n<li>在给定的文件系统中一个库只有一个 .so 文件，所有引用该库的可执行目标文件都共享这个文件，它不会被复制到引用它的可执行文件中；</li>\n<li>在内存中，一个共享库的 .text 节的一个副本可以被不同的正在运行的进程共享。</li>\n</ol>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-9c39e.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 457px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 106.34573304157549%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB92JG1GMFdhH/xAAXEAEBAQEAAAAAAAAAAAAAAAABABEQ/9oACAEBAAEFAmIdmM5kc//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABgQAAIDAAAAAAAAAAAAAAAAAAARECAx/9oACAEBAAY/AraJx//EABsQAAMAAwEBAAAAAAAAAAAAAAABESExURBB/9oACAEBAAE/IW+IpKsQlLu8chjsnjbspvIJJaP/2gAMAwEAAgADAAAAEOgoAv/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB8QAQEBAAEDBQAAAAAAAAAAAAERADEhYaFBUXGR0f/aAAgBAQABPxBkg0fZmTYvjQDCCh9fJ94JuzzTEnTjB7vx08ZU41Kp+YGADtv/2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="76dc7769 1aac 4888 9bea 064f1caa8e77"\n        title=""\n        src="/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-9c39e.jpg"\n        srcset="/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-559da.jpg 200w,\n/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-8367b.jpg 400w,\n/static/76dc7769-1aac-4888-9bea-064f1caa8e77-3eefadc081201c5bbb52c20879c69a6b-9c39e.jpg 457w"\n        sizes="(max-width: 457px) 100vw, 457px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>',
id:"/github/workspace/blog/操作系统原理读书笔记/index.md absPath of file >>> MarkdownRemark",timeToRead:20,frontmatter:{date:"2018-04-01 10:23:49",path:"/os-principle/",tags:"面试, 操作系统",title:"操作系统原理读书笔记",draft:null}}],page:31,pagesSum:37,length:184,prevPath:"/page/30",nextPath:"/page/32"}}}});