webpackJsonp([0xf7d91a34ba69],{1123:function(a,n){a.exports={data:{file:{childImageSharp:{sizes:{base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsSAAALEgHS3X78AAAHlUlEQVRIx11WaWxU1xWewbQlrdofkSIhGiBpMPZ4Vs/2lpm3zupZPOOZ8Sz2YGzANkaAKaYQUrMkLYgiIlxCQjCYQAwYEoMQNJAIFBxaQgUhoCopYceBJo1pKFVDCbOc0/fesOZKV+fM1Tvf/c56R0VYOZW8lvAxtSybvbExAu1+mndGuaDQ2F4rNHVFhCZJZlMeZ1Qrf9Mt+H+qur/ihFORAFA64J0pVTcXVcDmcKFfruIzZ7rY1H89fAZivjbM1MzFxkAnZqWd9M7KJcTmv7zCN44sY+tflm12C79WLxLCqidWN9cwWpYvsfXL13vasZudgm4mgX4hW6h1teRjnrZCwjOzWO/twIR/FjZ7WnEZ35JvcUSeU4gwSXV7W1sJzEH6R8nSRArlXjr6r7S1DqNUvMAzCXCzSfDxDRAUmyDkaoawtEPi1LxHyGLMkby5gEqUy7atjnq1roosAXqE6Yq7DBXa7RLS6HRG8y4hhbwzDiJbj4IkXUwS5e1h07IOorMePUL6ruiKGmRblg2PesJlq9nxrJMMfydIbhIWP9jMPrBLkrIHgXfG0CdmgKMjwFARFKVvHEQo5xUyKDDRN2T7aE17mV5rfZQYm1lM0EQYWUe0aNTxoKl0Qnk5jVqNA/VaFu3SBS7SB7Ju0ougr2KKWg2DBi17mbCaxyghMzgeMTTp2W7CGkTKHshZqn0Q5Osg6opBhAmAzcADY/NheyQJBi2D8mXVehYMOgEsJg9aTIxSN2YTO+ohQ62G6rGZa5AmAjmj0YvzG5vhVP8f4fTO12FtVxfMjTfC6zPbwOsIQNybhK6GlmLCm5DA6cu2aoeSaaOeVheLxRKgpoJcZ5UAly94MeeiQ+jnQtBCcTBTZ8Ght9fDfy58DDdOHIRj2zdA/4uzYWBpZ6Fr6jR8/lfWP8n2usqA2mQgH7msr3Ks0WgEfGvN6lz/q6tgXqgZjgpZOGSLwsldA4CFG4j3rmP/osU47xkdrm5pLfjdETm+p64cf0fJME34HiVFV+VYajF50UGGc/Nnz4XDfW/ArQ09+M++XsCblwD+fQEL356HswuWwdedS+Dg2p5ilZQwa7VrpCHZ9nOl7Ojg44B0hxxg0hbMjx2rh2iwDk4feReKI58hfn8V8c5lwNyXiF+dRbz4Z1jY1g4TJ1rQbnHfc/ORihJDr5q0kw8AyVqDjpeSEpJLAyaMN6HRwMDuTa/B1fcPwcfbBuHc8SPw+cnDsGvzeim7HOg0DpAYoouPBWUMJxUo65y18X4MtbYJOo3zjgQoxwWen1iNDdPmwPu9+2BvfCXsXbQRehf9Hly0B8aN04OuioGqCipvt/hQ5GLzS4Dh0Tdv3+/nvm0qVVUlfUouboOWK8jxmaznMBXIwpbfroWN63th384tcHTfDpj0gg21lQxoK+m8TQGMb5UxAt6OUYSVkUuGK5MPKiuIHicZwWqDmNNqpE6pIFBjpGDxsqXwuxUroWtBN5w4NgSbNvcDIRW61CUFu9UrtV/si7Fjf/ajUmICSvxKgJMtdQxVK2XOU9RpGNBL3VBeQWIqPR3SjR3QOW8xrFmxCnrWbYJMaobEkr1HE/4zIpv4nrK7NIrbpF+tspoYZdpMLte+wNPRu6S1Bs1GqV/1DOqMPFjIMFbq3dg6cyFkGmagqZqHaoOAHF2XZ6ngWg+XBM4RVoLHOWrLVG4uWpo4FvsvfHz6NktFkbT6QafnQGsUoFLHYm1dFj44cgwYPgQVkymkbP6RWl+LNIRjL/uFhltuNjEoYySCXaNUojOsMPSw4aqwa+o9ga5DggiC1RFDmyMG1bYQVlTSIIhRMJq9RaPZJ4VF+DQZ6MCAmOkLurJ/DYiNt/R67VMKs4hrqjL+o+6mjrj0hjBEOG+1h8FOxcFO1oHVFgazPYQGqdfNthBYpUqwEME78nsT4tP7o96WwWSwA1nKb35iyCZ8M85EXE3oYBO3ab4RKWcSKCaFJJMCQprSpPQcUFwKzWQUKo1+lC9x0r7Fcc+0OVOj8zEkNrY8BAuLDV11ruZvDXrhuJ3NIu+bAYK/FXjfdOA8zegUp6DdmQKNMQD+8HTseW1LYeijE/jB4Q+/Wry8a5L01B6MeaetUcDSjfVjjOVM7da+bTMPvHfkbmrKb5DksjkLncmZqXTe6siAnWmAmkhbYUPvQP7cufO5L69fxyvD/8Ctb+/aI2PU8AmvRGqZAoiIityzb8/T165d3X3t2vD/Pjr+KW7b+R6u2/AOrli9CQfePYQXLg3jpSvDeOLkWTxw6Oh3uwYPrJTMlNHlFcLPeNk6/UOXZ7cuGP1A397fP/7v584vvzJ8o+dvn33+Zm/v9q9X/2EDbN+19+ybm3ds33/ww5f63uovf/D9woVL1A90P5dQqYaGhpQfg4N71BJbteoHqyk7Z+e8zlfuSupPHj+/eO2bso5ZcxQ9Fsiqgny6ZOv3+VTfjIwo+iefnFYN7BxQf3FxuEwGH1c+fgxBuIZnTFuIIh9U2qt3844fb9y0Vf0gXPKm7bzKzYZ+wGTKFFWNz1/6v8OLUiuaFKMJz00yEvaa/RQZnK086s6MutpEqRLx+kcT+rH1f+YikeeNfqnwAAAAAElFTkSuQmCC",aspectRatio:.6666666666666666,src:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-25c91.png",srcSet:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-8a97b.png 200w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-0fdf3.png 400w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-25c91.png 600w",srcWebp:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-216f6.webp",srcSetWebp:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-5d70e.webp 200w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-d1677.webp 400w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-216f6.webp 600w",sizes:"(max-width: 600px) 100vw, 600px"}}},site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}},mainPost:{html:'<h1 id="简介"><a href="#%E7%AE%80%E4%BB%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>简介</h1>\n<p>首先看下面这种截图：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-38-16-bc69524afbdb107d9c10b146d548251e-84da0.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 295px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 47.45762711864407%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJ0lEQVQoz4VRy27CMBDM//8WB269UAKEVBGQN0nsJODXrk3XMaKtWqmrOXhnZ9bxJHLO2f/KLfWdQUStdRRmj5/leyIXDx3Z0J/OZzI8R48HAKRpGiFaXBa8QPqwjxAYbYyQ+tXSQWl9SJJIAXIJo8IArnAQyAT0d+juwKUnmTDXSbSTCJpJ226W8f7gzYNEpuyg7GRcelX7Rq4z8XaRm0Iyabl25TC+H7Ptx7kXXklMO6stmTXgTeFd24DZ34M50zUX/SxnBUQKcPTRhKARxvGb2pHZv9faEM+SkKU8lJLH5Lhareu68a0UQ991Xf9UUmDGJPTmP9MGwDyvN5td217DLkbFR/clAG+m31UURf6rqqpqmrqqysslJwG1VVmGEbVZlsVx/Alx+wP+qS+dhQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 38 16"\n        title=""\n        src="/static/2019-12-15-19-38-16-bc69524afbdb107d9c10b146d548251e-84da0.png"\n        srcset="/static/2019-12-15-19-38-16-bc69524afbdb107d9c10b146d548251e-38392.png 200w,\n/static/2019-12-15-19-38-16-bc69524afbdb107d9c10b146d548251e-84da0.png 295w"\n        sizes="(max-width: 295px) 100vw, 295px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>如果我们想实现点击上面的下载按钮下载一张图片，你会如何实现？</p>\n<p>我们可能会想到一个最简单的方法，就是直接按钮 a 标签链接一张图片，类似下面这样：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12258943180037108000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=&quot;large.jpg&quot;>下载</a>`, `12258943180037108000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>large.jpg<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>但是，想法虽好，实际效果却不是我们想要的，因为浏览器可以直接浏览图片，因此，我们点击下面的“下载”链接，并是不下载图片，而是在新窗口直接浏览图片。</p>\n<p>于是，基本上，目前的实现都是放弃 HTML 策略，而是使用，例如 php 这样的后端语言，通过告知浏览器 header 信息，来实现下载。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29287532153232744000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`header(\'Content-type: image/jpeg\');\nheader(&quot;Content-Disposition: attachment; filename=\'download.jpg\'&quot;);`, `29287532153232744000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">\'Content-type: image/jpeg\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition: attachment; filename=\'download.jpg\'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>然而，这种前后端都要操心的方式神烦，现在都流行前后端分离，还搅在一起太累了，感觉不会再爱了。</p>\n<p>那有没有什么只需要前端动动指头就能实现下载的方式呢？有，就是本文要介绍的 download 属性。</p>\n<p>例如，我们希望点击“下载”链接下载图片而不是浏览，直接增加一个 download 属性就可以：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73132724100262750000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=&quot;large.jpg&quot; download>下载</a>`, `73132724100262750000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>large.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">download</span><span class="token punctuation">></span></span>下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>结果在 Chrome 浏览器下（FireFox 浏览器因为跨域限制无效）：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-41-40-b92ceb830196ef971df752c384fbf534-ab1e0.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 530px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 32.264150943396224%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABLElEQVQY01WP3U7CQBCF+/6PYKLiLTES4gUXCDGIFEshSCVAVChtsdvd7bJt2Z8WtmvVeMHJl0lmJpMzxyiKQgguc5Hncut5NOMQIc/zFstVmmaUUs65Uup0rmqSZZkhpSRximBKCLPseRARiODMcQbmEIAIx7GQsixLdS6tNULIqHZhmLjrBCE2tFbuDgIQjuxRp/vo+7skPRTHyqj8Rf1xrJpSY4wNxhhGUfVgTJBpjb4Q5YwBAHw/EJyLA1UnoXWh9ekf9VerdMY+Sd/et9mBVTfjqbP2w1wKhLG72bhBVJ8VV7a8HueXJq0N4I2JawN08QSbU+IHgcG4gDGVP8HUx9r93O72JJ5MJr1e35mvbruvjf6iZW3qbbveem48WHdts9l5ue+Yy8XyG0rRRfKjXLiKAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 41 40"\n        title=""\n        src="/static/2019-12-15-19-41-40-b92ceb830196ef971df752c384fbf534-ab1e0.png"\n        srcset="/static/2019-12-15-19-41-40-b92ceb830196ef971df752c384fbf534-8e92d.png 200w,\n/static/2019-12-15-19-41-40-b92ceb830196ef971df752c384fbf534-d963f.png 400w,\n/static/2019-12-15-19-41-40-b92ceb830196ef971df752c384fbf534-ab1e0.png 530w"\n        sizes="(max-width: 530px) 100vw, 530px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>不仅如此，我们还可以指定下载图片的文件名：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27747203116093755000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=\'index_logo.gif\' download=\'_5332_.gif\'>\n  下载\n</a>`, `27747203116093755000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">\'index_logo.gif\'</span> download<span class="token operator">=</span><span class="token string">\'_5332_.gif\'</span><span class="token operator">></span>\n  下载\n<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果后缀名一样，我们还可以缺省，直接文件名：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40452432650573810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=\'index_logo.gif\' download=\'_5332_\'>\n  下载\n</a>`, `40452432650573810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">\'index_logo.gif\'</span> download<span class="token operator">=</span><span class="token string">\'_5332_\'</span><span class="token operator">></span>\n  下载\n<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-48-37-d9e590b8682cc8449b0ad563f5010f77-bc7e0.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 9.685641461342396%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAARElEQVQI12N4+/bt3du3Lt+6377r8frzrz5++vLu47f3nwijl+8+M7x48eLatWs3bt4+du7aqQtXbt+69ez5c6LQs+cAwblsAFe4tFsAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 48 37"\n        title=""\n        src="/static/2019-12-15-19-48-37-d9e590b8682cc8449b0ad563f5010f77-fee1c.png"\n        srcset="/static/2019-12-15-19-48-37-d9e590b8682cc8449b0ad563f5010f77-a67b7.png 200w,\n/static/2019-12-15-19-48-37-d9e590b8682cc8449b0ad563f5010f77-0b187.png 400w,\n/static/2019-12-15-19-48-37-d9e590b8682cc8449b0ad563f5010f77-fee1c.png 800w,\n/static/2019-12-15-19-48-37-d9e590b8682cc8449b0ad563f5010f77-bc7e0.png 1177w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="浏览器兼容性和跨域策略"><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E8%B7%A8%E5%9F%9F%E7%AD%96%E7%95%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>浏览器兼容性和跨域策略</h1>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-49-10-1a1d9ea1fe5d4b3821691aa36e9f193d-a76b9.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 559px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 47.406082289803216%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB6klEQVQoz3WO20/TcBzF++f54AP6QPDBC5iZEM0gATc7F3erYxtNDDC3RRQURcSEZS/swljCuq7rvR2lt41hpY61G8NsjAff/Pmg8UGTz8M5yfme84UUbl+oFQQiJxI5gcxLVJGrZsVqVuKLjLxrnwpDS/kfUN+sd044gNXiLCAMzjKAZTsGa36l++3DX7mO/O/jS1u96mqjrnZ1rg/PFEth7CbXa/K2zo4sbWRrA5DrqUNbGfxVATQA+m2OLttys1VOlYLb1cQSvpYk3nXN+sCS20eEhhf6hggG/rwA9KingWUFcGYIdLmY43fGDxwuwnO3/MhRmZX4PYUpbRIpb9bN6/lzA3SBsHrxTTrVKbNBQV9UqkFVtumN2/vOAI44MVeQCM5W3PMYLHic6tQdJP/kBjmdJl5jO5utw/KP78edFl3bXWeKnyApsUCOXX/70X2LmfFXfTDmDWMhb+VZEA9klmcyz6dihacPGDi96iYnxvStxPDi2JQPMhFHNj4HNV4i0s1rW+/h+/jjCI5E2cUkvxxlYii96KkFHNhcFA/7uOjeRkCdnDhJr4lMia3np/F5PxmAlFcx9t54+nPIx0WS1IsYj6bEeIxFURZdIlEER1bZFVSJFz8gwsNJcSXEIjD2Juwi/AvV8E8tL5CujTY5TAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 49 10"\n        title=""\n        src="/static/2019-12-15-19-49-10-1a1d9ea1fe5d4b3821691aa36e9f193d-a76b9.png"\n        srcset="/static/2019-12-15-19-49-10-1a1d9ea1fe5d4b3821691aa36e9f193d-8c77e.png 200w,\n/static/2019-12-15-19-49-10-1a1d9ea1fe5d4b3821691aa36e9f193d-f1700.png 400w,\n/static/2019-12-15-19-49-10-1a1d9ea1fe5d4b3821691aa36e9f193d-a76b9.png 559w"\n        sizes="(max-width: 559px) 100vw, 559px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>然而，caniuse 展示的兼容性不是很准确，主要表现在跨域策略的处理上，由于我手上没有 IE13，所以，只能对比 Chrome 浏览器和 FireFox 浏览器：</p>\n<p>如果需要下载的资源是跨域的，包括跨子域，在 Chrome 浏览器下，使用 download 属性是可以下载的，但是，并不能重置下载的文件的命名；而 FireFox 浏览器下，则 download 属性是无效的，也就是 FireFox 浏览器无论如何都不支持跨域资源的 download 属性下载。</p>\n<p>而如果资源是同域名的，则两个浏览器都是畅通无阻的下载，不会出现下载变浏览的情况。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-50-48-9c5da267a1471fc9757ee3601258ef12-6566f.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 462px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 77.92207792207792%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAChUlEQVQoz3VSaXObMBD1//8pmUnzsWnaJiVtDsxlMKckbhsQh4SA2GmnabrYSScf0p03OwOr9/ZcBBlNaL9px7zbpf0z7v54zRvUTwDUPkXsKWW/8/E5z5v88lN2870oyoWke6qfLZ1YRVRJd9dklPD07R+ivRQ/StH+Ntmr+d4ofhl+oZ1fqFc38lJZuI6ta6rveWmSDoL3rBM9m8HB8zGJBA6GiAxROEXhmMR8GMbHnyWfFFVbOEmpOFiW74qqmqZpHMcBwuMohJgedsxYXZye6pJk3d5GmrbzfSAPPS9pO5OLuiVxcnfzw1o7hBDLsqIoiuM4yzJMSBUgkSQ9IE1FHA9ZxkFV9LTpVCA/TFOWJveyHBLieS5gvbZN0zJXpu/7Def9NPXjyMfx6DnngxBb2i2BDHnk+3vIlec5CgLLNA3DQAhTSsUwQBv9WwOtvh8GkVedrGgLKM+2bYxxECBI5UFq10MYl1VV0YrWNWMMsrFXtF0HGi/kXoisqIAZhuGhhMTQtfPz85OTk7OzD5+/fIX6QxISDBMI4yR2Xbcotpuaz2RQorRaW5ZpWRgRSiMUBtBzx1jbdm3b1rM1ZVk5tn0tXSNMmprmlB3JDIJRGAYIkVkdYdCP4812s9luoXZQ59Ar52maIoTSNOOMvZQNMXiBMTLn3KaqqIauO64DXlUUx3FBD2jzdoWAG4CBjYPIXslMHGw42nwjgzgcyvFrDsHMYbkHOzx8nTbMUvTvG/xvGU9ou/IxKaqi6cpyC53VDU2LZqnpi6bp5k2wdwCdFg1bk/jj5TfdCYKsgFVeSRJGAU6LO1lZmC52gtD+DyC08oiJE8MPbZ8AXBTZHja9EJPwL74DTOExAzPqAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 50 48"\n        title=""\n        src="/static/2019-12-15-19-50-48-9c5da267a1471fc9757ee3601258ef12-6566f.png"\n        srcset="/static/2019-12-15-19-50-48-9c5da267a1471fc9757ee3601258ef12-c4b43.png 200w,\n/static/2019-12-15-19-50-48-9c5da267a1471fc9757ee3601258ef12-5dba5.png 400w,\n/static/2019-12-15-19-50-48-9c5da267a1471fc9757ee3601258ef12-6566f.png 462w"\n        sizes="(max-width: 462px) 100vw, 462px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="是否支持-download-属性的监测"><a href="#%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81-download-%E5%B1%9E%E6%80%A7%E7%9A%84%E7%9B%91%E6%B5%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>是否支持 download 属性的监测</h2>\n<p>要监测当前浏览器是否支持 download 属性，一行 JS 代码就可以了，如下：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="51199214839966860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var isSupportDownload = \'download\' in document.createElement(\'a\');`, `51199214839966860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> isSupportDownload <span class="token operator">=</span> <span class="token string">\'download\'</span> <span class="token keyword">in</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'a\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h1 id="总结"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h1>\n<p>除了图片资源，我们还可以是 PDF 资源，或者 txt 资源等等。尤其 Chrome 等浏览器可以直接打开 PDF 文件，使得此文件格式需要 download 处理的场景越来越普遍。</p>\n<p>此 HTML 属性虽然非常实用和方便，但是兼容性制约了我们的大规模应用。</p>\n<p>同时考虑到很多时候，需要进行一些下载的统计，纯前端的方式想要保存下载量数据，还是有些吃紧，需要跟开发的同学配合才行，还不如使用传统方法。</p>\n<p>所以，download 属性的未来前景在哪里？当下是否可以直接加入到实际项目？还需要我们一起好好想想。其实使用 JS 实现 download 属性的 polyfill 并不难，但是，考虑到为何不所有浏览器都使用 polyfill 的方法，又觉得为了技术而技术是不太妥当的。</p>\n<p>如果是需要用 JS 触发下载，见下一篇文章<a href="/js-text-string-download-as-html-json-file/">使用 JS 让文本字符串作为 html 或 JSON 文件下载</a></p>',excerpt:"简介 首先看下面这种截图： 如果我们想实现点击上面的下载按钮下载一张图片，你会如何实现？ 我们可能会想到一个最简单的方法，就是直接按钮 a…",timeToRead:2,tableOfContents:'<ul>\n<li><a href="/html-download-attribute/#%E7%AE%80%E4%BB%8B">简介</a></li>\n<li>\n<p><a href="/html-download-attribute/#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E6%80%A7%E5%92%8C%E8%B7%A8%E5%9F%9F%E7%AD%96%E7%95%A5">浏览器兼容性和跨域策略</a></p>\n<ul>\n<li><a href="/html-download-attribute/#%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81-download-%E5%B1%9E%E6%80%A7%E7%9A%84%E7%9B%91%E6%B5%8B">是否支持 download 属性的监测</a></li>\n</ul>\n</li>\n<li><a href="/html-download-attribute/#%E6%80%BB%E7%BB%93">总结</a></li>\n</ul>',wordCount:{words:172},frontmatter:{date:"2019-12-15 19:36:41",path:"/html-download-attribute/",tags:"前端, DOM, DOM知识点",title:"HTML5中的download属性",draft:null,catalog_number:null}},nextPost:{html:'<h1 id="简介"><a href="#%E7%AE%80%E4%BB%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>简介</h1>\n<p>innerText IE6 就开始支持，那个时候，Firefox 浏览器是不支持这个 API 的，一直到 2016 年 3 月份 Firefox 45+才开始支持。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-12-27-712915a13da25a914564f6da376fa683-87f29.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 602px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 43.52159468438538%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACLklEQVQozyWO609SAQDF79/TFjBapZRDXipv7KGAVl9orWK5sq2PfXSrtWpSG/NRyCSIutCFy+UtT+Mtl+vlfXWgyMsIMKu5PkS5nZ3t/M7OdoBSLlkubBHFVCUXJjD/Dh7cxEyHB+leA+81tvsN/KiZHah3uNvvVHvNXK+eGfDTCmgHFtqh5+2vi/WdZK0cOyhFibyvtZvs7mG/WoV+De9UM91q+ji1fBx5+Xs/cdKt/2zmBtWPZhboxFVH6Eovo9kvR1rVVKOOf2sWUGIDyegDJWgjB7qxz97tT4HQ05DvyWbOsFnxBormYBGqVeMAhmJEsVDOZ9PR0B4axvWvifU3C8ijMzCDCrFpiIDrljKd1+meWY5PwXBOnYNYVCuHArJAswpIFOxYyYOXvemKPxXWr4nIH8ZIyhccmveqyDXLdclGbMJhmDeKiAUuGd8lG3dOX0IEw1+4/rgREFtk990PHnrmJdaZx955BXLvJqxgWyfZjmsSzw2W/coQzJ1wSf/PpDyXfOATbinDKoaDWuCicZz9nsdbEvKt05zFMdKrC6S3Q+dX6SMO0WWb4FRTPoUiPCcP3Blc+EfsIhrEY2tFAJzQ2iJrc5Dylu22ErwrfjfJXRVy9MKzplEyyKSATDLIoFslAoecb5+hmtiDSDYxKR8ZKscz4E+bOGmXwoTFnjeEyhYY05nTGgdm0EXVhtiyKaFZj6mNsZUAagqiZj8K6mNLupjamTJ8r2b+AgVEVYuG4Gm1AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 12 27"\n        title=""\n        src="/static/2019-12-15-19-12-27-712915a13da25a914564f6da376fa683-87f29.png"\n        srcset="/static/2019-12-15-19-12-27-712915a13da25a914564f6da376fa683-38577.png 200w,\n/static/2019-12-15-19-12-27-712915a13da25a914564f6da376fa683-26124.png 400w,\n/static/2019-12-15-19-12-27-712915a13da25a914564f6da376fa683-87f29.png 602w"\n        sizes="(max-width: 602px) 100vw, 602px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>而 textContent IE9 浏览器才开始支持：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-12-49-f4456f037ba86ad459557fc808f78deb-a484c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 577px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 45.233968804159446%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACMElEQVQozwElAtr9AObfztjTxdrTxt3WyNzTw9/Vw9rSwODUxczSstndwPPo1fLo1fPp1vPp1vLq2fLr3PLp2fHn0/Lo1fLo1QDw38Pt063u1rHt1rLr38nq4tDp4M3s4dDl38rm4Mvw59Tx59Tt5NDt5NPw3sHx1q/y4MP17d7y6NXx6NUA8tar8sB58sWF88eH69zA59/P6N/N6+PR6eDP6N7M8ujT8ObS5t7M6OHR7tGk8cB28taq+PPr9OrW9OnVAO3k0tzSxOPZyeff0NfQw+bdzOfbxt3QvOvgzN/azdjTxurj0tjQv97WxezgztvNvefayN3Vw9DJuN3SwQDbq5u7UkrCYljZwrbZ1cvd1Mnn18Lk0rzl18Tb1s/f2tHGwbmLh4iQjIzSw7bkzr7jz7+jnJiFgoScl5QAvcufaZ1Mgqlhk8yJcch2i8+HjtGNc8h7k9KQhMyCfct8kMyMXbBoZLNulNCSecx+idCJg8KFVrBkfr+BAJ7Jli6rRkarVEueT0GuUEmhTk2fUEavUUydTkekT0WqUFGcUUuxVEytVEyaTj2rS0GhSVOhVEq0VVOiVAC7zKd3tHOFsntioF1Xsl9apFlfolxbs2BcoFlbqF1cr19enFparl5Yqlt0o2qGvoF/sXden1tZsl9doFoA9enX9+jY/+zftdioh8qFndGVptSdjcuKpdObm9CUk86OrNahks2Oks6O4eTJ++rc+eraqtWgiMqFpNOaLZt8mUJHhnMAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 12 49"\n        title=""\n        src="/static/2019-12-15-19-12-49-f4456f037ba86ad459557fc808f78deb-a484c.png"\n        srcset="/static/2019-12-15-19-12-49-f4456f037ba86ad459557fc808f78deb-64be4.png 200w,\n/static/2019-12-15-19-12-49-f4456f037ba86ad459557fc808f78deb-6870d.png 400w,\n/static/2019-12-15-19-12-49-f4456f037ba86ad459557fc808f78deb-a484c.png 577w"\n        sizes="(max-width: 577px) 100vw, 577px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>由于存在兼容性，因此在开发 PC 端项目的时候获取元素的文本内容都是下面的语句：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34786984170647585000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var text = dom.innerText || dom.textContent;`, `34786984170647585000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> text <span class="token operator">=</span> dom<span class="token punctuation">.</span>innerText <span class="token operator">||</span> dom<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>久而久之，就误认为 innerText 和 textContent 作用是一样的。</p>\n<h1 id="innertext-和-textcontent-的不同"><a href="#innertext-%E5%92%8C-textcontent-%E7%9A%84%E4%B8%8D%E5%90%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>innerText 和 textContent 的不同</h1>\n<h2 id="调用对象不同"><a href="#%E8%B0%83%E7%94%A8%E5%AF%B9%E8%B1%A1%E4%B8%8D%E5%90%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>调用对象不同</h2>\n<p>innerText 只有 HTML 元素才可以调用，但是 textContent 任意 Node 节点都可以：HTMLElement.innerText 和 Node.textContent。</p>\n<h2 id="值获取规则不同"><a href="#%E5%80%BC%E8%8E%B7%E5%8F%96%E8%A7%84%E5%88%99%E4%B8%8D%E5%90%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>值获取规则不同</h2>\n<h3 id="规则差异之块级元素与换行符"><a href="#%E8%A7%84%E5%88%99%E5%B7%AE%E5%BC%82%E4%B9%8B%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%E4%B8%8E%E6%8D%A2%E8%A1%8C%E7%AC%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>规则差异之块级元素与换行符</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="56935090715409280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p id=&quot;dom&quot;>一段文字内容<span style=&quot;position:absolute;&quot;>...</span></p>`, `56935090715409280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dom<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>一段文字内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">position</span><span class="token punctuation">:</span>absolute<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>实时效果如下：</p>\n<p>一段文字内容…</p>\n<p>可以看到设置了 position:absolute 的<code class="language-text">&lt;span&gt;</code>元素里面的点点点…和前面的文字内容是紧密连接在一起的，前后没有任何空格。</p>\n<p>但是，当我们分别获取 id=“dom”的<code class="language-text">&lt;p&gt;</code>元素的 innerText 和 textContent 值的时候，有意思的事情发生了，innerText 的返回值居然在点点点前面出现了一个空格。</p>\n<p>如下截图所示：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-14-52-d030d60bd6948b7084102abb379d2560-acb24.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 399px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 44.3609022556391%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIklEQVQoz41Q247CIBT0/3/Jh22y3VfrZWPimigKtXhptbW2cCiwI41ZfTDZyUAPE+YMpwNrbasMUUfmQXpHQxpfi2WMbZp24O7mruvQxBqDwoQDZNfDPui8d0Quz62/43Q6DaCTcefzeb1apUIwtq6q0r9DFHkpXSjzPIfZKd21Sl2vFXi5XKAeDoeyLIlIa30D6vqqlBbCD4ewhUcEM+qmJdxeLn/G4wSM468o+pjP58fjcb/f73Y7KSXnvAgP7mf5S251h0ApM9xDF+yLxWKz2RRFgVTsGAoT1vXNB9urWZlMyulk8j2bJeNkNBp9xvF0OsmyDB7E9vlFXrgnM5qGmck65/+P3nz/201zY2zLueBP2G6hcCFexF7pkaYpY+wX4/L92KjoN1AAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 14 52"\n        title=""\n        src="/static/2019-12-15-19-14-52-d030d60bd6948b7084102abb379d2560-acb24.png"\n        srcset="/static/2019-12-15-19-14-52-d030d60bd6948b7084102abb379d2560-ff279.png 200w,\n/static/2019-12-15-19-14-52-d030d60bd6948b7084102abb379d2560-acb24.png 399w"\n        sizes="(max-width: 399px) 100vw, 399px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h4 id="差异的原因"><a href="#%E5%B7%AE%E5%BC%82%E7%9A%84%E5%8E%9F%E5%9B%A0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>差异的原因</h4>\n<p>实际上是 innerText 会保留块级元素的换行特性，以换行符形式呈现。在 HTML 中，如果 white-space 不是 pre 或 pre-wrap 则会表现为空格。也就是下图中的空格实际上是换行符：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-15-46-d030d60bd6948b7084102abb379d2560-acb24.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 399px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 44.3609022556391%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIklEQVQoz41Q247CIBT0/3/Jh22y3VfrZWPimigKtXhptbW2cCiwI41ZfTDZyUAPE+YMpwNrbasMUUfmQXpHQxpfi2WMbZp24O7mruvQxBqDwoQDZNfDPui8d0Quz62/43Q6DaCTcefzeb1apUIwtq6q0r9DFHkpXSjzPIfZKd21Sl2vFXi5XKAeDoeyLIlIa30D6vqqlBbCD4ewhUcEM+qmJdxeLn/G4wSM468o+pjP58fjcb/f73Y7KSXnvAgP7mf5S251h0ApM9xDF+yLxWKz2RRFgVTsGAoT1vXNB9urWZlMyulk8j2bJeNkNBp9xvF0OsmyDB7E9vlFXrgnM5qGmck65/+P3nz/201zY2zLueBP2G6hcCFexF7pkaYpY+wX4/L92KjoN1AAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 15 46"\n        title=""\n        src="/static/2019-12-15-19-15-46-d030d60bd6948b7084102abb379d2560-acb24.png"\n        srcset="/static/2019-12-15-19-15-46-d030d60bd6948b7084102abb379d2560-ff279.png 200w,\n/static/2019-12-15-19-15-46-d030d60bd6948b7084102abb379d2560-acb24.png 399w"\n        sizes="(max-width: 399px) 100vw, 399px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>例如，我们设置呈现结果的父元素 white-space:pre，则会出现下图所示的效果：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-16-09-7ba098ddd5899f48eb349b85f05022d4-a3cb3.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 336px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 52.976190476190474%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABb0lEQVQoz42RbW+CMBSF/f//xcRNJSEkxBn9wABj5E3xZXNTRCIgRQRKobvAdM4t2Z6QG9qb03Nu2yCEZIRQSosKWpH/BcY4juNGRvI4yTBOYZGmZU2S5HrWT0AJXYTQarVqEJKnuNhuNqZpLpfLxWKhqmpGsmuKO+r9MAwrcV7EaZkd4yyDgjE4R9E5iqI6C/RAUPegkmrGTzEc5PnIcfaGpgyfRUEYPvUHD+1Os9USRHG33zuHw2q9nlVMp1NN077EeV6czilCge+5h/WbjwJ3tzs4jmvbR8c5um7oulkQ5DBeBZh/i52k0KjCDAYhw1BdpyxLJYkKQsFxVJaj8difz29f5OJcUHSKPc+dL0zz5VVuP77zfNBsejzv93qo0zlPJraiWONxKYacd+IARZa1HY1kAwbSdYnjRJYVGUbqdpVeb9bvW7IMd/jbbROIndN/cxXDuzbASlWh6JVriQbry1fu1j83GIYxgVls+wPqMWI43OL0OgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 16 09"\n        title=""\n        src="/static/2019-12-15-19-16-09-7ba098ddd5899f48eb349b85f05022d4-a3cb3.png"\n        srcset="/static/2019-12-15-19-16-09-7ba098ddd5899f48eb349b85f05022d4-d9b8e.png 200w,\n/static/2019-12-15-19-16-09-7ba098ddd5899f48eb349b85f05022d4-a3cb3.png 336w"\n        sizes="(max-width: 336px) 100vw, 336px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>在本例中，虽然<code class="language-text">&lt;span&gt;</code>元素是内联元素，但由于设置了 position:absolute 使其 display 计算值变成了 block，因此，虽然视觉上没有换行，但 innerText 获取的时候依旧产生了换行，导致空格出现。</p>\n<h3 id="规则差异之隐藏元素的获取与否"><a href="#%E8%A7%84%E5%88%99%E5%B7%AE%E5%BC%82%E4%B9%8B%E9%9A%90%E8%97%8F%E5%85%83%E7%B4%A0%E7%9A%84%E8%8E%B7%E5%8F%96%E4%B8%8E%E5%90%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>规则差异之隐藏元素的获取与否</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21816301420594917000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<p id=&quot;dom2&quot;>我后面有一段隐藏文字<span hidden>，就是我啦！</span></p>`, `21816301420594917000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dom2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我后面有一段隐藏文字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">hidden</span><span class="token punctuation">></span></span>，就是我啦！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-17-21-c6525c2a0f382a1b4efa2de20a5a85e0-1857e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 448px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 38.839285714285715%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABF0lEQVQY052Py26DMBBF/f+/kx/IIhsWoSUPAi4YPwgQSGrCw3bjgusmLULprkej0ZVm5mou0Howd8ZxNL8Mf7F7s7op1XUdkErXdV2WpRD9QzRNo7We2819HwgpKWOgF4oQgjFu2jbLMgihvVdKPW2bpjHn809dLpIxRikQ6natOaEkRpHv+67rhmHIObd2VuR5XlWVHwRssbj6vimKMctMWcrVikEIhLydqxITTAlBcRwEgX3kcqcoChukbdv8dOLr9QeEGiEZhkOSCNdlSQK6XhKSvLx6293O22yWy6XjOJRShNDhcEjT1Fp4nveG0DvnCOPtfh8jxOs6PR7B52D+gZTfqUEIrWk8EUXRXE9Mo0e36exTX3riuySRUlyhAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 17 21"\n        title=""\n        src="/static/2019-12-15-19-17-21-c6525c2a0f382a1b4efa2de20a5a85e0-1857e.png"\n        srcset="/static/2019-12-15-19-17-21-c6525c2a0f382a1b4efa2de20a5a85e0-15195.png 200w,\n/static/2019-12-15-19-17-21-c6525c2a0f382a1b4efa2de20a5a85e0-82e6d.png 400w,\n/static/2019-12-15-19-17-21-c6525c2a0f382a1b4efa2de20a5a85e0-1857e.png 448w"\n        sizes="(max-width: 448px) 100vw, 448px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>可以看到，display:none 元素是无法使用 innerText 获取的，但是 textContent 却可以，无论元素隐藏与否。</p>\n<h3 id="规则差异之性能与回流"><a href="#%E8%A7%84%E5%88%99%E5%B7%AE%E5%BC%82%E4%B9%8B%E6%80%A7%E8%83%BD%E4%B8%8E%E5%9B%9E%E6%B5%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>规则差异之性能与回流</h3>\n<p>此外，由于 innerText 属性值的获取会考虑 CSS 样式，因此读取 innerText 的值将触发回流以确保计算出的样式是最新的，而回流在计算上很昂贵，会降低性能，因此应尽可能避免回流。而 textContent 只是单纯读取文本内容，因此性能更高。</p>\n<h3 id="ie-浏览器不符合上面规则"><a href="#ie-%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8D%E7%AC%A6%E5%90%88%E4%B8%8A%E9%9D%A2%E8%A7%84%E5%88%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IE 浏览器不符合上面规则</h3>\n<p>但是在 IE 浏览器下，innerText 的表现和规范是不符的，最终表现为 textContent 属性一样的效果，也就是没有空格，也不会不显示隐藏元素，例如下面 IE11 下的效果截图：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-12-15-19-19-22-573fe8c5406b0174c2679e9f75079781-0208c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 493px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 74.2393509127789%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB6UlEQVQoz4VS23KbMBT0//9MHtrHPNZPcVMXgwsECgaBQFgCxMXc6WIyiZ2m0x2NZjmw56xWbPKyI0l1oqnPCsrrz5e40Kylsl/WSvKeJnJT1l3E6+97zT7RvBqEbHjeiNslW87L7Lef63aumbnl5aqZ2r5D4s00jl2H1Xdd17btMAzjFdMKkHkepGwUpX18bB8emv2+//ol234LGNvg/TDOsijO53NEaVEU8zxDNd9immQc8yAQlIowBCk5T7MM4qntBsYYIb7rnnRdPxwOhARCiCzLOOdo2vf9faulNd5uQJtu8H1i6L80Tft5heM4URTBhZQSH+FE0w1wqFfxdfLoOg40qqru9z+2261yOECMmXEcgyCLzycv4n7kXERxFDOGT4MAWTCMba64XC5I8Z/ibpjGDwn9hVXw5vz9zAiMBAHOiXgIISAw/N9G77YZS+A2jpnnnWzbPp85bNd1XVUV0qquQObYy7JE5S5tTH4xTVXTnp+fd09PuDPA8zwYQeBoF4Yh2mF3XRcViNM0fU0bF2sYhmW9GIauKIplWUgOUcM/5oPj2pEc9iRJULm7Kt/3j8ejbhiaqu52O9M0MZNSChnmwAUawTAeUV//wmUySkFI0U/wBeiNKshSEWIlbxUYWQnuEhn9AVlFSfB2gZz+AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 12 15 19 19 22"\n        title=""\n        src="/static/2019-12-15-19-19-22-573fe8c5406b0174c2679e9f75079781-0208c.png"\n        srcset="/static/2019-12-15-19-19-22-573fe8c5406b0174c2679e9f75079781-1777c.png 200w,\n/static/2019-12-15-19-19-22-573fe8c5406b0174c2679e9f75079781-1db89.png 400w,\n/static/2019-12-15-19-19-22-573fe8c5406b0174c2679e9f75079781-0208c.png 493w"\n        sizes="(max-width: 493px) 100vw, 493px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>另外，与 textContent 不同，在 Internet Explorer（版本 11 及以下）中更改 innerText 将从元素中移除子节点，并永久销毁所有子文本节点。不可能再将节点插入任何其他元素或同一元素中。</p>\n<h1 id="结论"><a href="#%E7%BB%93%E8%AE%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>结论</h1>\n<p>innerText 由于存在诸多特别的特性、以及兼容性差异，以及性能方面问题，以及实际开发的需求的考量，不推荐使用，推荐使用 textContent 获取文本内容。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50425670908803610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var text = dom.textContent;`, `50425670908803610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> text <span class="token operator">=</span> dom<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>如果你的项目还需要兼容 IE8 浏览器，则使用下面的代码：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="24518287867318268000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var text = dom.textContent || dom.innerText;`, `24518287867318268000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> text <span class="token operator">=</span> dom<span class="token punctuation">.</span>textContent <span class="token operator">||</span> dom<span class="token punctuation">.</span>innerText<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>另外，如果你要在一个 DOM 元素中改变文字内容，推荐使用 textContent，而不是 innerHTML，性能会更高一点。</p>',
excerpt:"简介 innerText IE6 就开始支持，那个时候，Firefox 浏览器是不支持这个 API 的，一直到 2016 年 3 月份 Firefox 45+才开始支持。 而 textContent IE9 浏览器才开始支持： 由于存在兼容性，因此在开发 PC…",frontmatter:{date:"2019-12-15 19:11:45",path:"/js-dom-innertext-textcontent/",tags:"前端, JS, JS知识点",title:"JS DOM innerText和textContent的区别",draft:null}},prePost:{html:'<h1 id="html-与文件下载"><a href="#html-%E4%B8%8E%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTML 与文件下载</h1>\n<p>如果希望在前端侧直接触发某些资源的下载，最方便快捷的方法就是使用 HTML5 原生的 download 属性，例如：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45848888699217500000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<a href=&quot;large.jpg&quot; download>下载</a>`, `45848888699217500000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>large.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">download</span><span class="token punctuation">></span></span>下载<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>但显然，如果纯粹利用 HTML 属性来实现文件的下载（而不是浏览器打开或浏览），对于动态内容，就无能为力。</p>\n<p>例如，我们对页面进行分享的时候，希望分享图片是页面内容的实时截图，此时，这个图片就是动态的，纯 HTML 显然是无法满足我们的需求的，借助 JS 和其它一些 HTML5 特性，例如，将页面元素转换到 canvas 上，然后再转成图片进行下载。</p>\n<p>但本文要介绍的下载不是图片的下载，而是文本信息的下载，所需要使用的 HTML 特性不是 canvas，而是其它。</p>\n<h1 id="借助-html5-blob-实现文本信息文件下载"><a href="#%E5%80%9F%E5%8A%A9-html5-blob-%E5%AE%9E%E7%8E%B0%E6%96%87%E6%9C%AC%E4%BF%A1%E6%81%AF%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>借助 HTML5 Blob 实现文本信息文件下载</h1>\n<p>原理其实很简单，我们可以将文本或者 JS 字符串信息借助 Blob 转换成二进制，然后，作为<code class="language-text">&lt;a&gt;</code>元素的 href 属性，配合 download 属性，实现下载。</p>\n<p>代码也比较简单，如下示意（兼容 Chrome 和 Firefox）：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="15206866352125004000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var funDownload = function(content, filename) {\n  // 创建隐藏的可下载链接\n  var eleLink = document.createElement(\'a\');\n  eleLink.download = filename;\n  eleLink.style.display = \'none\';\n  // 字符内容转变成blob地址\n  var blob = new Blob([content]);\n  eleLink.href = URL.createObjectURL(blob);\n  // 触发点击\n  document.body.appendChild(eleLink);\n  eleLink.click();\n  // 然后移除\n  document.body.removeChild(eleLink);\n};`, `15206866352125004000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">funDownload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> filename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 创建隐藏的可下载链接</span>\n  <span class="token keyword">var</span> eleLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'a\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  eleLink<span class="token punctuation">.</span>download <span class="token operator">=</span> filename<span class="token punctuation">;</span>\n  eleLink<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">\'none\'</span><span class="token punctuation">;</span>\n  <span class="token comment">// 字符内容转变成blob地址</span>\n  <span class="token keyword">var</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>content<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  eleLink<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 触发点击</span>\n  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>eleLink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  eleLink<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 然后移除</span>\n  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>eleLink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>其中，content 指需要下载的文本或字符串内容，filename 指下载到系统中的文件名称。</p>\n<h1 id="借助-base64-实现任意文件下载"><a href="#%E5%80%9F%E5%8A%A9-base64-%E5%AE%9E%E7%8E%B0%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>借助 Base64 实现任意文件下载</h1>\n<p>对于非文本文件，也是可以直接 JS 触发下载的，例如，如果我们想下载一张图片，可以把这张图片转换成 base64 格式，然后下载。</p>\n<p>代码示意：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33111043334898647000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var funDownload = function(domImg, filename) {\n  // 创建隐藏的可下载链接\n  var eleLink = document.createElement(\'a\');\n  eleLink.download = filename;\n  eleLink.style.display = \'none\';\n  // 图片转base64地址\n  var canvas = document.createElement(\'canvas\');\n  var context = canvas.getContext(\'2d\');\n  var width = domImg.naturalWidth;\n  var height = domImg.naturalHeight;\n  context.drawImage(domImg, 0, 0);\n  // 如果是PNG图片，则canvas.toDataURL(\'image/png\')\n  eleLink.href = canvas.toDataURL(\'image/jpeg\');\n  // 触发点击，这里为了兼容Firefox加了appendChild方法\n  document.body.appendChild(eleLink);\n  eleLink.click();\n  // 然后移除\n  document.body.removeChild(eleLink);\n};`, `33111043334898647000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">funDownload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">domImg<span class="token punctuation">,</span> filename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 创建隐藏的可下载链接</span>\n  <span class="token keyword">var</span> eleLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'a\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  eleLink<span class="token punctuation">.</span>download <span class="token operator">=</span> filename<span class="token punctuation">;</span>\n  eleLink<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">\'none\'</span><span class="token punctuation">;</span>\n  <span class="token comment">// 图片转base64地址</span>\n  <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">\'canvas\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">\'2d\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">var</span> width <span class="token operator">=</span> domImg<span class="token punctuation">.</span>naturalWidth<span class="token punctuation">;</span>\n  <span class="token keyword">var</span> height <span class="token operator">=</span> domImg<span class="token punctuation">.</span>naturalHeight<span class="token punctuation">;</span>\n  context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>domImg<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 如果是PNG图片，则canvas.toDataURL(\'image/png\')</span>\n  eleLink<span class="token punctuation">.</span>href <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">\'image/jpeg\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 触发点击，这里为了兼容Firefox加了appendChild方法</span>\n  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>eleLink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  eleLink<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 然后移除</span>\n  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>eleLink<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="总结"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h1>\n<p>不止是.html 文件，.txt, .json 等只要内容是文本的文件，都是可以利用这种小技巧实现下载的。</p>\n<p>在 Chrome 浏览器下，模拟点击创建的<code class="language-text">&lt;a&gt;</code>元素即使不 append 到页面中，也是可以触发下载的，但是在 Firefox 浏览器中却不行，因此，上面的 funDownload()方法有一个 appendChild 和 removeChild 的处理，就是为了兼容 Firefox 浏览器。</p>\n<p>当然，有时对 canvas 图片进行 toDataURL 操作时，会存在跨域问题的报错，具体见<a href="/crossorigin-canvas-getimagedata-cors/">解决 canvas 图片 getImageData,toDataURL 跨域问题</a></p>',excerpt:"HTML 与文件下载 如果希望在前端侧直接触发某些资源的下载，最方便快捷的方法就是使用 HTML5 原生的 download 属性，例如： 但显然，如果纯粹利用 HTML…",frontmatter:{date:"2019-12-15 19:55:53",path:"/js-text-string-download-as-html-json-file/",tags:"前端, JS, JS知识点",title:"JS前端创建html或json文件并浏览器导出下载",draft:null}}},pathContext:{mainPostPath:"/html-download-attribute/",nextPostPath:"/js-dom-innertext-textcontent/",prePostPath:"/js-text-string-download-as-html-json-file/"}}}});