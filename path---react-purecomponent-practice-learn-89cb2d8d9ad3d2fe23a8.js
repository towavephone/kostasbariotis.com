webpackJsonp([0xa49c57ae51c3],{1236:function(n,a){n.exports={data:{file:{childImageSharp:{sizes:{base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsSAAALEgHS3X78AAAHlUlEQVRIx11WaWxU1xWewbQlrdofkSIhGiBpMPZ4Vs/2lpm3zupZPOOZ8Sz2YGzANkaAKaYQUrMkLYgiIlxCQjCYQAwYEoMQNJAIFBxaQgUhoCopYceBJo1pKFVDCbOc0/fesOZKV+fM1Tvf/c56R0VYOZW8lvAxtSybvbExAu1+mndGuaDQ2F4rNHVFhCZJZlMeZ1Qrf9Mt+H+qur/ihFORAFA64J0pVTcXVcDmcKFfruIzZ7rY1H89fAZivjbM1MzFxkAnZqWd9M7KJcTmv7zCN44sY+tflm12C79WLxLCqidWN9cwWpYvsfXL13vasZudgm4mgX4hW6h1teRjnrZCwjOzWO/twIR/FjZ7WnEZ35JvcUSeU4gwSXV7W1sJzEH6R8nSRArlXjr6r7S1DqNUvMAzCXCzSfDxDRAUmyDkaoawtEPi1LxHyGLMkby5gEqUy7atjnq1roosAXqE6Yq7DBXa7RLS6HRG8y4hhbwzDiJbj4IkXUwS5e1h07IOorMePUL6ruiKGmRblg2PesJlq9nxrJMMfydIbhIWP9jMPrBLkrIHgXfG0CdmgKMjwFARFKVvHEQo5xUyKDDRN2T7aE17mV5rfZQYm1lM0EQYWUe0aNTxoKl0Qnk5jVqNA/VaFu3SBS7SB7Ju0ougr2KKWg2DBi17mbCaxyghMzgeMTTp2W7CGkTKHshZqn0Q5Osg6opBhAmAzcADY/NheyQJBi2D8mXVehYMOgEsJg9aTIxSN2YTO+ohQ62G6rGZa5AmAjmj0YvzG5vhVP8f4fTO12FtVxfMjTfC6zPbwOsIQNybhK6GlmLCm5DA6cu2aoeSaaOeVheLxRKgpoJcZ5UAly94MeeiQ+jnQtBCcTBTZ8Ght9fDfy58DDdOHIRj2zdA/4uzYWBpZ6Fr6jR8/lfWP8n2usqA2mQgH7msr3Ks0WgEfGvN6lz/q6tgXqgZjgpZOGSLwsldA4CFG4j3rmP/osU47xkdrm5pLfjdETm+p64cf0fJME34HiVFV+VYajF50UGGc/Nnz4XDfW/ArQ09+M++XsCblwD+fQEL356HswuWwdedS+Dg2p5ilZQwa7VrpCHZ9nOl7Ojg44B0hxxg0hbMjx2rh2iwDk4feReKI58hfn8V8c5lwNyXiF+dRbz4Z1jY1g4TJ1rQbnHfc/ORihJDr5q0kw8AyVqDjpeSEpJLAyaMN6HRwMDuTa/B1fcPwcfbBuHc8SPw+cnDsGvzeim7HOg0DpAYoouPBWUMJxUo65y18X4MtbYJOo3zjgQoxwWen1iNDdPmwPu9+2BvfCXsXbQRehf9Hly0B8aN04OuioGqCipvt/hQ5GLzS4Dh0Tdv3+/nvm0qVVUlfUouboOWK8jxmaznMBXIwpbfroWN63th384tcHTfDpj0gg21lQxoK+m8TQGMb5UxAt6OUYSVkUuGK5MPKiuIHicZwWqDmNNqpE6pIFBjpGDxsqXwuxUroWtBN5w4NgSbNvcDIRW61CUFu9UrtV/si7Fjf/ajUmICSvxKgJMtdQxVK2XOU9RpGNBL3VBeQWIqPR3SjR3QOW8xrFmxCnrWbYJMaobEkr1HE/4zIpv4nrK7NIrbpF+tspoYZdpMLte+wNPRu6S1Bs1GqV/1DOqMPFjIMFbq3dg6cyFkGmagqZqHaoOAHF2XZ6ngWg+XBM4RVoLHOWrLVG4uWpo4FvsvfHz6NktFkbT6QafnQGsUoFLHYm1dFj44cgwYPgQVkymkbP6RWl+LNIRjL/uFhltuNjEoYySCXaNUojOsMPSw4aqwa+o9ga5DggiC1RFDmyMG1bYQVlTSIIhRMJq9RaPZJ4VF+DQZ6MCAmOkLurJ/DYiNt/R67VMKs4hrqjL+o+6mjrj0hjBEOG+1h8FOxcFO1oHVFgazPYQGqdfNthBYpUqwEME78nsT4tP7o96WwWSwA1nKb35iyCZ8M85EXE3oYBO3ab4RKWcSKCaFJJMCQprSpPQcUFwKzWQUKo1+lC9x0r7Fcc+0OVOj8zEkNrY8BAuLDV11ruZvDXrhuJ3NIu+bAYK/FXjfdOA8zegUp6DdmQKNMQD+8HTseW1LYeijE/jB4Q+/Wry8a5L01B6MeaetUcDSjfVjjOVM7da+bTMPvHfkbmrKb5DksjkLncmZqXTe6siAnWmAmkhbYUPvQP7cufO5L69fxyvD/8Ctb+/aI2PU8AmvRGqZAoiIityzb8/T165d3X3t2vD/Pjr+KW7b+R6u2/AOrli9CQfePYQXLg3jpSvDeOLkWTxw6Oh3uwYPrJTMlNHlFcLPeNk6/UOXZ7cuGP1A397fP/7v584vvzJ8o+dvn33+Zm/v9q9X/2EDbN+19+ybm3ds33/ww5f63uovf/D9woVL1A90P5dQqYaGhpQfg4N71BJbteoHqyk7Z+e8zlfuSupPHj+/eO2bso5ZcxQ9Fsiqgny6ZOv3+VTfjIwo+iefnFYN7BxQf3FxuEwGH1c+fgxBuIZnTFuIIh9U2qt3844fb9y0Vf0gXPKm7bzKzYZ+wGTKFFWNz1/6v8OLUiuaFKMJz00yEvaa/RQZnK086s6MutpEqRLx+kcT+rH1f+YikeeNfqnwAAAAAElFTkSuQmCC",aspectRatio:.6666666666666666,src:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-25c91.png",srcSet:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-8a97b.png 200w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-0fdf3.png 400w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-25c91.png 600w",srcWebp:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-216f6.webp",srcSetWebp:"/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-5d70e.webp 200w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-d1677.webp 400w,\n/static/avatar-a4ccbab8e7381acb89452773ce94d5a0-216f6.webp 600w",sizes:"(max-width: 600px) 100vw, 600px"}}},site:{siteMetadata:{title:"å¥³ç‹æ§çš„åšå®¢",description:'å‰ç«¯å·¥ç¨‹å¸ˆï¼Œé»‘çŒ«å¥³ç‹æ§ï¼Œæ¬¢è¿å‹¾æ­ï¼ŒæŠ€æœ¯ç›¸å…³<a href="https://github.com/towavephone" target="_blank">@towavephone</a>ï¼ŒQQé—²èŠ<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>ï¼Œbiliå…³æ³¨<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}},mainPost:{html:'<h1 id="purecomponent"><a href="#purecomponent" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PureComponent</h1>\n<p><code class="language-text">PureComponent</code> æœ€æ—©åœ¨ React v15.3 ç‰ˆæœ¬ä¸­å‘å¸ƒï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¼˜åŒ– React åº”ç”¨è€Œäº§ç”Ÿã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98418108118836120000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Counter extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { count: 1 };\n  }\n\n  render() {\n    return (\n      <button color={this.props.color} onClick={() => this.setState((state) => ({ count: state.count + 1 }))}>\n        Count: {this.state.count}\n      </button>\n    );\n  }\n}`, `98418108118836120000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>button color<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>color<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>\n        Count<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ <code class="language-text">React.PureComponent</code> ä¼šæµ…æ¯”è¾ƒ <code class="language-text">props.color</code> æˆ– <code class="language-text">state.count</code> æ˜¯å¦æ”¹å˜ï¼Œæ¥å†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p>\n<ul>\n<li>\n<p><strong>å®ç°</strong></p>\n<p><code class="language-text">React.PureComponent</code> å’Œ <code class="language-text">React.Component</code> ç±»ä¼¼ï¼Œéƒ½æ˜¯å®šä¹‰ä¸€ä¸ªç»„ä»¶ç±»ã€‚ä¸åŒæ˜¯ <code class="language-text">React.Component</code> æ²¡æœ‰å®ç° <code class="language-text">shouldComponentUpdate()</code>ï¼Œè€Œ <code class="language-text">React.PureComponent</code> é€šè¿‡ props å’Œ state çš„ <strong>æµ…æ¯”è¾ƒ</strong> å®ç°äº†ã€‚</p>\n</li>\n<li>\n<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>\n<p>å½“ <code class="language-text">React.Component</code> çš„ props å’Œ state å‡ä¸ºåŸºæœ¬ç±»å‹ï¼Œä½¿ç”¨ <code class="language-text">React.PureComponent</code> ä¼šèŠ‚çœåº”ç”¨çš„æ€§èƒ½</p>\n</li>\n<li>\n<p><strong>å¯èƒ½å‡ºç°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</strong></p>\n<p>å½“ props æˆ– state ä¸º <strong>å¤æ‚çš„æ•°æ®ç»“æ„</strong> ï¼ˆä¾‹å¦‚ï¼šåµŒå¥—å¯¹è±¡å’Œæ•°ç»„ï¼‰æ—¶ï¼Œå› ä¸º <code class="language-text">React.PureComponent</code> ä»…ä»…æ˜¯ <strong>æµ…æ¯”è¾ƒ</strong> ï¼Œå¯èƒ½ä¼šæ¸²æŸ“å‡º <strong>é”™è¯¯çš„ç»“æœ</strong> ã€‚è¿™æ—¶æœ‰ <strong>ä¸¤ç§è§£å†³æ–¹æ¡ˆ</strong> ï¼š</p>\n<ul>\n<li>å½“ <strong>çŸ¥é“</strong> æœ‰æ·±åº¦æ•°æ®ç»“æ„æ›´æ–°æ—¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ <strong>forceUpdate</strong> å¼ºåˆ¶æ›´æ–°</li>\n<li>è€ƒè™‘ä½¿ç”¨ <a href="https://facebook.github.io/immutable-js/" target="_blank" rel="nofollow noreferrer noopener">immutable objects</a> ï¼ˆä¸å¯çªå˜çš„å¯¹è±¡ï¼‰ï¼Œå®ç°å¿«é€Ÿçš„æ¯”è¾ƒå¯¹è±¡</li>\n</ul>\n</li>\n<li>\n<p><strong>æ³¨æ„</strong></p>\n<p><code class="language-text">React.PureComponent</code> ä¸­çš„ <code class="language-text">shouldComponentUpdate()</code> å°†è·³è¿‡æ‰€æœ‰å­ç»„ä»¶æ ‘çš„ props æ›´æ–°ï¼ˆå…·ä½“åŸå› å‚è€ƒ <a href="https://github.com/sisterAn/blog/issues/34" target="_blank" rel="nofollow noreferrer noopener">Hooks ä¸ React ç”Ÿå‘½å‘¨æœŸ</a>ï¼šå³ï¼šæ›´æ–°é˜¶æ®µï¼Œç”±çˆ¶è‡³å­å»åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ï¼‰ï¼Œæ‰€ä»¥ä½¿ç”¨ React.PureComponent çš„ç»„ä»¶ï¼Œå®ƒçš„æ‰€æœ‰ <strong>å­ç»„ä»¶ä¹Ÿå¿…é¡»éƒ½ä¸º React.PureComponent</strong> ã€‚</p>\n</li>\n</ul>\n<h1 id="purecomponent-ä¸-stateless-functional-component"><a href="#purecomponent-%E4%B8%8E-stateless-functional-component" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PureComponent ä¸ Stateless Functional Component</h1>\n<p>å¯¹äº React å¼€å‘äººå‘˜æ¥è¯´ï¼ŒçŸ¥é“ä½•æ—¶åœ¨ä»£ç ä¸­ä½¿ç”¨ <strong>Component</strong>ï¼Œ<strong>PureComponent ** å’Œ **Stateless Functional Component</strong> éå¸¸é‡è¦ã€‚</p>\n<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ— çŠ¶æ€ç»„ä»¶ã€‚</p>\n<h2 id="æ— çŠ¶æ€ç»„ä»¶"><a href="#%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ— çŠ¶æ€ç»„ä»¶</h2>\n<p>è¾“å…¥è¾“å‡ºæ•°æ®å®Œå…¨ç”± <code class="language-text">props</code> å†³å®šï¼Œè€Œä¸”ä¸ä¼šäº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85316676051286100000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const Button = (props) => <button onClick={props.onClick}>{props.text}</button>;`, `85316676051286100000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">Button</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>onClick<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>æ— çŠ¶æ€ç»„ä»¶å¯ä»¥é€šè¿‡å‡å°‘ç»§æ‰¿ <code class="language-text">Component</code> è€Œæ¥çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°è€Œè¾¾åˆ°æ€§èƒ½ä¼˜åŒ–çš„æ•ˆæœã€‚ä»æœ¬è´¨ä¸Šæ¥è¯´ï¼Œæ— çŠ¶æ€ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå•çº¯çš„ <code class="language-text">render</code> å‡½æ•°ï¼Œæ‰€ä»¥æ— çŠ¶æ€ç»„ä»¶çš„ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚å› ä¸ºå®ƒæ²¡æœ‰ <code class="language-text">shouldComponentUpdate</code> ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ‰€ä»¥æ¯æ¬¡ <code class="language-text">state</code> æ›´æ–°ï¼Œå®ƒéƒ½ä¼šé‡æ–°ç»˜åˆ¶ <code class="language-text">render</code> å‡½æ•°ã€‚</p>\n<p>React 16.8 ä¹‹åï¼ŒReact å¼•å…¥ Hooks ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p>\n<h2 id="ä½•æ—¶ä½¿ç”¨-purecomponentï¼Ÿ"><a href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8-purecomponent%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä½•æ—¶ä½¿ç”¨ <code class="language-text">PureComponent</code>ï¼Ÿ</h2>\n<p><code class="language-text">PureComponent</code> æé«˜äº†æ€§èƒ½ï¼Œå› ä¸ºå®ƒå‡å°‘äº†åº”ç”¨ç¨‹åºä¸­çš„æ¸²æŸ“æ“ä½œæ¬¡æ•°ï¼Œè¿™å¯¹äºå¤æ‚çš„ UI æ¥è¯´æ˜¯ä¸€ä¸ªå·¨å¤§çš„èƒœåˆ©ï¼Œå› æ­¤å»ºè®®å°½å¯èƒ½ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›æƒ…å†µéœ€è¦ä½¿ç”¨ <code class="language-text">Component</code> çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ã€‚</p>\n<h2 id="ä½•æ—¶ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ï¼Ÿ"><a href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä½•æ—¶ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ï¼Ÿ</h2>\n<p>æ— çŠ¶æ€ç»„ä»¶æ˜“äºå®æ–½ä¸”å¿«é€Ÿå®æ–½ã€‚å®ƒä»¬é€‚ç”¨äºéå¸¸å°çš„ UI è§†å›¾ï¼Œå…¶ä¸­é‡æ–°æ¸²æŸ“æˆæœ¬æ— å…³ç´§è¦ã€‚å®ƒä»¬æä¾›æ›´æ¸…æ™°çš„ä»£ç å’Œæ›´å°‘çš„æ–‡ä»¶æ¥å¤„ç†ã€‚</p>\n<h1 id="purecomponent-ä¸-reactmemo"><a href="#purecomponent-%E4%B8%8E-reactmemo" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PureComponent ä¸ React.memo</h1>\n<p><code class="language-text">React.memo</code> ä¸ºé«˜é˜¶ç»„ä»¶ã€‚å®ƒå®ç°çš„æ•ˆæœä¸ <code class="language-text">React.PureComponent</code> ç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼š</p>\n<ul>\n<li><code class="language-text">React.memo</code> ç”¨äºå‡½æ•°ç»„ä»¶</li>\n<li><code class="language-text">React.PureComponent</code> é€‚ç”¨äº class ç»„ä»¶</li>\n<li><code class="language-text">React.PureComponent</code> åªæ˜¯æµ…æ¯”è¾ƒ <code class="language-text">props</code>ã€<code class="language-text">state</code>ï¼Œ<code class="language-text">React.memo</code> ä¹Ÿæ˜¯æµ…æ¯”è¾ƒï¼Œä½†å®ƒå¯ä»¥è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</li>\n</ul>\n<h2 id="reactmemo"><a href="#reactmemo" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React.memo</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="90937950304414740000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function MyComponent(props) {\n  /* ä½¿ç”¨ props æ¸²æŸ“ */\n}\n\n// æ¯”è¾ƒå‡½æ•°\nfunction areEqual(prevProps, nextProps) {\n  /*\n  å¦‚æœæŠŠ nextProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸\n  å°† prevProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸€è‡´åˆ™è¿”å› trueï¼Œ\n  å¦åˆ™è¿”å› false\n  è¿”å› trueï¼Œå¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“\n  è¿”å› falseï¼Œé‡æ–°æ¸²æŸ“\n  */\n}\n\nexport default React.memo(MyComponent, areEqual);`, `90937950304414740000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">/* ä½¿ç”¨ props æ¸²æŸ“ */</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// æ¯”è¾ƒå‡½æ•°</span>\n<span class="token keyword">function</span> <span class="token function">areEqual</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">/*\n  å¦‚æœæŠŠ nextProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸\n  å°† prevProps ä¼ å…¥ render æ–¹æ³•çš„è¿”å›ç»“æœä¸€è‡´åˆ™è¿”å› trueï¼Œ\n  å¦åˆ™è¿”å› false\n  è¿”å› trueï¼Œå¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“\n  è¿”å› falseï¼Œé‡æ–°æ¸²æŸ“\n  */</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">,</span> areEqual<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><code class="language-text">React.memo</code> é€šè¿‡è®°å¿†ç»„ä»¶æ¸²æŸ“ç»“æœçš„æ–¹å¼å®ç° ï¼Œæé«˜ç»„ä»¶çš„æ€§èƒ½</li>\n<li>åªä¼šå¯¹ <code class="language-text">props</code> æµ…æ¯”è¾ƒï¼Œå¦‚æœç›¸åŒï¼ŒReact å°†è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœã€‚</li>\n<li>å¯ä»¥å°†è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ç°è‡ªå®šä¹‰æ¯”è¾ƒ</li>\n<li>æ­¤æ–¹æ³•ä»…ä½œä¸º<strong>æ€§èƒ½ä¼˜åŒ–</strong>çš„æ–¹å¼è€Œå­˜åœ¨ã€‚ä½†è¯·ä¸è¦ä¾èµ–å®ƒæ¥â€œé˜»æ­¢â€æ¸²æŸ“ï¼Œè¿™ä¼šäº§ç”Ÿ bugã€‚</li>\n<li>ä¸ class ç»„ä»¶ä¸­ <code class="language-text">shouldComponentUpdate()</code> æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œå¦‚æœ props ç›¸ç­‰ï¼Œ<code class="language-text">areEqual</code>ä¼šè¿”å› <code class="language-text">true</code>ï¼›å¦‚æœ props ä¸ç›¸ç­‰ï¼Œåˆ™è¿”å› <code class="language-text">false</code>ã€‚è¿™ä¸ <code class="language-text">shouldComponentUpdate</code> æ–¹æ³•çš„è¿”å›å€¼ç›¸åã€‚</li>\n</ul>\n<h1 id="ä½¿ç”¨-purecomponent-å¸¸è§è¯¯åŒº"><a href="#%E4%BD%BF%E7%94%A8-purecomponent-%E5%B8%B8%E8%A7%81%E8%AF%AF%E5%8C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä½¿ç”¨ PureComponent å¸¸è§è¯¯åŒº</h1>\n<h2 id="è¯¯åŒºä¸€ï¼šåœ¨æ¸²æŸ“æ–¹æ³•ä¸­åˆ›å»ºå‡½æ•°"><a href="#%E8%AF%AF%E5%8C%BA%E4%B8%80%EF%BC%9A%E5%9C%A8%E6%B8%B2%E6%9F%93%E6%96%B9%E6%B3%95%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>è¯¯åŒºä¸€ï¼šåœ¨æ¸²æŸ“æ–¹æ³•ä¸­åˆ›å»ºå‡½æ•°</h2>\n<p>å¦‚æœä½ åœ¨ <code class="language-text">render</code> æ–¹æ³•é‡Œåˆ›å»ºå‡½æ•°ï¼Œé‚£ä¹ˆä½¿ç”¨ <code class="language-text">props</code> ä¼šæŠµæ¶ˆä½¿ç”¨ <code class="language-text">React.PureComponent</code> å¸¦æ¥çš„ä¼˜åŠ¿ã€‚å› ä¸ºæ¯æ¬¡æ¸²æŸ“è¿è¡Œæ—¶ï¼Œéƒ½ä¼šåˆ†é…ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå¦‚æœä½ æœ‰å­ç»„ä»¶ï¼Œå³ä½¿æ•°æ®æ²¡æœ‰æ”¹å˜ï¼Œå®ƒä»¬ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼Œå› ä¸ºæµ…æ¯”è¾ƒ <code class="language-text">props</code> çš„æ—¶å€™æ€»ä¼šå¾—åˆ° <code class="language-text">false</code>ã€‚</p>\n<p>ä¾‹å¦‚ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10384369688064066000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// FriendsItem åœ¨çˆ¶ç»„ä»¶å¼•ç”¨æ ·å¼\n<FriendsItem key={friend.id} name={friend.name} id={friend.id} onDeleteClick={() => this.deleteFriends(friend.id)} />\n// åœ¨çˆ¶ç»„ä»¶ä¸­ç»‘å®š\n// çˆ¶ç»„ä»¶åœ¨ props ä¸­ä¼ é€’äº†ä¸€ä¸ªç®­å¤´å‡½æ•°ã€‚ç®­å¤´å‡½æ•°åœ¨æ¯æ¬¡ render æ—¶éƒ½ä¼šé‡æ–°åˆ†é…ï¼ˆå’Œä½¿ç”¨ bind çš„æ–¹å¼ç›¸åŒï¼‰`, `10384369688064066000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// FriendsItem åœ¨çˆ¶ç»„ä»¶å¼•ç”¨æ ·å¼</span>\n<span class="token operator">&lt;</span>FriendsItem key<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">}</span> id<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">}</span> onDeleteClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deleteFriends</span><span class="token punctuation">(</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n<span class="token comment">// åœ¨çˆ¶ç»„ä»¶ä¸­ç»‘å®š</span>\n<span class="token comment">// çˆ¶ç»„ä»¶åœ¨ props ä¸­ä¼ é€’äº†ä¸€ä¸ªç®­å¤´å‡½æ•°ã€‚ç®­å¤´å‡½æ•°åœ¨æ¯æ¬¡ render æ—¶éƒ½ä¼šé‡æ–°åˆ†é…ï¼ˆå’Œä½¿ç”¨ bind çš„æ–¹å¼ç›¸åŒï¼‰</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å…¶ä¸­ï¼Œ<code class="language-text">FriendsItem</code> ä¸º <code class="language-text">PureComponent</code>ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28030940281118876000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// å…¶ä¸­ FriendsItem ä¸º PureComponent\nclass FriendsItem extends React.PureComponent {\n  render() {\n    const { name, onDeleteClick } = this.props;\n    console.log(\\`FriendsItemï¼š\\${name} æ¸²æŸ“\\`);\n    return (\n      <div>\n        <span>{name}</span>\n        <button onClick={onDeleteClick}>åˆ é™¤</button>\n      </div>\n    );\n  }\n}\n// æ¯æ¬¡ç‚¹å‡»åˆ é™¤æ“ä½œæ—¶ï¼Œæœªåˆ é™¤çš„ FriendsItem éƒ½å°†è¢«é‡æ–°æ¸²æŸ“`, `28030940281118876000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// å…¶ä¸­ FriendsItem ä¸º PureComponent</span>\n<span class="token keyword">class</span> <span class="token class-name">FriendsItem</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> onDeleteClick <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">FriendsItemï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> æ¸²æŸ“</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>\n        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>onDeleteClick<span class="token punctuation">}</span><span class="token operator">></span>åˆ é™¤<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// æ¯æ¬¡ç‚¹å‡»åˆ é™¤æ“ä½œæ—¶ï¼Œæœªåˆ é™¤çš„ FriendsItem éƒ½å°†è¢«é‡æ–°æ¸²æŸ“</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><a href="https://stackblitz.com/edit/react-ta6tww" target="_blank" rel="nofollow noreferrer noopener">ç‚¹å‡»æŸ¥çœ‹åœ¨çº¿å®ä¾‹</a></p>\n<p>è¿™ç§åœ¨ <code class="language-text">FriendsItem</code> ç›´æ¥è°ƒç”¨ <code class="language-text">() =&gt; this.deleteFriends(friend.id)</code>ï¼Œçœ‹èµ·æ¥æ“ä½œæ›´ç®€å•ï¼Œé€»è¾‘æ›´æ¸…æ™°ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªæœ‰ä¸€ä¸ªæœ€å¤§çš„å¼Šç«¯ï¼Œç”šè‡³æ‰“ç ´äº†åƒ <code class="language-text">shouldComponentUpdate</code> å’Œ <code class="language-text">PureComponent</code> è¿™æ ·çš„æ€§èƒ½ä¼˜åŒ–ã€‚</p>\n<p>è¿™æ˜¯å› ä¸ºï¼šçˆ¶ç»„ä»¶åœ¨ <code class="language-text">render</code> å£°æ˜äº†ä¸€ä¸ªå‡½æ•°<code class="language-text">onDeleteClick</code>ï¼Œæ¯æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“éƒ½ä¼šé‡æ–°ç”Ÿæˆæ–°çš„å‡½æ•°ã€‚å› æ­¤ï¼Œæ¯æ¬¡çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œéƒ½ä¼šç»™æ¯ä¸ªå­ç»„ä»¶ <code class="language-text">FriendsItem</code> ä¼ é€’ä¸åŒçš„ <code class="language-text">props</code>ï¼Œå¯¼è‡´æ¯ä¸ªå­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼Œ å³ä½¿ <code class="language-text">FriendsItem</code> ä¸º <code class="language-text">PureComponent</code>ã€‚</p>\n<p><strong>é¿å…åœ¨ render æ–¹æ³•é‡Œåˆ›å»ºå‡½æ•°å¹¶ä½¿ç”¨å®ƒã€‚å®ƒä¼šæ‰“ç ´äº†åƒ shouldComponentUpdate å’Œ PureComponent è¿™æ ·çš„æ€§èƒ½ä¼˜åŒ–ã€‚</strong></p>\n<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦å°†åŸæœ¬åœ¨çˆ¶ç»„ä»¶ä¸Šçš„ç»‘å®šæ”¾åˆ°å­ç»„ä»¶ä¸Šå³å¯ã€‚<code class="language-text">FriendsItem</code> å°†å§‹ç»ˆå…·æœ‰ç›¸åŒçš„ <code class="language-text">props</code>ï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šå¯¼è‡´ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60677988240068490000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// FriendsItem åœ¨çˆ¶ç»„ä»¶å¼•ç”¨æ ·å¼\n<FriendsItem key={friend.id} id={friend.id} name={friend.name} onClick={this.deleteFriends} />`, `60677988240068490000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// FriendsItem åœ¨çˆ¶ç»„ä»¶å¼•ç”¨æ ·å¼</span>\n<span class="token operator">&lt;</span>FriendsItem key<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">}</span> id<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>deleteFriends<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p><code class="language-text">FriendsItem</code>:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="59425071380621960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class FriendsItem extends React.PureComponent {\n  onDeleteClick = () => {\n    this.props.onClick(this.props.id);\n  }; // åœ¨å­ç»„ä»¶ä¸­ç»‘å®š\n  render() {\n    const { name } = this.props;\n    console.log(\\`FriendsItemï¼š\\${name} æ¸²æŸ“\\`);\n    return (\n      <div>\n        <span>{name}</span>\n        <button onClick={this.onDeleteClick}>åˆ é™¤</button>\n      </div>\n    );\n  }\n}\n// æ¯æ¬¡ç‚¹å‡»åˆ é™¤æ“ä½œæ—¶ï¼ŒFriendsItem éƒ½ä¸ä¼šè¢«é‡æ–°æ¸²æŸ“`, `59425071380621960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">FriendsItem</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">onDeleteClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// åœ¨å­ç»„ä»¶ä¸­ç»‘å®š</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">FriendsItemï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> æ¸²æŸ“</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>\n        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onDeleteClick<span class="token punctuation">}</span><span class="token operator">></span>åˆ é™¤<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// æ¯æ¬¡ç‚¹å‡»åˆ é™¤æ“ä½œæ—¶ï¼ŒFriendsItem éƒ½ä¸ä¼šè¢«é‡æ–°æ¸²æŸ“</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><a href="https://stackblitz.com/edit/react-sr5yvp" target="_blank" rel="nofollow noreferrer noopener">ç‚¹å‡»æŸ¥çœ‹åœ¨çº¿å®ä¾‹</a></p>\n<p>é€šè¿‡æ­¤æ›´æ”¹ï¼Œå½“å•å‡»åˆ é™¤æ“ä½œæ—¶ï¼Œå…¶ä»– <code class="language-text">FriendsItem</code> éƒ½ä¸ä¼šè¢«é‡æ–°æ¸²æŸ“äº† ğŸ‘</p>\n<h2 id="è¯¯åŒºäºŒï¼šåœ¨æ¸²æŸ“æ–¹æ³•ä¸­æ´¾ç”Ÿ-state"><a href="#%E8%AF%AF%E5%8C%BA%E4%BA%8C%EF%BC%9A%E5%9C%A8%E6%B8%B2%E6%9F%93%E6%96%B9%E6%B3%95%E4%B8%AD%E6%B4%BE%E7%94%9F-state" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>è¯¯åŒºäºŒï¼šåœ¨æ¸²æŸ“æ–¹æ³•ä¸­æ´¾ç”Ÿ state</h2>\n<p>è€ƒè™‘ä¸€ä¸ªæ–‡ç« åˆ—è¡¨ï¼Œæ‚¨çš„ä¸ªäººèµ„æ–™ç»„ä»¶å°†ä»ä¸­æ˜¾ç¤ºç”¨æˆ·æœ€å–œæ¬¢çš„ 10 ä¸ªä½œå“ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="88520859309117880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`render() {\n  const { posts } = this.props\n  // åœ¨æ¸²æŸ“å‡½æ•°ä¸­ç”Ÿæˆ topTenï¼Œå¹¶æ¸²æŸ“\n  const topTen = [...posts].sort((a, b) =>\n    b.likes - a.likes).slice(0, 9)\n  return //...\n}\n// è¿™ä¼šå¯¼è‡´ç»„ä»¶æ¯æ¬¡é‡æ–°æ¸²æŸ“ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„ topTenï¼Œå¯¼è‡´ä¸å¿…è¦çš„æ¸²æŸ“`, `88520859309117880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">{</span> posts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props\n  <span class="token comment">// åœ¨æ¸²æŸ“å‡½æ•°ä¸­ç”Ÿæˆ topTenï¼Œå¹¶æ¸²æŸ“</span>\n  <span class="token keyword">const</span> topTen <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>posts<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span>\n    b<span class="token punctuation">.</span>likes <span class="token operator">-</span> a<span class="token punctuation">.</span>likes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token comment">//...</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// è¿™ä¼šå¯¼è‡´ç»„ä»¶æ¯æ¬¡é‡æ–°æ¸²æŸ“ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„ topTenï¼Œå¯¼è‡´ä¸å¿…è¦çš„æ¸²æŸ“</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class="language-text">topTen</code>æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶éƒ½ä¼šæœ‰ä¸€ä¸ªå…¨æ–°çš„å¼•ç”¨ï¼Œå³ä½¿ <code class="language-text">posts</code> æ²¡æœ‰æ›´æ”¹ï¼Œæ´¾ç”Ÿ <code class="language-text">state</code> ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚</p>\n<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥å°† <code class="language-text">topTen</code> çš„åˆ¤æ–­é€»è¾‘æå–åˆ° <code class="language-text">render</code> å‡½æ•°ä¹‹å¤–ï¼Œé€šè¿‡ç¼“å­˜æ´¾ç”Ÿ <code class="language-text">state</code> æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œåœ¨ç»„ä»¶çš„çŠ¶æ€ä¸­è®¾ç½®æ´¾ç”Ÿ <code class="language-text">state</code>ï¼Œå¹¶ä»…åœ¨ <code class="language-text">posts</code> å·²æ›´æ–°æ—¶æ›´æ–°ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55051347794643910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`componentWillMount() {\n  this.setTopTenPosts(this.props.posts)\n}\ncomponentWillReceiveProps(nextProps) {\n  if (this.props.posts !== nextProps.posts) {\n    this.setTopTenPosts(nextProps.posts)\n  }\n}\n// æ¯æ¬¡ posts æ›´æ–°æ—¶ï¼Œæ›´æ–°æ´¾ç”Ÿ stateï¼Œè€Œä¸æ˜¯åœ¨æ¸²æŸ“å‡½æ•°ä¸­é‡æ–°ç”Ÿæˆ\nsetTopTenPosts(posts) {\n  this.setState({\n    topTen: [...posts].sort((a, b) => b.likes - a.likes).slice(0, 9)\n  })\n}`, `55051347794643910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTopTenPosts</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>posts<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n<span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>posts <span class="token operator">!==</span> nextProps<span class="token punctuation">.</span>posts<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTopTenPosts</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>posts<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// æ¯æ¬¡ posts æ›´æ–°æ—¶ï¼Œæ›´æ–°æ´¾ç”Ÿ stateï¼Œè€Œä¸æ˜¯åœ¨æ¸²æŸ“å‡½æ•°ä¸­é‡æ–°ç”Ÿæˆ</span>\n<span class="token function">setTopTenPosts</span><span class="token punctuation">(</span><span class="token parameter">posts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    topTen<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>posts<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> b<span class="token punctuation">.</span>likes <span class="token operator">-</span> a<span class="token punctuation">.</span>likes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="æ€»ç»“"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ€»ç»“</h2>\n<p>åœ¨ä½¿ç”¨ <code class="language-text">PureComponent</code> æ—¶ï¼Œè¯·æ³¨æ„ï¼š</p>\n<ul>\n<li>çªå˜ä¸€èˆ¬æ˜¯ä¸å¥½çš„ï¼Œä½†åœ¨ä½¿ç”¨ <code class="language-text">PureComponent</code> æ—¶ï¼Œé—®é¢˜ä¼šæ›´åŠ å¤æ‚ã€‚</li>\n<li>ä¸è¦åœ¨æ¸²æŸ“æ–¹æ³•ä¸­åˆ›å»ºæ–°å‡½æ•°ã€å¯¹è±¡æˆ–æ•°ç»„ï¼Œè¿™ä¼šå¯¼è‡´é¡¹ç›®æ€§èƒ½æ˜¾è‘—é™ä½ã€‚</li>\n</ul>\n<h1 id="purecomponent-æºç è§£æ"><a href="#purecomponent-%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PureComponent æºç è§£æ</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28406910491833283000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// æ–°å»ºäº†ç©ºæ–¹æ³•ComponentDummy ï¼ŒComponentDummy çš„åŸå‹ æŒ‡å‘ Component çš„åŸå‹;\nfunction ComponentDummy() {}\nComponentDummy.prototype = Component.prototype;\n\n/**\n * Convenience component with default shallow equality check for sCU.\n */\nfunction PureComponent(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  // If a component has string refs, we will assign a different object later.\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n} // è§£æåŒ React.Componentï¼Œè¯¦ç»†è¯·çœ‹ä¸Šä¸€ç« \n\n/**\n * å®ç° React.PureComponent å¯¹ React.Component çš„åŸå‹ç»§æ‰¿\n */\n/**\n * ç”¨ ComponentDummy çš„åŸå› æ˜¯ä¸ºäº†ä¸ç›´æ¥å®ä¾‹åŒ–ä¸€ä¸ª Component å®ä¾‹ï¼Œå¯ä»¥å‡å°‘ä¸€äº›å†…å­˜ä½¿ç”¨\n *\n * å› ä¸ºï¼Œæˆ‘ä»¬è¿™é‡Œåªéœ€è¦ç»§æ‰¿ React.Component çš„ åŸå‹ï¼Œç›´æ¥ PureComponent.prototype = new Component() çš„è¯\n * ä¼šç»§æ‰¿åŒ…æ‹¬ constructor åœ¨å†…çš„å…¶ä»– Component å±æ€§æ–¹æ³•ï¼Œä½†æ˜¯ PureComponent å·²ç»æœ‰è‡ªå·±çš„ constructor äº†ï¼Œ\n * å†ç»§æ‰¿çš„è¯ï¼Œé€ æˆä¸å¿…è¦çš„å†…å­˜æ¶ˆè€—\n * æ‰€ä»¥ä¼šæ–°å»ºComponentDummyï¼Œåªç»§æ‰¿Componentçš„åŸå‹ï¼Œä¸åŒ…æ‹¬constructorï¼Œä»¥æ­¤æ¥èŠ‚çœå†…å­˜ã€‚\n */\nconst pureComponentPrototype = (PureComponent.prototype = new ComponentDummy());\n\n// ä¿®å¤ pureComponentPrototype æ„é€ å‡½æ•°æŒ‡å‘\npureComponentPrototype.constructor = PureComponent;\n\n// Avoid an extra prototype jump for these methods.\n// è™½ç„¶ä¸Šé¢ä¸¤å¥å·²ç»è®©PureComponentç»§æ‰¿äº†Component\n// ä½†å¤šåŠ ä¸€ä¸ª Object.assign()ï¼Œèƒ½æœ‰æ•ˆçš„é¿å…å¤šä¸€æ¬¡åŸå‹é“¾æŸ¥æ‰¾\nObject.assign(pureComponentPrototype, Component.prototype);\n\n// å”¯ä¸€çš„åŒºåˆ«ï¼ŒåŸå‹ä¸Šæ·»åŠ äº† isPureReactComponent å±æ€§å»è¡¨ç¤ºè¯¥ Component æ˜¯ PureComponent\n// åœ¨åç»­ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ï¼Œreact-dom ä¼šå»åˆ¤æ–­ isPureReactComponent è¿™ä¸ªå±æ€§ï¼Œæ¥ç¡®å®šæ˜¯å¦æµ…æ¯”è¾ƒ propsã€status å®ç°æ›´æ–°\n/** åœ¨ ReactFiberClassComponent.js ä¸­ï¼Œæœ‰å¯¹ isPureReactComponent çš„åˆ¤æ–­\n if (ctor.prototype && ctor.prototype.isPureReactComponent) {\n    return (\n      !shallowEqual(oldProps, newProps) || !shallowEqual(oldState, newState)\n    );\n  }\n */\npureComponentPrototype.isPureReactComponent = true;`, `28406910491833283000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// æ–°å»ºäº†ç©ºæ–¹æ³•ComponentDummy ï¼ŒComponentDummy çš„åŸå‹ æŒ‡å‘ Component çš„åŸå‹;</span>\n<span class="token keyword">function</span> <span class="token function">ComponentDummy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token class-name">ComponentDummy</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>\n\n<span class="token comment">/**\n * Convenience component with default shallow equality check for sCU.\n */</span>\n<span class="token keyword">function</span> <span class="token function">PureComponent</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context<span class="token punctuation">,</span> updater</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>\n  <span class="token comment">// If a component has string refs, we will assign a different object later.</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>refs <span class="token operator">=</span> emptyObject<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>updater <span class="token operator">=</span> updater <span class="token operator">||</span> ReactNoopUpdateQueue<span class="token punctuation">;</span>\n<span class="token punctuation">}</span> <span class="token comment">// è§£æåŒ React.Componentï¼Œè¯¦ç»†è¯·çœ‹ä¸Šä¸€ç« </span>\n\n<span class="token comment">/**\n * å®ç° React.PureComponent å¯¹ React.Component çš„åŸå‹ç»§æ‰¿\n */</span>\n<span class="token comment">/**\n * ç”¨ ComponentDummy çš„åŸå› æ˜¯ä¸ºäº†ä¸ç›´æ¥å®ä¾‹åŒ–ä¸€ä¸ª Component å®ä¾‹ï¼Œå¯ä»¥å‡å°‘ä¸€äº›å†…å­˜ä½¿ç”¨\n *\n * å› ä¸ºï¼Œæˆ‘ä»¬è¿™é‡Œåªéœ€è¦ç»§æ‰¿ React.Component çš„ åŸå‹ï¼Œç›´æ¥ PureComponent.prototype = new Component() çš„è¯\n * ä¼šç»§æ‰¿åŒ…æ‹¬ constructor åœ¨å†…çš„å…¶ä»– Component å±æ€§æ–¹æ³•ï¼Œä½†æ˜¯ PureComponent å·²ç»æœ‰è‡ªå·±çš„ constructor äº†ï¼Œ\n * å†ç»§æ‰¿çš„è¯ï¼Œé€ æˆä¸å¿…è¦çš„å†…å­˜æ¶ˆè€—\n * æ‰€ä»¥ä¼šæ–°å»ºComponentDummyï¼Œåªç»§æ‰¿Componentçš„åŸå‹ï¼Œä¸åŒ…æ‹¬constructorï¼Œä»¥æ­¤æ¥èŠ‚çœå†…å­˜ã€‚\n */</span>\n<span class="token keyword">const</span> pureComponentPrototype <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PureComponent</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComponentDummy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// ä¿®å¤ pureComponentPrototype æ„é€ å‡½æ•°æŒ‡å‘</span>\npureComponentPrototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> PureComponent<span class="token punctuation">;</span>\n\n<span class="token comment">// Avoid an extra prototype jump for these methods.</span>\n<span class="token comment">// è™½ç„¶ä¸Šé¢ä¸¤å¥å·²ç»è®©PureComponentç»§æ‰¿äº†Component</span>\n<span class="token comment">// ä½†å¤šåŠ ä¸€ä¸ª Object.assign()ï¼Œèƒ½æœ‰æ•ˆçš„é¿å…å¤šä¸€æ¬¡åŸå‹é“¾æŸ¥æ‰¾</span>\nObject<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>pureComponentPrototype<span class="token punctuation">,</span> <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// å”¯ä¸€çš„åŒºåˆ«ï¼ŒåŸå‹ä¸Šæ·»åŠ äº† isPureReactComponent å±æ€§å»è¡¨ç¤ºè¯¥ Component æ˜¯ PureComponent</span>\n<span class="token comment">// åœ¨åç»­ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ï¼Œreact-dom ä¼šå»åˆ¤æ–­ isPureReactComponent è¿™ä¸ªå±æ€§ï¼Œæ¥ç¡®å®šæ˜¯å¦æµ…æ¯”è¾ƒ propsã€status å®ç°æ›´æ–°</span>\n<span class="token comment">/** åœ¨ ReactFiberClassComponent.js ä¸­ï¼Œæœ‰å¯¹ isPureReactComponent çš„åˆ¤æ–­\n if (ctor.prototype &amp;&amp; ctor.prototype.isPureReactComponent) {\n    return (\n      !shallowEqual(oldProps, newProps) || !shallowEqual(oldState, newState)\n    );\n  }\n */</span>\npureComponentPrototype<span class="token punctuation">.</span>isPureReactComponent <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>è¿™é‡Œåªæ˜¯ <code class="language-text">PureComponent</code> çš„å£°æ˜åˆ›å»ºï¼Œè‡³äºå¦‚ä½•å®ç° <code class="language-text">shouldComponentUpdate()</code> ï¼Œæ ¸å¿ƒä»£ç åœ¨ï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="33455974715666637000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ReactFiberClassComponent.js\nfunction checkShouldComponentUpdate(workInProgress, ctor, oldProps, newProps, oldState, newState, nextContext) {\n  // ...\n  if (ctor.prototype && ctor.prototype.isPureReactComponent) {\n    // å¦‚æœæ˜¯çº¯ç»„ä»¶ï¼Œæ¯”è¾ƒæ–°è€ propsã€state\n    // è¿”å› trueï¼Œé‡æ–°æ¸²æŸ“ï¼Œ\n    // å³ shallowEqual props è¿”å› falseï¼Œæˆ– shallowEqual state è¿”å› false\n    return !shallowEqual(oldProps, newProps) || !shallowEqual(oldState, newState);\n  }\n  return true;\n}`, `33455974715666637000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ReactFiberClassComponent.js</span>\n<span class="token keyword">function</span> <span class="token function">checkShouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">workInProgress<span class="token punctuation">,</span> ctor<span class="token punctuation">,</span> oldProps<span class="token punctuation">,</span> newProps<span class="token punctuation">,</span> oldState<span class="token punctuation">,</span> newState<span class="token punctuation">,</span> nextContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctor<span class="token punctuation">.</span>prototype <span class="token operator">&amp;&amp;</span> ctor<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isPureReactComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// å¦‚æœæ˜¯çº¯ç»„ä»¶ï¼Œæ¯”è¾ƒæ–°è€ propsã€state</span>\n    <span class="token comment">// è¿”å› trueï¼Œé‡æ–°æ¸²æŸ“ï¼Œ</span>\n    <span class="token comment">// å³ shallowEqual props è¿”å› falseï¼Œæˆ– shallowEqual state è¿”å› false</span>\n    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">shallowEqual</span><span class="token punctuation">(</span>oldProps<span class="token punctuation">,</span> newProps<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">shallowEqual</span><span class="token punctuation">(</span>oldState<span class="token punctuation">,</span> newState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>shallowEqual.js</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="25716812241001705000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/**\n * é€šè¿‡éå†å¯¹è±¡ä¸Šçš„é”®å¹¶è¿”å› false æ¥æ‰§è¡Œç›¸ç­‰æ€§\n * åœ¨å‚æ•°åˆ—è¡¨ä¸­ï¼Œå½“ä»»æ„é”®å¯¹åº”çš„å€¼ä¸ä¸¥æ ¼ç›¸ç­‰æ—¶ï¼Œè¿”å› falseã€‚\n * å½“æ‰€æœ‰é”®çš„å€¼ä¸¥æ ¼ç›¸ç­‰æ—¶,è¿”å› trueã€‚\n */\nfunction shallowEqual(objA: mixed, objB: mixed): boolean {\n  // é€šè¿‡ Object.is åˆ¤æ–­ objAã€objB æ˜¯å¦ç›¸ç­‰\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== \'object\' || objA === null || typeof objB !== \'object\' || objB === null) {\n    return false;\n  }\n\n  // å‚æ•°åˆ—è¡¨\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  // å‚æ•°åˆ—è¡¨é•¿åº¦ä¸ç›¸åŒ\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // æ¯”è¾ƒå‚æ•°åˆ—è¡¨æ¯ä¸€ä¸ªå‚æ•°ï¼Œä½†ä»…æ¯”è¾ƒä¸€å±‚\n  for (let i = 0; i < keysA.length; i++) {\n    if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}`, `25716812241001705000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/**\n * é€šè¿‡éå†å¯¹è±¡ä¸Šçš„é”®å¹¶è¿”å› false æ¥æ‰§è¡Œç›¸ç­‰æ€§\n * åœ¨å‚æ•°åˆ—è¡¨ä¸­ï¼Œå½“ä»»æ„é”®å¯¹åº”çš„å€¼ä¸ä¸¥æ ¼ç›¸ç­‰æ—¶ï¼Œè¿”å› falseã€‚\n * å½“æ‰€æœ‰é”®çš„å€¼ä¸¥æ ¼ç›¸ç­‰æ—¶,è¿”å› trueã€‚\n */</span>\n<span class="token keyword">function</span> <span class="token function">shallowEqual</span><span class="token punctuation">(</span><span class="token parameter">objA<span class="token punctuation">:</span> mixed<span class="token punctuation">,</span> objB<span class="token punctuation">:</span> mixed</span><span class="token punctuation">)</span><span class="token punctuation">:</span> boolean <span class="token punctuation">{</span>\n  <span class="token comment">// é€šè¿‡ Object.is åˆ¤æ–­ objAã€objB æ˜¯å¦ç›¸ç­‰</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is</span><span class="token punctuation">(</span>objA<span class="token punctuation">,</span> objB<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> objA <span class="token operator">!==</span> <span class="token string">\'object\'</span> <span class="token operator">||</span> objA <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> objB <span class="token operator">!==</span> <span class="token string">\'object\'</span> <span class="token operator">||</span> objB <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// å‚æ•°åˆ—è¡¨</span>\n  <span class="token keyword">const</span> keysA <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>objA<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> keysB <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>objB<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// å‚æ•°åˆ—è¡¨é•¿åº¦ä¸ç›¸åŒ</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>keysA<span class="token punctuation">.</span>length <span class="token operator">!==</span> keysB<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// æ¯”è¾ƒå‚æ•°åˆ—è¡¨æ¯ä¸€ä¸ªå‚æ•°ï¼Œä½†ä»…æ¯”è¾ƒä¸€å±‚</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keysA<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>objB<span class="token punctuation">,</span> keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">is</span><span class="token punctuation">(</span>objA<span class="token punctuation">[</span>keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> objB<span class="token punctuation">[</span>keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="é™„ï¼šobjectisï¼ˆæ¥è‡ª-mdnï¼‰"><a href="#%E9%99%84%EF%BC%9Aobjectis%EF%BC%88%E6%9D%A5%E8%87%AA-mdn%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>é™„ï¼šObject.isï¼ˆæ¥è‡ª MDNï¼‰</h2>\n<p><code class="language-text">Object.is()</code> åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness" target="_blank" rel="nofollow noreferrer noopener">ç›¸åŒ</a>ã€‚</p>\n<p>è¿™ç§ç›¸ç­‰æ€§åˆ¤æ–­é€»è¾‘å’Œä¼ ç»Ÿçš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Equality" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">==</code></a> è¿ç®—ä¸åŒï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Equality" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">==</code></a> è¿ç®—ç¬¦ä¼šå¯¹å®ƒä¸¤è¾¹çš„æ“ä½œæ•°åšéšå¼ç±»å‹è½¬æ¢ï¼ˆå¦‚æœå®ƒä»¬ç±»å‹ä¸åŒï¼‰ï¼Œç„¶åæ‰è¿›è¡Œç›¸ç­‰æ€§æ¯”è¾ƒï¼Œï¼ˆæ‰€ä»¥æ‰ä¼šæœ‰ç±»ä¼¼ <code class="language-text">&quot;&quot; == false</code> ç­‰äº <code class="language-text">true</code> çš„ç°è±¡ï¼‰ï¼Œä½† <code class="language-text">Object.is</code> ä¸ä¼šåšè¿™ç§ç±»å‹è½¬æ¢ã€‚</p>\n<p>è¿™ä¸ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Identity" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">===</code></a> è¿ç®—ç¬¦çš„åˆ¤å®šæ–¹å¼ä¹Ÿä¸ä¸€æ ·ã€‚<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Identity" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">===</code></a> è¿ç®—ç¬¦ï¼ˆå’Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Equality" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">==</code></a> è¿ç®—ç¬¦ï¼‰å°†æ•°å­—å€¼ <code class="language-text">-0</code> å’Œ <code class="language-text">+0</code> è§†ä¸ºç›¸ç­‰ï¼Œå¹¶è®¤ä¸º <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/NaN" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">Number.NaN</code></a> ä¸ç­‰äº <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">NaN</code></a>ã€‚</p>\n<p>å¦‚æœä¸‹åˆ—ä»»ä½•ä¸€é¡¹æˆç«‹ï¼Œåˆ™ä¸¤ä¸ªå€¼ç›¸åŒï¼š</p>\n<ul>\n<li>ä¸¤ä¸ªå€¼éƒ½æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">undefined</code></a></li>\n<li>ä¸¤ä¸ªå€¼éƒ½æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">null</code></a></li>\n<li>ä¸¤ä¸ªå€¼éƒ½æ˜¯ <code class="language-text">true</code> æˆ–è€…éƒ½æ˜¯ <code class="language-text">false</code></li>\n<li>ä¸¤ä¸ªå€¼æ˜¯ç”±ç›¸åŒä¸ªæ•°çš„å­—ç¬¦æŒ‰ç…§ç›¸åŒçš„é¡ºåºç»„æˆçš„å­—ç¬¦ä¸²</li>\n<li>ä¸¤ä¸ªå€¼æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</li>\n<li>\n<p>ä¸¤ä¸ªå€¼éƒ½æ˜¯æ•°å­—å¹¶ä¸”</p>\n<ul>\n<li>éƒ½æ˜¯æ­£é›¶ <code class="language-text">+0</code></li>\n<li>éƒ½æ˜¯è´Ÿé›¶ <code class="language-text">-0</code></li>\n<li>éƒ½æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">NaN</code></a></li>\n<li>éƒ½æ˜¯é™¤é›¶å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN" target="_blank" rel="nofollow noreferrer noopener"><code class="language-text">NaN</code></a> å¤–çš„å…¶å®ƒåŒä¸€ä¸ªæ•°å­—</li>\n</ul>\n</li>\n</ul>',
excerpt:"PureComponent  æœ€æ—©åœ¨ React v15.3 ç‰ˆæœ¬ä¸­å‘å¸ƒï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¼˜åŒ– Reactâ€¦",timeToRead:9,tableOfContents:'<ul>\n<li><a href="/react-purecomponent-practice-learn/#purecomponent">PureComponent</a></li>\n<li>\n<p><a href="/react-purecomponent-practice-learn/#purecomponent-%E4%B8%8E-stateless-functional-component">PureComponent ä¸ Stateless Functional Component</a></p>\n<ul>\n<li><a href="/react-purecomponent-practice-learn/#%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6">æ— çŠ¶æ€ç»„ä»¶</a></li>\n<li><a href="/react-purecomponent-practice-learn/#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8-purecomponent%EF%BC%9F">ä½•æ—¶ä½¿ç”¨ &#x3C;code class="language-text">PureComponent&#x3C;/code>ï¼Ÿ</a></li>\n<li><a href="/react-purecomponent-practice-learn/#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6%EF%BC%9F">ä½•æ—¶ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ï¼Ÿ</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/react-purecomponent-practice-learn/#purecomponent-%E4%B8%8E-reactmemo">PureComponent ä¸ React.memo</a></p>\n<ul>\n<li><a href="/react-purecomponent-practice-learn/#reactmemo">React.memo</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/react-purecomponent-practice-learn/#%E4%BD%BF%E7%94%A8-purecomponent-%E5%B8%B8%E8%A7%81%E8%AF%AF%E5%8C%BA">ä½¿ç”¨ PureComponent å¸¸è§è¯¯åŒº</a></p>\n<ul>\n<li><a href="/react-purecomponent-practice-learn/#%E8%AF%AF%E5%8C%BA%E4%B8%80%EF%BC%9A%E5%9C%A8%E6%B8%B2%E6%9F%93%E6%96%B9%E6%B3%95%E4%B8%AD%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0">è¯¯åŒºä¸€ï¼šåœ¨æ¸²æŸ“æ–¹æ³•ä¸­åˆ›å»ºå‡½æ•°</a></li>\n<li><a href="/react-purecomponent-practice-learn/#%E8%AF%AF%E5%8C%BA%E4%BA%8C%EF%BC%9A%E5%9C%A8%E6%B8%B2%E6%9F%93%E6%96%B9%E6%B3%95%E4%B8%AD%E6%B4%BE%E7%94%9F-state">è¯¯åŒºäºŒï¼šåœ¨æ¸²æŸ“æ–¹æ³•ä¸­æ´¾ç”Ÿ state</a></li>\n<li><a href="/react-purecomponent-practice-learn/#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>\n</ul>\n</li>\n<li>\n<p><a href="/react-purecomponent-practice-learn/#purecomponent-%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">PureComponent æºç è§£æ</a></p>\n<ul>\n<li><a href="/react-purecomponent-practice-learn/#%E9%99%84%EF%BC%9Aobjectis%EF%BC%88%E6%9D%A5%E8%87%AA-mdn%EF%BC%89">é™„ï¼šObject.isï¼ˆæ¥è‡ª MDNï¼‰</a></li>\n</ul>\n</li>\n</ul>',wordCount:{words:342},frontmatter:{date:"2019-09-19 19:44:14",path:"/react-purecomponent-practice-learn/",tags:"å‰ç«¯, React, PureComponent",title:"Reactä¹‹PureComponentå…¥é—¨å­¦ä¹ ",draft:null,catalog_number:null}},nextPost:{html:'<p>React ç”Ÿå‘½å‘¨æœŸå¾ˆå¤šäººéƒ½äº†è§£ï¼Œä½†é€šå¸¸æˆ‘ä»¬æ‰€äº†è§£çš„éƒ½æ˜¯ <strong>å•ä¸ªç»„ä»¶</strong> çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†é’ˆå¯¹ <strong>Hooks ç»„ä»¶ã€å¤šä¸ªå…³è”ç»„ä»¶</strong>ï¼ˆçˆ¶å­ç»„ä»¶å’Œå…„å¼Ÿç»„ä»¶ï¼‰ çš„ç”Ÿå‘½å‘¨æœŸåˆæ˜¯æ€ä¹ˆæ ·çš„å–ƒï¼Ÿä½ æœ‰æ€è€ƒå’Œäº†è§£è¿‡å—ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®Œæ•´çš„äº†è§£ React ç”Ÿå‘½å‘¨æœŸã€‚</p>\n<p>å…³äº <strong>ç»„ä»¶</strong> ï¼Œæˆ‘ä»¬è¿™é‡ŒæŒ‡çš„æ˜¯ <code class="language-text">React.Component</code> ä»¥åŠ <code class="language-text">React.PureComponent</code> ï¼Œä½†æ˜¯å¦åŒ…æ‹¬ Hooks ç»„ä»¶å‘¢ï¼Ÿ</p>\n<h1 id="hooks-ç»„ä»¶"><a href="#hooks-%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hooks ç»„ä»¶</h1>\n<p><strong>å‡½æ•°ç»„ä»¶</strong> çš„æœ¬è´¨æ˜¯å‡½æ•°ï¼Œæ²¡æœ‰ state çš„æ¦‚å¿µçš„ï¼Œå› æ­¤<strong>ä¸å­˜åœ¨ç”Ÿå‘½å‘¨æœŸ</strong>ä¸€è¯´ï¼Œä»…ä»…æ˜¯ä¸€ä¸ª <strong>render å‡½æ•°</strong>è€Œå·²ã€‚</p>\n<p>ä½†æ˜¯å¼•å…¥ <strong>Hooks</strong> ä¹‹åå°±å˜å¾—ä¸åŒäº†ï¼Œå®ƒèƒ½è®©ç»„ä»¶åœ¨ä¸ä½¿ç”¨ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ï¼Œç›¸æ¯”ä¸ class çš„ç”Ÿå‘½å‘¨æœŸæ¦‚å¿µæ¥è¯´ï¼Œå®ƒæ›´æ¥è¿‘äºå®ç°çŠ¶æ€åŒæ­¥ï¼Œè€Œä¸æ˜¯å“åº”ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚ä½†æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code class="language-text">useState</code>ã€ <code class="language-text">useEffect()</code> å’Œ <code class="language-text">useLayoutEffect()</code> æ¥æ¨¡æ‹Ÿå®ç°ç”Ÿå‘½å‘¨æœŸã€‚</p>\n<p>å³ï¼š<strong>Hooks ç»„ä»¶æ›´æ¥è¿‘äºå®ç°çŠ¶æ€åŒæ­¥ï¼Œè€Œä¸æ˜¯å“åº”ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</strong>ã€‚</p>\n<p>ä¸‹é¢ï¼Œæ˜¯å…·ä½“çš„ ç”Ÿå‘½å‘¨æœŸ ä¸ Hooks çš„<strong>å¯¹åº”å…³ç³»</strong>ï¼š</p>\n<ul>\n<li>\n<p><code class="language-text">constructor</code>ï¼šå‡½æ•°ç»„ä»¶ä¸éœ€è¦æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ <strong><code class="language-text">useState</code> æ¥åˆå§‹åŒ– state</strong>ã€‚å¦‚æœè®¡ç®—çš„ä»£ä»·æ¯”è¾ƒæ˜‚è´µï¼Œä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªå‡½æ•°ç»™ <code class="language-text">useState</code>ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76998927352201630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const [num, UpdateNum] = useState(0);`, `76998927352201630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">[</span>num<span class="token punctuation">,</span> UpdateNum<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n</li>\n<li>\n<p><code class="language-text">getDerivedStateFromProps</code>ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<strong>æ¸²æŸ“è¿‡ç¨‹ä¸­æ›´æ–° state</strong>ï¼Œä»¥è¾¾åˆ°å®ç° <code class="language-text">getDerivedStateFromProps</code> çš„ç›®çš„ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53055553390095580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function ScrollView({ row }) {\nlet [isScrollingDown, setIsScrollingDown] = useState(false);\nlet [prevRow, setPrevRow] = useState(null);\n\nif (row !== prevRow) {\n  // Row è‡ªä¸Šæ¬¡æ¸²æŸ“ä»¥æ¥å‘ç”Ÿè¿‡æ”¹å˜ã€‚æ›´æ–° isScrollingDownã€‚\n  setIsScrollingDown(prevRow !== null && row > prevRow);\n  setPrevRow(row);\n}\n\nreturn \\`Scrolling down: \\${isScrollingDown}\\`;\n}`, `53055553390095580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">ScrollView</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> row <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="token keyword">let</span> <span class="token punctuation">[</span>isScrollingDown<span class="token punctuation">,</span> setIsScrollingDown<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> <span class="token punctuation">[</span>prevRow<span class="token punctuation">,</span> setPrevRow<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>row <span class="token operator">!==</span> prevRow<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// Row è‡ªä¸Šæ¬¡æ¸²æŸ“ä»¥æ¥å‘ç”Ÿè¿‡æ”¹å˜ã€‚æ›´æ–° isScrollingDownã€‚</span>\n  <span class="token function">setIsScrollingDown</span><span class="token punctuation">(</span>prevRow <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> row <span class="token operator">></span> prevRow<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">setPrevRow</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Scrolling down: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isScrollingDown<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>React ä¼šç«‹å³é€€å‡ºç¬¬ä¸€æ¬¡æ¸²æŸ“å¹¶ç”¨æ›´æ–°åçš„ state é‡æ–°è¿è¡Œç»„ä»¶ä»¥é¿å…è€—è´¹å¤ªå¤šæ€§èƒ½ã€‚</p>\n</li>\n<li>\n<p><code class="language-text">shouldComponentUpdate</code>ï¼šå¯ä»¥ç”¨ <strong><code class="language-text">React.memo</code></strong> åŒ…è£¹ä¸€ä¸ªç»„ä»¶æ¥å¯¹å®ƒçš„ <code class="language-text">props</code> è¿›è¡Œæµ…æ¯”è¾ƒ</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70014299857322590000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const Button = React.memo((props) => {\n// å…·ä½“çš„ç»„ä»¶\n});`, `70014299857322590000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> Button <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n<span class="token comment">// å…·ä½“çš„ç»„ä»¶</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>æ³¨æ„ï¼š<strong><code class="language-text">React.memo</code> ç­‰æ•ˆäº <code class="language-text">PureComponent</code></strong>ï¼Œå®ƒåªæµ…æ¯”è¾ƒ propsã€‚è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code class="language-text">useMemo</code> ä¼˜åŒ–æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>\n</li>\n<li>\n<p><code class="language-text">render</code>ï¼šè¿™æ˜¯å‡½æ•°ç»„ä»¶ä½“æœ¬èº«ã€‚</p>\n</li>\n<li>\n<p><code class="language-text">componentDidMount</code>, <code class="language-text">componentDidUpdate</code>ï¼š <code class="language-text">useLayoutEffect</code> ä¸å®ƒä»¬ä¸¤çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ¨èä½ <strong>ä¸€å¼€å§‹å…ˆç”¨ useEffect</strong>ï¼Œåªæœ‰å½“å®ƒå‡ºé—®é¢˜çš„æ—¶å€™å†å°è¯•ä½¿ç”¨ <code class="language-text">useLayoutEffect</code>ã€‚<code class="language-text">useEffect</code> å¯ä»¥è¡¨è¾¾æ‰€æœ‰è¿™äº›çš„ç»„åˆã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87816557337105370000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// componentDidMount\nuseEffect(() => {\n// éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹\n}, []);\n\nuseEffect(() => {\n// åœ¨ componentDidMountï¼Œä»¥åŠ count æ›´æ”¹æ—¶ componentDidUpdate æ‰§è¡Œçš„å†…å®¹\ndocument.title = \\`You clicked \\${count} times\\`;\nreturn () => {\n  // éœ€è¦åœ¨ count æ›´æ”¹æ—¶ componentDidUpdateï¼ˆå…ˆäº document.title = ... æ‰§è¡Œï¼Œéµå®ˆå…ˆæ¸…ç†åæ›´æ–°ï¼‰\n  // ä»¥åŠ componentWillUnmount æ‰§è¡Œçš„å†…å®¹\n}; // å½“å‡½æ•°ä¸­ Cleanup å‡½æ•°ä¼šæŒ‰ç…§åœ¨ä»£ç ä¸­å®šä¹‰çš„é¡ºåºå…ˆåæ‰§è¡Œï¼Œä¸å‡½æ•°æœ¬èº«çš„ç‰¹æ€§æ— å…³\n}, [count]); // ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°`, `87816557337105370000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// componentDidMount</span>\n<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n<span class="token comment">// éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n<span class="token comment">// åœ¨ componentDidMountï¼Œä»¥åŠ count æ›´æ”¹æ—¶ componentDidUpdate æ‰§è¡Œçš„å†…å®¹</span>\ndocument<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token comment">// éœ€è¦åœ¨ count æ›´æ”¹æ—¶ componentDidUpdateï¼ˆå…ˆäº document.title = ... æ‰§è¡Œï¼Œéµå®ˆå…ˆæ¸…ç†åæ›´æ–°ï¼‰</span>\n  <span class="token comment">// ä»¥åŠ componentWillUnmount æ‰§è¡Œçš„å†…å®¹</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// å½“å‡½æ•°ä¸­ Cleanup å‡½æ•°ä¼šæŒ‰ç…§åœ¨ä»£ç ä¸­å®šä¹‰çš„é¡ºåºå…ˆåæ‰§è¡Œï¼Œä¸å‡½æ•°æœ¬èº«çš„ç‰¹æ€§æ— å…³</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><strong>è¯·è®°å¾— React ä¼šç­‰å¾…æµè§ˆå™¨å®Œæˆç”»é¢æ¸²æŸ“ä¹‹åæ‰ä¼šå»¶è¿Ÿè°ƒç”¨ <code class="language-text">useEffect</code>ï¼Œå› æ­¤ä¼šä½¿å¾—é¢å¤–æ“ä½œå¾ˆæ–¹ä¾¿</strong></p>\n</li>\n<li>\n<p><code class="language-text">componentWillUnmount</code>ï¼šç›¸å½“äº <code class="language-text">useEffect</code> é‡Œé¢è¿”å›çš„ <code class="language-text">cleanup</code> å‡½æ•°</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87769639973709320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// componentDidMount/componentWillUnmount\nuseEffect(() => {\n// éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹\nreturn function cleanup() {\n  // éœ€è¦åœ¨ componentWillUnmount æ‰§è¡Œçš„å†…å®¹\n};\n}, []);`, `87769639973709320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// componentDidMount/componentWillUnmount</span>\n<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n<span class="token comment">// éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹</span>\n<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// éœ€è¦åœ¨ componentWillUnmount æ‰§è¡Œçš„å†…å®¹</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p><code class="language-text">componentDidCatch</code> and <code class="language-text">getDerivedStateFromError</code>ï¼šç›®å‰<strong>è¿˜æ²¡æœ‰</strong>è¿™äº›æ–¹æ³•çš„ Hook ç­‰ä»·å†™æ³•ï¼Œä½†å¾ˆå¿«ä¼šåŠ ä¸Šã€‚</p>\n</li>\n</ul>\n<p>ä¸ºæ–¹ä¾¿è®°å¿†ï¼Œå¤§è‡´æ±‡æ€»æˆè¡¨æ ¼å¦‚ä¸‹ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>class ç»„ä»¶</th>\n<th>Hooks ç»„ä»¶</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>constructor</td>\n<td>useState</td>\n</tr>\n<tr>\n<td>getDerivedStateFromProps</td>\n<td>useState é‡Œé¢ update å‡½æ•°</td>\n</tr>\n<tr>\n<td>shouldComponentUpdate</td>\n<td>useMemo</td>\n</tr>\n<tr>\n<td>render</td>\n<td>å‡½æ•°æœ¬èº«</td>\n</tr>\n<tr>\n<td>componentDidMount</td>\n<td>useEffect</td>\n</tr>\n<tr>\n<td>componentDidUpdate</td>\n<td>useEffect</td>\n</tr>\n<tr>\n<td>componentWillUnmount</td>\n<td>useEffect é‡Œé¢è¿”å›çš„å‡½æ•°</td>\n</tr>\n<tr>\n<td>componentDidCatch</td>\n<td>æ— </td>\n</tr>\n<tr>\n<td>getDerivedStateFromError</td>\n<td>æ— </td>\n</tr>\n</tbody>\n</table>\n<h1 id="å•ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#%E5%8D%95%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å•ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h1>\n<h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç”Ÿå‘½å‘¨æœŸ</h2>\n<h3 id="v163-ä¹‹å‰"><a href="#v163-%E4%B9%8B%E5%89%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>V16.3 ä¹‹å‰</h3>\n<p>æˆ‘ä»¬å¯ä»¥å°†ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>\n<ul>\n<li>æŒ‚è½½é˜¶æ®µ</li>\n<li>ç»„ä»¶æ›´æ–°é˜¶æ®µ</li>\n<li>å¸è½½é˜¶æ®µ</li>\n</ul>\n<p>åˆ†å¼€æ¥è®²ï¼š</p>\n<ol>\n<li>\n<p>æŒ‚è½½é˜¶æ®µ</p>\n<ul>\n<li><code class="language-text">constructor</code>ï¼šé¿å…å°† props çš„å€¼å¤åˆ¶ç»™ state</li>\n<li><code class="language-text">componentWillMount</code></li>\n<li><code class="language-text">render</code>ï¼šreact æœ€é‡è¦çš„æ­¥éª¤ï¼Œåˆ›å»ºè™šæ‹Ÿ domï¼Œè¿›è¡Œ diff ç®—æ³•ï¼Œæ›´æ–° dom æ ‘éƒ½åœ¨æ­¤è¿›è¡Œ</li>\n<li><code class="language-text">componentDidMount</code></li>\n</ul>\n</li>\n<li>\n<p>ç»„ä»¶æ›´æ–°é˜¶æ®µ</p>\n<ul>\n<li><code class="language-text">componentWillReceiveProps</code></li>\n<li><code class="language-text">shouldComponentUpdate</code></li>\n<li><code class="language-text">componentWillUpdate</code></li>\n<li><code class="language-text">render</code></li>\n<li><code class="language-text">componentDidUpdate</code></li>\n</ul>\n</li>\n<li>\n<p>å¸è½½é˜¶æ®µ</p>\n<ul>\n<li><code class="language-text">componentWillUnMount</code></li>\n</ul>\n</li>\n</ol>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-19-15-39-27-eab55b0696e08d1c4eb1c06e80f91656-64b63.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 46.2%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABMUlEQVQoz31RXW/DIAzs//9je16nqVXapkkWGkJKvgsGDMxptq4P207Iss53WLY3MUYDC3zwBK01IoYY6FFpZShSvpJUJcY5R8yGSCll0zTEGmOEEFRbpCEAZaDrutZLAvEOpRRp5nm+m9FCvYN6j1a3l/FybJqi84jHyb5U02tnQcOU7Nu3rWalj0EUskxqnkuPfuns4OZAoXei5+klrSRDjyOv+S6RaaaGiR1Yuc3anFM3C07fwIClGTbxGzQzH7pU8LKTzmPP2HV/7t4Pep4rIQrGunFYF/HAszmI3mZ85q1BH2QznBLGcnED9dGzo8ha1dEifjc/FyiX6nqW52pkM5ii1odyug42xr/NYYlxvQpv9S5vT9Vg7NflfAj/dPaPj0nk0INB4/BJHu6aH3wCvBUH6w2zt08AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 19 15 39 27"\n        title=""\n        src="/static/2019-09-19-15-39-27-eab55b0696e08d1c4eb1c06e80f91656-fee1c.png"\n        srcset="/static/2019-09-19-15-39-27-eab55b0696e08d1c4eb1c06e80f91656-a67b7.png 200w,\n/static/2019-09-19-15-39-27-eab55b0696e08d1c4eb1c06e80f91656-0b187.png 400w,\n/static/2019-09-19-15-39-27-eab55b0696e08d1c4eb1c06e80f91656-fee1c.png 800w,\n/static/2019-09-19-15-39-27-eab55b0696e08d1c4eb1c06e80f91656-b1a91.png 1200w,\n/static/2019-09-19-15-39-27-eab55b0696e08d1c4eb1c06e80f91656-95179.png 1600w,\n/static/2019-09-19-15-39-27-eab55b0696e08d1c4eb1c06e80f91656-64b63.png 2000w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>è¿™ç§ç”Ÿå‘½å‘¨æœŸä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å½“æ›´æ–°å¤æ‚ç»„ä»¶çš„æœ€ä¸Šå±‚ç»„ä»¶æ—¶ï¼Œè°ƒç”¨æ ˆä¼šå¾ˆé•¿ï¼Œå¦‚æœåœ¨è¿›è¡Œå¤æ‚çš„æ“ä½œæ—¶ï¼Œå°±å¯èƒ½é•¿æ—¶é—´é˜»å¡ä¸»çº¿ç¨‹ï¼Œå¸¦æ¥ä¸å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œ<strong>Fiber</strong> å°±æ˜¯ä¸ºäº†è§£å†³è¯¥é—®é¢˜è€Œç”Ÿã€‚</p>\n<h3 id="v163-ä¹‹å"><a href="#v163-%E4%B9%8B%E5%90%8E" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>V16.3 ä¹‹å</h3>\n<p><strong>Fiber æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„å †æ ˆå¸§ï¼Œæ–°çš„è°ƒåº¦å™¨ä¼šæŒ‰ç…§ä¼˜å…ˆçº§è‡ªç”±è°ƒåº¦è¿™äº›å¸§ï¼Œä»è€Œå°†ä¹‹å‰çš„åŒæ­¥æ¸²æŸ“æ”¹æˆäº†å¼‚æ­¥æ¸²æŸ“ï¼Œåœ¨ä¸å½±å“ä½“éªŒçš„æƒ…å†µä¸‹å»åˆ†æ®µè®¡ç®—æ›´æ–°ã€‚</strong></p>\n<p>å¯¹äºå¼‚æ­¥æ¸²æŸ“ï¼Œåˆ†ä¸ºä¸¤é˜¶æ®µï¼š</p>\n<ul>\n<li>\n<p><code class="language-text">reconciliation</code>ï¼š</p>\n<ul>\n<li><code class="language-text">componentWillMount</code></li>\n<li><code class="language-text">componentWillReceiveProps</code></li>\n<li><code class="language-text">shouldConmponentUpdate</code></li>\n<li><code class="language-text">componentWillUpdate</code></li>\n</ul>\n</li>\n<li>\n<p><code class="language-text">commit</code></p>\n<ul>\n<li><code class="language-text">componentDidMount</code></li>\n<li><code class="language-text">componentDidUpdate</code></li>\n</ul>\n</li>\n</ul>\n<p>å…¶ä¸­ï¼Œ<code class="language-text">reconciliation</code> é˜¶æ®µæ˜¯å¯ä»¥è¢«æ‰“æ–­çš„ï¼Œæ‰€ä»¥ <code class="language-text">reconcilation</code> é˜¶æ®µæ‰§è¡Œçš„å‡½æ•°å°±ä¼šå‡ºç°å¤šæ¬¡è°ƒç”¨çš„æƒ…å†µï¼Œæ˜¾ç„¶ï¼Œè¿™æ˜¯ä¸åˆç†çš„ã€‚</p>\n<p>æ‰€ä»¥ V16.3 å¼•å…¥äº†æ–°çš„ API æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>\n<ol>\n<li>\n<p><code class="language-text">static getDerivedStateFromProps</code>ï¼š è¯¥å‡½æ•°åœ¨<strong>æŒ‚è½½é˜¶æ®µå’Œç»„ä»¶æ›´æ–°é˜¶æ®µ</strong>éƒ½ä¼šæ‰§è¡Œï¼Œå³<strong>æ¯æ¬¡è·å–æ–°çš„<code class="language-text">props</code> æˆ– <code class="language-text">state</code> ä¹‹åéƒ½ä¼šè¢«æ‰§è¡Œ</strong>ï¼Œ<strong>åœ¨æŒ‚è½½é˜¶æ®µç”¨æ¥ä»£æ›¿<code class="language-text">componentWillMount</code></strong>ï¼›åœ¨ç»„ä»¶æ›´æ–°é˜¶æ®µé…åˆ <code class="language-text">componentDidUpdate</code>ï¼Œå¯ä»¥è¦†ç›– <code class="language-text">componentWillReceiveProps</code> çš„æ‰€æœ‰ç”¨æ³•ã€‚</p>\n<p>åŒæ—¶å®ƒæ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œæ‰€ä»¥å‡½æ•°ä½“å†…ä¸èƒ½è®¿é—® <code class="language-text">this</code>ï¼Œä¼šæ ¹æ® <code class="language-text">nextProps</code> å’Œ <code class="language-text">prevState</code> è®¡ç®—å‡ºé¢„æœŸçš„çŠ¶æ€æ”¹å˜ï¼Œè¿”å›ç»“æœä¼šè¢«é€ç»™ <code class="language-text">setState</code><strong>ï¼Œ</strong>è¿”å› <code class="language-text">null</code> åˆ™è¯´æ˜ä¸éœ€è¦æ›´æ–° <code class="language-text">state</code>ï¼Œå¹¶ä¸”è¿™ä¸ªè¿”å›æ˜¯<strong>å¿…é¡»çš„</strong>ã€‚</p>\n</li>\n<li>\n<p><code class="language-text">getSnapshotBeforeUpdate</code>: è¯¥å‡½æ•°ä¼šåœ¨ <strong><code class="language-text">render</code> ä¹‹åï¼Œ DOM æ›´æ–°å‰</strong>è¢«è°ƒç”¨ï¼Œç”¨äºè¯»å–æœ€æ–°çš„ DOM æ•°æ®ã€‚</p>\n<p>è¿”å›ä¸€ä¸ªå€¼ï¼Œ<strong>ä½œä¸º <code class="language-text">componentDidUpdate</code> çš„ç¬¬ä¸‰ä¸ªå‚æ•°</strong>ï¼›é…åˆ <code class="language-text">componentDidUpdate</code>, å¯ä»¥è¦†ç›–<code class="language-text">componentWillUpdate</code> çš„æ‰€æœ‰ç”¨æ³•ã€‚</p>\n</li>\n</ol>\n<p>æ³¨æ„ï¼šV16.3 ä¸­åªç”¨åœ¨ç»„ä»¶æŒ‚è½½æˆ–ç»„ä»¶ <code class="language-text">props</code> æ›´æ–°è¿‡ç¨‹æ‰ä¼šè°ƒç”¨ï¼Œå³å¦‚æœæ˜¯å› ä¸ºè‡ªèº« setState å¼•å‘æˆ–è€… forceUpdate å¼•å‘ï¼Œè€Œä¸æ˜¯ç”±çˆ¶ç»„ä»¶å¼•å‘çš„è¯ï¼Œé‚£ä¹ˆ<code class="language-text">static getDerivedStateFromProps</code>ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ï¼Œåœ¨ V16.4 ä¸­æ›´æ­£ä¸ºéƒ½è°ƒç”¨ã€‚</p>\n<p>å³æ›´æ–°åçš„ç”Ÿå‘½å‘¨æœŸä¸ºï¼š</p>\n<ol>\n<li>\n<p>æŒ‚è½½é˜¶æ®µ</p>\n<ul>\n<li><code class="language-text">constructor</code></li>\n<li><code class="language-text">static getDerivedStateFromProps</code></li>\n<li><code class="language-text">render</code></li>\n<li><code class="language-text">componentDidMount</code></li>\n</ul>\n</li>\n<li>\n<p>æ›´æ–°é˜¶æ®µ</p>\n<ul>\n<li><code class="language-text">static getDerivedStateFromProps</code></li>\n<li><code class="language-text">shouldComponentUpdate</code></li>\n<li><code class="language-text">render</code></li>\n<li><code class="language-text">getSnapshotBeforeUpdate</code></li>\n<li><code class="language-text">componentDidUpdate</code></li>\n</ul>\n</li>\n<li>\n<p>å¸è½½é˜¶æ®µ</p>\n<ul>\n<li><code class="language-text">componentWillUnmount</code></li>\n</ul>\n</li>\n</ol>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-09-19-15-42-52-c13f7d524b09e92ec31990247d36fa3c-60fa0.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 65.97845601436265%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB1ElEQVQoz11SibKqMAzl///OGRUVAVkLbaH7xuaNF0fvexkmCTk5zekSPf+1bdv2ZF6eZBCE4K7rCIS+36Ht1/ae6C/tA4P3IXAupJTWOcHYSIj3/oPuzV8yYONAT6ejFNwYbYwJIcDYy+VirQVUaw0JpfRwOHDOIY/ei22btr4jPMkqMiqptJIvgyaMe60UJEIIICilMMbg3+RdtdA+rfkxaQqkhLLQTShVSmNMhJAtQowxIJg/FoGetm0lLKt9iW2FbU3dtaCnFMVZl1ZjhU1N3KMzeFQ7F8bCFl5k0BbHMUJo3xX8QhV82Q7XrLuX5Jr3XBpQDrYP/JI/B6aNG7mG62HCwFd2HCbfkiZvOGEGD4Jzaf8jw5FCBD0A1URXWDfUtNQ8Gpo3tB8torodTEUUGeQuG3S9yRCqqur7PkxTCJO1DrxzfvW9FSlpjqg4UHSeVO40dT4474DmoMP7aFmW32sM62yec7949JyJk6VhueH5pOvF1BsUQzt7vq7fV7Su62tymqaE0HkyfMxxdxPsoUXDhmKgGcF30ieCFda0zoowBaE4GTB4yKN5nkEDeO3MrUzi7JJUd1DCLG9ZC/kZKuUdMaSsYmqMs9MlP98eZ6n5Dzwc3073oxEkAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 09 19 15 42 52"\n        title=""\n        src="/static/2019-09-19-15-42-52-c13f7d524b09e92ec31990247d36fa3c-fee1c.png"\n        srcset="/static/2019-09-19-15-42-52-c13f7d524b09e92ec31990247d36fa3c-a67b7.png 200w,\n/static/2019-09-19-15-42-52-c13f7d524b09e92ec31990247d36fa3c-0b187.png 400w,\n/static/2019-09-19-15-42-52-c13f7d524b09e92ec31990247d36fa3c-fee1c.png 800w,\n/static/2019-09-19-15-42-52-c13f7d524b09e92ec31990247d36fa3c-b1a91.png 1200w,\n/static/2019-09-19-15-42-52-c13f7d524b09e92ec31990247d36fa3c-95179.png 1600w,\n/static/2019-09-19-15-42-52-c13f7d524b09e92ec31990247d36fa3c-60fa0.png 2228w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="ç”Ÿå‘½å‘¨æœŸï¼Œè¯¯åŒº"><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%8C%E8%AF%AF%E5%8C%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç”Ÿå‘½å‘¨æœŸï¼Œè¯¯åŒº</h3>\n<p><strong>è¯¯è§£ä¸€ï¼š</strong><code class="language-text">getDerivedStateFromProps</code> å’Œ <code class="language-text">componentWillReceiveProps</code> åªä¼šåœ¨ <code class="language-text">props</code> <strong>æ”¹å˜</strong> æ—¶æ‰ä¼šè°ƒç”¨</p>\n<p>å®é™…ä¸Šï¼Œ<strong>åªè¦çˆ¶çº§é‡æ–°æ¸²æŸ“ï¼Œ<code class="language-text">getDerivedStateFromProps</code> å’Œ <code class="language-text">componentWillReceiveProps</code> éƒ½ä¼šé‡æ–°è°ƒç”¨ï¼Œä¸ç®¡ <code class="language-text">props</code> æœ‰æ²¡æœ‰å˜åŒ–</strong>ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™ä¸¤ä¸ªæ–¹æ³•å†…ç›´æ¥å°† props èµ‹å€¼åˆ° state æ˜¯ä¸å®‰å…¨çš„ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72732758639652720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// å­ç»„ä»¶\nclass PhoneInput extends Component {\n  state = { phone: this.props.phone };\n\n  handleChange = (e) => {\n    this.setState({ phone: e.target.value });\n  };\n\n  render() {\n    const { phone } = this.state;\n    return <input onChange={this.handleChange} value={phone} />;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // ä¸è¦è¿™æ ·åšã€‚\n    // è¿™ä¼šè¦†ç›–æ‰ä¹‹å‰æ‰€æœ‰çš„ç»„ä»¶å†… state æ›´æ–°ï¼\n    this.setState({ phone: nextProps.phone });\n  }\n}\n\n// çˆ¶ç»„ä»¶\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      count: 0\n    };\n  }\n\n  componentDidMount() {\n    // ä½¿ç”¨äº† setIntervalï¼Œ\n    // æ¯ç§’é’Ÿéƒ½ä¼šæ›´æ–°ä¸€ä¸‹ state.count\n    // è¿™å°†å¯¼è‡´ App æ¯ç§’é’Ÿé‡æ–°æ¸²æŸ“ä¸€æ¬¡\n    this.interval = setInterval(\n      () =>\n        this.setState((prevState) => ({\n          count: prevState.count + 1\n        })),\n      1000\n    );\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    return (\n      <>\n        <p>Start editing to see some magic happen :)</p>\n        <PhoneInput phone=\'call me!\' />\n        <p>\n          This component will re-render every second. Each time it renders, the text you type will be reset. This\n          illustrates a derived state anti-pattern.\n        </p>\n      </>\n    );\n  }\n}`, `72732758639652720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// å­ç»„ä»¶</span>\n<span class="token keyword">class</span> <span class="token class-name">PhoneInput</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span> phone<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>phone <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> phone<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> phone <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>phone<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// ä¸è¦è¿™æ ·åšã€‚</span>\n    <span class="token comment">// è¿™ä¼šè¦†ç›–æ‰ä¹‹å‰æ‰€æœ‰çš„ç»„ä»¶å†… state æ›´æ–°ï¼</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> phone<span class="token punctuation">:</span> nextProps<span class="token punctuation">.</span>phone <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// çˆ¶ç»„ä»¶</span>\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      count<span class="token punctuation">:</span> <span class="token number">0</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// ä½¿ç”¨äº† setIntervalï¼Œ</span>\n    <span class="token comment">// æ¯ç§’é’Ÿéƒ½ä¼šæ›´æ–°ä¸€ä¸‹ state.count</span>\n    <span class="token comment">// è¿™å°†å¯¼è‡´ App æ¯ç§’é’Ÿé‡æ–°æ¸²æŸ“ä¸€æ¬¡</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>\n      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>\n          count<span class="token punctuation">:</span> prevState<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token number">1000</span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>p<span class="token operator">></span>Start editing to see some magic happen <span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n        <span class="token operator">&lt;</span>PhoneInput phone<span class="token operator">=</span><span class="token string">\'call me!\'</span> <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>p<span class="token operator">></span>\n          This component will re<span class="token operator">-</span>render every second<span class="token punctuation">.</span> Each time it renders<span class="token punctuation">,</span> the text you type will be reset<span class="token punctuation">.</span> This\n          illustrates a derived state anti<span class="token operator">-</span>pattern<span class="token punctuation">.</span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><a href="https://stackblitz.com/edit/react-yammav" target="_blank" rel="nofollow noreferrer noopener">å®ä¾‹å¯ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹</a></p>\n<p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ çˆ¶ç»„ä»¶ App ä¸­ <code class="language-text">shouldComponentUpdate</code> æ¯”è¾ƒ props çš„ email æ˜¯ä¸æ˜¯ä¿®æ”¹å†å†³å®šè¦ä¸è¦é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯å¦‚æœå­ç»„ä»¶æ¥å—å¤šä¸ª propsï¼ˆè¾ƒä¸ºå¤æ‚ï¼‰ï¼Œå°±å¾ˆéš¾å¤„ç†ï¼Œè€Œä¸” <code class="language-text">shouldComponentUpdate</code> ä¸»è¦æ˜¯ç”¨æ¥æ€§èƒ½æå‡çš„ï¼Œä¸æ¨èå¼€å‘è€…æ“ä½œ <code class="language-text">shouldComponetUpdate</code>ï¼ˆå¯ä»¥ä½¿ç”¨ <code class="language-text">React.PureComponet</code>ï¼‰ã€‚</p>\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>åœ¨ props å˜åŒ–åä¿®æ”¹ state</strong>ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="67523567389041770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class PhoneInput extends Component {\n  state = {\n    phone: this.props.phone\n  };\n\n  componentWillReceiveProps(nextProps) {\n    // åªè¦ props.phone æ”¹å˜ï¼Œå°±æ”¹å˜ state\n    if (nextProps.phone !== this.props.phone) {\n      this.setState({\n        phone: nextProps.phone\n      });\n    }\n  }\n\n  // ...\n}`, `67523567389041770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">PhoneInput</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    phone<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>phone\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// åªè¦ props.phone æ”¹å˜ï¼Œå°±æ”¹å˜ state</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>phone <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>phone<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        phone<span class="token punctuation">:</span> nextProps<span class="token punctuation">.</span>phone\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ä½†è¿™ç§ä¹Ÿä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œå½“ props è¾ƒä¸ºå¤æ‚æ—¶ï¼Œprops ä¸ state çš„å…³ç³»ä¸å¥½æ§åˆ¶ï¼Œå¯èƒ½å¯¼è‡´é—®é¢˜</p>\n<p>è§£å†³æ–¹æ¡ˆä¸€ï¼š<strong>å®Œå…¨å¯æ§çš„ç»„ä»¶</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63160966213018345000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function PhoneInput(props) {\n  return <input onChange={props.onChange} value={props.phone} />;\n}`, `63160966213018345000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">PhoneInput</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>onChange<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>phone<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p><strong>å®Œå…¨ç”± props æ§åˆ¶ï¼Œä¸æ´¾ç”Ÿ state</strong></p>\n<p>è§£å†³æ–¹æ¡ˆäºŒï¼š<strong>æœ‰ key çš„éå¯æ§ç»„ä»¶</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11656640900655213000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class PhoneInput extends Component {\n  state = { phone: this.props.defaultPhone };\n\n  handleChange = (event) => {\n    this.setState({ phone: event.target.value });\n  };\n\n  render() {\n    return <input onChange={this.handleChange} value={this.state.phone} />;\n  }\n}\n\n<PhoneInput defaultPhone={this.props.user.phone} key={this.props.user.id} />;`, `11656640900655213000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">PhoneInput</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span> phone<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>defaultPhone <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> phone<span class="token punctuation">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>phone<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token operator">&lt;</span>PhoneInput defaultPhone<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>user<span class="token punctuation">.</span>phone<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>user<span class="token punctuation">.</span>id<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å½“ <code class="language-text">key</code> å˜åŒ–æ—¶ï¼Œ React ä¼š<strong>åˆ›å»ºä¸€ä¸ªæ–°çš„è€Œä¸æ˜¯æ›´æ–°ä¸€ä¸ªæ—¢æœ‰çš„ç»„ä»¶</strong></p>\n<p><strong>è¯¯è§£äºŒ</strong>ï¼šå°† props çš„å€¼ç›´æ¥å¤åˆ¶ç»™ state</p>\n<p><strong>åº”é¿å…å°† props çš„å€¼å¤åˆ¶ç»™ state</strong></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68655607325617725000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`constructor(props) {\n super(props);\n // åƒä¸‡ä¸è¦è¿™æ ·åš\n // ç›´æ¥ç”¨ propsï¼Œä¿è¯å•ä¸€æ•°æ®æº\n this.state = { phone: props.phone };\n}`, `68655607325617725000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token comment">// åƒä¸‡ä¸è¦è¿™æ ·åš</span>\n <span class="token comment">// ç›´æ¥ç”¨ propsï¼Œä¿è¯å•ä¸€æ•°æ®æº</span>\n <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> phone<span class="token punctuation">:</span> props<span class="token punctuation">.</span>phone <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="å¤šä¸ªç»„ä»¶çš„æ‰§è¡Œé¡ºåº"><a href="#%E5%A4%9A%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å¤šä¸ªç»„ä»¶çš„æ‰§è¡Œé¡ºåº</h1>\n<h2 id="çˆ¶å­ç»„ä»¶"><a href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>çˆ¶å­ç»„ä»¶</h2>\n<ul>\n<li>\n<p><strong>æŒ‚è½½é˜¶æ®µ</strong></p>\n<p>åˆ† <strong>ä¸¤ä¸ª</strong> é˜¶æ®µï¼š</p>\n<ul>\n<li>ç¬¬ <strong>ä¸€</strong> é˜¶æ®µï¼Œç”±çˆ¶ç»„ä»¶å¼€å§‹æ‰§è¡Œåˆ°è‡ªèº«çš„ <code class="language-text">render</code>ï¼Œè§£æå…¶ä¸‹æœ‰å“ªäº›å­ç»„ä»¶éœ€è¦æ¸²æŸ“ï¼Œå¹¶å¯¹å…¶ä¸­ <strong>åŒæ­¥çš„å­ç»„ä»¶</strong> è¿›è¡Œåˆ›å»ºï¼ŒæŒ‰ <strong>é€’å½’é¡ºåº</strong> æŒ¨ä¸ªæ‰§è¡Œå„ä¸ªå­ç»„ä»¶è‡³ <code class="language-text">render</code>ï¼Œç”Ÿæˆåˆ°çˆ¶å­ç»„ä»¶å¯¹åº”çš„ Virtual DOM æ ‘ï¼Œå¹¶ commit åˆ° DOMã€‚</li>\n<li>ç¬¬ <strong>äºŒ</strong> é˜¶æ®µï¼Œæ­¤æ—¶ DOM èŠ‚ç‚¹å·²ç»ç”Ÿæˆå®Œæ¯•ï¼Œç»„ä»¶æŒ‚è½½å®Œæˆï¼Œå¼€å§‹åç»­æµç¨‹ã€‚å…ˆä¾æ¬¡è§¦å‘åŒæ­¥å­ç»„ä»¶å„è‡ªçš„ <code class="language-text">componentDidMount</code>ï¼Œæœ€åè§¦å‘çˆ¶ç»„ä»¶çš„ã€‚</li>\n</ul>\n<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœçˆ¶ç»„ä»¶ä¸­åŒ…å«å¼‚æ­¥å­ç»„ä»¶ï¼Œåˆ™ä¼šåœ¨çˆ¶ç»„ä»¶æŒ‚è½½å®Œæˆåè¢«åˆ›å»ºã€‚</p>\n<p>æ‰€ä»¥æ‰§è¡Œé¡ºåºæ˜¯ï¼š</p>\n<p>çˆ¶ç»„ä»¶ getDerivedStateFromProps â€”> åŒæ­¥å­ç»„ä»¶ getDerivedStateFromProps â€”> åŒæ­¥å­ç»„ä»¶ componentDidMount â€”> çˆ¶ç»„ä»¶ componentDidMount â€”> å¼‚æ­¥å­ç»„ä»¶ getDerivedStateFromProps â€”> å¼‚æ­¥å­ç»„ä»¶ componentDidMount</p>\n</li>\n<li>\n<p><strong>æ›´æ–°é˜¶æ®µ</strong></p>\n<p><strong>React çš„è®¾è®¡éµå¾ªå•å‘æ•°æ®æµæ¨¡å‹</strong> ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®å‡æ˜¯ç”±çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ã€‚</p>\n<ul>\n<li>\n<p>ç¬¬ <strong>ä¸€</strong> é˜¶æ®µï¼Œç”±çˆ¶ç»„ä»¶å¼€å§‹ï¼Œæ‰§è¡Œ</p>\n</li>\n<li>\n<p><code class="language-text">static getDerivedStateFromProps</code></p>\n</li>\n<li>\n<p><code class="language-text">shouldComponentUpdate</code></p>\n</li>\n</ul>\n<p>æ›´æ–°åˆ°è‡ªèº«çš„ <code class="language-text">render</code>ï¼Œè§£æå…¶ä¸‹æœ‰å“ªäº›å­ç»„ä»¶éœ€è¦æ¸²æŸ“ï¼Œå¹¶å¯¹ <strong>å­ç»„ä»¶</strong> è¿›è¡Œåˆ›å»ºï¼ŒæŒ‰ <strong>é€’å½’é¡ºåº</strong> æŒ¨ä¸ªæ‰§è¡Œå„ä¸ªå­ç»„ä»¶è‡³ <code class="language-text">render</code>ï¼Œç”Ÿæˆåˆ°çˆ¶å­ç»„ä»¶å¯¹åº”çš„ Virtual DOM æ ‘ï¼Œå¹¶ä¸å·²æœ‰çš„ Virtual DOM æ ‘ æ¯”è¾ƒï¼Œè®¡ç®—å‡º <strong>Virtual DOM çœŸæ­£å˜åŒ–çš„éƒ¨åˆ†</strong> ï¼Œå¹¶åªé’ˆå¯¹è¯¥éƒ¨åˆ†è¿›è¡Œçš„åŸç”Ÿ DOM æ“ä½œã€‚</p>\n<ul>\n<li>\n<p>ç¬¬ <strong>äºŒ</strong> é˜¶æ®µï¼Œæ­¤æ—¶ DOM èŠ‚ç‚¹å·²ç»ç”Ÿæˆå®Œæ¯•ï¼Œç»„ä»¶æŒ‚è½½å®Œæˆï¼Œå¼€å§‹åç»­æµç¨‹ã€‚å…ˆä¾æ¬¡è§¦å‘åŒæ­¥å­ç»„ä»¶ä»¥ä¸‹å‡½æ•°ï¼Œæœ€åè§¦å‘çˆ¶ç»„ä»¶çš„ã€‚</p>\n</li>\n<li>\n<p><code class="language-text">getSnapshotBeforeUpdate()</code></p>\n</li>\n<li>\n<p><code class="language-text">componentDidUpdate()</code></p>\n</li>\n</ul>\n<p>React ä¼šæŒ‰ç…§ä¸Šé¢çš„é¡ºåºä¾æ¬¡æ‰§è¡Œè¿™äº›å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æ˜¯å„ä¸ªå­ç»„ä»¶çš„å…ˆæ‰§è¡Œï¼Œç„¶åæ‰æ˜¯çˆ¶ç»„ä»¶çš„æ‰§è¡Œã€‚</p>\n<p>æ‰€ä»¥æ‰§è¡Œé¡ºåºæ˜¯ï¼š</p>\n<p>çˆ¶ç»„ä»¶ getDerivedStateFromProps â€”> çˆ¶ç»„ä»¶ shouldComponentUpdate â€”> å­ç»„ä»¶ getDerivedStateFromProps â€”> å­ç»„ä»¶ shouldComponentUpdate â€”> å­ç»„ä»¶ getSnapshotBeforeUpdate â€”> çˆ¶ç»„ä»¶ getSnapshotBeforeUpdate â€”> å­ç»„ä»¶ componentDidUpdate â€”> çˆ¶ç»„ä»¶ componentDidUpdate</p>\n</li>\n<li>\n<p><strong>å¸è½½é˜¶æ®µ</strong></p>\n<p><code class="language-text">componentWillUnmount()</code>ï¼Œé¡ºåºä¸º <strong>çˆ¶ç»„ä»¶çš„å…ˆæ‰§è¡Œï¼Œå­ç»„ä»¶æŒ‰ç…§åœ¨ JSX ä¸­å®šä¹‰çš„é¡ºåºä¾æ¬¡æ‰§è¡Œå„è‡ªçš„æ–¹æ³•</strong>ã€‚</p>\n<p><strong>æ³¨æ„</strong> ï¼šå¦‚æœå¸è½½æ—§ç»„ä»¶çš„åŒæ—¶ä¼´éšæœ‰æ–°ç»„ä»¶çš„åˆ›å»ºï¼Œæ–°ç»„ä»¶ä¼šå…ˆè¢«åˆ›å»ºå¹¶æ‰§è¡Œå®Œ <code class="language-text">render</code>ï¼Œç„¶åå¸è½½ä¸éœ€è¦çš„æ—§ç»„ä»¶ï¼Œæœ€åæ–°ç»„ä»¶æ‰§è¡ŒæŒ‚è½½å®Œæˆçš„å›è°ƒã€‚</p>\n</li>\n</ul>\n<h2 id="å…„å¼Ÿç»„ä»¶"><a href="#%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å…„å¼Ÿç»„ä»¶</h2>\n<ul>\n<li>\n<p><strong>æŒ‚è½½é˜¶æ®µ</strong></p>\n<p>è‹¥æ˜¯åŒæ­¥è·¯ç”±ï¼Œå®ƒä»¬çš„åˆ›å»ºé¡ºåºå’Œå…¶åœ¨å…±åŒçˆ¶ç»„ä»¶ä¸­å®šä¹‰çš„å…ˆåé¡ºåºæ˜¯ <strong>ä¸€è‡´</strong> çš„ã€‚</p>\n<p>è‹¥æ˜¯å¼‚æ­¥è·¯ç”±ï¼Œå®ƒä»¬çš„åˆ›å»ºé¡ºåºå’Œ js åŠ è½½å®Œæˆçš„é¡ºåºä¸€è‡´ã€‚</p>\n</li>\n<li>\n<p><strong>æ›´æ–°é˜¶æ®µã€å¸è½½é˜¶æ®µ</strong></p>\n<p>å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ä¸»è¦æ˜¯ç»è¿‡çˆ¶ç»„ä»¶ï¼ˆRedux å’Œ Context ä¹Ÿæ˜¯é€šè¿‡æ”¹å˜çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„ <code class="language-text">props</code> å®ç°çš„ï¼‰ï¼Œ<strong>æ»¡è¶³ React çš„è®¾è®¡éµå¾ªå•å‘æ•°æ®æµæ¨¡å‹</strong>ï¼Œ <strong>å› æ­¤ä»»ä½•ä¸¤ä¸ªç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼Œæœ¬è´¨ä¸Šéƒ½å¯ä»¥å½’ç»“ä¸ºçˆ¶å­ç»„ä»¶æ›´æ–°çš„æƒ…å†µ</strong> ã€‚</p>\n<p>æ‰€ä»¥ï¼Œå…„å¼Ÿç»„ä»¶æ›´æ–°ã€å¸è½½é˜¶æ®µï¼Œè¯·å‚è€ƒ <strong>çˆ¶å­ç»„ä»¶</strong>ã€‚</p>\n</li>\n</ul>',
excerpt:"React ç”Ÿå‘½å‘¨æœŸå¾ˆå¤šäººéƒ½äº†è§£ï¼Œä½†é€šå¸¸æˆ‘ä»¬æ‰€äº†è§£çš„éƒ½æ˜¯  å•ä¸ªç»„ä»¶  çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†é’ˆå¯¹  Hooks ç»„ä»¶ã€å¤šä¸ªå…³è”ç»„ä»¶ ï¼ˆçˆ¶å­ç»„ä»¶å’Œå…„å¼Ÿç»„ä»¶ï¼‰ çš„ç”Ÿå‘½å‘¨æœŸåˆæ˜¯æ€ä¹ˆæ ·çš„å–ƒï¼Ÿä½ æœ‰æ€è€ƒå’Œäº†è§£è¿‡å—ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®Œæ•´çš„äº†è§£ Reactâ€¦",frontmatter:{date:"2019-09-19 15:29:20",path:"/react-lifecycle-practice-learn/",tags:"å‰ç«¯, React, ç”Ÿå‘½å‘¨æœŸ",title:"Reactç”Ÿå‘½å‘¨æœŸå…¥é—¨å­¦ä¹ ",draft:null}},prePost:{html:'<h1 id="ç»„ä»¶"><a href="#%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç»„ä»¶</h1>\n<h2 id="çº¯ç»„ä»¶"><a href="#%E7%BA%AF%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>çº¯ç»„ä»¶</h2>\n<p><code class="language-text">React.PureComponent</code> ï¼Œå’Œ <code class="language-text">React.Component</code> ç±»ä¼¼ï¼Œéƒ½æ˜¯å®šä¹‰ä¸€ä¸ªç»„ä»¶ç±»ã€‚ä¸åŒæ˜¯ <code class="language-text">React.Component</code> æ²¡æœ‰å®ç° <code class="language-text">shouldComponentUpdate()</code>ï¼Œè€Œ <code class="language-text">React.PureComponent</code> é€šè¿‡ <code class="language-text">props</code> å’Œ <code class="language-text">state</code> çš„<strong>æµ…æ¯”è¾ƒ</strong>å®ç°äº†ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22035142809946472000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// React.PureComponent çº¯ç»„ä»¶\nclass Counter extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { count: 0 };\n  }\n  render() {\n    return (\n      <button onClick={() => this.setState((state) => ({ count: state.count + 1 }))}>Count: {this.state.count}</button>\n    );\n  }\n}`, `22035142809946472000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// React.PureComponent çº¯ç»„ä»¶</span>\n<span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>Count<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>åœ¨ä¸‹ä¸€èŠ‚ä¸­å°†ä¼šè¯¦ç»†ä»‹ç»ã€‚</p>\n<h2 id="å‡½æ•°ç»„ä»¶"><a href="#%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å‡½æ•°ç»„ä»¶</h2>\n<p>å®šä¹‰ React ç»„ä»¶çš„<strong>æœ€ç®€å•</strong>æ–¹å¼å°±æ˜¯å®šä¹‰ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œå®ƒæ¥å—å•ä¸€çš„ props å¹¶è¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5996852947568354000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// å‡½æ•°ç»„ä»¶\nfunction Counter(props) {\n  return <div>Counter: {props.count}</div>;\n}\n// ç±»ç»„ä»¶\nclass Counter extends React.Component {\n  render() {\n    return <div>Counter: {this.props.count}</div>;\n  }\n}`, `5996852947568354000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// å‡½æ•°ç»„ä»¶</span>\n<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Counter<span class="token punctuation">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// ç±»ç»„ä»¶</span>\n<span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Counter<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>åœ¨ å‡½æ•°ç»„ä»¶ ä¸­ï¼Œå®ƒçš„è¾“å…¥è¾“å‡ºå…¨éƒ¨ç”± props å†³å®šï¼Œä¸”ä¸ä¼šäº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ï¼Œè¿™è¯´æ˜ <strong>å‡½æ•°ç»„ä»¶ ä¹Ÿæ˜¯ æ— çŠ¶æ€ç»„ä»¶</strong>ã€‚</li>\n<li>åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œæ— æ³•ä¿®æ”¹ propsï¼Œæ— æ³•ä½¿ç”¨ state åŠç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¯´æ˜ <strong>å‡½æ•°ç»„ä»¶ ä¹Ÿæ˜¯ å±•ç¤ºç»„ä»¶</strong>ã€‚</li>\n<li>å‡½æ•°ç»„ä»¶ çš„åŠŸèƒ½åªæ˜¯æ¥æ”¶ propsï¼Œæ¸²æŸ“é¡µé¢ï¼Œå®ƒä¸æ‰§è¡Œä¸ UI æ— å…³çš„é€»è¾‘å¤„ç†ï¼Œå®ƒåªæ˜¯ä¸€ä¸ª<strong>çº¯å‡½æ•°</strong>ã€‚</li>\n<li>å‡½æ•°ç»„ä»¶ï¼Œç›¸å¯¹äºç±»ç»„ä»¶æ¥è¯´ï¼Œæ›´åŠ ç®€æ´ã€‚æ— è®ºæ˜¯å¤ç”¨æ€§è¿˜æ˜¯æ€§èƒ½ï¼Œéƒ½<strong>ä¼˜äºç±»ç»„ä»¶</strong>ã€‚</li>\n</ul>\n<h2 id="å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶"><a href="#%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6%E4%B8%8E%E9%9D%9E%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶</h2>\n<p><strong>å—æ§å’Œéå—æ§ä¸»è¦æ˜¯å–å†³äºç»„ä»¶æ˜¯å¦å—çˆ¶çº§ä¼ å…¥çš„ props æ§åˆ¶</strong></p>\n<p>ç”¨ props ä¼ å…¥æ•°æ®çš„è¯ï¼Œç»„ä»¶å¯ä»¥è¢«è®¤ä¸ºæ˜¯<strong>å—æ§</strong>ï¼ˆå› ä¸ºç»„ä»¶è¢«çˆ¶çº§ä¼ å…¥çš„ props æ§åˆ¶ï¼‰ã€‚</p>\n<p>æ•°æ®åªä¿å­˜åœ¨ç»„ä»¶å†…éƒ¨çš„ state çš„è¯ï¼Œæ˜¯<strong>éå—æ§</strong>ç»„ä»¶ï¼ˆå› ä¸ºå¤–éƒ¨æ²¡åŠæ³•ç›´æ¥æ§åˆ¶ stateï¼‰ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85575841119979980000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`export default class AnForm extends React.Component {\n  state = {\n    name: \'\'\n  };\n  handleSubmitClick = () => {\n    console.log(\'éå—æ§ç»„ä»¶: \', this._name.value);\n    console.log(\'å—æ§ç»„ä»¶: \', this.state.name);\n  };\n  handleChange = (e) => {\n    this.setState({\n      name: e.target.value\n    });\n  };\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmitClick}>\n        <label>\n          éå—æ§ç»„ä»¶:\n          <input type=\'text\' defaultValue=\'default\' ref={(input) => (this._name = input)} />\n        </label>\n        <label>\n          å—æ§ç»„ä»¶:\n          <input type=\'text\' value={this.state.name} onChange={this.handleChange} />\n        </label>\n        <input type=\'submit\' value=\'Submit\' />\n      </form>\n    );\n  }\n}`, `85575841119979980000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">AnForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token punctuation">:</span> <span class="token string">\'\'</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token function-variable function">handleSubmitClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'éå—æ§ç»„ä»¶: \'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'å—æ§ç»„ä»¶: \'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      name<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmitClick<span class="token punctuation">}</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>label<span class="token operator">></span>\n          éå—æ§ç»„ä»¶<span class="token punctuation">:</span>\n          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">\'text\'</span> defaultValue<span class="token operator">=</span><span class="token string">\'default\'</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> input<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>\n        <span class="token operator">&lt;</span>label<span class="token operator">></span>\n          å—æ§ç»„ä»¶<span class="token punctuation">:</span>\n          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">\'text\'</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>\n        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">\'submit\'</span> value<span class="token operator">=</span><span class="token string">\'Submit\'</span> <span class="token operator">/</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="å—æ§ç»„ä»¶"><a href="#%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å—æ§ç»„ä»¶</h3>\n<p>ä¸ html ä¸åŒçš„æ˜¯ï¼Œåœ¨ React ä¸­ï¼Œ<code class="language-text">&lt;input&gt;</code>æˆ–<code class="language-text">&lt;select&gt;</code>ã€<code class="language-text">&lt;textarea&gt;</code>ç­‰è¿™ç±»ç»„ä»¶ï¼Œä¸ä¼šä¸»åŠ¨ç»´æŒè‡ªèº«çŠ¶æ€ï¼Œå¹¶æ ¹æ®ç”¨æˆ·è¾“å…¥è¿›è¡Œæ›´æ–°ã€‚å®ƒä»¬éƒ½è¦ç»‘å®šä¸€ä¸ª<code class="language-text">onChange</code>äº‹ä»¶ï¼›æ¯å½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½è¦å†™å…¥ç»„ä»¶çš„ state ä¸­ï¼Œåœ¨ React ä¸­è¢«ç§°ä¸º<strong>å—æ§ç»„ä»¶</strong>ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95186830658498890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`export default class AnForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { value: \'\' };\n    this.handleChange = this.handleChange.bind(this);\n  }\n  handleChange(event) {\n    this.setState({ value: event.target.value });\n  }\n  render() {\n    return <input type=\'text\' value={this.state.value} onChange={this.handleChange} />;\n  }\n}`, `95186830658498890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">AnForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">\'\'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token punctuation">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">\'text\'</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p><strong>onChange &#x26; value æ¨¡å¼</strong>ï¼ˆå•é€‰æŒ‰é’®å’Œå¤é€‰æŒ‰é’®å¯¹åº”çš„æ˜¯ checked propsï¼‰</p>\n</li>\n<li>\n<p>react é€šè¿‡è¿™ç§æ–¹å¼<strong>æ¶ˆé™¤äº†ç»„ä»¶çš„å±€éƒ¨çŠ¶æ€ï¼Œ</strong>ä½¿å¾—åº”ç”¨çš„æ•´ä¸ª<strong>çŠ¶æ€å¯æ§</strong>ã€‚</p>\n</li>\n<li>\n<p>æ³¨æ„ <code class="language-text">&lt;input type=&quot;file&quot; /&gt;</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>éå—æ§ç»„ä»¶</strong>ã€‚</p>\n</li>\n<li>\n<p>å¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§åå°†å¤šä¸ªç›¸ä¼¼çš„æ“ä½œç»„åˆæˆä¸€ä¸ªã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57804292214286600000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`this.setState({\n[name]: value\n});`, `57804292214286600000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> value\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<h3 id="éå—æ§ç»„ä»¶"><a href="#%E9%9D%9E%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>éå—æ§ç»„ä»¶</h3>\n<p>éå—æ§ç»„ä»¶ä¸å†å°†æ•°æ®ä¿å­˜åœ¨ stateï¼Œè€Œä½¿ç”¨ refsï¼Œå°†çœŸå®æ•°æ®ä¿å­˜åœ¨ DOM ä¸­ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="78631833895699320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`export default class AnForm extends Component {\n  handleSubmitClick = () => {\n    const name = this._name.value;\n  };\n\n  render() {\n    return (\n      <div>\n        <input type=\'text\' ref={(input) => (this._name = input)} />\n        <button onClick={this.handleSubmitClick}>Sign up</button>\n      </div>\n    );\n  }\n}`, `78631833895699320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">AnForm</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">handleSubmitClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">.</span>value<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">\'text\'</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name <span class="token operator">=</span> input<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmitClick<span class="token punctuation">}</span><span class="token operator">></span>Sign up<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p><strong>éå—æ§ç»„ä»¶æ˜¯æœ€ç®€å•å¿«é€Ÿ</strong>çš„å®ç°æ–¹å¼ï¼Œé¡¹ç›®ä¸­å‡ºç°æç®€çš„è¡¨å•æ—¶ï¼Œä½¿ç”¨å®ƒï¼Œä½†<strong>å—æ§ç»„ä»¶æ‰æ˜¯æ˜¯æœ€æƒå¨çš„</strong>ã€‚</p>\n</li>\n<li>\n<p>é€šå¸¸æŒ‡å®šä¸€ä¸ª <strong>defaultValue/defaultChecked</strong> é»˜è®¤å€¼æ¥æ§åˆ¶åˆå§‹çŠ¶æ€ï¼Œä¸ä½¿ç”¨ valueã€‚</p>\n</li>\n<li>\n<p>éå—æ§ç»„ä»¶ç›¸æ¯”äºå—æ§ç»„ä»¶ï¼Œæ›´å®¹æ˜“åŒæ—¶é›†æˆ React å’Œé React ä»£ç ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨åœºæ™¯</p>\n<p>| ç‰¹å¾ | éå—æ§ç»„ä»¶ | å—æ§ç»„ä»¶ |\n| --- | --- | --- |\n| one-time value retrieval (e.g. on submit) | âœ… | âœ… |\n| <a href="https://goshakkk.name/submit-time-validation-react/" target="_blank" rel="nofollow noreferrer noopener">validating on submit</a> | âœ… | âœ… |\n| <a href="https://goshakkk.name/instant-form-fields-validation-react/" target="_blank" rel="nofollow noreferrer noopener">instant field validation</a> | âŒ | âœ… |\n| <a href="https://goshakkk.name/form-recipe-disable-submit-button-react/" target="_blank" rel="nofollow noreferrer noopener">conditionally disabling submit button</a> | âŒ | âœ… |\n| enforcing input format | âŒ | âœ… |\n| several inputs for one piece of data | âŒ | âœ… |\n| <a href="https://goshakkk.name/array-form-inputs/" target="_blank" rel="nofollow noreferrer noopener">dynamic inputs</a> | âŒ | âœ… |</p>\n</li>\n</ul>\n<h2 id="æœ‰çŠ¶æ€ç»„ä»¶ä¸æ— çŠ¶æ€ç»„ä»¶"><a href="#%E6%9C%89%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æœ‰çŠ¶æ€ç»„ä»¶ä¸æ— çŠ¶æ€ç»„ä»¶</h2>\n<h3 id="æœ‰çŠ¶æ€ç»„ä»¶"><a href="#%E6%9C%89%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æœ‰çŠ¶æ€ç»„ä»¶</h3>\n<p>é€šè¿‡ state ç®¡ç†çŠ¶æ€</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92620840961120780000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`export default class Counter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { clicks: 0 };\n    this.handleClick = this.handleClick.bind(this);\n  }\n  handleClick() {\n    this.setState((state) => ({ clicks: state.clicks + 1 }));\n  }\n  render() {\n    return <Button onClick={this.handleClick} text={\\`You\'ve clicked me \\${this.state.clicks} times!\\`} />;\n  }\n}`, `92620840961120780000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> clicks<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> clicks<span class="token punctuation">:</span> state<span class="token punctuation">.</span>clicks <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span> text<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">You\'ve clicked me </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>clicks<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="æ— çŠ¶æ€ç»„ä»¶"><a href="#%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ— çŠ¶æ€ç»„ä»¶</h3>\n<p>è¾“å…¥è¾“å‡ºæ•°æ®å®Œå…¨ç”± props å†³å®šï¼Œè€Œä¸”ä¸ä¼šäº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35366258450903820000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const Button = (props) => <button onClick={props.onClick}>{props.text}</button>;`, `35366258450903820000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">Button</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>onClick<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<ul>\n<li>æ— çŠ¶æ€ç»„ä»¶ä¸€èˆ¬ä¼šæ­é…é«˜é˜¶ç»„ä»¶ï¼ˆç®€ç§°ï¼šHOCï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œé«˜é˜¶ç»„ä»¶ç”¨æ¥æ‰˜ç®¡ stateï¼ŒRedux æ¡†æ¶å°±æ˜¯é€šè¿‡ store ç®¡ç†æ•°æ®æºå’Œæ‰€æœ‰çŠ¶æ€ï¼Œå…¶ä¸­æ‰€æœ‰è´Ÿè´£å±•ç¤ºçš„ç»„ä»¶éƒ½ä½¿ç”¨æ— çŠ¶æ€å‡½æ•°å¼çš„å†™æ³•ã€‚</li>\n<li>ä¸€ä¸ªç®€å•çš„ æ— çŠ¶æ€(stateless) æŒ‰é’®ç»„ä»¶ï¼Œä»…ä¾èµ–äº props(å±æ€§) ï¼Œè¿™ä¹Ÿç§°ä¸º<strong>å‡½æ•°å¼ç»„ä»¶</strong>ã€‚</li>\n</ul>\n<h2 id="å±•ç¤ºç»„ä»¶ä¸å®¹å™¨ç»„ä»¶"><a href="#%E5%B1%95%E7%A4%BA%E7%BB%84%E4%BB%B6%E4%B8%8E%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å±•ç¤ºç»„ä»¶ä¸å®¹å™¨ç»„ä»¶</h2>\n<h3 id="å±•ç¤ºç»„ä»¶"><a href="#%E5%B1%95%E7%A4%BA%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å±•ç¤ºç»„ä»¶</h3>\n<p>å±•ç¤ºç»„ä»¶æŒ‡ä¸å…³å¿ƒæ•°æ®æ˜¯æ€ä¹ˆåŠ è½½å’Œå˜åŠ¨çš„ï¼Œåªå…³æ³¨äºé¡µé¢å±•ç¤ºæ•ˆæœçš„ç»„ä»¶ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2948148724506438700"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class TodoList extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    const { todos } = this.props;\n    return (\n      <div>\n        <ul>\n          {todos.map((item, index) => {\n            return <li key={item.id}>{item.name}</li>;\n          })}\n        </ul>\n      </div>\n    );\n  }\n}`, `2948148724506438700`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> todos <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>ul<span class="token operator">></span>\n          <span class="token punctuation">{</span>todos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>åªèƒ½é€šè¿‡ <strong>props</strong> çš„æ–¹å¼<strong>æ¥æ”¶æ•°æ®å’Œè¿›è¡Œå›è°ƒ</strong>(callback)æ“ä½œã€‚</li>\n<li><strong>å¾ˆå°‘æ‹¥æœ‰è‡ªå·±çš„çŠ¶æ€</strong>ï¼Œå³ä½¿æœ‰ä¹Ÿæ˜¯ç”¨äºå±•ç¤º UI çŠ¶æ€çš„ã€‚</li>\n<li>é€šå¸¸å…è®¸é€šè¿‡ <strong>this.props.children</strong> æ–¹å¼æ¥åŒ…å«å…¶ä»–ç»„ä»¶ã€‚</li>\n<li><strong>å†…éƒ¨å¯ä»¥åŒ…å«å±•ç¤ºç»„ä»¶å’Œå®¹å™¨ç»„ä»¶</strong>ï¼Œé€šå¸¸ä¼šåŒ…å«ä¸€äº›è‡ªå·±çš„ DOM æ ‡è®°å’Œæ ·å¼(style)</li>\n<li>å¯¹åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œä¾‹å¦‚ Flux æ“ä½œæˆ– storeã€‚</li>\n<li>ä¼šè¢«å†™æˆå‡½æ•°å¼ç»„ä»¶é™¤éè¯¥ç»„ä»¶éœ€è¦è‡ªå·±çš„çŠ¶æ€ï¼Œç”Ÿå‘½å‘¨æœŸæˆ–è€…åšä¸€äº›æ€§èƒ½ä¼˜åŒ–ã€‚</li>\n</ul>\n<h3 id="å®¹å™¨ç»„ä»¶"><a href="#%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å®¹å™¨ç»„ä»¶</h3>\n<p>å®¹å™¨ç»„ä»¶åªå…³å¿ƒæ•°æ®æ˜¯æ€ä¹ˆåŠ è½½å’Œå˜åŠ¨çš„ï¼Œè€Œä¸å…³æ³¨äºé¡µé¢å±•ç¤ºæ•ˆæœã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="73951075043797610000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`//å®¹å™¨ç»„ä»¶\nclass TodoListContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      todos: []\n    };\n    this.fetchData = this.fetchData.bind(this);\n  }\n  componentDidMount() {\n    this.fetchData();\n  }\n  fetchData() {\n    fetch(\'/api/todos\').then((data) => {\n      this.setState({\n        todos: data\n      });\n    });\n  }\n  render() {\n    return (\n      <div>\n        <TodoList todos={this.state.todos} />\n      </div>\n    );\n  }\n}`, `73951075043797610000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">//å®¹å™¨ç»„ä»¶</span>\n<span class="token keyword">class</span> <span class="token class-name">TodoListContainer</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      todos<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>fetchData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">\'/api/todos\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        todos<span class="token punctuation">:</span> data\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>TodoList todos<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>todos<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li><strong>å†…éƒ¨å¯ä»¥åŒ…å«å®¹å™¨ç»„ä»¶å’Œå±•ç¤ºç»„ä»¶</strong>ï¼Œä½†é€šå¸¸æ²¡æœ‰ä»»ä½•è‡ªå·±çš„ DOM æ ‡è®°ï¼Œé™¤äº†ä¸€äº›åŒ…è£… divsï¼Œå¹¶ä¸”ä»ä¸å…·æœ‰ä»»ä½•æ ·å¼ã€‚</li>\n<li>æä¾›æ•°æ®å’Œè¡Œä¸ºç»™å…¶ä»–çš„å±•ç¤ºç»„ä»¶æˆ–å®¹å™¨ç»„ä»¶ã€‚</li>\n<li>å¯ä»¥è°ƒç”¨ Flux æ“ä½œå¹¶å°†å®ƒä»¬ä½œä¸ºå›è°ƒå‡½æ•°ï¼ˆcallbackï¼‰æä¾›ç»™å±•ç¤ºç»„ä»¶ã€‚</li>\n<li>å¾€å¾€æ˜¯<strong>æœ‰çŠ¶æ€</strong>çš„ï¼Œå› ä¸ºå®ƒä»¬å€¾å‘äº<strong>ä½œä¸ºæ•°æ®æº</strong></li>\n<li>é€šå¸¸ä½¿ç”¨<strong>é«˜é˜¶ç»„ä»¶</strong>ç”Ÿæˆï¼Œä¾‹å¦‚ React Redux çš„ connect()</li>\n</ul>\n<h2 id="é«˜é˜¶ç»„ä»¶"><a href="#%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>é«˜é˜¶ç»„ä»¶</h2>\n<p><strong>é«˜é˜¶å‡½æ•°</strong>çš„å®šä¹‰ï¼šæ¥æ”¶å‡½æ•°ä½œä¸ºè¾“å…¥ï¼Œæˆ–è€…è¾“å‡ºå¦ä¸€ä¸ªå‡½æ•°çš„ä¸€ç±»å‡½æ•°ï¼Œè¢«ç§°ä½œé«˜é˜¶å‡½æ•°ã€‚</p>\n<p>å¯¹äº<strong>é«˜é˜¶ç»„ä»¶</strong>ï¼Œå®ƒæè¿°çš„ä¾¿æ˜¯æ¥å— React ç»„ä»¶ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºä¸€ä¸ªæ–°çš„ React ç»„ä»¶çš„ç»„ä»¶ã€‚</p>\n<p>æ›´é€šä¿—çš„æè¿°ä¸ºï¼Œé«˜é˜¶ç»„ä»¶é€šè¿‡åŒ…è£¹ï¼ˆwrappedï¼‰è¢«ä¼ å…¥çš„ React ç»„ä»¶ï¼Œç»è¿‡ä¸€ç³»åˆ—å¤„ç†ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ª<strong>ç›¸å¯¹å¢å¼ºï¼ˆenhancedï¼‰çš„ React ç»„ä»¶</strong>ï¼Œä¾›å…¶ä»–ç»„ä»¶è°ƒç”¨ã€‚ä½¿æˆ‘ä»¬çš„ä»£ç æ›´å…·æœ‰å¤ç”¨æ€§ã€é€»è¾‘æ€§å’ŒæŠ½è±¡ç‰¹æ€§ï¼Œå®ƒå¯ä»¥å¯¹ render æ–¹æ³•åšåŠ«æŒï¼Œä¹Ÿ<strong>å¯ä»¥æ§åˆ¶ props ã€state</strong>ã€‚</p>\n<p>å®ç°é«˜é˜¶ç»„ä»¶çš„æ–¹æ³•æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</p>\n<ul>\n<li><strong>å±æ€§ä»£ç†ï¼ˆprops proxyï¼‰</strong>ï¼Œé«˜é˜¶ç»„ä»¶é€šè¿‡è¢«åŒ…è£¹çš„ React ç»„ä»¶æ¥æ“ä½œ propsã€‚</li>\n<li><strong>åå‘ç»§æ‰¿ï¼ˆinheritance inversionï¼‰</strong>ï¼Œé«˜é˜¶ç»„ä»¶ç»§æ‰¿äºè¢«åŒ…è£¹çš„ React ç»„ä»¶ã€‚</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82565711590991720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// å±æ€§ä»£ç†\nexport default function withHeader(WrappedComponent) {\n  return class HOC extends React.Component { // ç»§æ‰¿ä¸ React.component\n    render() {\n      const newProps = {\n        test:\'hoc\'\n      }\n      // é€ä¼ propsï¼Œå¹¶ä¸”ä¼ é€’æ–°çš„newProps\n      return <div>\n        <WrappedComponent {...this.props} {...newProps}/>\n      </div>\n    }\n  }\n}\n\n// åå‘ç»§æ‰¿\nexport default function (WrappedComponent) {\n  return class Inheritance extends WrappedComponent { // ç»§æ‰¿äºè¢«åŒ…è£¹çš„ React ç»„ä»¶\n    componentDidMount() {\n      // å¯ä»¥æ–¹ä¾¿åœ°å¾—åˆ°stateï¼Œåšä¸€äº›æ›´æ·±å…¥çš„ä¿®æ”¹ã€‚\n      console.log(this.state);\n    }\n    render() {\n      return super.render();\n    }\n  }\n}`, `82565711590991720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// å±æ€§ä»£ç†</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">withHeader</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">HOC</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span> <span class="token comment">// ç»§æ‰¿ä¸ React.component</span>\n    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> newProps <span class="token operator">=</span> <span class="token punctuation">{</span>\n        test<span class="token punctuation">:</span><span class="token string">\'hoc\'</span>\n      <span class="token punctuation">}</span>\n      <span class="token comment">// é€ä¼ propsï¼Œå¹¶ä¸”ä¼ é€’æ–°çš„newProps</span>\n      <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>newProps<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// åå‘ç»§æ‰¿</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">Inheritance</span> <span class="token keyword">extends</span> <span class="token class-name">WrappedComponent</span> <span class="token punctuation">{</span> <span class="token comment">// ç»§æ‰¿äºè¢«åŒ…è£¹çš„ React ç»„ä»¶</span>\n    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// å¯ä»¥æ–¹ä¾¿åœ°å¾—åˆ°stateï¼Œåšä¸€äº›æ›´æ·±å…¥çš„ä¿®æ”¹ã€‚</span>\n      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>æ³¨æ„ï¼šä¸è¦åœ¨ HOC å†…ä¿®æ”¹ä¸€ä¸ªç»„ä»¶çš„åŸå‹ï¼ˆæˆ–ä»¥å…¶å®ƒæ–¹å¼ä¿®æ”¹ç»„ä»¶ï¼‰</li>\n<li>è´¯ç©¿ä¼ é€’ä¸ç›¸å…³ props å±æ€§ç»™è¢«åŒ…è£¹çš„ç»„ä»¶ï¼Œå¸®åŠ©ç¡®ä¿é«˜é˜¶ç»„ä»¶æœ€å¤§ç¨‹åº¦çš„çµæ´»æ€§å’Œå¯é‡ç”¨æ€§</li>\n<li>åº”è¯¥ä½¿ç”¨<strong>æœ€å¤§åŒ–çš„ç»„åˆæ€§</strong></li>\n<li>ä¸ºäº†ä¾¿äºè°ƒè¯•ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªæ˜¾ç¤ºåå­—ï¼Œä¼ è¾¾å®ƒæ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶çš„ç»“æœï¼Œ<code class="language-text">WrappedComponent.displayName || WrappedComponent.name || &#39;Component&#39;;</code></li>\n<li><strong>ä¸è¦åœ¨ render() æ–¹æ³•ä¸­åˆ›å»º HOC</strong>ï¼Œå¦åˆ™ï¼Œæ¯ä¸€æ¬¡æ¸²æŸ“ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºæ¸²æŸ“ HOC</li>\n<li>å¿…é¡»å°†åŸå§‹ç»„ä»¶çš„é™æ€æ–¹æ³•åœ¨ HOC ä¸­åšæ‹·è´ï¼Œå¦åˆ™ HOC å°†æ²¡æœ‰åŸå§‹ç»„ä»¶çš„ä»»ä½•é™æ€æ–¹æ³•</li>\n<li>Refs å±æ€§ä¸èƒ½è´¯ç©¿ä¼ é€’ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ React.forwardRef è§£å†³</li>\n</ul>\n<h2 id="hook-ç»„ä»¶"><a href="#hook-%E7%BB%84%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hook ç»„ä»¶</h2>\n<p>Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p>\n<p>ä½†ä¸ class ç”Ÿå‘½å‘¨æœŸä¸åŒçš„æ˜¯ï¼ŒHook æ›´æ¥è¿‘äºå®ç°çŠ¶æ€åŒæ­¥ï¼Œè€Œä¸æ˜¯å“åº”ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="23800065761661960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import React, { useState, useEffect } from \'react\';\n\nfunction Example() {\n  // å£°æ˜ä¸€ä¸ªå« &quot;count&quot; çš„ state å˜é‡\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    // éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹\n    return function cleanup() {\n      // éœ€è¦åœ¨ componentWillUnmount æ‰§è¡Œçš„å†…å®¹\n    };\n  }, []);\n\n  useEffect(() => {\n    // åœ¨ componentDidMountï¼Œä»¥åŠ count æ›´æ”¹æ—¶ componentDidUpdate æ‰§è¡Œçš„å†…å®¹\n    document.title = \'You clicked \' + count + \' times\';\n    return () => {\n      // éœ€è¦åœ¨ count æ›´æ”¹æ—¶ componentDidUpdateï¼ˆå…ˆäº document.title = ... æ‰§è¡Œï¼Œéµå®ˆå…ˆæ¸…ç†åæ›´æ–°ï¼‰\n      // ä»¥åŠ componentWillUnmount æ‰§è¡Œçš„å†…å®¹\n    }; // å½“å‡½æ•°ä¸­ Cleanup å‡½æ•°ä¼šæŒ‰ç…§åœ¨ä»£ç ä¸­å®šä¹‰çš„é¡ºåºå…ˆåæ‰§è¡Œï¼Œä¸å‡½æ•°æœ¬èº«çš„ç‰¹æ€§æ— å…³\n  }, [count]); // ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>Click me</button>\n    </div>\n  );\n}`, `23800065761661960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// å£°æ˜ä¸€ä¸ªå« "count" çš„ state å˜é‡</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token comment">// éœ€è¦åœ¨ componentDidMount æ‰§è¡Œçš„å†…å®¹</span>\n    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// éœ€è¦åœ¨ componentWillUnmount æ‰§è¡Œçš„å†…å®¹</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token comment">// åœ¨ componentDidMountï¼Œä»¥åŠ count æ›´æ”¹æ—¶ componentDidUpdate æ‰§è¡Œçš„å†…å®¹</span>\n    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">\'You clicked \'</span> <span class="token operator">+</span> count <span class="token operator">+</span> <span class="token string">\' times\'</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token comment">// éœ€è¦åœ¨ count æ›´æ”¹æ—¶ componentDidUpdateï¼ˆå…ˆäº document.title = ... æ‰§è¡Œï¼Œéµå®ˆå…ˆæ¸…ç†åæ›´æ–°ï¼‰</span>\n      <span class="token comment">// ä»¥åŠ componentWillUnmount æ‰§è¡Œçš„å†…å®¹</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// å½“å‡½æ•°ä¸­ Cleanup å‡½æ•°ä¼šæŒ‰ç…§åœ¨ä»£ç ä¸­å®šä¹‰çš„é¡ºåºå…ˆåæ‰§è¡Œï¼Œä¸å‡½æ•°æœ¬èº«çš„ç‰¹æ€§æ— å…³</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span>p<span class="token operator">></span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>Click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>Hooks ç»„ä»¶æ›´æ¥è¿‘äºå®ç°çŠ¶æ€åŒæ­¥ï¼Œè€Œä¸æ˜¯å“åº”ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</li>\n<li>åªèƒ½åœ¨<strong>å‡½æ•°æœ€å¤–å±‚</strong>è°ƒç”¨ Hookã€‚åªèƒ½åœ¨ <strong>React çš„å‡½æ•°ç»„ä»¶</strong>ä¸­è°ƒç”¨ Hookã€‚</li>\n<li><code class="language-text">useLayoutEffect</code> ä¸ <code class="language-text">componentDidMount</code>ã€<code class="language-text">componentDidUpdate</code> çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ¨èä½ <strong>ä¸€å¼€å§‹å…ˆç”¨ useEffect</strong>ï¼Œåªæœ‰å½“å®ƒå‡ºé—®é¢˜çš„æ—¶å€™å†å°è¯•ä½¿ç”¨ <code class="language-text">useLayoutEffect</code></li>\n<li>ä¸ <code class="language-text">componentDidMount</code> æˆ– <code class="language-text">componentDidUpdate</code> ä¸åŒçš„æ˜¯ï¼ŒHook åœ¨æµè§ˆå™¨å®Œæˆå¸ƒå±€ä¸ç»˜åˆ¶<strong>ä¹‹å</strong>ï¼Œä¼ ç»™ <code class="language-text">useEffect</code> çš„å‡½æ•°ä¼šå»¶è¿Ÿè°ƒç”¨ï¼Œä½†ä¼šä¿è¯åœ¨ä»»ä½•æ–°çš„æ¸²æŸ“å‰æ‰§è¡Œ</li>\n<li>effect çš„æ¸…é™¤ï¼ˆcleanupï¼‰å¹¶ä¸ä¼šè¯»å–â€œæœ€æ–°â€çš„ props ã€‚å®ƒåªèƒ½è¯»å–åˆ°å®šä¹‰å®ƒçš„é‚£æ¬¡æ¸²æŸ“ä¸­çš„ props å€¼</li>\n<li>effect ä¸­å¯ä»¥è¯»å–åˆ°æœ€æ–°çš„ count çŠ¶æ€å€¼ï¼Œå¹¶ä¸æ˜¯ count çš„å€¼åœ¨â€œä¸å˜â€çš„ effect ä¸­å‘ç”Ÿäº†æ”¹å˜ï¼Œè€Œæ˜¯ effect å‡½æ•°æœ¬èº«åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½ä¸ç›¸åŒ</li>\n<li>åœ¨ class ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ€ç»´æ¨¡å‹ä¸­ï¼Œå‰¯ä½œç”¨çš„è¡Œä¸ºå’Œæ¸²æŸ“è¾“å‡ºæ˜¯ä¸åŒçš„ã€‚UI æ¸²æŸ“æ˜¯è¢« props å’Œ state é©±åŠ¨çš„ï¼Œå¹¶ä¸”èƒ½ç¡®ä¿æ­¥è°ƒä¸€è‡´ï¼Œä½†å‰¯ä½œç”¨å¹¶ä¸æ˜¯è¿™æ ·ã€‚è¿™æ˜¯ä¸€ç±»å¸¸è§é—®é¢˜çš„æ¥æºã€‚</li>\n<li>è€Œåœ¨ <code class="language-text">useEffect</code> çš„æ€ç»´æ¨¡å‹ä¸­ï¼Œé»˜è®¤éƒ½æ˜¯åŒæ­¥çš„ã€‚å‰¯ä½œç”¨å˜æˆäº† React æ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚å¯¹äºæ¯ä¸€ä¸ª <code class="language-text">useEffect</code> è°ƒç”¨ï¼Œä¸€æ—¦ä½ å¤„ç†æ­£ç¡®ï¼Œä½ çš„ç»„ä»¶èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†è¾¹ç¼˜æƒ…å†µã€‚</li>\n</ul>\n<h1 id="component-æºç è§£è¯»"><a href="#component-%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Component æºç è§£è¯»</h1>\n<p>é¦–å…ˆçœ‹ä¸€ä¸‹ React.Component ç»“æ„</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="19819388250138403000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ReactBaseClasses.js æ–‡ä»¶\n/**\n * Base class helpers for the updating state of a component.\n */\nfunction Component(props, context, updater) {\n  this.props = props; // å±æ€§ props\n  this.context = context; // ä¸Šä¸‹æ–‡ context\n  // If a component has string refs, we will assign a different object later.\n  // åˆå§‹åŒ– refsï¼Œä¸º {}ï¼Œä¸»è¦åœ¨ stringRef ä¸­ä½¿ç”¨ï¼Œå°† stringRef èŠ‚ç‚¹çš„å®ä¾‹æŒ‚è½½åœ¨ this.refs ä¸Š\n  this.refs = emptyObject;\n  // We initialize the default updater but the real one gets injected by the\n  // renderer.\n  this.updater = updater || ReactNoopUpdateQueue; // updater\n}\n\nComponent.prototype.isReactComponent = {};\n\n/**\n * è®¾ç½® state çš„å­é›†ï¼Œä½¿ç”¨è¯¥æ–¹æ³•æ›´æ–° stateï¼Œé¿å… state çš„å€¼ä¸ºå¯çªå˜çš„çŠ¶æ€\n * \\`shouldComponentUpdate\\`åªæ˜¯æµ…æ¯”è¾ƒæ›´æ–°ï¼Œ\n * å¯çªå˜çš„ç±»å‹å¯èƒ½å¯¼è‡´ \\`shouldComponentUpdate\\` è¿”å› falseï¼Œæ— æ³•é‡æ–°æ¸²æŸ“\n * Immutable.js å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒé€šè¿‡ç»“æ„å…±äº«æä¾›ä¸å¯çªå˜çš„ï¼ŒæŒä¹…çš„é›†åˆï¼š\n * ä¸å¯çªå˜: ä¸€æ—¦åˆ›å»ºï¼Œé›†åˆå°±ä¸èƒ½åœ¨å¦ä¸€ä¸ªæ—¶é—´ç‚¹æ”¹å˜ã€‚\n * æŒä¹…æ€§: å¯ä»¥ä½¿ç”¨åŸå§‹é›†åˆå’Œä¸€ä¸ªçªå˜æ¥åˆ›å»ºæ–°çš„é›†åˆã€‚åŸå§‹é›†åˆåœ¨æ–°é›†åˆåˆ›å»ºåä»ç„¶å¯ç”¨ã€‚\n * ç»“æ„å…±äº«: æ–°é›†åˆå°½å¯èƒ½å¤šçš„ä½¿ç”¨åŸå§‹é›†åˆçš„ç»“æ„æ¥åˆ›å»ºï¼Œä»¥ä¾¿å°†å¤åˆ¶æ“ä½œé™è‡³æœ€å°‘ä»è€Œæå‡æ€§èƒ½ã€‚\n *\n * å¹¶ä¸èƒ½ä¿è¯ \\`this.state\\` é€šè¿‡ \\`setState\\` åä¸å¯çªå˜çš„æ›´æ–°ï¼Œå®ƒå¯èƒ½è¿˜è¿”å›åŸæ¥çš„æ•°å€¼\n * ä¸èƒ½ä¿è¯ \\`setrState\\` ä¼šåŒæ­¥æ›´æ–° \\`this.state\\`\n * \\`setState\\` æ˜¯é€šè¿‡é˜Ÿåˆ—å½¢å¼æ¥æ›´æ–° state ï¼Œå½“ æ‰§è¡Œ \\`setState\\` æ—¶ï¼Œ\n * ä¼šæŠŠ state æµ…åˆå¹¶åæ”¾å…¥çŠ¶æ€é˜Ÿåˆ—ï¼Œç„¶åæ‰¹é‡æ‰§è¡Œï¼Œå³å®ƒä¸æ˜¯ç«‹å³æ›´æ–°çš„ã€‚\n * ä¸è¿‡ï¼Œä½ å¯ä»¥åœ¨ callback å›è°ƒå‡½æ•°ä¸­è·å–æœ€æ–°çš„å€¼\n *\n * æ³¨æ„ï¼šå¯¹äºå¼‚æ­¥æ¸²æŸ“ï¼Œæˆ‘ä»¬åº”åœ¨ \\`getSnapshotBeforeUpdate\\` ä¸­è¯»å– \\`state\\`ã€\\`props\\`,\n * è€Œä¸æ˜¯ \\`componentWillUpdate\\`\n *\n * @param {object|function} partialState Next partial state or function to\n *        produce next partial state to be merged with current state.\n * @param {?function} callback Called after state is updated.\n * @final\n * @protected\n */\nComponent.prototype.setState = function(partialState, callback) {\n  // å½“ partialState çŠ¶æ€ä¸º object æˆ– functionç±»å‹ æˆ– null æ—¶ï¼Œ\n  // æ‰§è¡Œ this.updater.enqueueSetState æ–¹æ³•ï¼Œå¦åˆ™æŠ¥é”™\n  invariant(\n    typeof partialState === \'object\' || typeof partialState === \'function\' || partialState == null,\n    \'setState(...): takes an object of state variables to update or a \' +\n      \'function which returns an object of state variables.\'\n  );\n  // å°† \\`setState\\` äº‹åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­\n  this.updater.enqueueSetState(this, partialState, callback, \'setState\');\n};\n\n/**\n * å¼ºåˆ¶æ›´æ–°ï¼Œå½“ä¸”ä»…å½“å½“å‰ä¸å¤„äº DOM äº‹ç‰©ï¼ˆtransactionï¼‰ä¸­æ‰ä¼šè¢«å”¤èµ·\n * This should only be invoked when it is known with\n * certainty that we are **not** in a DOM transaction.\n *\n * é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç»„ä»¶çš„stateæˆ–propsæ”¹å˜æ—¶ï¼Œç»„ä»¶å°†é‡æ–°æ¸²æŸ“ã€‚\n * å¦‚æœä½ çš„\\`render()\\`æ–¹æ³•ä¾èµ–äºä¸€äº›å…¶ä»–çš„æ•°æ®ï¼Œ\n * ä½ å¯ä»¥å‘Šè¯‰Reactç»„ä»¶éœ€è¦é€šè¿‡è°ƒç”¨\\`forceUpdate()\\`é‡æ–°æ¸²æŸ“ã€‚\n * è°ƒç”¨\\`forceUpdate()\\`ä¼šå¯¼è‡´ç»„ä»¶è·³è¿‡ \\`shouldComponentUpdate()\\`,\n * ç›´æ¥è°ƒç”¨ \\`render()\\`ã€‚ä½†ä¼šè°ƒç”¨ \\`componentWillUpdate\\` å’Œ \\`componentDidUpdate\\`ã€‚\n * è¿™å°†è§¦å‘ç»„ä»¶çš„æ­£å¸¸ç”Ÿå‘½å‘¨æœŸæ–¹æ³•,åŒ…æ‹¬æ¯ä¸ªå­ç»„ä»¶çš„ shouldComponentUpdate() æ–¹æ³•ã€‚\n * forceUpdate å°±æ˜¯é‡æ–° render ã€‚\n * æœ‰äº›å˜é‡ä¸åœ¨ state ä¸Šï¼Œå½“æ—¶ä½ åˆæƒ³è¾¾åˆ°è¿™ä¸ªå˜é‡æ›´æ–°çš„æ—¶å€™ï¼Œåˆ·æ–° render ï¼›\n * æˆ–è€… state é‡Œçš„æŸä¸ªå˜é‡å±‚æ¬¡å¤ªæ·±ï¼Œæ›´æ–°çš„æ—¶å€™æ²¡æœ‰è‡ªåŠ¨è§¦å‘ render ã€‚\n * è¿™äº›æ—¶å€™éƒ½å¯ä»¥æ‰‹åŠ¨è°ƒç”¨ forceUpdate è‡ªåŠ¨è§¦å‘ render\n *\n * @param {?function} callback æ›´æ–°å®Œæˆåçš„å›è°ƒå‡½æ•°.\n * @final\n * @protected\n */\nComponent.prototype.forceUpdate = function(callback) {\n  // updater å¼ºåˆ¶æ›´æ–°\n  this.updater.enqueueForceUpdate(this, callback, \'forceUpdate\');\n};`, `19819388250138403000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ReactBaseClasses.js æ–‡ä»¶</span>\n<span class="token comment">/**\n * Base class helpers for the updating state of a component.\n */</span>\n<span class="token keyword">function</span> <span class="token function">Component</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context<span class="token punctuation">,</span> updater</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props<span class="token punctuation">;</span> <span class="token comment">// å±æ€§ props</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span> <span class="token comment">// ä¸Šä¸‹æ–‡ context</span>\n  <span class="token comment">// If a component has string refs, we will assign a different object later.</span>\n  <span class="token comment">// åˆå§‹åŒ– refsï¼Œä¸º {}ï¼Œä¸»è¦åœ¨ stringRef ä¸­ä½¿ç”¨ï¼Œå°† stringRef èŠ‚ç‚¹çš„å®ä¾‹æŒ‚è½½åœ¨ this.refs ä¸Š</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>refs <span class="token operator">=</span> emptyObject<span class="token punctuation">;</span>\n  <span class="token comment">// We initialize the default updater but the real one gets injected by the</span>\n  <span class="token comment">// renderer.</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>updater <span class="token operator">=</span> updater <span class="token operator">||</span> ReactNoopUpdateQueue<span class="token punctuation">;</span> <span class="token comment">// updater</span>\n<span class="token punctuation">}</span>\n\n<span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isReactComponent <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n * è®¾ç½® state çš„å­é›†ï¼Œä½¿ç”¨è¯¥æ–¹æ³•æ›´æ–° stateï¼Œé¿å… state çš„å€¼ä¸ºå¯çªå˜çš„çŠ¶æ€\n * `shouldComponentUpdate`åªæ˜¯æµ…æ¯”è¾ƒæ›´æ–°ï¼Œ\n * å¯çªå˜çš„ç±»å‹å¯èƒ½å¯¼è‡´ `shouldComponentUpdate` è¿”å› falseï¼Œæ— æ³•é‡æ–°æ¸²æŸ“\n * Immutable.js å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒé€šè¿‡ç»“æ„å…±äº«æä¾›ä¸å¯çªå˜çš„ï¼ŒæŒä¹…çš„é›†åˆï¼š\n * ä¸å¯çªå˜: ä¸€æ—¦åˆ›å»ºï¼Œé›†åˆå°±ä¸èƒ½åœ¨å¦ä¸€ä¸ªæ—¶é—´ç‚¹æ”¹å˜ã€‚\n * æŒä¹…æ€§: å¯ä»¥ä½¿ç”¨åŸå§‹é›†åˆå’Œä¸€ä¸ªçªå˜æ¥åˆ›å»ºæ–°çš„é›†åˆã€‚åŸå§‹é›†åˆåœ¨æ–°é›†åˆåˆ›å»ºåä»ç„¶å¯ç”¨ã€‚\n * ç»“æ„å…±äº«: æ–°é›†åˆå°½å¯èƒ½å¤šçš„ä½¿ç”¨åŸå§‹é›†åˆçš„ç»“æ„æ¥åˆ›å»ºï¼Œä»¥ä¾¿å°†å¤åˆ¶æ“ä½œé™è‡³æœ€å°‘ä»è€Œæå‡æ€§èƒ½ã€‚\n *\n * å¹¶ä¸èƒ½ä¿è¯ `this.state` é€šè¿‡ `setState` åä¸å¯çªå˜çš„æ›´æ–°ï¼Œå®ƒå¯èƒ½è¿˜è¿”å›åŸæ¥çš„æ•°å€¼\n * ä¸èƒ½ä¿è¯ `setrState` ä¼šåŒæ­¥æ›´æ–° `this.state`\n * `setState` æ˜¯é€šè¿‡é˜Ÿåˆ—å½¢å¼æ¥æ›´æ–° state ï¼Œå½“ æ‰§è¡Œ `setState` æ—¶ï¼Œ\n * ä¼šæŠŠ state æµ…åˆå¹¶åæ”¾å…¥çŠ¶æ€é˜Ÿåˆ—ï¼Œç„¶åæ‰¹é‡æ‰§è¡Œï¼Œå³å®ƒä¸æ˜¯ç«‹å³æ›´æ–°çš„ã€‚\n * ä¸è¿‡ï¼Œä½ å¯ä»¥åœ¨ callback å›è°ƒå‡½æ•°ä¸­è·å–æœ€æ–°çš„å€¼\n *\n * æ³¨æ„ï¼šå¯¹äºå¼‚æ­¥æ¸²æŸ“ï¼Œæˆ‘ä»¬åº”åœ¨ `getSnapshotBeforeUpdate` ä¸­è¯»å– `state`ã€`props`,\n * è€Œä¸æ˜¯ `componentWillUpdate`\n *\n * @param {object|function} partialState Next partial state or function to\n *        produce next partial state to be merged with current state.\n * @param {?function} callback Called after state is updated.\n * @final\n * @protected\n */</span>\n<span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setState</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">partialState<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// å½“ partialState çŠ¶æ€ä¸º object æˆ– functionç±»å‹ æˆ– null æ—¶ï¼Œ</span>\n  <span class="token comment">// æ‰§è¡Œ this.updater.enqueueSetState æ–¹æ³•ï¼Œå¦åˆ™æŠ¥é”™</span>\n  <span class="token function">invariant</span><span class="token punctuation">(</span>\n    <span class="token keyword">typeof</span> partialState <span class="token operator">===</span> <span class="token string">\'object\'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> partialState <span class="token operator">===</span> <span class="token string">\'function\'</span> <span class="token operator">||</span> partialState <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token string">\'setState(...): takes an object of state variables to update or a \'</span> <span class="token operator">+</span>\n      <span class="token string">\'function which returns an object of state variables.\'</span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// å°† `setState` äº‹åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>updater<span class="token punctuation">.</span><span class="token function">enqueueSetState</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> partialState<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">\'setState\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n * å¼ºåˆ¶æ›´æ–°ï¼Œå½“ä¸”ä»…å½“å½“å‰ä¸å¤„äº DOM äº‹ç‰©ï¼ˆtransactionï¼‰ä¸­æ‰ä¼šè¢«å”¤èµ·\n * This should only be invoked when it is known with\n * certainty that we are **not** in a DOM transaction.\n *\n * é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç»„ä»¶çš„stateæˆ–propsæ”¹å˜æ—¶ï¼Œç»„ä»¶å°†é‡æ–°æ¸²æŸ“ã€‚\n * å¦‚æœä½ çš„`render()`æ–¹æ³•ä¾èµ–äºä¸€äº›å…¶ä»–çš„æ•°æ®ï¼Œ\n * ä½ å¯ä»¥å‘Šè¯‰Reactç»„ä»¶éœ€è¦é€šè¿‡è°ƒç”¨`forceUpdate()`é‡æ–°æ¸²æŸ“ã€‚\n * è°ƒç”¨`forceUpdate()`ä¼šå¯¼è‡´ç»„ä»¶è·³è¿‡ `shouldComponentUpdate()`,\n * ç›´æ¥è°ƒç”¨ `render()`ã€‚ä½†ä¼šè°ƒç”¨ `componentWillUpdate` å’Œ `componentDidUpdate`ã€‚\n * è¿™å°†è§¦å‘ç»„ä»¶çš„æ­£å¸¸ç”Ÿå‘½å‘¨æœŸæ–¹æ³•,åŒ…æ‹¬æ¯ä¸ªå­ç»„ä»¶çš„ shouldComponentUpdate() æ–¹æ³•ã€‚\n * forceUpdate å°±æ˜¯é‡æ–° render ã€‚\n * æœ‰äº›å˜é‡ä¸åœ¨ state ä¸Šï¼Œå½“æ—¶ä½ åˆæƒ³è¾¾åˆ°è¿™ä¸ªå˜é‡æ›´æ–°çš„æ—¶å€™ï¼Œåˆ·æ–° render ï¼›\n * æˆ–è€… state é‡Œçš„æŸä¸ªå˜é‡å±‚æ¬¡å¤ªæ·±ï¼Œæ›´æ–°çš„æ—¶å€™æ²¡æœ‰è‡ªåŠ¨è§¦å‘ render ã€‚\n * è¿™äº›æ—¶å€™éƒ½å¯ä»¥æ‰‹åŠ¨è°ƒç”¨ forceUpdate è‡ªåŠ¨è§¦å‘ render\n *\n * @param {?function} callback æ›´æ–°å®Œæˆåçš„å›è°ƒå‡½æ•°.\n * @final\n * @protected\n */</span>\n<span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">forceUpdate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// updater å¼ºåˆ¶æ›´æ–°</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>updater<span class="token punctuation">.</span><span class="token function">enqueueForceUpdate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">\'forceUpdate\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>å…¶ä¸­ <code class="language-text">this.refs</code> å€¼ <code class="language-text">emptyObject</code> ä¸ºï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7392026983440347000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// è®¾ç½® refs åˆå§‹å€¼ä¸º {}\nconst emptyObject = {};\nif (__DEV__) {\n  Object.freeze(emptyObject); // __DEV__ æ¨¡å¼ä¸‹ï¼Œ å†»ç»“ emptyObject\n}\n// Object.freeze() å†»ç»“ä¸€ä¸ªå¯¹è±¡ï¼Œè¢«å†»ç»“çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæ·»åŠ ï¼Œåˆ é™¤ï¼Œ\n// ä¿®æ”¹å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ä¸å±æ€§å€¼ï¼ŒåŸå‹ï¼‰ï¼›è¿”å›å’Œä¼ å…¥çš„å‚æ•°ç›¸åŒçš„å¯¹è±¡ã€‚`, `7392026983440347000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// è®¾ç½® refs åˆå§‹å€¼ä¸º {}</span>\n<span class="token keyword">const</span> emptyObject <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>__DEV__<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>emptyObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// __DEV__ æ¨¡å¼ä¸‹ï¼Œ å†»ç»“ emptyObject</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// Object.freeze() å†»ç»“ä¸€ä¸ªå¯¹è±¡ï¼Œè¢«å†»ç»“çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæ·»åŠ ï¼Œåˆ é™¤ï¼Œ</span>\n<span class="token comment">// ä¿®æ”¹å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ä¸å±æ€§å€¼ï¼ŒåŸå‹ï¼‰ï¼›è¿”å›å’Œä¼ å…¥çš„å‚æ•°ç›¸åŒçš„å¯¹è±¡ã€‚</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><code class="language-text">ReactNoopUpdateQueue</code> ä¸ºï¼š</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61955371474495860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="å¤åˆ¶æˆåŠŸ"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// ReactNoopUpdateQueue.js æ–‡ä»¶\n/**\n * è¿™æ˜¯ä¸€ä¸ªå…³äº æ›´æ–°é˜Ÿåˆ—(update queue) çš„æŠ½è±¡ API\n */\nconst ReactNoopUpdateQueue = {\n  /**\n   * æ£€æŸ¥å¤åˆç»„ä»¶æ˜¯å¦è£…è½½å®Œæˆï¼ˆè¢«æ’å…¥æ ‘ä¸­ï¼‰\n   * @param {ReactClass} publicInstance æµ‹è¯•å®ä¾‹å•å…ƒ\n   * @return {boolean} è£…è½½å®Œæˆä¸º trueï¼Œå¦åˆ™ä¸º false\n   * @protected\n   * @final\n   */\n  isMounted: function(publicInstance) {\n    return false;\n  },\n\n  /**\n   * å¼ºåˆ¶æ›´æ–°é˜Ÿåˆ—ï¼Œå½“ä¸”ä»…å½“å½“å‰ä¸å¤„äº DOM äº‹ç‰©ï¼ˆtransactionï¼‰ä¸­æ‰ä¼šè¢«å”¤èµ·\n   *\n   * å½“ state é‡Œçš„æŸä¸ªå˜é‡å±‚æ¬¡å¤ªæ·±ï¼Œæ›´æ–°çš„æ—¶å€™æ²¡æœ‰è‡ªåŠ¨è§¦å‘ render ã€‚\n   * è¿™äº›æ—¶å€™å°±å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•å¼ºåˆ¶æ›´æ–°é˜Ÿåˆ—\n   *\n   * è¯¥æ–¹æ³•å°†è·³è¿‡ \\`shouldComponentUpdate()\\`, ç›´æ¥è°ƒç”¨ \\`render()\\`, ä½†å®ƒä¼šå”¤èµ·\n   * \\`componentWillUpdate\\` å’Œ \\`componentDidUpdate\\`.\n   *\n   * @param {ReactClass} publicInstance å°†è¢«é‡æ–°æ¸²æŸ“çš„å®ä¾‹\n   * @param {?function} callback ç»„ä»¶æ›´æ–°åçš„å›è°ƒå‡½æ•°.\n   * @param {?string} callerName åœ¨å…¬å…± API è°ƒç”¨è¯¥æ–¹æ³•çš„å‡½æ•°åç§°.\n   * @internal\n   */\n  enqueueForceUpdate: function(publicInstance, callback, callerName) {\n    warnNoop(publicInstance, \'forceUpdate\');\n  },\n\n  /**\n   * å®Œå…¨æ›¿æ¢stateï¼Œä¸ \\`setState\\` ä¸åŒçš„æ˜¯ï¼Œ\\`setState\\` æ˜¯ä»¥ä¿®æ”¹å’Œæ–°å¢çš„æ–¹å¼æ”¹å˜ \\`state \\`çš„ï¼Œ\n   * ä¸ä¼šæ”¹å˜æ²¡æœ‰æ¶‰åŠåˆ°çš„ \\`state\\`ã€‚\n   * è€Œ \\`enqueueReplaceState\\` åˆ™ç”¨æ–°çš„ \\`state\\` å®Œå…¨æ›¿æ¢æ‰è€ \\`state\\`\n   * ä½¿ç”¨å®ƒæˆ– \\`setState\\` æ¥æ”¹å˜ stateï¼Œå¹¶ä¸”åº”è¯¥æŠŠ this.state è®¾ç½®ä¸ºä¸å¯çªå˜ç±»å‹å¯¹è±¡ï¼Œ\n   * å¹¶ä¸”this.stateä¸ä¼šç«‹å³æ›´æ”¹\n   * æˆ‘ä»¬åº”è¯¥åœ¨å›è°ƒå‡½æ•° callback ä¸­è·å–æœ€æ–°çš„ state\n   *\n   * @param {ReactClass} publicInstance The instance that should rerender.\n   * @param {object} completeState Next state.\n   * @param {?function} callback Called after component is updated.\n   * @param {?string} callerName name of the calling function in the public API.\n   * @internal\n   */\n  enqueueReplaceState: function(publicInstance, completeState, callback, callerName) {\n    warnNoop(publicInstance, \'replaceState\');\n  },\n\n  /**\n   * è®¾ç½® state çš„å­é›†\n   * å®ƒå­˜åœ¨çš„å”¯ä¸€ç†ç”±æ˜¯ _pendingState æ˜¯å†…éƒ¨æ–¹æ³•ã€‚\n   * \\`enqueueSetState\\` å®ç°æµ…åˆå¹¶æ›´æ–° \\`state\\`\n   *\n   * @param {ReactClass} publicInstance The instance that should rerender.\n   * @param {object} partialState Next partial state to be merged with state.\n   * @param {?function} callback Called after component is updated.\n   * @param {?string} Name of the calling function in the public API.\n   * @internal\n   */\n  enqueueSetState: function(publicInstance, partialState, callback, callerName) {\n    warnNoop(publicInstance, \'setState\');\n  }\n};\n\nexport default ReactNoopUpdateQueue;`, `61955371474495860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js å¤åˆ¶ä»£ç \n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// ReactNoopUpdateQueue.js æ–‡ä»¶</span>\n<span class="token comment">/**\n * è¿™æ˜¯ä¸€ä¸ªå…³äº æ›´æ–°é˜Ÿåˆ—(update queue) çš„æŠ½è±¡ API\n */</span>\n<span class="token keyword">const</span> ReactNoopUpdateQueue <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">/**\n   * æ£€æŸ¥å¤åˆç»„ä»¶æ˜¯å¦è£…è½½å®Œæˆï¼ˆè¢«æ’å…¥æ ‘ä¸­ï¼‰\n   * @param {ReactClass} publicInstance æµ‹è¯•å®ä¾‹å•å…ƒ\n   * @return {boolean} è£…è½½å®Œæˆä¸º trueï¼Œå¦åˆ™ä¸º false\n   * @protected\n   * @final\n   */</span>\n  <span class="token function-variable function">isMounted</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">publicInstance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token comment">/**\n   * å¼ºåˆ¶æ›´æ–°é˜Ÿåˆ—ï¼Œå½“ä¸”ä»…å½“å½“å‰ä¸å¤„äº DOM äº‹ç‰©ï¼ˆtransactionï¼‰ä¸­æ‰ä¼šè¢«å”¤èµ·\n   *\n   * å½“ state é‡Œçš„æŸä¸ªå˜é‡å±‚æ¬¡å¤ªæ·±ï¼Œæ›´æ–°çš„æ—¶å€™æ²¡æœ‰è‡ªåŠ¨è§¦å‘ render ã€‚\n   * è¿™äº›æ—¶å€™å°±å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•å¼ºåˆ¶æ›´æ–°é˜Ÿåˆ—\n   *\n   * è¯¥æ–¹æ³•å°†è·³è¿‡ `shouldComponentUpdate()`, ç›´æ¥è°ƒç”¨ `render()`, ä½†å®ƒä¼šå”¤èµ·\n   * `componentWillUpdate` å’Œ `componentDidUpdate`.\n   *\n   * @param {ReactClass} publicInstance å°†è¢«é‡æ–°æ¸²æŸ“çš„å®ä¾‹\n   * @param {?function} callback ç»„ä»¶æ›´æ–°åçš„å›è°ƒå‡½æ•°.\n   * @param {?string} callerName åœ¨å…¬å…± API è°ƒç”¨è¯¥æ–¹æ³•çš„å‡½æ•°åç§°.\n   * @internal\n   */</span>\n  <span class="token function-variable function">enqueueForceUpdate</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">publicInstance<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> callerName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">warnNoop</span><span class="token punctuation">(</span>publicInstance<span class="token punctuation">,</span> <span class="token string">\'forceUpdate\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token comment">/**\n   * å®Œå…¨æ›¿æ¢stateï¼Œä¸ `setState` ä¸åŒçš„æ˜¯ï¼Œ`setState` æ˜¯ä»¥ä¿®æ”¹å’Œæ–°å¢çš„æ–¹å¼æ”¹å˜ `state `çš„ï¼Œ\n   * ä¸ä¼šæ”¹å˜æ²¡æœ‰æ¶‰åŠåˆ°çš„ `state`ã€‚\n   * è€Œ `enqueueReplaceState` åˆ™ç”¨æ–°çš„ `state` å®Œå…¨æ›¿æ¢æ‰è€ `state`\n   * ä½¿ç”¨å®ƒæˆ– `setState` æ¥æ”¹å˜ stateï¼Œå¹¶ä¸”åº”è¯¥æŠŠ this.state è®¾ç½®ä¸ºä¸å¯çªå˜ç±»å‹å¯¹è±¡ï¼Œ\n   * å¹¶ä¸”this.stateä¸ä¼šç«‹å³æ›´æ”¹\n   * æˆ‘ä»¬åº”è¯¥åœ¨å›è°ƒå‡½æ•° callback ä¸­è·å–æœ€æ–°çš„ state\n   *\n   * @param {ReactClass} publicInstance The instance that should rerender.\n   * @param {object} completeState Next state.\n   * @param {?function} callback Called after component is updated.\n   * @param {?string} callerName name of the calling function in the public API.\n   * @internal\n   */</span>\n  <span class="token function-variable function">enqueueReplaceState</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">publicInstance<span class="token punctuation">,</span> completeState<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> callerName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">warnNoop</span><span class="token punctuation">(</span>publicInstance<span class="token punctuation">,</span> <span class="token string">\'replaceState\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token comment">/**\n   * è®¾ç½® state çš„å­é›†\n   * å®ƒå­˜åœ¨çš„å”¯ä¸€ç†ç”±æ˜¯ _pendingState æ˜¯å†…éƒ¨æ–¹æ³•ã€‚\n   * `enqueueSetState` å®ç°æµ…åˆå¹¶æ›´æ–° `state`\n   *\n   * @param {ReactClass} publicInstance The instance that should rerender.\n   * @param {object} partialState Next partial state to be merged with state.\n   * @param {?function} callback Called after component is updated.\n   * @param {?string} Name of the calling function in the public API.\n   * @internal\n   */</span>\n  <span class="token function-variable function">enqueueSetState</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">publicInstance<span class="token punctuation">,</span> partialState<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> callerName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">warnNoop</span><span class="token punctuation">(</span>publicInstance<span class="token punctuation">,</span> <span class="token string">\'setState\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> ReactNoopUpdateQueue<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>æ³¨æ„ï¼ŒReact API åªæ˜¯ç®€å•çš„åŠŸèƒ½ä»‹ç»ï¼Œå…·ä½“çš„å®ç°æ˜¯åœ¨ react-dom ä¸­ï¼Œè¿™æ˜¯å› ä¸ºä¸åŒçš„å¹³å°ï¼ŒReact API æ˜¯ä¸€è‡´çš„ï¼Œä½†ä¸åŒçš„å¹³å°ï¼Œæ¸²æŸ“çš„æµç¨‹æ˜¯ä¸åŒçš„ï¼Œå…·ä½“çš„ Component æ¸²æŸ“æµç¨‹ä¸ä¸€è‡´ï¼Œä¼šæ ¹æ®å…·ä½“çš„å¹³å°å»å®šåˆ¶ã€‚</p>\n<p>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè¯·å‚è€ƒ <a href="https://github.com/sisterAn/blog/issues/34" target="_blank" rel="nofollow noreferrer noopener">Hooks ä¸ React ç”Ÿå‘½å‘¨æœŸçš„å…³ç³»</a></p>',
excerpt:"ç»„ä»¶ çº¯ç»„ä»¶  ï¼Œå’Œ   ç±»ä¼¼ï¼Œéƒ½æ˜¯å®šä¹‰ä¸€ä¸ªç»„ä»¶ç±»ã€‚ä¸åŒæ˜¯   æ²¡æœ‰å®ç°  ï¼Œè€Œ   é€šè¿‡   å’Œ   çš„ æµ…æ¯”è¾ƒ å®ç°äº†ã€‚ åœ¨ä¸‹ä¸€èŠ‚ä¸­å°†ä¼šè¯¦ç»†ä»‹ç»ã€‚ å‡½æ•°ç»„ä»¶ å®šä¹‰ React ç»„ä»¶çš„ æœ€ç®€å• æ–¹å¼å°±æ˜¯å®šä¹‰ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œå®ƒæ¥å—å•ä¸€çš„ props å¹¶è¿”å›ä¸€ä¸ª Reactâ€¦",frontmatter:{date:"2019-09-19 21:32:42",path:"/react-component-practice-learn/",tags:"å‰ç«¯, React, PureComponent",title:"Reactä¹‹Componentå…¥é—¨å­¦ä¹ ",draft:null}}},pathContext:{mainPostPath:"/react-purecomponent-practice-learn/",nextPostPath:"/react-lifecycle-practice-learn/",prePostPath:"/react-component-practice-learn/"}}}});