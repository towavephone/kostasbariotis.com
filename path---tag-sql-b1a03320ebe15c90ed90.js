webpackJsonp([0xd6a7b5b28fbc],{1321:function(n,s){n.exports={data:{site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"前置知识 需求背景 已知始发站、终点站，如何查出满足条件的方案线路？即根据一个表关联多个表时如何查询相关字段？ sql 语句 根据以上的前置知识可得出一对多下的查询应该这样写： Sequelize 下的解决方案 从表的设计上考虑：将始发站、终点站写在主表中，无需考虑一对多的问题 根据以上的 sql 语句利用 Sequelize 去关联 最终为了实现上的简便，直接使用方案 1",html:'<h1 id="前置知识"><a href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>前置知识</h1>\n<p><div class="gatsby-highlight">\n        <pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span>  <span class="token keyword">if</span> <span class="token keyword">exists</span> Student_Course_Database <span class="token punctuation">;</span>\r\n<span class="token keyword">create</span> <span class="token keyword">database</span> Student_Course_Database<span class="token punctuation">;</span>\r\n<span class="token keyword">alter</span> <span class="token keyword">database</span> Student_Course_Database <span class="token keyword">character</span> <span class="token keyword">set</span> utf8<span class="token punctuation">;</span>\r\n<span class="token keyword">use</span> Student_Course_Database<span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">create</span> <span class="token keyword">table</span> student\r\n<span class="token punctuation">(</span>sno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>\r\n sname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>\r\n ssex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\r\n sage <span class="token keyword">smallint</span><span class="token punctuation">,</span>\r\n sdept <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>\r\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">create</span> <span class="token keyword">table</span> course\r\n<span class="token punctuation">(</span>cno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>\r\n cname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\r\n cpno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\r\n ccredit <span class="token keyword">smallint</span><span class="token punctuation">,</span>\r\n <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>cpno<span class="token punctuation">)</span> <span class="token keyword">references</span> course<span class="token punctuation">(</span>cno<span class="token punctuation">)</span>\r\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">create</span> <span class="token keyword">table</span> sc\r\n<span class="token punctuation">(</span>sno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\r\ncno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\r\ngrade <span class="token keyword">smallint</span> <span class="token punctuation">,</span>\r\n<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>sno<span class="token punctuation">,</span>cno<span class="token punctuation">)</span><span class="token punctuation">,</span>\r\n<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>sno<span class="token punctuation">)</span> <span class="token keyword">references</span> student<span class="token punctuation">(</span>sno<span class="token punctuation">)</span><span class="token punctuation">,</span>\r\n<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>cno<span class="token punctuation">)</span> <span class="token keyword">references</span> course<span class="token punctuation">(</span>cno<span class="token punctuation">)</span>\r\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'李勇\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215122\'</span><span class="token punctuation">,</span><span class="token string">\'刘晨\'</span><span class="token punctuation">,</span><span class="token string">\'女\'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215123\'</span><span class="token punctuation">,</span><span class="token string">\'王敏\'</span><span class="token punctuation">,</span><span class="token string">\'女\'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">\'MA\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215125\'</span><span class="token punctuation">,</span><span class="token string">\'张立\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token string">\'IS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215124\'</span><span class="token punctuation">,</span><span class="token string">\'刘武汉\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token string">\'PE\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215126\'</span><span class="token punctuation">,</span><span class="token string">\'李四\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token string">\'MA\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215128\'</span><span class="token punctuation">,</span><span class="token string">\'欧阳雨\'</span><span class="token punctuation">,</span><span class="token string">\'女\'</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215127\'</span><span class="token punctuation">,</span><span class="token string">\'欧阳杰\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token string">\'PY\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course<span class="token punctuation">(</span>Cno<span class="token punctuation">,</span>Cname<span class="token punctuation">,</span>Ccredit<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token string">\'数据处理\'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course<span class="token punctuation">(</span>Cno<span class="token punctuation">,</span>Cname<span class="token punctuation">,</span>Ccredit<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'2\'</span><span class="token punctuation">,</span><span class="token string">\'数学\'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'8\'</span><span class="token punctuation">,</span><span class="token string">\'数字系统设计\'</span><span class="token punctuation">,</span><span class="token string">\'2\'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'7\'</span><span class="token punctuation">,</span><span class="token string">\'PASCAL语言\'</span><span class="token punctuation">,</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'5\'</span><span class="token punctuation">,</span><span class="token string">\'数据结构\'</span><span class="token punctuation">,</span><span class="token string">\'7\'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'4\'</span><span class="token punctuation">,</span><span class="token string">\'操作系统\'</span><span class="token punctuation">,</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token string">\'数据库\'</span><span class="token punctuation">,</span><span class="token string">\'5\'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'3\'</span><span class="token punctuation">,</span><span class="token string">\'信息系统\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> course <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'9\'</span><span class="token punctuation">,</span><span class="token string">\'DB_Design\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token number">92</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'2\'</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'3\'</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'4\'</span><span class="token punctuation">,</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215121\'</span><span class="token punctuation">,</span><span class="token string">\'5\'</span><span class="token punctuation">,</span><span class="token number">54</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215122\'</span><span class="token punctuation">,</span><span class="token string">\'2\'</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215122\'</span><span class="token punctuation">,</span><span class="token string">\'4\'</span><span class="token punctuation">,</span><span class="token number">96</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215122\'</span><span class="token punctuation">,</span><span class="token string">\'3\'</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215123\'</span><span class="token punctuation">,</span><span class="token string">\'6\'</span><span class="token punctuation">,</span><span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215123\'</span><span class="token punctuation">,</span><span class="token string">\'5\'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>cno<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">\'200215127\'</span><span class="token punctuation">,</span><span class="token string">\'2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n<span class="token comment">#1</span>\r\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> student<span class="token punctuation">;</span>\r\n<span class="token comment">#2</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sno<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student<span class="token punctuation">;</span>\r\n<span class="token comment">#3</span>\r\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>\r\n<span class="token comment">#4</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span><span class="token number">2004</span><span class="token operator">-</span>sage <span class="token keyword">from</span> student<span class="token punctuation">;</span>\r\n<span class="token comment">#5</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span><span class="token string">\'Year of Birth:\'</span><span class="token punctuation">,</span><span class="token number">2004</span><span class="token operator">-</span>sage<span class="token punctuation">,</span>lower<span class="token punctuation">(</span>sdept<span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> sname NAME<span class="token punctuation">,</span><span class="token string">\'Year of Birth:\'</span> BIRTH<span class="token punctuation">,</span><span class="token number">2004</span><span class="token operator">-</span>sage BIRTHDAY<span class="token punctuation">,</span>lower<span class="token punctuation">(</span>sdept<span class="token punctuation">)</span> DEPARTMENT <span class="token keyword">from</span> student<span class="token punctuation">;</span>\r\n<span class="token comment">#6</span>\r\n<span class="token keyword">select</span> <span class="token keyword">all</span> sno <span class="token keyword">from</span> sc<span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> <span class="token keyword">distinct</span> sno <span class="token keyword">from</span> sc<span class="token punctuation">;</span>\r\n<span class="token comment">#7</span>\r\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#8</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>\r\n<span class="token comment">#9</span>\r\n<span class="token keyword">select</span> <span class="token keyword">distinct</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> grade<span class="token operator">&lt;</span><span class="token number">60</span><span class="token punctuation">;</span>\r\n<span class="token comment">#10</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage <span class="token operator">between</span> <span class="token number">20</span> <span class="token operator">and</span> <span class="token number">23</span><span class="token punctuation">;</span>\r\n<span class="token comment">#11</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage <span class="token operator">not</span> <span class="token operator">between</span> <span class="token number">20</span> <span class="token operator">and</span> <span class="token number">23</span><span class="token punctuation">;</span>\r\n<span class="token comment">#12</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">\'CS\'</span><span class="token punctuation">,</span><span class="token string">\'MA\'</span><span class="token punctuation">,</span><span class="token string">\'IS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#13</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">\'CS\'</span><span class="token punctuation">,</span><span class="token string">\'MA\'</span><span class="token punctuation">,</span><span class="token string">\'IS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#14</span>\r\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sno <span class="token operator">like</span> <span class="token string">\'200215121\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#15</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sno<span class="token punctuation">,</span>ssex <span class="token keyword">from</span> student <span class="token keyword">where</span> sname <span class="token operator">like</span> <span class="token string">\'刘%\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#16</span>\r\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> sname <span class="token operator">like</span> <span class="token string">\'欧阳_\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#17</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sno <span class="token keyword">from</span> student <span class="token keyword">where</span> sname <span class="token operator">like</span> <span class="token string">\'_阳%\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#18</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sno<span class="token punctuation">,</span>ssex <span class="token keyword">from</span> student <span class="token keyword">where</span> sname <span class="token operator">not</span> <span class="token operator">like</span> <span class="token string">\'刘%\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#19</span>\r\n<span class="token keyword">select</span> cno<span class="token punctuation">,</span>ccredit <span class="token keyword">from</span> course <span class="token keyword">where</span> cname <span class="token operator">like</span> <span class="token string">\'DB@_Design\'</span> <span class="token keyword">escape</span> <span class="token string">\'@\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> cno<span class="token punctuation">,</span>ccredit <span class="token keyword">from</span> course <span class="token keyword">where</span> cname <span class="token operator">=</span> <span class="token string">\'DB_Design\'</span> <span class="token punctuation">;</span>\r\n<span class="token comment">#20</span>\r\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> course <span class="token keyword">where</span> cname <span class="token operator">like</span> <span class="token string">\'DB@_%i__\'</span><span class="token keyword">escape</span> <span class="token string">\'@\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#21</span>\r\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>cno <span class="token keyword">from</span> sc <span class="token keyword">where</span> grade <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>\r\n#<span class="token number">22</span>\r\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>cno <span class="token keyword">from</span> sc <span class="token keyword">where</span> grade <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>\r\n#<span class="token number">23</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> sage<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept <span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">or</span> sdept<span class="token operator">=</span><span class="token string">\'MA\'</span> <span class="token operator">or</span> sdept<span class="token operator">=</span><span class="token string">\'IS\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#24</span>\r\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'2\'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> grade <span class="token keyword">desc</span><span class="token punctuation">;</span>\r\n<span class="token comment">#25</span>\r\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">order</span> <span class="token keyword">by</span> sdept<span class="token punctuation">,</span>sage <span class="token keyword">desc</span><span class="token punctuation">;</span>\r\n<span class="token comment">#26</span>\r\n<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>\r\n<span class="token comment">#27</span>\r\n<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> sno<span class="token punctuation">)</span> <span class="token keyword">from</span> sc<span class="token punctuation">;</span>\r\n<span class="token comment">#28</span>\r\n<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'3\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#29</span>\r\n<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span><span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'3\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#30</span>\r\n<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>ccredit<span class="token punctuation">)</span> <span class="token keyword">from</span> sc<span class="token punctuation">,</span>course <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215122\'</span> <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno<span class="token punctuation">;</span>\r\n<span class="token comment">#31</span>\r\n<span class="token keyword">select</span> cno<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span> <span class="token keyword">from</span> sc <span class="token keyword">group</span> <span class="token keyword">by</span> cno<span class="token punctuation">;</span>\r\n<span class="token comment">#32</span>\r\n<span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">group</span> <span class="token keyword">by</span> sno <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">3</span><span class="token punctuation">;</span>\r\n<span class="token comment">#33 在使用 join 时，on 和 where 条件的区别: on 条件是在生成临时表时使用的条件，它不管 on 中的条件是否为真，都会返回左边表中的记录。where 条件是在临时表生成好后，再对临时表进行过滤的条件。</span>\r\n<span class="token comment"># 同 join</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\r\n<span class="token comment"># 在表中存在至少一个匹配时返回行，即求交集</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">join</span> sc <span class="token keyword">on</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\r\n<span class="token comment"># 同 join</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">inner</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\r\n<span class="token comment"># 即使右表中没有匹配，也从左表返回所有的行</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">left</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\r\n<span class="token comment"># 即使左表中没有匹配，也从右表返回所有的行</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">right</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\r\n<span class="token comment"># 只要其中一个表中存在匹配，就返回行，mysql 不支持</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">full</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\r\n<span class="token comment">#34</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>\r\n<span class="token comment">#35</span>\r\n<span class="token keyword">select</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cno<span class="token punctuation">,</span><span class="token keyword">second</span><span class="token punctuation">.</span>cpno <span class="token keyword">from</span> course <span class="token keyword">first</span><span class="token punctuation">,</span>course <span class="token keyword">second</span> <span class="token keyword">where</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cpno<span class="token operator">=</span><span class="token keyword">second</span><span class="token punctuation">.</span>cno<span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cno<span class="token punctuation">,</span><span class="token keyword">second</span><span class="token punctuation">.</span>cpno <span class="token keyword">from</span> course <span class="token keyword">first</span><span class="token punctuation">,</span>course <span class="token keyword">second</span> <span class="token keyword">where</span> <span class="token keyword">first</span><span class="token punctuation">.</span>cpno<span class="token operator">=</span><span class="token keyword">second</span><span class="token punctuation">.</span>cno <span class="token operator">and</span> <span class="token keyword">second</span><span class="token punctuation">.</span>cpno <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>\r\n<span class="token comment">#36</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student <span class="token keyword">left</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student <span class="token keyword">left</span> <span class="token keyword">join</span> sc <span class="token keyword">using</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student <span class="token keyword">right</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>cno<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student <span class="token keyword">right</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#37</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span> <span class="token operator">and</span> grade<span class="token operator">></span><span class="token number">90</span><span class="token punctuation">;</span>\r\n<span class="token comment">#38</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>cname<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc<span class="token punctuation">,</span>course <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno<span class="token punctuation">;</span>\r\n<span class="token comment">#39 和刘晨是相同专业的同学，一对多查询模板</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> sname<span class="token operator">=</span><span class="token string">\'刘晨\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> s1<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>s1<span class="token punctuation">.</span>sname<span class="token punctuation">,</span>s1<span class="token punctuation">.</span>sdept <span class="token keyword">from</span> student s1<span class="token punctuation">,</span>student s2 <span class="token keyword">where</span> s1<span class="token punctuation">.</span>sdept<span class="token operator">=</span>s2<span class="token punctuation">.</span>sdept <span class="token operator">and</span> s2<span class="token punctuation">.</span>sname<span class="token operator">=</span><span class="token string">\'刘晨\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sdept <span class="token keyword">from</span> student s1 <span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student s2 <span class="token keyword">where</span> s2<span class="token punctuation">.</span>sdept<span class="token operator">=</span>s1<span class="token punctuation">.</span>sdept <span class="token operator">and</span> s2<span class="token punctuation">.</span>sname<span class="token operator">=</span><span class="token string">\'刘晨\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#40 学信息系统课程的有谁</span>\r\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> student <span class="token keyword">where</span> sno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> cno <span class="token keyword">from</span> course <span class="token keyword">where</span> cname<span class="token operator">=</span><span class="token string">\'信息系统\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc<span class="token punctuation">,</span>course <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno <span class="token operator">and</span> cname<span class="token operator">=</span><span class="token string">\'信息系统\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#41 每位同学成绩大于所选课程平均分的课程</span>\r\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>cno <span class="token keyword">from</span> sc x <span class="token keyword">where</span> grade<span class="token operator">>=</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> sc y <span class="token keyword">where</span> y<span class="token punctuation">.</span>sno<span class="token operator">=</span>x<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> sc<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>cno <span class="token keyword">from</span> sc<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> sno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> A_G <span class="token keyword">from</span> sc <span class="token keyword">group</span> <span class="token keyword">by</span> sno<span class="token punctuation">)</span> y <span class="token keyword">where</span> sc<span class="token punctuation">.</span>sno<span class="token operator">=</span>y<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>grade<span class="token operator">>=</span>y<span class="token punctuation">.</span>A_G<span class="token punctuation">;</span>\r\n<span class="token comment">#42 非 CS 专业下年龄小于 CS 的最大年龄的</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token keyword">any</span><span class="token punctuation">(</span><span class="token keyword">select</span> sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span> <span class="token operator">and</span> sdept<span class="token operator">&lt;></span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sage<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token operator">and</span> sdept<span class="token operator">&lt;></span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#43 非 CS 专业下年龄小于 CS 的最小年龄的</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token keyword">all</span><span class="token punctuation">(</span><span class="token keyword">select</span> sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token operator">and</span> sdept<span class="token operator">&lt;></span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>sage<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token operator">and</span> sdept<span class="token operator">&lt;></span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#44 学数据库的同学有谁</span>\r\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">and</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> sno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student<span class="token punctuation">,</span> sc <span class="token keyword">where</span> sc<span class="token punctuation">.</span>sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">and</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#45 不学数据库的同学有谁</span>\r\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">and</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#46 </span>\r\n<span class="token comment"># 查询选修了全部课程的学生姓名</span>\r\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> course <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">and</span> cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment"># 查询选修了全部已开课程的学生姓名</span>\r\n<span class="token keyword">select</span> sname <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc x <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc y <span class="token keyword">where</span> sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno <span class="token operator">and</span> x<span class="token punctuation">.</span>cno<span class="token operator">=</span>y<span class="token punctuation">.</span>cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#47</span>\r\n<span class="token comment"># 查询至少选修了学生200215122选修的全部课程的学生号码</span>\r\n<span class="token keyword">select</span> <span class="token keyword">distinct</span> sno <span class="token keyword">from</span> sc scx <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc scy <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215122\'</span> <span class="token operator">and</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> sc scz <span class="token keyword">where</span> scz<span class="token punctuation">.</span>sno<span class="token operator">=</span>scx<span class="token punctuation">.</span>sno <span class="token operator">and</span> scz<span class="token punctuation">.</span>cno<span class="token operator">=</span>scy<span class="token punctuation">.</span>cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#48</span>\r\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sage<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span>\r\n<span class="token comment">#49</span>\r\n<span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'2\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#50 学cs同时不小于19岁的</span>\r\n<span class="token comment">-- select * from student where sdept=\'CS\' intersect select * from student where sage&lt;=19;</span>\r\n<span class="token keyword">select</span> s1<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> student s1 <span class="token keyword">left</span> <span class="token keyword">join</span> student s2 <span class="token keyword">on</span> s1<span class="token punctuation">.</span>sno<span class="token operator">=</span>s2<span class="token punctuation">.</span>sno <span class="token keyword">where</span> s1<span class="token punctuation">.</span>sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> s1<span class="token punctuation">.</span>sage<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> sage<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span>\r\n<span class="token comment">#51</span>\r\n<span class="token comment">#select sno from sc where cno=\'1\' intersect select sno from sc where cno=\'2\';</span>\r\n<span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'1\'</span> <span class="token operator">and</span> sno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sno <span class="token keyword">from</span> sc <span class="token keyword">where</span> cno<span class="token operator">=</span><span class="token string">\'2\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> scx<span class="token punctuation">.</span>sno <span class="token keyword">from</span> sc scx<span class="token punctuation">,</span>sc scy <span class="token keyword">where</span> scx<span class="token punctuation">.</span>sno<span class="token operator">=</span>scy<span class="token punctuation">.</span>sno <span class="token operator">and</span> scx<span class="token punctuation">.</span>cno<span class="token operator">=</span><span class="token string">\'1\'</span> <span class="token operator">and</span> scy<span class="token punctuation">.</span>cno<span class="token operator">=</span><span class="token string">\'2\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#52</span>\r\n<span class="token comment">#select * from student where sdept=\'CS\' except select * from student where sage&lt;=19;</span>\r\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> sage<span class="token operator">></span><span class="token number">19</span><span class="token punctuation">;</span>\r\n<span class="token comment">#53</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>ssex<span class="token punctuation">,</span>sdept<span class="token punctuation">,</span>sage<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215129\'</span><span class="token punctuation">,</span><span class="token string">\'陈东\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token string">\'IS\'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#54</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215130\'</span><span class="token punctuation">,</span><span class="token string">\'张成民\'</span><span class="token punctuation">,</span><span class="token string">\'男\'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#55</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token punctuation">(</span>sno<span class="token punctuation">,</span>cno<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215128\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215129\'</span><span class="token punctuation">,</span><span class="token string">\'1\'</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#56</span>\r\n<span class="token keyword">create</span> <span class="token keyword">table</span> dept_age\r\n<span class="token punctuation">(</span>\r\n sdept <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\r\n avg_age <span class="token keyword">smallint</span>\r\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> dept_age <span class="token punctuation">(</span>sdept<span class="token punctuation">,</span>avg_age<span class="token punctuation">)</span> <span class="token keyword">select</span> sdept<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sage<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">group</span> <span class="token keyword">by</span> sdept<span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_age<span class="token punctuation">;</span>\r\n<span class="token comment">#57</span>\r\n<span class="token keyword">update</span> student <span class="token keyword">set</span> sage<span class="token operator">=</span><span class="token number">22</span> <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215121\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#58</span>\r\n<span class="token keyword">update</span> student <span class="token keyword">set</span> sage<span class="token operator">=</span>sage<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>\r\n<span class="token comment">#59</span>\r\n<span class="token keyword">update</span> sc <span class="token keyword">set</span> grade<span class="token operator">=</span><span class="token number">0</span> <span class="token keyword">where</span> <span class="token string">\'CS\'</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">update</span> sc <span class="token keyword">set</span> grade<span class="token operator">=</span><span class="token number">100</span> <span class="token keyword">where</span> sno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sno <span class="token keyword">from</span>  student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#60\t建立计算机系学生的视图</span>\r\n<span class="token keyword">create</span> <span class="token keyword">view</span> CS_Student <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#61\t建立计算机系学生的视图，并按要求进行修改和插入时仍需保证该视图只有计算机系的学生</span>\r\n<span class="token keyword">create</span> <span class="token keyword">view</span> CS_Student_Check <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sage <span class="token keyword">from</span> student <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">;</span>\r\n<span class="token comment">#62\t建立计算机系选修了1号课程的学生的视图</span>\r\n<span class="token keyword">create</span> <span class="token keyword">view</span> CS_S1<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>grade<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>grade <span class="token keyword">from</span> student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span> <span class="token operator">and</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#63\t建立计算机系选修了1号课程且成绩在90分以上的学生的视图</span>\r\n<span class="token keyword">create</span> <span class="token keyword">view</span> CS_S2 <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>grade <span class="token keyword">from</span> CS_S1 <span class="token keyword">where</span> grade<span class="token operator">>=</span><span class="token number">90</span><span class="token punctuation">;</span>\r\n<span class="token comment">#64\t定义一个反映学生出生年份的视图</span>\r\n<span class="token keyword">create</span> <span class="token keyword">view</span> BT_S<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sbirth<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span><span class="token number">2004</span><span class="token operator">-</span>sage <span class="token keyword">from</span> student<span class="token punctuation">;</span>\r\n<span class="token comment">#65 将学生的学号及他的平均成绩定义为一个视图</span>\r\n<span class="token keyword">create</span> <span class="token keyword">view</span> S_G<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>gavg<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token keyword">select</span> sno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> sc <span class="token keyword">group</span> <span class="token keyword">by</span> sno<span class="token punctuation">;</span>\r\n<span class="token comment">#66\t将student表中的所有女生记录定义为一个视图</span>\r\n<span class="token keyword">create</span> <span class="token keyword">view</span> F_Student <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> ssex<span class="token operator">=</span><span class="token string">\'女\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#67\t在计算机系学生的视图中找出年龄小于20岁的学生</span>\r\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span>sage <span class="token keyword">from</span> CS_Student <span class="token keyword">where</span> sage<span class="token operator">&lt;=</span><span class="token number">20</span><span class="token punctuation">;</span>\r\n<span class="token comment">#68\t查询选修了1号课程的计算机系的学生</span>\r\n<span class="token keyword">select</span> CS_Student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span>sname <span class="token keyword">from</span> CS_Student<span class="token punctuation">,</span>sc <span class="token keyword">where</span> CS_Student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span><span class="token string">\'1\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#69\t在S_G视图中查询平均成绩在90分以上的学生学号和平均成绩</span>\r\n<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> S_G <span class="token keyword">where</span> gavg<span class="token operator">>=</span><span class="token number">90</span><span class="token punctuation">;</span>\r\n<span class="token keyword">select</span> sno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> sc <span class="token keyword">group</span> <span class="token keyword">by</span> sno <span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span><span class="token operator">>=</span><span class="token number">90</span><span class="token punctuation">;</span>\r\n<span class="token comment">#70\t将计算机系学生视图CS_Student中学号为200215122的学生姓名改为刘辰</span>\r\n<span class="token keyword">update</span> CS_Student <span class="token keyword">set</span> sname<span class="token operator">=</span><span class="token string">\'刘辰\'</span> <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215122\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword">update</span> student <span class="token keyword">set</span> sname<span class="token operator">=</span><span class="token string">\'刘辰\'</span> <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215122\'</span> <span class="token operator">and</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#71\t向计算机系的学生视图CS_Student中插入一个新的学生记录，其中学号为200215129，姓名为赵新，年龄为20岁</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> CS_Student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215131\'</span><span class="token punctuation">,</span><span class="token string">\'赵新\'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sage<span class="token punctuation">,</span>sdept<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">\'200215131\'</span><span class="token punctuation">,</span><span class="token string">\'赵新\'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">\'CS\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#72\t删除计算机学生视图CS_Student中学号为200215129的记录</span>\r\n<span class="token keyword">delete</span> <span class="token keyword">from</span> CS_Student <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215131\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword">delete</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215131\'</span> <span class="token operator">and</span> sdept<span class="token operator">=</span><span class="token string">\'CS\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#60</span>\r\n<span class="token keyword">delete</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215128\'</span><span class="token punctuation">;</span>\r\n<span class="token keyword">delete</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">\'200215128\'</span><span class="token punctuation">;</span>\r\n<span class="token comment">#61</span>\r\n<span class="token keyword">delete</span> <span class="token keyword">from</span> sc <span class="token keyword">where</span> <span class="token string">\'CS\'</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> sdept <span class="token keyword">from</span> student <span class="token keyword">where</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token comment">#62</span>\r\n<span class="token keyword">delete</span> <span class="token keyword">from</span> sc<span class="token punctuation">;</span>\r\n<span class="token comment">#67 删除视图</span>\r\n<span class="token keyword">drop</span> <span class="token keyword">view</span>\tBT_S<span class="token punctuation">;</span>\r\n<span class="token keyword">drop</span> <span class="token keyword">view</span> CS_S1 <span class="token keyword">cascade</span><span class="token punctuation">;</span></code></pre>\n        </div></p>\n<h1 id="需求背景"><a href="#%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需求背景</h1>\n<p>已知始发站、终点站，如何查出满足条件的方案线路？即根据一个表关联多个表时如何查询相关字段？</p>\n<h1 id="sql-语句"><a href="#sql-%E8%AF%AD%E5%8F%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sql 语句</h1>\n<p>根据以上的前置知识可得出一对多下的查询应该这样写：</p>\n<p><div class="gatsby-highlight">\n        <pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>sugo_train_scheme<span class="token punctuation">`</span><span class="token punctuation">;</span>\r\n<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sugo_train_scheme<span class="token punctuation">`</span>  <span class="token punctuation">(</span>\r\n  <span class="token punctuation">`</span>created_at<span class="token punctuation">`</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'创建时间\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>updated_at<span class="token punctuation">`</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'更新时间\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>deleted_at<span class="token punctuation">`</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'删除时间\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'主键ID\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'方案名称\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span><span class="token keyword">status</span><span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'方案报告状态，生成中：generating，已生成：generated\'</span><span class="token punctuation">,</span>\r\n  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">USING</span> <span class="token keyword">BTREE</span>\r\n<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token operator">=</span> utf8 <span class="token keyword">COLLATE</span> <span class="token operator">=</span> utf8_general_ci <span class="token keyword">COMMENT</span> <span class="token operator">=</span> <span class="token string">\'车次方案列表 \'</span> ROW_FORMAT <span class="token operator">=</span> Dynamic<span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>sugo_train_scheme<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">\'1\'</span><span class="token punctuation">,</span> <span class="token string">\'32\'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>sugo_train_scheme<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">\'2\'</span><span class="token punctuation">,</span> <span class="token string">\'sfaf\'</span><span class="token punctuation">,</span> <span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>sugo_train_scheme_ponit_info<span class="token punctuation">`</span><span class="token punctuation">;</span>\r\n<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>sugo_train_scheme_ponit_info<span class="token punctuation">`</span>  <span class="token punctuation">(</span>\r\n  <span class="token punctuation">`</span>created_at<span class="token punctuation">`</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'创建时间\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>updated_at<span class="token punctuation">`</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'更新时间\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>deleted_at<span class="token punctuation">`</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'删除时间\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'主键ID\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>scheme_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'方案ID\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>zm<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'站名\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>zmdm<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'站名代码\'</span><span class="token punctuation">,</span>\r\n  <span class="token punctuation">`</span>zmlx<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">\'站名类型\'</span><span class="token punctuation">,</span>\r\n  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">USING</span> <span class="token keyword">BTREE</span>\r\n<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token operator">=</span> utf8 <span class="token keyword">COLLATE</span> <span class="token operator">=</span> utf8_general_ci <span class="token keyword">COMMENT</span> <span class="token operator">=</span> <span class="token string">\'车次方案查询条件站点信息 \'</span> ROW_FORMAT <span class="token operator">=</span> Dynamic<span class="token punctuation">;</span>\r\n\r\n<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>sugo_train_scheme_ponit_info<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">\'23\'</span><span class="token punctuation">,</span> <span class="token string">\'1\'</span><span class="token punctuation">,</span> <span class="token string">\'长沙\'</span><span class="token punctuation">,</span> <span class="token string">\'23\'</span><span class="token punctuation">,</span> <span class="token string">\'start\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>sugo_train_scheme_ponit_info<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">\'24\'</span><span class="token punctuation">,</span> <span class="token string">\'1\'</span><span class="token punctuation">,</span> <span class="token string">\'武汉\'</span><span class="token punctuation">,</span> <span class="token string">\'555\'</span><span class="token punctuation">,</span> <span class="token string">\'pass\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>sugo_train_scheme_ponit_info<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">\'25\'</span><span class="token punctuation">,</span> <span class="token string">\'1\'</span><span class="token punctuation">,</span> <span class="token string">\'湘潭\'</span><span class="token punctuation">,</span> <span class="token string">\'666\'</span><span class="token punctuation">,</span> <span class="token string">\'end\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>sugo_train_scheme_ponit_info<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">\'3\'</span><span class="token punctuation">,</span> <span class="token string">\'2\'</span><span class="token punctuation">,</span> <span class="token string">\'武汉\'</span><span class="token punctuation">,</span> <span class="token string">\'555\'</span><span class="token punctuation">,</span> <span class="token string">\'start\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>sugo_train_scheme_ponit_info<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">\'4\'</span><span class="token punctuation">,</span> <span class="token string">\'2\'</span><span class="token punctuation">,</span> <span class="token string">\'湘潭\'</span><span class="token punctuation">,</span> <span class="token string">\'666\'</span><span class="token punctuation">,</span> <span class="token string">\'end\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n<span class="token comment"># 查一对多的方法，使用 in</span>\r\n<span class="token keyword">SELECT</span>\r\n\t<span class="token operator">*</span> \r\n<span class="token keyword">FROM</span>\r\n\tsugo_train_scheme a<span class="token punctuation">,</span>\r\n\tsugo_train_scheme_ponit_info b \r\n<span class="token keyword">WHERE</span>\r\n\ta<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>scheme_id \r\n\t<span class="token operator">AND</span> a<span class="token punctuation">.</span>id <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> scheme_id <span class="token keyword">FROM</span> sugo_train_scheme_ponit_info <span class="token keyword">WHERE</span> zmdm <span class="token operator">=</span> <span class="token string">\'23\'</span> <span class="token operator">AND</span> zmlx <span class="token operator">=</span> <span class="token string">\'start\'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>\r\n\r\n<span class="token comment"># 查一对多的方法，使用自连接</span>\r\n<span class="token keyword">SELECT</span>\r\n\ta<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>\r\n\tb<span class="token punctuation">.</span><span class="token operator">*</span> \r\n<span class="token keyword">FROM</span>\r\n\tsugo_train_scheme a<span class="token punctuation">,</span>\r\n\tsugo_train_scheme_ponit_info b<span class="token punctuation">,</span>\r\n\tsugo_train_scheme_ponit_info c \r\n<span class="token keyword">WHERE</span>\r\n\ta<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>scheme_id \r\n\t<span class="token operator">AND</span> b<span class="token punctuation">.</span>scheme_id <span class="token operator">=</span> c<span class="token punctuation">.</span>scheme_id \r\n\t<span class="token operator">AND</span> c<span class="token punctuation">.</span>zmdm <span class="token operator">=</span> <span class="token string">\'23\'</span> \r\n\t<span class="token operator">AND</span> c<span class="token punctuation">.</span>zmlx <span class="token operator">=</span> <span class="token string">\'start\'</span><span class="token punctuation">;</span>\r\n\r\n<span class="token comment"># 查一对多的方法，使用 exists，一次查询不能顺带查出线路表</span>\r\n<span class="token keyword">SELECT</span>\r\n\t<span class="token operator">*</span> \r\n<span class="token keyword">FROM</span>\r\n\tsugo_train_scheme a\r\n<span class="token keyword">WHERE</span>\r\n\t<span class="token keyword">EXISTS</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> sugo_train_scheme_ponit_info b <span class="token keyword">WHERE</span> b<span class="token punctuation">.</span>scheme_id<span class="token operator">=</span>a<span class="token punctuation">.</span>id <span class="token operator">and</span> b<span class="token punctuation">.</span>zmdm <span class="token operator">=</span> <span class="token string">\'23\'</span> <span class="token operator">AND</span> b<span class="token punctuation">.</span>zmlx <span class="token operator">=</span> <span class="token string">\'start\'</span> <span class="token punctuation">)</span></code></pre>\n        </div></p>\n<h1 id="sequelize-下的解决方案"><a href="#sequelize-%E4%B8%8B%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sequelize 下的解决方案</h1>\n<ol>\n<li>从表的设计上考虑：将始发站、终点站写在主表中，无需考虑一对多的问题</li>\n<li>根据以上的 sql 语句利用 Sequelize 去关联</li>\n</ol>\n<p>最终为了实现上的简便，直接使用方案 1</p>',
id:"/github/workspace/blog/Sequelize一对多查询解决方案/index.md absPath of file >>> MarkdownRemark",timeToRead:10,frontmatter:{date:"2021-01-05 13:55:57",path:"/sequelize-one-to-many-find-solution/",tags:"后端, nodejs, Sequelize, SQL",title:"Sequelize一对多查询解决方案",draft:null}},{excerpt:"一、基础 模式定义了数据如何存储、存储什么样的数据以及数据如何分解等信息，数据库和表都有模式。 主键的值不允许修改，也不允许复用（不能使用已经删除的主键值赋给新数据行的主键）。 SQL（Structured Query Language)，标准 SQL 由 ANSI 标准委员会管理，从而称为 ANSI SQL。各个 DBMS 都有自己的实现，如 PL/SQL、Transact-SQL 等。 SQL 语句不区分大小写，但是数据库表名、列名和值是否区分依赖于具体的 DBMS 以及配置。 SQL…",html:'<h1 id="一、基础"><a href="#%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>一、基础</h1>\n<p>模式定义了数据如何存储、存储什么样的数据以及数据如何分解等信息，数据库和表都有模式。</p>\n<p>主键的值不允许修改，也不允许复用（不能使用已经删除的主键值赋给新数据行的主键）。</p>\n<p>SQL（Structured Query Language)，标准 SQL 由 ANSI 标准委员会管理，从而称为 ANSI SQL。各个 DBMS 都有自己的实现，如 PL/SQL、Transact-SQL 等。</p>\n<p>SQL 语句不区分大小写，但是数据库表名、列名和值是否区分依赖于具体的 DBMS 以及配置。</p>\n<p>SQL 支持以下三种注释：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="91244791696885140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`# 注释\nSELECT *\nFROM mytable; -- 注释\n/* 注释1\n   注释2 */`, `91244791696885140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token comment"># 注释</span>\n<span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable<span class="token punctuation">;</span> <span class="token comment">-- 注释</span>\n<span class="token comment">/* 注释1\n   注释2 */</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="二、创建表"><a href="#%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E8%A1%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二、创建表</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="21414869508049805000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`CREATE TABLE mytable (\n  id INT NOT NULL AUTO_INCREMENT,\n  col1 INT NOT NULL DEFAULT 1,\n  col2 VARCHAR(45) NULL,\n  col3 DATE NULL,\n  PRIMARY KEY (\\`id\\`));`, `21414869508049805000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> mytable <span class="token punctuation">(</span>\n  id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>\n  col1 <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">1</span><span class="token punctuation">,</span>\n  col2 <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  col3 <span class="token keyword">DATE</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>\n  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="三、修改表"><a href="#%E4%B8%89%E3%80%81%E4%BF%AE%E6%94%B9%E8%A1%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>三、修改表</h1>\n<p>添加列</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="80389398415926030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ALTER TABLE mytable\nADD col CHAR(20);`, `80389398415926030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> mytable\n<span class="token keyword">ADD</span> col <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>删除列</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87842610093027280000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`ALTER TABLE mytable\nDROP COLUMN col;`, `87842610093027280000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> mytable\n<span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> col<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>删除表</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="69915457169517970000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`DROP TABLE mytable;`, `69915457169517970000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> mytable<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h1 id="四、插入"><a href="#%E5%9B%9B%E3%80%81%E6%8F%92%E5%85%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>四、插入</h1>\n<p>普通插入</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92715452947108150000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`INSERT INTO mytable(col1, col2)\nVALUES(val1, val2);`, `92715452947108150000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mytable<span class="token punctuation">(</span>col1<span class="token punctuation">,</span> col2<span class="token punctuation">)</span>\n<span class="token keyword">VALUES</span><span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>插入检索出来的数据</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85342077931184690000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`INSERT INTO mytable1(col1, col2)\nSELECT col1, col2\nFROM mytable2;`, `85342077931184690000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> mytable1<span class="token punctuation">(</span>col1<span class="token punctuation">,</span> col2<span class="token punctuation">)</span>\n<span class="token keyword">SELECT</span> col1<span class="token punctuation">,</span> col2\n<span class="token keyword">FROM</span> mytable2<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>将一个表的内容插入到一个新表</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70172142603353850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`CREATE TABLE newtable AS\nSELECT * FROM mytable;`, `70172142603353850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> newtable <span class="token keyword">AS</span>\n<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h1 id="五、更新"><a href="#%E4%BA%94%E3%80%81%E6%9B%B4%E6%96%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>五、更新</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="77656425033588030000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`UPDATE mytable\nSET col = val\nWHERE id = 1;`, `77656425033588030000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">UPDATE</span> mytable\n<span class="token keyword">SET</span> col <span class="token operator">=</span> val\n<span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="六、删除"><a href="#%E5%85%AD%E3%80%81%E5%88%A0%E9%99%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>六、删除</h1>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="37911436896252210000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`DELETE FROM mytable\nWHERE id = 1;`, `37911436896252210000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> mytable\n<span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p><strong>TRUNCATE TABLE</strong> 可以清空表，也就是删除所有行。</p>\n<p>使用更新和删除操作时一定要用 WHERE 子句，不然会把整张表的数据都破坏。可以先用 SELECT 语句进行测试，防止错误删除。</p>\n<h1 id="七、查询"><a href="#%E4%B8%83%E3%80%81%E6%9F%A5%E8%AF%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>七、查询</h1>\n<h2 id="distinct"><a href="#distinct" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DISTINCT</h2>\n<p>相同值只会出现一次。它作用于所有列，也就是说所有列的值都相同才算相同。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="65071865298433630000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT DISTINCT col1, col2\nFROM mytable;`, `65071865298433630000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> col1<span class="token punctuation">,</span> col2\n<span class="token keyword">FROM</span> mytable<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="limit"><a href="#limit" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LIMIT</h2>\n<p>限制返回的行数。可以有两个参数，第一个参数为起始行，从 0 开始；第二个参数为返回的总行数。</p>\n<p>返回前 5 行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94499073139839650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT *\nFROM mytable\nLIMIT 5;`, `94499073139839650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">LIMIT</span> <span class="token number">5</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="45691048054047556000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT *\nFROM mytable\nLIMIT 0, 5;`, `45691048054047556000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>返回第 3 ~ 5 行：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="29783967633266094000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT *\nFROM mytable\nLIMIT 2, 3;`, `29783967633266094000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">LIMIT</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="八、排序"><a href="#%E5%85%AB%E3%80%81%E6%8E%92%E5%BA%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>八、排序</h1>\n<ul>\n<li><strong>ASC</strong> ：升序（默认）</li>\n<li><strong>DESC</strong> ：降序</li>\n</ul>\n<p>可以按多个列进行排序，并且为每个列指定不同的排序方式：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60579452325485650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT *\nFROM mytable\nORDER BY col1 DESC, col2 ASC;`, `60579452325485650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> col1 <span class="token keyword">DESC</span><span class="token punctuation">,</span> col2 <span class="token keyword">ASC</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="九、过滤"><a href="#%E4%B9%9D%E3%80%81%E8%BF%87%E6%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>九、过滤</h1>\n<p>不进行过滤的数据非常大，导致通过网络传输了多余的数据，从而浪费了网络带宽。因此尽量使用 SQL 语句来过滤不必要的数据，而不是传输所有的数据到客户端中然后由客户端进行过滤。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53835841776105960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT *\nFROM mytable\nWHERE col IS NULL;`, `53835841776105960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">WHERE</span> col <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>下表显示了 WHERE 子句可用的操作符</p>\n<table>\n<thead>\n<tr>\n<th>操作符</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>= &#x3C; ></td>\n<td>等于 小于 大于</td>\n</tr>\n<tr>\n<td>&#x3C;> !=</td>\n<td>不等于</td>\n</tr>\n<tr>\n<td>&#x3C;= !></td>\n<td>小于等于</td>\n</tr>\n<tr>\n<td>>\n= !&#x3C;</td>\n<td>大于等于</td>\n</tr>\n<tr>\n<td>BETWEEN</td>\n<td>在两个值之间</td>\n</tr>\n<tr>\n<td>IS NULL</td>\n<td>为 NULL 值</td>\n</tr>\n</tbody>\n</table>\n<p>应该注意到，NULL 与 0 、空字符串都不同。</p>\n<p><strong>AND OR</strong> 用于连接多个过滤条件。优先处理 AND，因此当一个过滤表达式涉及到多个 AND 和 OR 时，应当使用 () 来决定优先级。</p>\n<p><strong>IN</strong> 操作符用于匹配一组值，其后也可以接一个 SELECT 子句，从而匹配子查询得到的一组值。</p>\n<p><strong>NOT</strong> 操作符用于否定一个条件。</p>\n<h1 id="十、通配符"><a href="#%E5%8D%81%E3%80%81%E9%80%9A%E9%85%8D%E7%AC%A6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十、通配符</h1>\n<p>通配符也是用在过滤语句中，但它只能用于文本字段。</p>\n<ul>\n<li>\n<p><strong>%</strong> 匹配 >=0 个任意字符；</p>\n</li>\n<li>\n<p><strong>_</strong> 匹配 ==1 个任意字符；</p>\n</li>\n<li>\n<p><strong>[ ]</strong> 可以匹配集合内的字符，例如 [ab] 将匹配字符 a 或者 b。用脱字符 ^ 可以对其进行否定，也就是不匹配集合内的字符。</p>\n</li>\n</ul>\n<p>使用 Like 来进行通配符匹配。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57287864303558540000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT *\nFROM mytable\nWHERE col LIKE \'[^AB]%\' -- 不以 A 和 B 开头的任意文本`, `57287864303558540000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">WHERE</span> col <span class="token operator">LIKE</span> <span class="token string">\'[^AB]%\'</span> <span class="token comment">-- 不以 A 和 B 开头的任意文本</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>不要滥用通配符，通配符位于开头处匹配会非常慢。</p>\n<h1 id="十一、计算字段"><a href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十一、计算字段</h1>\n<p>在数据库服务器上完成数据的转换和格式化的工作往往比客户端上快得多，并且转换和格式化后的数据量更少的话可以减少网络通信量。</p>\n<p>计算字段通常需要使用 <strong>AS</strong> 来取别名，否则输出的时候字段名为计算表达式。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39801840154656270000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT col1*col2 AS alias\nFROM mytable`, `39801840154656270000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> col1<span class="token operator">*</span>col2 <span class="token keyword">AS</span> alias\n<span class="token keyword">FROM</span> mytable</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p><strong>CONCAT()</strong> 用于连接两个字段。许多数据库会使用空格把一个值填充为列宽，因此连接的结果会出现一些不必要的空格，使用 <strong>TRIM()</strong> 可以去除首尾空格。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="11908413159976860000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT CONCAT(TRIM(col1), \' (\', TRIM(col2), \')\')\nFROM mytable`, `11908413159976860000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>TRIM<span class="token punctuation">(</span>col1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">\' (\'</span><span class="token punctuation">,</span> TRIM<span class="token punctuation">(</span>col2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">\')\'</span><span class="token punctuation">)</span>\n<span class="token keyword">FROM</span> mytable</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h1 id="十二、函数"><a href="#%E5%8D%81%E4%BA%8C%E3%80%81%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十二、函数</h1>\n<p>各个 DBMS 的函数都是不相同的，因此不可移植。</p>\n<h2 id="文本处理"><a href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>文本处理</h2>\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LEFT() RIGHT()</td>\n<td>左边或者右边的字符</td>\n</tr>\n<tr>\n<td>LOWER() UPPER()</td>\n<td>转换为小写或者大写</td>\n</tr>\n<tr>\n<td>LTRIM() RTIM()</td>\n<td>去除左边或者右边的空格</td>\n</tr>\n<tr>\n<td>LENGTH()</td>\n<td>长度</td>\n</tr>\n<tr>\n<td>SUNDEX()</td>\n<td>转换为语音值</td>\n</tr>\n</tbody>\n</table>\n<p>其中， <strong>SOUNDEX()</strong> 是将一个字符串转换为描述其语音表示的字母数字模式的算法，它是根据发音而不是字母比较。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92725770518453130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT *\nFROM mytable\nWHERE SOUNDEX(col1) = SOUNDEX(\'apple\')`, `92725770518453130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">WHERE</span> SOUNDEX<span class="token punctuation">(</span>col1<span class="token punctuation">)</span> <span class="token operator">=</span> SOUNDEX<span class="token punctuation">(</span><span class="token string">\'apple\'</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="日期和时间处理"><a href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>日期和时间处理</h2>\n<ul>\n<li>日期格式：YYYY-MM-DD</li>\n<li>时间格式：HH:MM:SS</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>函 数</th>\n<th>说 明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AddDate()</td>\n<td>增加一个日期（天、周等）</td>\n</tr>\n<tr>\n<td>AddTime()</td>\n<td>增加一个时间（时、分等）</td>\n</tr>\n<tr>\n<td>CurDate()</td>\n<td>返回当前日期</td>\n</tr>\n<tr>\n<td>CurTime()</td>\n<td>返回当前时间</td>\n</tr>\n<tr>\n<td>Date()</td>\n<td>返回日期时间的日期部分</td>\n</tr>\n<tr>\n<td>DateDiff()</td>\n<td>计算两个日期之差</td>\n</tr>\n<tr>\n<td>Date_Add()</td>\n<td>高度灵活的日期运算函数</td>\n</tr>\n<tr>\n<td>Date_Format()</td>\n<td>返回一个格式化的日期或时间串</td>\n</tr>\n<tr>\n<td>Day()</td>\n<td>返回一个日期的天数部分</td>\n</tr>\n<tr>\n<td>DayOfWeek()</td>\n<td>对于一个日期，返回对应的星期几</td>\n</tr>\n<tr>\n<td>Hour()</td>\n<td>返回一个时间的小时部分</td>\n</tr>\n<tr>\n<td>Minute()</td>\n<td>返回一个时间的分钟部分</td>\n</tr>\n<tr>\n<td>Month()</td>\n<td>返回一个日期的月份部分</td>\n</tr>\n<tr>\n<td>Now()</td>\n<td>返回当前日期和时间</td>\n</tr>\n<tr>\n<td>Second()</td>\n<td>返回一个时间的秒部分</td>\n</tr>\n<tr>\n<td>Time()</td>\n<td>返回一个日期时间的时间部分</td>\n</tr>\n<tr>\n<td>Year()</td>\n<td>返回一个日期的年份部分</td>\n</tr>\n</tbody>\n</table>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="8114590813524814000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`mysql> SELECT NOW();\n        -> \'2017-06-28 14:01:52\'`, `8114590813524814000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token operator">-</span><span class="token operator">></span> <span class="token string">\'2017-06-28 14:01:52\'</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="数值处理"><a href="#%E6%95%B0%E5%80%BC%E5%A4%84%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>数值处理</h2>\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SIN()</td>\n<td>正弦</td>\n</tr>\n<tr>\n<td>COS()</td>\n<td>余弦</td>\n</tr>\n<tr>\n<td>TAN()</td>\n<td>正切</td>\n</tr>\n<tr>\n<td>ABS()</td>\n<td>绝对值</td>\n</tr>\n<tr>\n<td>SQRT()</td>\n<td>平方根</td>\n</tr>\n<tr>\n<td>MOD()</td>\n<td>余数</td>\n</tr>\n<tr>\n<td>EXP()</td>\n<td>指数</td>\n</tr>\n<tr>\n<td>PI()</td>\n<td>圆周率</td>\n</tr>\n<tr>\n<td>RAND()</td>\n<td>随机数</td>\n</tr>\n</tbody>\n</table>\n<h2 id="汇总"><a href="#%E6%B1%87%E6%80%BB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>汇总</h2>\n<table>\n<thead>\n<tr>\n<th>函 数</th>\n<th>说 明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AVG()</td>\n<td>返回某列的平均值</td>\n</tr>\n<tr>\n<td>COUNT()</td>\n<td>返回某列的行数</td>\n</tr>\n<tr>\n<td>MAX()</td>\n<td>返回某列的最大值</td>\n</tr>\n<tr>\n<td>MIN()</td>\n<td>返回某列的最小值</td>\n</tr>\n<tr>\n<td>SUM()</td>\n<td>返回某列值之和</td>\n</tr>\n</tbody>\n</table>\n<p>AVG() 会忽略 NULL 行。</p>\n<p>使用 DISTINCT 可以让汇总函数值汇总不同的值。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16143965882498845000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT AVG(DISTINCT col1) AS avg_col\nFROM mytable`, `16143965882498845000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> col1<span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_col\n<span class="token keyword">FROM</span> mytable</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h1 id="十三、分组"><a href="#%E5%8D%81%E4%B8%89%E3%80%81%E5%88%86%E7%BB%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十三、分组</h1>\n<p>分组就是把具有相同的数据值的行放在同一组中。</p>\n<p>可以对同一分组数据使用汇总函数进行处理，例如求分组数据的平均值等。</p>\n<p>指定的分组字段除了能让数组按该字段进行分组，也可以按该字段进行排序，例如按 col 字段排序并分组数据：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16568648908503669000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT col, COUNT(*) AS num\nFROM mytable\nGROUP BY col;`, `16568648908503669000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> col<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> num\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> col<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>WHERE 过滤行，HAVING 过滤分组。行过滤应当先与分组过滤；</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="4488802680037862400"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT col, COUNT(*) AS num\nFROM mytable\nWHERE col > 2\nGROUP BY col\nHAVING COUNT(*) >= 2;`, `4488802680037862400`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> col<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> num\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">WHERE</span> col <span class="token operator">></span> <span class="token number">2</span>\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> col\n<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">2</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>GROUP BY 的排序结果为分组字段，而 ORDER BY 也可以以聚集字段来进行排序。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="57910243132361064000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT col, COUNT(*) AS num\nFROM mytable\nGROUP BY col\nORDER BY num;`, `57910243132361064000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> col<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> num\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> col\n<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> num<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>分组规定：</p>\n<ol>\n<li>GROUP BY 子句出现在 WHERE 子句之后，ORDER BY 子句之前；</li>\n<li>除了汇总计算语句的字段外，SELECT 语句中的每一字段都必须在 GROUP BY 子句中给出；</li>\n<li>NULL 的行会单独分为一组；</li>\n<li>大多数 SQL 实现不支持 GROUP BY 列具有可变长度的数据类型。</li>\n</ol>\n<h1 id="十四、子查询"><a href="#%E5%8D%81%E5%9B%9B%E3%80%81%E5%AD%90%E6%9F%A5%E8%AF%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十四、子查询</h1>\n<p>子查询中只能返回一个字段的数据。</p>\n<p>可以将子查询的结果作为 WHRER 语句的过滤条件：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58891677145117700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT *\nFROM mytable1\nWHERE col1 IN (SELECT col2\n                 FROM mytable2);`, `58891677145117700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable1\n<span class="token keyword">WHERE</span> col1 <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> col2\n                 <span class="token keyword">FROM</span> mytable2<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下面的语句可以检索出客户的订单数量，子查询语句会对第一个查询检索出的每个客户执行一次：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70810785531374350000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT cust_name, (SELECT COUNT(*)\n                   FROM Orders\n                   WHERE Orders.cust_id = Customers.cust_id)\n                   AS orders_num\nFROM Customers\nORDER BY cust_name;`, `70810785531374350000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>\n                   <span class="token keyword">FROM</span> Orders\n                   <span class="token keyword">WHERE</span> Orders<span class="token punctuation">.</span>cust_id <span class="token operator">=</span> Customers<span class="token punctuation">.</span>cust_id<span class="token punctuation">)</span>\n                   <span class="token keyword">AS</span> orders_num\n<span class="token keyword">FROM</span> Customers\n<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> cust_name<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="十五、连接"><a href="#%E5%8D%81%E4%BA%94%E3%80%81%E8%BF%9E%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十五、连接</h1>\n<p>连接用于连接多个表，使用 JOIN 关键字，并且条件语句使用 ON 而不是 Where。</p>\n<p>连接可以替换子查询，并且比子查询的效率一般会更快。</p>\n<p>可以用 AS 给列名、计算字段和表名取别名，给表名取别名是为了简化 SQL 语句以及连接相同表。</p>\n<h2 id="内连接"><a href="#%E5%86%85%E8%BF%9E%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内连接</h2>\n<p>内连接又称等值连接，使用 INNER JOIN 关键字。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="22419713467682214000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`select a, b, c\nfrom A inner join B\non A.key = B.key`, `22419713467682214000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">select</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c\n<span class="token keyword">from</span> A <span class="token keyword">inner</span> <span class="token keyword">join</span> B\n<span class="token keyword">on</span> A<span class="token punctuation">.</span><span class="token keyword">key</span> <span class="token operator">=</span> B<span class="token punctuation">.</span><span class="token keyword">key</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>可以不明确使用 INNER JOIN，而使用普通查询并在 WHERE 中将两个表中要连接的列用等值方法连接起来。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58868026071806075000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`select a, b, c\nfrom A, B\nwhere A.key = B.key`, `58868026071806075000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">select</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c\n<span class="token keyword">from</span> A<span class="token punctuation">,</span> B\n<span class="token keyword">where</span> A<span class="token punctuation">.</span><span class="token keyword">key</span> <span class="token operator">=</span> B<span class="token punctuation">.</span><span class="token keyword">key</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>在没有条件语句的情况下返回笛卡尔积。</p>\n<h2 id="自连接"><a href="#%E8%87%AA%E8%BF%9E%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自连接</h2>\n<p>自连接可以看成内连接的一种，只是连接的表是自身而已。</p>\n<p>一张员工表，包含员工姓名和员工所属部门，要找出与 Jim 处在同一部门的所有员工姓名。</p>\n<p>子查询版本</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61022540898495726000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`select name\nfrom employee\nwhere department = (\n      select department\n      from employee\n      where name = &quot;Jim&quot;);`, `61022540898495726000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">select</span> name\n<span class="token keyword">from</span> employee\n<span class="token keyword">where</span> department <span class="token operator">=</span> <span class="token punctuation">(</span>\n      <span class="token keyword">select</span> department\n      <span class="token keyword">from</span> employee\n      <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">"Jim"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>自连接版本</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="93627228486858310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`select e2.name\nfrom employee as e1, employee as e2\nwhere e1.department = e2.department\n      and e1.name = &quot;Jim&quot;;`, `93627228486858310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">select</span> e2<span class="token punctuation">.</span>name\n<span class="token keyword">from</span> employee <span class="token keyword">as</span> e1<span class="token punctuation">,</span> employee <span class="token keyword">as</span> e2\n<span class="token keyword">where</span> e1<span class="token punctuation">.</span>department <span class="token operator">=</span> e2<span class="token punctuation">.</span>department\n      <span class="token operator">and</span> e1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Jim"</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>连接一般比子查询的效率高。</p>\n<h2 id="自然连接"><a href="#%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自然连接</h2>\n<p>自然连接是把同名列通过等值测试连接起来的，同名列可以有多个。</p>\n<p>内连接和自然连接的区别：内连接提供连接的列，而自然连接自动连接所有同名列。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="74650219998908300000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`select *\nfrom employee natural join department;`, `74650219998908300000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span>\n<span class="token keyword">from</span> employee <span class="token keyword">natural</span> <span class="token keyword">join</span> department<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="外连接"><a href="#%E5%A4%96%E8%BF%9E%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>外连接</h2>\n<p>外连接保留了没有关联的那些行。分为左外连接，右外连接以及全外连接，左外连接就是保留左表没有关联的行。</p>\n<p>检索所有顾客的订单信息，包括还没有订单信息的顾客。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41374521254311130000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`select Customers.cust_id, Orders.order_num\n   from Customers left outer join Orders\n   on Customers.cust_id = Orders.curt_id;`, `41374521254311130000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">select</span> Customers<span class="token punctuation">.</span>cust_id<span class="token punctuation">,</span> Orders<span class="token punctuation">.</span>order_num\n   <span class="token keyword">from</span> Customers <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> Orders\n   <span class="token keyword">on</span> Customers<span class="token punctuation">.</span>cust_id <span class="token operator">=</span> Orders<span class="token punctuation">.</span>curt_id<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>如果需要统计顾客的订单数，使用聚集函数。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18409161841884391000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`select Customers.cust_id,\n       COUNT(Orders.order_num) as num_ord\nfrom Customers left outer join Orders\non Customers.cust_id = Orders.curt_id\ngroup by Customers.cust_id;`, `18409161841884391000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">select</span> Customers<span class="token punctuation">.</span>cust_id<span class="token punctuation">,</span>\n       <span class="token function">COUNT</span><span class="token punctuation">(</span>Orders<span class="token punctuation">.</span>order_num<span class="token punctuation">)</span> <span class="token keyword">as</span> num_ord\n<span class="token keyword">from</span> Customers <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> Orders\n<span class="token keyword">on</span> Customers<span class="token punctuation">.</span>cust_id <span class="token operator">=</span> Orders<span class="token punctuation">.</span>curt_id\n<span class="token keyword">group</span> <span class="token keyword">by</span> Customers<span class="token punctuation">.</span>cust_id<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="十六、组合查询"><a href="#%E5%8D%81%E5%85%AD%E3%80%81%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十六、组合查询</h1>\n<p>使用 <strong>UNION</strong> 来组合两个查询，如果第一个查询返回 M 行，第二个查询返回 N 行，那么组合查询的结果为 M+N 行。</p>\n<p>每个查询必须包含相同的列、表达式或者聚集函数。</p>\n<p>默认会去除相同行，如果需要保留相同行，使用 UNION ALL。</p>\n<p>只能包含一个 ORDER BY 子句，并且必须位于语句的最后。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12534085503504499000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT col\nFROM mytable\nWHERE col = 1\nUNION\nSELECT col\nFROM mytable\nWHERE col =2;`, `12534085503504499000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> col\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">WHERE</span> col <span class="token operator">=</span> <span class="token number">1</span>\n<span class="token keyword">UNION</span>\n<span class="token keyword">SELECT</span> col\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">WHERE</span> col <span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="十七、视图"><a href="#%E5%8D%81%E4%B8%83%E3%80%81%E8%A7%86%E5%9B%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十七、视图</h1>\n<p>视图是虚拟的表，本身不包含数据，也就不能对其进行索引操作。对视图的操作和对普通表的操作一样。</p>\n<p>视图具有如下好处：</p>\n<ol>\n<li>简化复杂的 SQL 操作，比如复杂的联结；</li>\n<li>只使用实际表的一部分数据；</li>\n<li>通过只给用户访问视图的权限，保证数据的安全性；</li>\n<li>更改数据格式和表示。</li>\n</ol>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="84470019968552830000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`CREATE VIEW myview AS\nSELECT Concat(col1, col2) AS concat_col, col3*col4 AS count_col\nFROM mytable\nWHERE col5 = val;`, `84470019968552830000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> myview <span class="token keyword">AS</span>\n<span class="token keyword">SELECT</span> Concat<span class="token punctuation">(</span>col1<span class="token punctuation">,</span> col2<span class="token punctuation">)</span> <span class="token keyword">AS</span> concat_col<span class="token punctuation">,</span> col3<span class="token operator">*</span>col4 <span class="token keyword">AS</span> count_col\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">WHERE</span> col5 <span class="token operator">=</span> val<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="十八、存储过程"><a href="#%E5%8D%81%E5%85%AB%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十八、存储过程</h1>\n<p>存储过程可以看成是对一系列 SQL 操作的批处理；</p>\n<h2 id="使用存储过程的好处"><a href="#%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E5%A5%BD%E5%A4%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用存储过程的好处</h2>\n<ol>\n<li>\n<p>代码封装，保证了一定的安全性；</p>\n</li>\n<li>\n<p>代码复用；</p>\n</li>\n<li>\n<p>由于是预先编译，因此具有很高的性能。</p>\n</li>\n</ol>\n<h2 id="创建存储过程"><a href="#%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建存储过程</h2>\n<p>命令行中创建存储过程需要自定义分隔符，因为命令行是以 ; 为结束符，而存储过程中也包含了分号，因此会错误把这部分分号当成是结束符，造成语法错误。</p>\n<p>包含 in、out 和 inout 三种参数。</p>\n<p>给变量赋值都需要用 select into 语句。</p>\n<p>每次只能给一个变量赋值，不支持集合的操作。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="947222474825926100"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`delimiter //\n\ncreate procedure myprocedure( out ret int )\n    begin\n        declare y int;\n        select sum(col1)\n        from mytable\n        into y;\n        select y*y into ret;\n    end //\ndelimiter ;`, `947222474825926100`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">delimiter</span> <span class="token comment">//</span>\n\n<span class="token keyword">create</span> <span class="token keyword">procedure</span> myprocedure<span class="token punctuation">(</span> <span class="token keyword">out</span> ret <span class="token keyword">int</span> <span class="token punctuation">)</span>\n    <span class="token keyword">begin</span>\n        <span class="token keyword">declare</span> y <span class="token keyword">int</span><span class="token punctuation">;</span>\n        <span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>col1<span class="token punctuation">)</span>\n        <span class="token keyword">from</span> mytable\n        <span class="token keyword">into</span> y<span class="token punctuation">;</span>\n        <span class="token keyword">select</span> y<span class="token operator">*</span>y <span class="token keyword">into</span> ret<span class="token punctuation">;</span>\n    <span class="token keyword">end</span> <span class="token comment">//</span>\n<span class="token keyword">delimiter</span> <span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="81449775150377140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`call myprocedure(@ret);\nselect @ret;`, `81449775150377140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">call</span> myprocedure<span class="token punctuation">(</span><span class="token variable">@ret</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">select</span> <span class="token variable">@ret</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h1 id="十九、游标"><a href="#%E5%8D%81%E4%B9%9D%E3%80%81%E6%B8%B8%E6%A0%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>十九、游标</h1>\n<p>在存储过程中使用游标可以对一个结果集进行移动遍历。</p>\n<p>游标主要用于交互式应用，其中用户需要对数据集中的任意行进行浏览和修改。</p>\n<p>使用游标的四个步骤：</p>\n<ol>\n<li>声明游标，这个过程没有实际检索出数据；</li>\n<li>打开游标；</li>\n<li>取出数据；</li>\n<li>关闭游标；</li>\n</ol>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17211337465354904000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`delimiter //\ncreate procedure myprocedure(out ret int)\n    begin\n        declare done boolean default 0;\n\n        declare mycursor cursor for\n        select col1 from mytable;\n        # 定义了一个continue handler，当 sqlstate \'02000\' 这个条件出现时，会执行 set done = 1\n        declare continue handler for sqlstate \'02000\' set done = 1;\n\n        open mycursor;\n\n        repeat\n            fetch mycursor into ret;\n            select ret;\n        until done end repeat;\n\n        close mycursor;\n    end //\n delimiter ;`, `17211337465354904000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">delimiter</span> <span class="token comment">//</span>\n<span class="token keyword">create</span> <span class="token keyword">procedure</span> myprocedure<span class="token punctuation">(</span><span class="token keyword">out</span> ret <span class="token keyword">int</span><span class="token punctuation">)</span>\n    <span class="token keyword">begin</span>\n        <span class="token keyword">declare</span> done <span class="token keyword">boolean</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">declare</span> mycursor <span class="token keyword">cursor</span> <span class="token keyword">for</span>\n        <span class="token keyword">select</span> col1 <span class="token keyword">from</span> mytable<span class="token punctuation">;</span>\n        <span class="token comment"># 定义了一个continue handler，当 sqlstate \'02000\' 这个条件出现时，会执行 set done = 1</span>\n        <span class="token keyword">declare</span> <span class="token keyword">continue</span> <span class="token keyword">handler</span> <span class="token keyword">for</span> sqlstate <span class="token string">\'02000\'</span> <span class="token keyword">set</span> done <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">open</span> mycursor<span class="token punctuation">;</span>\n\n        <span class="token keyword">repeat</span>\n            <span class="token keyword">fetch</span> mycursor <span class="token keyword">into</span> ret<span class="token punctuation">;</span>\n            <span class="token keyword">select</span> ret<span class="token punctuation">;</span>\n        until done <span class="token keyword">end</span> <span class="token keyword">repeat</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">close</span> mycursor<span class="token punctuation">;</span>\n    <span class="token keyword">end</span> <span class="token comment">//</span>\n <span class="token keyword">delimiter</span> <span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="二十、触发器"><a href="#%E4%BA%8C%E5%8D%81%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二十、触发器</h1>\n<p>触发器会在某个表执行以下语句时而自动执行：DELETE、INSERT、UPDATE</p>\n<p>触发器必须指定在语句执行之前还是之后自动执行，之前执行使用 BEFORE 关键字，之后执行使用 AFTER 关键字。BEFORE 用于数据验证和净化。</p>\n<p>INSERT 触发器包含一个名为 NEW 的虚拟表。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="94903202655430700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`CREATE TRIGGER mytrigger AFTER INSERT ON mytable\nFOR EACH ROW SELECT NEW.col;`, `94903202655430700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> mytrigger <span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> mytable\n<span class="token keyword">FOR EACH ROW</span> <span class="token keyword">SELECT</span> NEW<span class="token punctuation">.</span>col<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<p>DELETE 触发器包含一个名为 OLD 的虚拟表，并且是只读的。</p>\n<p>UPDATE 触发器包含一个名为 NEW 和一个名为 OLD 的虚拟表，其中 NEW 是可以被修改地，而 OLD 是只读的。</p>\n<p>可以使用触发器来进行审计跟踪，把修改记录到另外一张表中。</p>\n<p>MySQL 不允许在触发器中使用 CALL 语句 ，也就是不能调用存储过程。</p>\n<h1 id="二十一、事务处理"><a href="#%E4%BA%8C%E5%8D%81%E4%B8%80%E3%80%81%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二十一、事务处理</h1>\n<p>基本术语：</p>\n<ol>\n<li>事务（transaction）指一组 SQL 语句；</li>\n<li>回退（rollback）指撤销指定 SQL 语句的过程；</li>\n<li>提交（commit）指将未存储的 SQL 语句结果写入数据库表；</li>\n<li>保留点（savepoint）指事务处理中设置的临时占位符（placeholder），你可以对它发布回退（与回退整个事务处理不同）。</li>\n</ol>\n<p>不能回退 SELECT 语句，回退 SELECT 语句也没意义；也不能回退 CREATE 和 DROP 语句。</p>\n<p>MySQL 的事务提交默认是隐式提交，也就是每执行一条语句就把这条语句当成一个事务然后进行提交。当出现 START TRANSACTION 语句时，会关闭隐式提交；当 COMMIT 或 ROLLBACK 语句执行后，事务会自动关闭，重新恢复隐式提交。</p>\n<p>通过设置 autocommit 为 0 可以取消自动提交，直到 autocommit 被设置为 1 才会提交；autocommit 标记是针对每个连接而不是针对服务器的。</p>\n<p>如果没有设置保留点，ROLLBACK 会回退到 START TRANSACTION 语句处；如果设置了保留点，并且在 ROLLBACK 中指定该保留点，则会回退到该保留点。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="30040723472461960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`START TRANSACTION\n// ...\nSAVEPOINT delete1\n// ...\nROLLBACK TO delete1\n// ...\nCOMMIT`, `30040723472461960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span>\n<span class="token comment">// ...</span>\n<span class="token keyword">SAVEPOINT</span> delete1\n<span class="token comment">// ...</span>\n<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> delete1\n<span class="token comment">// ...</span>\n<span class="token keyword">COMMIT</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="二十二、字符集"><a href="#%E4%BA%8C%E5%8D%81%E4%BA%8C%E3%80%81%E5%AD%97%E7%AC%A6%E9%9B%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二十二、字符集</h1>\n<p>基本术语：</p>\n<ol>\n<li>字符集为字母和符号的集合；</li>\n<li>编码为某个字符集成员的内部表示；</li>\n<li>校对字符指定如何比较，主要用于排序和分组。</li>\n</ol>\n<p>除了给表指定字符集和校对外，也可以给列指定：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="7674452919005880000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`CREATE TABLE mytable\n(col VARCHAR(10) CHARACTER SET latin COLLATE latin1_general_ci )\nDEFAULT CHARACTER SET hebrew COLLATE hebrew_general_ci;`, `7674452919005880000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> mytable\n<span class="token punctuation">(</span>col <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> latin <span class="token keyword">COLLATE</span> latin1_general_ci <span class="token punctuation">)</span>\n<span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> hebrew <span class="token keyword">COLLATE</span> hebrew_general_ci<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>可以在排序、分组时指定校对：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="66321896875575770000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SELECT *\nFROM mytable\nORDER BY col COLLATE latin1_general_ci;`, `66321896875575770000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span>\n<span class="token keyword">FROM</span> mytable\n<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> col <span class="token keyword">COLLATE</span> latin1_general_ci<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h1 id="二十三、权限管理"><a href="#%E4%BA%8C%E5%8D%81%E4%B8%89%E3%80%81%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>二十三、权限管理</h1>\n<p>MySQL 的账户信息保存在 mysql 这个数据库中。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="40339893814081920000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`USE mysql;\nSELECT user FROM user;`, `40339893814081920000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">USE</span> mysql<span class="token punctuation">;</span>\n<span class="token keyword">SELECT</span> <span class="token keyword">user</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<h2 id="创建账户"><a href="#%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>创建账户</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3765195975163160000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`CREATE USER myuser IDENTIFIED BY \'mypassword\';`, `3765195975163160000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> myuser IDENTIFIED <span class="token keyword">BY</span> <span class="token string">\'mypassword\'</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>新创建的账户没有任何权限。</p>\n<h2 id="修改账户名"><a href="#%E4%BF%AE%E6%94%B9%E8%B4%A6%E6%88%B7%E5%90%8D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>修改账户名</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87772008555245080000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`RENAME myuser TO newuser;`, `87772008555245080000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">RENAME</span> myuser <span class="token keyword">TO</span> newuser<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="删除账户"><a href="#%E5%88%A0%E9%99%A4%E8%B4%A6%E6%88%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除账户</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92382099069600550000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`DROP USER myuser;`, `92382099069600550000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">USER</span> myuser<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="查看权限"><a href="#%E6%9F%A5%E7%9C%8B%E6%9D%83%E9%99%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>查看权限</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="14100231792527528000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SHOW GRANTS FOR myuser;`, `14100231792527528000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> myuser<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h2 id="授予权限"><a href="#%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>授予权限</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="58595906195827016000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`GRANT SELECT, INSERT ON mydatabase.* TO myuser;`, `58595906195827016000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> mydatabase<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> myuser<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>账户用 username@host 的形式定义，username@% 使用的是默认主机名。</p>\n<h2 id="删除权限"><a href="#%E5%88%A0%E9%99%A4%E6%9D%83%E9%99%90" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除权限</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="63622141613373320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`REVOKE SELECT, INSERT ON mydatabase.* FROM myuser;`, `63622141613373320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">REVOKE</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> mydatabase<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> myuser<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>GRANT 和 REVOKE 可在几个层次上控制访问权限：</p>\n<ul>\n<li>整个服务器，使用 GRANT ALL 和 REVOKE ALL；</li>\n<li>整个数据库，使用 ON database.*；</li>\n<li>特定的表，使用 ON database.table；</li>\n<li>特定的列；</li>\n<li>特定的存储过程。</li>\n</ul>\n<h2 id="更改密码"><a href="#%E6%9B%B4%E6%94%B9%E5%AF%86%E7%A0%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>更改密码</h2>\n<p>必须使用 Password() 函数</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44898198166841080000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`SET PASSWROD FOR myuser = Password(\'newpassword\');`, `44898198166841080000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                data-tooltip="复制"\n              >\n                <svg class="gatsby-code-button-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z"/></svg>\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="sql"><pre style="counter-reset: linenumber NaN" class="language-sql line-numbers"><code class="language-sql"><span class="token keyword">SET</span> PASSWROD <span class="token keyword">FOR</span> myuser <span class="token operator">=</span> Password<span class="token punctuation">(</span><span class="token string">\'newpassword\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<h1 id="参考资料"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>参考资料</h1>\n<ul>\n<li>BenForta. SQL 必知必会 [M]. 人民邮电出版社, 2013.</li>\n</ul>',
id:"/github/workspace/blog/SQL语句必知必会/index.md absPath of file >>> MarkdownRemark",timeToRead:13,frontmatter:{date:"2018-04-03 15:23:56",path:"/sql-must-know/",tags:"后端, 面试, 数据库, SQL",title:"SQL语句必知必会",draft:null}}],length:2,tag:"SQL",pagesSum:1,page:1}}}});