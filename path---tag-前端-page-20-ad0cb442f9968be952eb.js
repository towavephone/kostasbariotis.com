webpackJsonp([0xaa4ec971256a],{1349:function(n,a){n.exports={data:{site:{siteMetadata:{title:"女王控的博客",description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"通用篇 复制与保存 copy 方法 可以通过全局的方法   在   里   任何你能拿到的资源 存储为一个全局变量 如果你在   中打印了一堆数据 (例如你在 App 中计算出来的一个数组)，然后你想对这些数据做一些额外的操作比如我们刚刚说的   (在不影响它原来值的情况下)。那就可以将它转换成一个全局变量，只需要右击它，并选择 “Store as global variable” (保存为全局变量) 选项。 第一次使用的话，它会创建一个名为 temp1 的变量，第二次创建 temp…",html:'<h1 id="通用篇"><a href="#%E9%80%9A%E7%94%A8%E7%AF%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>通用篇</h1>\n<h2 id="复制与保存"><a href="#%E5%A4%8D%E5%88%B6%E4%B8%8E%E4%BF%9D%E5%AD%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>复制与保存</h2>\n<h3 id="copy-方法"><a href="#copy-%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>copy 方法</h3>\n<p>可以通过全局的方法 <code class="language-text">copy()</code> 在 <code class="language-text">console</code> 里 <code class="language-text">copy</code> 任何你能拿到的资源</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-11-19-27-08-8e880f931f6827a17d5d384a3abd6050-19a4b.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 435px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 46.4367816091954%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAg0lEQVQoz52PSQ7EIAwE+f83WQSITcCwJExIR/kApGRZvpTdJpRSxpgQAl0plXOOMaY1iDFGSgmTc+6cK6XA35BxEL7WGgM6Viz6j4ybjNE3/57svbfWaG2stSGE1hqS/9YgrTbUOP/z4XqZa5BSj5RqCL73PjchxzkQFX9+kccY8ys3N0IH4Tl4+p0AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 11 19 27 08"\n        title=""\n        src="/static/2019-03-11-19-27-08-8e880f931f6827a17d5d384a3abd6050-19a4b.png"\n        srcset="/static/2019-03-11-19-27-08-8e880f931f6827a17d5d384a3abd6050-5fb9b.png 200w,\n/static/2019-03-11-19-27-08-8e880f931f6827a17d5d384a3abd6050-56ca1.png 400w,\n/static/2019-03-11-19-27-08-8e880f931f6827a17d5d384a3abd6050-19a4b.png 435w"\n        sizes="(max-width: 435px) 100vw, 435px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="存储为一个全局变量"><a href="#%E5%AD%98%E5%82%A8%E4%B8%BA%E4%B8%80%E4%B8%AA%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>存储为一个全局变量</h3>\n<p>如果你在 <code class="language-text">console</code> 中打印了一堆数据 (例如你在 App 中计算出来的一个数组)，然后你想对这些数据做一些额外的操作比如我们刚刚说的 <code class="language-text">copy</code> (在不影响它原来值的情况下)。那就可以将它转换成一个全局变量，只需要右击它，并选择 “Store as global variable” (保存为全局变量) 选项。</p>\n<p>第一次使用的话，它会创建一个名为 temp1 的变量，第二次创建 temp2，第三次 … 。通过使用这些变量来操作对应的数据，不用再担心影响到他们原来的值</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-11-19-29-25-c3a7ece201f532e0f1780637d49090f5-344e0.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 307px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 57.32899022801303%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA80lEQVQoz6WR3WqEMBCF8/4P1UK7smwvyuq1sGapFuKqMRNjNH8dY9mLrQVLP8gwkzA5wxnSdV3bthg55xibphFCwD4IY6wsS3pFlpDnOfbjg9gB0VqDhHEA6CfnrHPO7IbgAdBm0sb48EeW5kEalPTeeRdcxPslsXbNf2VpllJOSrQN3OqJsRt6J/qZ8/6z6gQIVFi/2FD2zvYIOhw9kHJQSq1mDpE1wSdr7WPzOHs16rqui8slObxmWfp+PifHQ3JM0ix9O52eXp4LWlBKUeI+xffYesY64HpwYR+Ra+ReIlVV4Q3u5VE5/AOyZUTYtOcnXzlDeiJ7zAfsAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 11 19 29 25"\n        title=""\n        src="/static/2019-03-11-19-29-25-c3a7ece201f532e0f1780637d49090f5-344e0.png"\n        srcset="/static/2019-03-11-19-29-25-c3a7ece201f532e0f1780637d49090f5-73b08.png 200w,\n/static/2019-03-11-19-29-25-c3a7ece201f532e0f1780637d49090f5-344e0.png 307w"\n        sizes="(max-width: 307px) 100vw, 307px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="保存堆栈信息"><a href="#%E4%BF%9D%E5%AD%98%E5%A0%86%E6%A0%88%E4%BF%A1%E6%81%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>保存堆栈信息</h3>\n<p>大多数情况下都不是一个人开发一个项目，而是一个团队协作，那么如何准确的描述问题，就成为了沟通的关键，这时候 <code class="language-text">console</code> 打印出来的堆栈跟踪的信息对你和同事来说就起大作用了，可以省去很多沟通成本，所以你可以直接把堆栈跟踪的信息保存为一个文件，而不只是截图发给对方</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-11-19-30-29-b9833393dedc0fd60d9c4e1682faead9-cf56a.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 353px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 58.35694050991502%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABTElEQVQoz41S2W7DIBDk/z8uVSq1D3lIlZrLGIyxOW0wXedom6iqMl5WsNrRwHgRIaRpGozx8XiUUoYQpqeBdC+b5nPQWghBz0gpLc8BvR64c0taUozJg26M67rW54DwoVmkrs7VlGqM1+x9DaH6sGWIGLK1K/TcB8qCZ2d1yxjGnWgFY5xQKQTseyV7IWDfUrqkeWrbImXV+jtQMSaXErztVa+NUUpRxobBaLDBDEpCVbec57VKSjOQjanDcAlUtM45e+vGcYQnQ7aTfXzc2QVJSO66jfZbuayrVopgorRmjHLG5nnOS4b6FaVsZFDu+zpNdRwvgUrZem7kAciUUIrx6ePkQ7wJn5WlhDveuQ1n65yzW/Leuw0+wOe3FW6IMcIglPMVfsjwr6H6/va2273s93tQ7bpO/AUYxIcRQHAGhznn7b+ABmh78PEL8LmtcHoVJXsAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 11 19 30 29"\n        title=""\n        src="/static/2019-03-11-19-30-29-b9833393dedc0fd60d9c4e1682faead9-cf56a.png"\n        srcset="/static/2019-03-11-19-30-29-b9833393dedc0fd60d9c4e1682faead9-da624.png 200w,\n/static/2019-03-11-19-30-29-b9833393dedc0fd60d9c4e1682faead9-cf56a.png 353w"\n        sizes="(max-width: 353px) 100vw, 353px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="直接-copy-html"><a href="#%E7%9B%B4%E6%8E%A5-copy-html" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>直接 Copy HTML</h3>\n<p>几乎所有人都知道，右击或者点击在 <code class="language-text">HTML</code> 元素边上的省略号 (…) 就可以将它 <code class="language-text">copy</code> 到剪贴板中，但是你不知道的是：古老的 <code class="language-text">[ctrl] + [c]</code> 大法依旧可用！</p>\n<h2 id="快捷键"><a href="#%E5%BF%AB%E6%8D%B7%E9%94%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>快捷键</h2>\n<h3 id="切换-devtools-窗口的展示布局"><a href="#%E5%88%87%E6%8D%A2-devtools-%E7%AA%97%E5%8F%A3%E7%9A%84%E5%B1%95%E7%A4%BA%E5%B8%83%E5%B1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>切换 DevTools 窗口的展示布局</h3>\n<p>快捷键 <code class="language-text">ctrl + shift + D (⌘ + shift + D Mac)</code> 来实现位置的切换（通常是从 <code class="language-text">开始的位置</code> 到 <code class="language-text">右边位置</code>， 但是如果一开始就是 <code class="language-text">右边的位置</code> 那么会切换到 <code class="language-text">左边的位置</code>）</p>\n<h3 id="切换-devtools-的面板"><a href="#%E5%88%87%E6%8D%A2-devtools-%E7%9A%84%E9%9D%A2%E6%9D%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>切换 DevTools 的面板</h3>\n<ul>\n<li>按下 <code class="language-text">ctrl + [ 和 ctrl + ]</code> 可以从当前面板的分别向左和向右切换面板</li>\n<li>按下 <code class="language-text">ctrl + 1</code> 到 <code class="language-text">ctrl + 9</code>可以直接转到编号 1…9 的面板(<code class="language-text">ctrl + 1</code>转到元素面板，<code class="language-text">ctrl + 4</code> 转到 网络信息面板等等)</li>\n</ul>\n<h3 id="递增递减"><a href="#%E9%80%92%E5%A2%9E%E9%80%92%E5%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>递增/递减</h3>\n<p>通过使用 <code class="language-text">带有</code> 或者 <code class="language-text">不带有修饰键</code> 的 <code class="language-text">上 / 下</code> 箭头按键， 你可以实现递增和递减 <code class="language-text">0.1</code> ， <code class="language-text">1</code> 或者 <code class="language-text">10</code> 这样数值类型的值</p>\n<p><code class="language-text">ctrl + 上 / 下</code>递增和递减 100，<code class="language-text">shift + 上 / 下</code>递增和递减 10</p>\n<h3 id="elements，-logs，-sources--network-中的查找"><a href="#elements%EF%BC%8C-logs%EF%BC%8C-sources--network-%E4%B8%AD%E7%9A%84%E6%9F%A5%E6%89%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>elements， logs， sources &#x26; network 中的查找</h3>\n<p>DevTools 中的前 4 个主要的面板，每一个都支持 <code class="language-text">[ctrl] + [f]</code> 快捷方式，你可以使用对应的查询方式来查找信息:</p>\n<ul>\n<li>在 <code class="language-text">Elements</code> 面板中 - 通过 <code class="language-text">string</code>，<code class="language-text">选择器</code> 或者 <code class="language-text">XPath</code> 来查找</li>\n<li>而在 <code class="language-text">Console</code>， <code class="language-text">Network</code> 以及 <code class="language-text">Source</code> 面板 - 通过区分大小写，或者可以被视为表达式的 <code class="language-text">strings</code> 来查找</li>\n</ul>\n<h2 id="使用-command"><a href="#%E4%BD%BF%E7%94%A8-command" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用 Command</h2>\n<p>快捷键 <code class="language-text">Ctrl + Shift + P</code></p>\n<h3 id="截屏"><a href="#%E6%88%AA%E5%B1%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>截屏</h3>\n<p>节点截图与全屏截图</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-11-19-39-13-e666bf3de570c64568b71f4938464a2e-50124.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 545px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 68.62385321100916%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB4klEQVQoz5WTW2/TMBTH/Sl55gvwCXhGSAiBEJcnNAkk9sD1ZRITgq6b1G6lF+jY2mZp1aaZl7hNmtix40ucFDfjAa2tBD/9ZR1ZPj7nWH+DhJAFQoJz8Z8wxkAq5SRaSK20VkJIg/o3siwDPW9+p+lWzqA7dqeOAy8hjuM4inAUm2CjCMZhEEAIAUTh2/e1lzvV9i9PahnEOOEpZkxkWbHcCuN8OBoB1a3jp7fEq9tp41vQaM/rx3GrFX1vRc0mbney3kD3rRsqLDtpdaBtA7Rff32/d7I3pCHCHsI+wgjFvq8TWrB0gyhbmmcZO6TXB/PDzu5z2D70WSESqRIpiRQ8z7d2XKym0UHILmww+3K0+3C/9rGKbSu27Ghgiam79FHh+Ub5lXdT8KpAM3Xep/YQhO7ow+cnlaM38Xl/9rObWBdq4sjxxMgE+dTdKOVMGSEAM7rX+NodDZhQIcGE80TwNMuYUkzKbb3rvGAsBXOGHp0+qHsHuVAI+YzS9QlX698yyeZ2SsEML55V3n06PvE9U9f4I85Krj10HeRr76e1XtnTQ/Txi/7dez+qNVcKaiwUhmEURbTEnCCEmPyy/B9MbHbMPqBUnA380x66hCZnYTDJGGNZIkq7r/+KNE05578BEjALcdOiM40AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 11 19 39 13"\n        title=""\n        src="/static/2019-03-11-19-39-13-e666bf3de570c64568b71f4938464a2e-50124.png"\n        srcset="/static/2019-03-11-19-39-13-e666bf3de570c64568b71f4938464a2e-805e3.png 200w,\n/static/2019-03-11-19-39-13-e666bf3de570c64568b71f4938464a2e-95560.png 400w,\n/static/2019-03-11-19-39-13-e666bf3de570c64568b71f4938464a2e-50124.png 545w"\n        sizes="(max-width: 545px) 100vw, 545px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<blockquote>\n<p>注：节点截图有时会失效，全屏截图暂时没有遇到问题，建议大家使用后者。</p>\n</blockquote>\n<h3 id="快速切换面板"><a href="#%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2%E9%9D%A2%E6%9D%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>快速切换面板</h3>\n<p>输入 layout ，你会看到 2 到 3 个选项</p>\n<ul>\n<li>使用横向面板布局</li>\n<li>使用纵向面板布局</li>\n<li>使用自动面板布局</li>\n</ul>\n<h3 id="快速切换主题"><a href="#%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>快速切换主题</h3>\n<p>输入 theme 切换主题</p>\n<h2 id="代码块的使用"><a href="#%E4%BB%A3%E7%A0%81%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>代码块的使用</h2>\n<h3 id="snippets"><a href="#snippets" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Snippets</h3>\n<p>它允许你存放 JavaScript 代码到 DevTools 中，方便你复用这些 JavaScript 代码块，进入到 Sources 面板，在导航栏里选中 Snippets 这栏，点击 New snippet(新建一个代码块) ，然后输入你的代码之后保存，大功告成！现在你可以通过右击菜单或者快捷键： <code class="language-text">[ctrl] + [enter]</code> 来运行它了：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-11-19-51-46-af21e51297f4f6351582136a2b1dc5cd-55e1c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 689px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 57.61973875181423%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABKElEQVQoz42SjY6CMBCE+/5PiEpUhNIt/adFPELlBswl3iVn+NJu2rDbnczCjFaibdVKp7Q+1uLSSilJa40rEVnnSHaIglaMMUQSX5HESk5lQ96HlGIfozL23HYXTsm6ZE10rlcaKyiVQnh8PcY3WHEqL9VNCLRvOeex76c5G23oxrXQxDvFlYYWLmNIwzDlnJcfGGR45xCttYj3+31Znsu2/yzsnJ/LG2wYhvQGiqdpmuc5zyv5I8xo7b3vN2KMOHcb8AYehv9BPitqqX1Ae5Ti/ip4SfgA2jjnWHE4FEXRNM3LfTiH5nuK4RE7HU9lWcJnuF3XNd5DZdxUfAAJSGOiOreCYPQ2rBUo7/fBrtcKUq111mJkFu+Nu2HVrcbfkYbx+WuEu/gGdHKo2XnouCIAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 11 19 51 46"\n        title=""\n        src="/static/2019-03-11-19-51-46-af21e51297f4f6351582136a2b1dc5cd-55e1c.png"\n        srcset="/static/2019-03-11-19-51-46-af21e51297f4f6351582136a2b1dc5cd-f8f03.png 200w,\n/static/2019-03-11-19-51-46-af21e51297f4f6351582136a2b1dc5cd-d8034.png 400w,\n/static/2019-03-11-19-51-46-af21e51297f4f6351582136a2b1dc5cd-55e1c.png 689w"\n        sizes="(max-width: 689px) 100vw, 689px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="运行其他来源的代码块"><a href="#%E8%BF%90%E8%A1%8C%E5%85%B6%E4%BB%96%E6%9D%A5%E6%BA%90%E7%9A%84%E4%BB%A3%E7%A0%81%E5%9D%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行其他来源的代码块</h3>\n<p>预设了 Snippets 之后，使用 Command Menu 才是最快的方式，只需在它的输入框中输入 ! ，就可以根据名字来筛选预设代码块：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-11-19-53-43-e1352410e15ad584a6f4eb98cab7e8d4-4de50.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 22.25042301184433%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAgUlEQVQI13WP2QoCMQxF+//f6Is4Y8cuabO0KaJopoIgg4fzkAtZiPPbbcu19952RIS/WjSZuR2wfiJy4eKDjzkCpASFC/aCDaa5NKJWoSAiHai1OgFkmwEVkgC6pnFNY42mLlEZ9Xl/vP7gTucFK7KQrVftOhkfh9o3dkR+4YkVb2Bv5CEZnLp3AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 11 19 53 43"\n        title=""\n        src="/static/2019-03-11-19-53-43-e1352410e15ad584a6f4eb98cab7e8d4-fee1c.png"\n        srcset="/static/2019-03-11-19-53-43-e1352410e15ad584a6f4eb98cab7e8d4-a67b7.png 200w,\n/static/2019-03-11-19-53-43-e1352410e15ad584a6f4eb98cab7e8d4-0b187.png 400w,\n/static/2019-03-11-19-53-43-e1352410e15ad584a6f4eb98cab7e8d4-fee1c.png 800w,\n/static/2019-03-11-19-53-43-e1352410e15ad584a6f4eb98cab7e8d4-4de50.png 1182w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<blockquote>\n<p>查找预设代码块 有时候会出现失效的情况</p>\n</blockquote>\n<p>以上更新于<code class="language-text">2019-3-11 20:02:21</code></p>\n<hr>\n<h1 id="控制台篇"><a href="#%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%AF%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>控制台篇</h1>\n<h2 id="console-中的-"><a href="#console-%E4%B8%AD%E7%9A%84-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>console 中的 &#x26;</h2>\n<h3 id="0"><a href="#0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>&#x26;0</h3>\n<p>在 Chrome 的 Elements 面板中， $0 是对我们当前选中的 html 节点的引用。</p>\n<p>理所当然，<code class="language-text">$1</code> 是对上一次我们选择的节点的引用，$2 是对在那之前选择的节点的引用等等，一直到 <code class="language-text">$4</code></p>\n<p>你可以尝试一些相关操作(例如: <code class="language-text">$1.appendChild($0)</code>)</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-15-00-13-31-1b0fbf80cc1d8fd71c748f4e2d267e11-7a146.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 59.51492537313432%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABqElEQVQoz51S207jMBD1//8UiwDRFZS2oSDxgIDU2yTO3Y7jXHt2xtDd7ltZS0czHnuOz8xY3F1fYLFZ4n61xTrY4vHxCQHZ1TrA1c1Pj8vrBX5c3eLi8ga3izssVxtsgifcP2zIDyjvGQ+E5XoLkakcZVYhlAoqq9G2LWxjYa1F5xwc7dn2naN4g77v0DQGztE922C/jyDlHrqqPESR5pAvEp1tKamjhB7DMHiwf4pj7GjHcYTKK7y+S8RRDJUoiLwo8Pb8huRXgizLCRnKskRB8XPAdxtSakg9VydsaWHSGrzmacZ3V0VlliSi+hIhVJRiF0ZQcYY0TaGN8f3zvSTb0Mun4PjxjKG1RhHHyJVCwiW/f4R4ef1AFCsYIuMXi5z6upO+/FMS9qWUCMMQigi8OlJWVbXP3RGX0LX+nCQNpG1pqjTR1k/XYegHzIcZ8/wXPAgeCttpmjzYH6fPuOAvokvtS+XG8ms17fuuxzROvk+Hw8HjnCVYSZpQ/6i8oii9wsH1fwiOZOdCOEquc1JFpRvz1XjT+lK+S+YJp/nfr3J6+D8KfwN1TplE0OKLPwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 15 00 13 31"\n        title=""\n        src="/static/2019-03-15-00-13-31-1b0fbf80cc1d8fd71c748f4e2d267e11-fee1c.png"\n        srcset="/static/2019-03-15-00-13-31-1b0fbf80cc1d8fd71c748f4e2d267e11-a67b7.png 200w,\n/static/2019-03-15-00-13-31-1b0fbf80cc1d8fd71c748f4e2d267e11-0b187.png 400w,\n/static/2019-03-15-00-13-31-1b0fbf80cc1d8fd71c748f4e2d267e11-fee1c.png 800w,\n/static/2019-03-15-00-13-31-1b0fbf80cc1d8fd71c748f4e2d267e11-7a146.png 1072w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="-和-"><a href="#-%E5%92%8C-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>&#x26; 和 &#x26;&#x26;</h3>\n<p>如果你没有在 App 中定义过 <code class="language-text">$</code> 变量 (例如 jQuery )的话，它在 console 中就是对这一大串函数 document.querySelector 的别名。</p>\n<p>如果是 <code class="language-text">$$</code> 就更加厉害了，还能节省更多的时间，因为它不仅执行 <code class="language-text">document.QuerySelectorAll</code> 并且它返回的是：一个节点的 数组 ，而不是一个 Node list</p>\n<p>本质上来说 <code class="language-text">Array.from(document.querySelectorAll(&#39;div&#39;)) === $$(&#39;div&#39;)</code> ，但是<code class="language-text">document.querySelectorAll(&#39;div&#39;)</code> 和 <code class="language-text">$$(&#39;div&#39;)</code> 哪一种方式更加优雅呢？</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-15-00-17-13-0333811218e9c283eec32403420252b0-042f3.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 43.13725490196078%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABFElEQVQoz6WR6XKDMAyE/f6vmITbgM0RDrcJ2LCRlKbNtNMfTZnRWNoR2s+yGsYZ27ZhXVcJzkMIki/LQrFK/ehhzfsAT5r3HleqQ9iw7zv4U7U9wxgDXVYoqxrz7ND1vdRZXiBJMwzDCOfekBcapyhB03YwtpFg7TwMYspDlS5rcRZHJiNXpmH3L6Jv2nqnDh+UrH0S6qpDnmUoiEbrktxbjNOEqjYoqD5FMWpjhdDQGcUJ0ixH2/VCyLfi3svlch9Y6AoTXW86HvDuHNiH3R6OeKqf9d96VE9O9mjRFg0N23/8/NdQDWG7JMaUxrIbcfvHYOXoVdvIookt5mGGPVh0effyUHWlZfIq+BX3bZdT8hcJb7wwvIYVdGgDAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 15 00 17 13"\n        title=""\n        src="/static/2019-03-15-00-17-13-0333811218e9c283eec32403420252b0-fee1c.png"\n        srcset="/static/2019-03-15-00-17-13-0333811218e9c283eec32403420252b0-a67b7.png 200w,\n/static/2019-03-15-00-17-13-0333811218e9c283eec32403420252b0-0b187.png 400w,\n/static/2019-03-15-00-17-13-0333811218e9c283eec32403420252b0-fee1c.png 800w,\n/static/2019-03-15-00-17-13-0333811218e9c283eec32403420252b0-042f3.png 816w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="_"><a href="#_" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>&#x26;_</h3>\n<p>调试的过程中，你经常会通过打印查看一些变量的值，但如果你想看一下上次执行的结果呢？再输一遍表达式吗？</p>\n<p>这时候 <code class="language-text">$_</code> 就派上了用场，<code class="language-text">$_</code> 是对上次执行的结果的 引用 ：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-15-00-18-52-55283baca13696e6febe9954650d4cf0-2cb88.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 43.77880184331797%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABXElEQVQoz41R2W6DMBDk/z8uUls1BwnhCAEMGHODAXu6dtqqTxWWRruLx+Px4KRpiiiKEIYhTN91He73OzzPg+u6KIoCbdPg6l5wOZ9wv13RtQ2SJLHcH7Rti6qq4JgDjDE8Hg/keY6GDpdlaXuDSgjEZYNLXOAcMRzDDElZ2z1Be4ZvxH4FjQvj0DjyfZ+IBYIgwDAMlmQOcEGoW4i2R5wyFLzC4XCwfMMxL6vrGnEcwxmGEZxzZCwj6w1EXYHljAgVlkVi2xZb5TxbLPLVj+OIaZogaZ5pNjCzo7WinGrK7UlOOdWUsouoZuj7lYQlCSrsXY5xwPmELJlwPpGw14GlM7xbh+TZ0zdhRc1SSkErbaG+of/AzCS4UQ41PU3+e7PWehfoyStyNiDwW7y/cZyOAiH1x0+BKOzw+VHR35S7RZ1hWjHLjcLeKFTq5w3rqij4V52njdyr3Q6/ABqoslrc4la+AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 15 00 18 52"\n        title=""\n        src="/static/2019-03-15-00-18-52-55283baca13696e6febe9954650d4cf0-fee1c.png"\n        srcset="/static/2019-03-15-00-18-52-55283baca13696e6febe9954650d4cf0-a67b7.png 200w,\n/static/2019-03-15-00-18-52-55283baca13696e6febe9954650d4cf0-0b187.png 400w,\n/static/2019-03-15-00-18-52-55283baca13696e6febe9954650d4cf0-fee1c.png 800w,\n/static/2019-03-15-00-18-52-55283baca13696e6febe9954650d4cf0-2cb88.png 868w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="i"><a href="#i" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>&#x26;i</h3>\n<p>现在的前端开发过程，离不开各种 <code class="language-text">npm</code> 插件，但你可能没有想过，有一天我们竟然可以在 Dev Tools 里面来使用 <code class="language-text">npm</code> 插件！</p>\n<p>有时你只是想玩玩新出的 npm 包，现在不用再大费周章去建一个项目测试了，只需要在 Chrome 插件: <a href="https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie/related" target="_blank" rel="nofollow noreferrer noopener">Console Importer</a> 的帮助之下，快速的在 console 中引入和测试一些 npm 库。</p>\n<p>运行 <code class="language-text">$i(&#39;lodash&#39;)</code> 或者 <code class="language-text">$i(&#39;moment&#39;)</code> 几秒钟后，你就可以获取到 <code class="language-text">lodash / momentjs</code> 了:</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-15-00-54-24-64b9a98e4aff4a3bb891a0f888a9bcf9-7ad22.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 57.32838589981447%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAB20lEQVQoz3VTCXKcMBDk/99LpezYeyMWMCB0ARJXu6X1pipOoqJrNNJorh4yURS4C4Gu+4DWGk2vULUd7vcCxvTwfsKyzAghYBxHlGUJIXLat1B9D6UUrLVwzuByOSMzNqCsLUTl+SDwYsQwjJDKo25XuCHA8mzfAX50vmFZd2wb0pqXlYEt30wMuiCzukLBiO+HG5o6R1m8JVTlCeJ2RHU/QskcfmwQphaz77AE+dgTui9wu77gXrzDU8+0PON6/om31x8oxS+01ROvaMoXqO6EwQpYdYXTNxjKwQgih+kvdHhhIgfI9sxgH8zQeZxOAnkhYbh3LHcYHzKWb61jyUNqg6M05qHH8qYpEJ59DgnbtiObxgFdXTELgzUSMEWMWEnCHhuX1v61/67/ueJZ5shQS5YlWXVNA+8cZrK5BM+IW0I0/B+eNk+7TJsJddmgaxuW4hK7vfZQHCGtDXqOUQjzP50lluf59+gsC1l2w4yiGjg2E/vkeKnZJ5NkT0PHIOu6Jmzb+pXNQ49OJ7YozqaUXXKetZ3GkaQcjjkHVnDIc7JWM7P+L0gpUzZPPWZliOv1lu5ShnH6W5arGKGvSmgSFDFqRbZHTCzdR8lMvPesYkh/TRzm6OA7OZ95kEyl9O+yVQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 15 00 54 24"\n        title=""\n        src="/static/2019-03-15-00-54-24-64b9a98e4aff4a3bb891a0f888a9bcf9-fee1c.png"\n        srcset="/static/2019-03-15-00-54-24-64b9a98e4aff4a3bb891a0f888a9bcf9-a67b7.png 200w,\n/static/2019-03-15-00-54-24-64b9a98e4aff4a3bb891a0f888a9bcf9-0b187.png 400w,\n/static/2019-03-15-00-54-24-64b9a98e4aff4a3bb891a0f888a9bcf9-fee1c.png 800w,\n/static/2019-03-15-00-54-24-64b9a98e4aff4a3bb891a0f888a9bcf9-7ad22.png 1078w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="consolelog-的-bug-"><a href="#consolelog-%E7%9A%84-bug-" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>console.log 的 “bug” ?</h2>\n<p>一般来说，我们会使用 console.log() 来打印某个对象，并且，两次打印之间，还会对这个对象进行修改，最后我们查看打印的结果发现，修改前的打印和修改后的打印，竟然是一样的？这样出乎意料的情况，让我们难以继续 console.log 的调试。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-15-00-58-20-392ad308117424ccde411438628f3cc6-0f56a.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 59.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABlUlEQVQoz4VS13LDMAzT//9dHzuS1Em8h6xpeaKUnOGk6dVnHCVbBEhQ7OPzDXlVQbQCZVmt8Hsp8bmP8P71jcMxeYEU+2hd+7g7nAhHsGla0Pc9uBAoiCwrCmR5gZQQp2n41pBY1XCK7S3WTRNyGt6G/3lRIk8TsGVZ8N+TJAmiKEIcxzgdj0iyAh9U0SE6Yb/bIc8yNPEZyfkMtqbcSb3AKrL4jX+htQ5kWVFTNwOc6+EoamPQdR0EVZrsdyjzHEwLg1Z2kEJCKxWSPZSykH5tVBDS0tC3/mUHvoBxnkNZzBBR2xIB+dAZS4ouqPpoQ7QhwWgHpYdfnWwt82tmaKIN1zRVQRWJQOaHdIVzjg7O6IhQVAqd4FB1dSN6ngHrlCQPqB3ywRj9QHbFOE2oSbgqWhhlwJsas2/xQuZFOeew1tKUX/ixVZ3ndUBKaMgnD6/nPPkwDJhImGHjxZZsHMdQ3fUWWGpZbzx8Jr21vPxB6OO9LRqKtOClvHhYP5zbgv11DbbrYZww0L3rjSMPFXh99/AZP2Mfo7QhUMKVAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 15 00 58 20"\n        title=""\n        src="/static/2019-03-15-00-58-20-392ad308117424ccde411438628f3cc6-fee1c.png"\n        srcset="/static/2019-03-15-00-58-20-392ad308117424ccde411438628f3cc6-a67b7.png 200w,\n/static/2019-03-15-00-58-20-392ad308117424ccde411438628f3cc6-0b187.png 400w,\n/static/2019-03-15-00-58-20-392ad308117424ccde411438628f3cc6-fee1c.png 800w,\n/static/2019-03-15-00-58-20-392ad308117424ccde411438628f3cc6-0f56a.png 1050w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>打印的时候，两次都是我们修改之后的值？</p>\n<blockquote>\n<p>console 中打印出的对象，在你打印出他内容之前，是以引用的方式保存的。</p>\n</blockquote>\n<p><strong>解决方案</strong></p>\n<ul>\n<li>打印一个从这个对象复制出来的对象。</li>\n<li>使用资源面中的断点来调试</li>\n<li>使用 JSON.stringify() 方法处理打印的结果</li>\n</ul>\n<p>以上更新于<code class="language-text">2019-03-10 19:21:45</code></p>\n<hr>\n<h2 id="异步的-console"><a href="#%E5%BC%82%E6%AD%A5%E7%9A%84-console" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>异步的 console</h2>\n<blockquote>\n<p>console 默认就被 async 包裹</p>\n</blockquote>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-16-15-44-35-b3b44f6b0fc00a2dccf81c94550ff06a-e1644.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 24.068157614483496%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAfklEQVQY05WOywrCQAwA9/+/U5Fi991unpu6lbZ4UhyGITkE4rKPKcQWApcio97zPLOf38OTc9LWmAh2hIgQBFEARbS7cIvT5EtdtoHZ0Q+tX9jZ3YGL9yUHYpLN+vYnrj7K6jOlpOtqIoeqo8cjX44VGGuBWjuiAlyO1X7xAuFVJZbmep5CAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 16 15 44 35"\n        title=""\n        src="/static/2019-03-16-15-44-35-b3b44f6b0fc00a2dccf81c94550ff06a-fee1c.png"\n        srcset="/static/2019-03-16-15-44-35-b3b44f6b0fc00a2dccf81c94550ff06a-a67b7.png 200w,\n/static/2019-03-16-15-44-35-b3b44f6b0fc00a2dccf81c94550ff06a-0b187.png 400w,\n/static/2019-03-16-15-44-35-b3b44f6b0fc00a2dccf81c94550ff06a-fee1c.png 800w,\n/static/2019-03-16-15-44-35-b3b44f6b0fc00a2dccf81c94550ff06a-e1644.png 939w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="storage-系统的占用数和空闲数"><a href="#storage-%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8D%A0%E7%94%A8%E6%95%B0%E5%92%8C%E7%A9%BA%E9%97%B2%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Storage 系统的占用数和空闲数</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="99066040850594190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`await navigator.storage.estimate();`, `99066040850594190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">await</span> navigator<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token function">estimate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-16-15-46-14-50b45a03a960c98be4dc7d5157691d0b-19a4b.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 435px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 38.85057471264368%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAqklEQVQY06WQ0QqDMAxF+/8/6MMQHUztmtbWWmlaG7vAHodM8EDycOHcQETXd8NrmKbJWruuq/eet3NOKdU0DYda65QSEZUfRJJbXDYwMI4Tm/M8Syl5A4ACHSPWWo8ThNUWpPIuPNvYPeKzRWsDi5yAibgf9RxBhWy/+HcwUIwqM5SEXEo89R8ipbzK4GXIWMLmDXeUUq8hju8ZOminnDIi8m+uyvUGt+QPMyrUXiZAuw8AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 16 15 46 14"\n        title=""\n        src="/static/2019-03-16-15-46-14-50b45a03a960c98be4dc7d5157691d0b-19a4b.png"\n        srcset="/static/2019-03-16-15-46-14-50b45a03a960c98be4dc7d5157691d0b-5fb9b.png 200w,\n/static/2019-03-16-15-46-14-50b45a03a960c98be4dc7d5157691d0b-56ca1.png 400w,\n/static/2019-03-16-15-46-14-50b45a03a960c98be4dc7d5157691d0b-19a4b.png 435w"\n        sizes="(max-width: 435px) 100vw, 435px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="设备的-电池信息"><a href="#%E8%AE%BE%E5%A4%87%E7%9A%84-%E7%94%B5%E6%B1%A0%E4%BF%A1%E6%81%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设备的 电池信息</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="62816937594489960000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`console.table(await navigator.getBattery());`, `62816937594489960000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token keyword">await</span> navigator<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-16-15-49-02-7f50c3623c234373e84db6954118b9c2-5e78d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 23.712342079689016%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAcElEQVQY05XOWw6DIBQEUPa/yKZGQzUR8QL3CdUSN6CdnMzXfIwLIRAg7HuMGwCIiN7FTBGRiZ2fF9baydUkdovVtkgpq/ssa0axdqqd2p5KpRY63Os9DpMHZKkH2/eJvlxjyiRu8jOkorX9hVj7+R+ldCJ/kJVepwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 16 15 49 02"\n        title=""\n        src="/static/2019-03-16-15-49-02-7f50c3623c234373e84db6954118b9c2-fee1c.png"\n        srcset="/static/2019-03-16-15-49-02-7f50c3623c234373e84db6954118b9c2-a67b7.png 200w,\n/static/2019-03-16-15-49-02-7f50c3623c234373e84db6954118b9c2-0b187.png 400w,\n/static/2019-03-16-15-49-02-7f50c3623c234373e84db6954118b9c2-fee1c.png 800w,\n/static/2019-03-16-15-49-02-7f50c3623c234373e84db6954118b9c2-5e78d.png 1029w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="媒体能力"><a href="#%E5%AA%92%E4%BD%93%E8%83%BD%E5%8A%9B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>媒体能力</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-16-15-51-07-84fbd945f6f45c98b8c57f1381b299c5-a29fb.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 575px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 47.82608695652174%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaElEQVQoz2VR27KkIAz0//9vXodyFZWrQABBbht3pnar9mAXkE5Cd8Vp2zbGudY6hAAA3nvn3L4f67o6a5HpvdfWxhjneRJClmWhlBpjXq/XxBjzYPeNBmeDFN5ZIQTmlFJSSs55jDEpFTgDutrzLKXc911rzTlPqKz1afcDuNQM6+XBGIpjj0czPlwp5eu6vMcYz1rQR0M76GUy1jrwxlinXDLROVBSAe7nqTQ6ffIIPKXWWHbsjJD51OZp3rZdCBlC9B5lAgoE/9xjvKTSjHEPf0l0cwmhfs3rRg/0P73fOAMKEO5Sc7pTvnN+dsxJ5cgs4oXBne8HyGNZbf1J1zq9FyoMhNJj6bmN1MZVRywj9yFMIiu4XGNroX7hS0XA/WkmM90PMi874/hjwPmHxqnUBnAxAX/Eyn9ALzjwaV02um6CCw9eK+2sa6X12h+0PvD73H9gtDGllPDpz+i/q3+BXG//wp/4DQVlPHMSO3beAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 16 15 51 07"\n        title=""\n        src="/static/2019-03-16-15-51-07-84fbd945f6f45c98b8c57f1381b299c5-a29fb.png"\n        srcset="/static/2019-03-16-15-51-07-84fbd945f6f45c98b8c57f1381b299c5-d450c.png 200w,\n/static/2019-03-16-15-51-07-84fbd945f6f45c98b8c57f1381b299c5-dee51.png 400w,\n/static/2019-03-16-15-51-07-84fbd945f6f45c98b8c57f1381b299c5-a29fb.png 575w"\n        sizes="(max-width: 575px) 100vw, 575px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="cache-storage-keys"><a href="#cache-storage-keys" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cache storage keys</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-16-15-55-04-92b6baa63853536d83e939281b4a8aa6-87f29.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 602px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 34.55149501661129%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABEElEQVQY031Q2W7EIBDL//9cH1fatlG6AZIAA4Qbsgkdekh9KjIjY+xhxEBmQinVSo3jyChlQr3cXt9mtnE+ju9KKcbYNE1G63mekaBH/a4BpWVZOOdm32NK2nlwQVo/EwIASpta63ld53mWWh+E4FMYQTMaBg9WL4qv60rIRqkDOEI4YiwI7xE1per9gTXG5FwOoaTYxZSGHKKcHpYQfb/LDZLSBWSWULTOUmQFZTdpW4s2WcgkRNGqulCse8Y4tNaCchYnud0sYfZjij2jsjGdGF2QcF72PQOgjsfiA6ba1Xo4x+o27TbA8ZIxR61Xv/oPfZ9t6D8Rc7K55qf3QQiIPn43ble3/fA/yoX1q8cnPC2Ne8cBHh4AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 16 15 55 04"\n        title=""\n        src="/static/2019-03-16-15-55-04-92b6baa63853536d83e939281b4a8aa6-87f29.png"\n        srcset="/static/2019-03-16-15-55-04-92b6baa63853536d83e939281b4a8aa6-38577.png 200w,\n/static/2019-03-16-15-55-04-92b6baa63853536d83e939281b4a8aa6-26124.png 400w,\n/static/2019-03-16-15-55-04-92b6baa63853536d83e939281b4a8aa6-87f29.png 602w"\n        sizes="(max-width: 602px) 100vw, 602px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="对象--方法"><a href="#%E5%AF%B9%E8%B1%A1--%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>对象 &#x26; 方法</h2>\n<h3 id="queryobjects-（对象查询）方法"><a href="#queryobjects-%EF%BC%88%E5%AF%B9%E8%B1%A1%E6%9F%A5%E8%AF%A2%EF%BC%89%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>queryObjects （对象查询）方法</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-16-16-32-32-dfa89045e6bcc1ab69e2c52bac01f6ea-70a78.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 610px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 111.14754098360655%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACTUlEQVQ4y4VUB3LcMAy8/z8ymYzPqmxgA8AiBTx5Ejvx2RKGalxhF1jyRpkwYM4UkVPmjMTlOuq3cYsm2l/GbmlSOCvcNBQqrbTK38dNfqGAV0fKkQbcdZh2XAyHWBZN++ayT730xu3/uAk/RHaTBxVe97zoHCLG+5SULtyFRaX6KfINLIefwW9+s7g5ImJe17grSdifwN7AzCzTk4pJR+fZwChbMSYb07i3r8GC9N4fvfVWj1rP0g9uvZ69Hl8jBxgACLFxqSNqpTZEUv0jVV7+c/NOcy2SsUnOVnupvfbeDkl7xVGPs5ydRXw/63mUD3Ru4pCggljEAolaDJR1ZogFIkPywbvoCElCe5NCfF/8W7LJvwACzhpt5AgYJk/Oo7ZorfNuB5VTxoyLW8C5guUvuA5yh3TlbK2XNmgL8Yt868JT2D6l7VfwS3jVPBsGMXnIMkOmNmqdPrTqk4JxYdEcjUcHaJy3bvO7j8A0JGuvMdLTVtVa4e78ZNBq3PZgjDhtdWshNlEvbk1feJuYwh7QSG2BHCQAF40Nqoh58sicAz7NbK1NOQ2DyXN51IzH2MbYn+V8Aw9byinz6vFYCWLPflW1l+Mq3lPaUccoJjGWDATjbHQ2jGAksYeShRq8yP4cnFxGl0sMQ3MIiWLIPmYvbpfRJ3hsUXS1etC5bsrl7VZqFdPIziXXKnWqhVuRDtLjC48FM96zbAwS0kIhxcji05u0N84brpvT4b7iopa7vU9unuy8wPpz/6FA9qJNeSX9k1FM+mLuECBC/A3iGPuaqgKWtwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 16 16 32 32"\n        title=""\n        src="/static/2019-03-16-16-32-32-dfa89045e6bcc1ab69e2c52bac01f6ea-70a78.png"\n        srcset="/static/2019-03-16-16-32-32-dfa89045e6bcc1ab69e2c52bac01f6ea-1dff0.png 200w,\n/static/2019-03-16-16-32-32-dfa89045e6bcc1ab69e2c52bac01f6ea-8ee4c.png 400w,\n/static/2019-03-16-16-32-32-dfa89045e6bcc1ab69e2c52bac01f6ea-70a78.png 610w"\n        sizes="(max-width: 610px) 100vw, 610px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>DevTools 里的 queryObjects 函数可以展示这些信息</p>\n<blockquote>\n<p>请注意，列表中创建的最后一个对象是不可用的 : 在代码执行后，对于它的引用并没有留存下来，也就是说，我们只有 3 个 person 对象：</p>\n</blockquote>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-16-16-33-42-da92fb559105b70bb7699715d03dea71-b169a.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 670px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 62.98507462686567%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABW0lEQVQoz3VSa3OrIBT0///BfrkZiRWNgoIPkKd2A2lrmtydHedwdFmWY0ETCCG3nn/8KyvakrJs27ZJGIahqipCrnVdXy6Xvu/HcRRCMMbKsixo06ASUoKr3sb0Yppna+2+7yGEGCM0eaP1G8uywK8oCWGMK62VUscJUEKWn8d/UHRdxzk3xm7bZozZTzhv9LZTIEx7u62rWpZVKQ2vmNxC8o1Z8Sz7dUZ6rfWrScx1Pv/J+UmMy3POveb5+ehtkIeY0maaJtzWnIDae382eTU8HVtKzgfGec8YjmCdu6f9gxwkPohRISnaxfVaiVFgbrC9T1CtGOk4jCpNE0QhhehuHdaZFHdMafC+mNW2Wa+N08Yr45T17JNKNmwupKbD20nOQ93kJWj9rq3H73MXp3V8MByipgsbXDxSZ3fhUIuWNUWdafyOHZGuYH2PW0KWEENmShmeGN40kf4LMxjxM+6eAfQAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 16 16 33 42"\n        title=""\n        src="/static/2019-03-16-16-33-42-da92fb559105b70bb7699715d03dea71-b169a.png"\n        srcset="/static/2019-03-16-16-33-42-da92fb559105b70bb7699715d03dea71-1714e.png 200w,\n/static/2019-03-16-16-33-42-da92fb559105b70bb7699715d03dea71-5c3b9.png 400w,\n/static/2019-03-16-16-33-42-da92fb559105b70bb7699715d03dea71-b169a.png 670w"\n        sizes="(max-width: 670px) 100vw, 670px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="monitor-（镜像）方法"><a href="#monitor-%EF%BC%88%E9%95%9C%E5%83%8F%EF%BC%89%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>monitor （镜像）方法</h3>\n<p>monitor 是 DevTools 的一个方法， 它能够让你 “潜入” 到任何 _function calls(方法的调用) 中：每当一个被潜入的方法运行的时候，console 控制台会把它的实例打印出来，包含函数名以及调用它的参数</p>\n<p>我们把前面例子里面的 Person 类拿过来，并且给它扩展两个方法：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47065220301960720000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`class Person {\n  constructor(name, role) {\n    this.name = name;\n    this.role = role;\n  }\n\n  greet() {\n    return this.getMessage(\'greeting\');\n  }\n  getMessage(type) {\n    if (type === \'greeting\') {\n      return \\`Hello, I\'m \\${this.name}!\\`;\n    }\n  }\n}`, `47065220301960720000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> role</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>role <span class="token operator">=</span> role<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">\'greeting\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">\'greeting\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, I\'m </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如你所见，greet 方法通过一个特殊的参数来执行 getMessage 方法，让我们看看对 getMessage 方法进行追踪会产生什么结果：</p>\n<hr>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-18-15-42-13-a5cf6bed63b01e0184a3b174001c9521-01991.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 671px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 48.584202682563344%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZ0lEQVQoz11S23KFIBDz/7+wD61VvAAidxQRgS56TqfTzLqzLsaYjM08z8M4or7Hy/rx1aMJt21LCJmmCWPCGOu6vu8RGsb2+5stjHMhpKR0gXVDCJVcaGO0NtZYLtS6cudcjDGldF1XuiJb6EKwFMJvDurYNiVV16OGYsJnBuISIUuJP459391WyaXk80r8yCYWFooMhfssQ158DqkAGimk4Yqx1WK8S+k9kDcAaMJxTBnvpbNpdBlvGdlsTmBm2AMaMDTjCjKMgvNH+U3O8UqLL9NW4BWjK8wXuAU+HFVlDJ6lgjGVDCbLG/nu8HmDyyAL/VNnFWrpSi5VmYwTIxQ6ZGCMhdigIFHnNqWVtk6HF2e9rV7x5Otqra1k3KOVEMN58B5COgF3v+f4xPa3IP7jCLCvZEYIXxidZ6WU1rpexohHuQo7iOa3qpEQ4C+QUlZy0Dru+6H1dZ6Pk/ux/HL+Hv7h2f8AROc8Obg8meYAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 18 15 42 13"\n        title=""\n        src="/static/2019-03-18-15-42-13-a5cf6bed63b01e0184a3b174001c9521-01991.png"\n        srcset="/static/2019-03-18-15-42-13-a5cf6bed63b01e0184a3b174001c9521-0bc2c.png 200w,\n/static/2019-03-18-15-42-13-a5cf6bed63b01e0184a3b174001c9521-6bec7.png 400w,\n/static/2019-03-18-15-42-13-a5cf6bed63b01e0184a3b174001c9521-01991.png 671w"\n        sizes="(max-width: 671px) 100vw, 671px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>这样写会省很多 console.log</p>\n<h3 id="monitorevents-（镜像事件）方法"><a href="#monitorevents-%EF%BC%88%E9%95%9C%E5%83%8F%E4%BA%8B%E4%BB%B6%EF%BC%89%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>monitorEvents （镜像事件）方法</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-18-15-43-56-32661f9362b871a08b1c08bf9238777b-c248e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 663px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACHElEQVQoz1VS70/bMBDNXz8kWlLGBFL3aRL025C2/SeDtkiTBiJN4sSxff5tx0mbHa2EmPXknHN5uXfvnJ2dfZrNZjfH9fW4lsvll6urPM8Xi0W+uJzln8/nF/P5DHGBz/n55SK/vr6ZzfMsBBeDVxKMViF45yy+sXiQELzVPhS1ZKQmFdntWFHQ14KWlZDCaAaZdwaUFEpRLqQCrSGlME17H+OubjlnGqTmjNGOEN620DSipcCYACay2PvOOKpdDVY5h8w+hXGIlMGOcKMlAAcp2oZ0XeOdVtA5I5VkElgGotNK4EFL7pyyFsXbGFG+5gI6MEPqU4onBGei4UHzaITTItPW4rs+xb4Ph8MwTeNpd86UNSmqRmkVncX2cWFFAVxjNRAAIvtbEEprVIuc/T69o0++aSrOqbG69y55O+7TMPbDEBHO6b732WtFX57/CNEheRz7j2iRXZUgsG3GhQKp0E6t3vouy0ppkzGFozL4s5Pgd+VIrqvy5eWZ1B1t66ZBf6WzaIpHX+qqVlJlSkvvDQ4MdxRj39IKJaHyqtoVxWvb4KBa2iH3LeWcN1ZVWBnJm/XDdvP49LTZbtfr9e/N5mG7few6Mgw9GoQ9A94BJaRUxpjjIALueJ3wg4yQEnPYDI4UA2MkxlgZc8cW9tM0/N9ROsX7Q8pub7/9/PXj/v77anV3t7pdHYFB09TTdEAvxjEd/UsfZ3HCP4srwvii5bQYAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 18 15 43 56"\n        title=""\n        src="/static/2019-03-18-15-43-56-32661f9362b871a08b1c08bf9238777b-c248e.png"\n        srcset="/static/2019-03-18-15-43-56-32661f9362b871a08b1c08bf9238777b-3b104.png 200w,\n/static/2019-03-18-15-43-56-32661f9362b871a08b1c08bf9238777b-3a484.png 400w,\n/static/2019-03-18-15-43-56-32661f9362b871a08b1c08bf9238777b-c248e.png 663w"\n        sizes="(max-width: 663px) 100vw, 663px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="console-中骚操作"><a href="#console-%E4%B8%AD%E9%AA%9A%E6%93%8D%E4%BD%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>console 中骚操作</h2>\n<h3 id="consoleassert"><a href="#consoleassert" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>console.assert</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="50447527359756665000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`console.assert(assertion, obj1 [, obj2, ..., objN]);\nconsole.assert(assertion, msg [, subst1, ..., substN]); // c-like message formatting`, `50447527359756665000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">console<span class="token punctuation">.</span><span class="token function">assert</span><span class="token punctuation">(</span>assertion<span class="token punctuation">,</span> obj1 <span class="token punctuation">[</span><span class="token punctuation">,</span> obj2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> objN<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">assert</span><span class="token punctuation">(</span>assertion<span class="token punctuation">,</span> msg <span class="token punctuation">[</span><span class="token punctuation">,</span> subst1<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> substN<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c-like message formatting</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>\n<blockquote>\n<p>当我们传入的第一个参数为假时，console.assert 打印跟在这个参数后面的值。</p>\n</blockquote>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-14-42-14-e2ac5d57f1c7c01765a642c816569f15-ab313.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 677px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 22.008862629246675%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAb0lEQVQI142Ouw7DIAwA+f+/bIfGJoFAeNg12OnaSKnU0y23nWtERynCw9TOLy7xA9e37QAo3meAtq6C+PbIy0tSMuZbZ+8tJanVlQXS89ERRwwjxrnvM8YRghIZ33gySasBsOfshqqa6XXV/tv+ABMI6YsO0NsLAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 14 42 14"\n        title=""\n        src="/static/2019-03-19-14-42-14-e2ac5d57f1c7c01765a642c816569f15-ab313.png"\n        srcset="/static/2019-03-19-14-42-14-e2ac5d57f1c7c01765a642c816569f15-94813.png 200w,\n/static/2019-03-19-14-42-14-e2ac5d57f1c7c01765a642c816569f15-beb37.png 400w,\n/static/2019-03-19-14-42-14-e2ac5d57f1c7c01765a642c816569f15-ab313.png 677w"\n        sizes="(max-width: 677px) 100vw, 677px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>通过它，你可以摆脱令人讨厌的 if 表达式，还可以获得堆栈信息。</p>\n<h3 id="增强-log-的阅读体验"><a href="#%E5%A2%9E%E5%BC%BA-log-%E7%9A%84%E9%98%85%E8%AF%BB%E4%BD%93%E9%AA%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>增强 log 的阅读体验</h3>\n<p>有时即使你 console.log 一个简单的变量，你可能会忘记（或混淆）哪一个是那个。那当你有不同的变量需要打印的时候，阅读起来会更费劲。</p>\n<p>为了让它变得更加易读，你可以打印一个对象，加上 {}</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-14-46-09-882d4e1824c37cde4377afcde82f103d-aa023.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 392px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 51.78571428571428%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA50lEQVQoz42Q2W7EIAxF8/8/OonC7gUcMKnTUV8y006PkC0B18tdRteS2fk9hBIDpsjeQUwBoSJeh1AIGVHmOW8sx9FLhpRSjGkMVT116LjQ3q/0jMZ8YRGREMK+W+fgnEMERGTmq8wP9u8Z7+Leewg+xpITeu+3bVvXR4yxtcZEuVCpVmXqfMNiJa055UrQVYfIUWu1G+ss0mqTPs7fuMRMFc0gwpLJ7KmsFvVinn/yLWYWFogFcysF1od3zpv+kPFBPFWJCBJAACGbVJzbc85vHbrvbEsBQDGg3Bz+LGa5D/N8OP/BF4qDSpSBKJdPAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 14 46 09"\n        title=""\n        src="/static/2019-03-19-14-46-09-882d4e1824c37cde4377afcde82f103d-aa023.png"\n        srcset="/static/2019-03-19-14-46-09-882d4e1824c37cde4377afcde82f103d-b2451.png 200w,\n/static/2019-03-19-14-46-09-882d4e1824c37cde4377afcde82f103d-aa023.png 392w"\n        sizes="(max-width: 392px) 100vw, 392px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="consoletable"><a href="#consoletable" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>console.table</h3>\n<p>如果有一个数组(或者是类数组的对象，或者就是一个对象)需要打印，你可以使用 console.table 方法将它以一个漂亮的表格的形式打印出来。它不仅会根据数组中包含的对象的所有属性，去计算出表中的列名，而且这些列都是可以缩放甚至还可以排序!!!</p>\n<p>如果你觉得展示的列太多了，使用第二个参数，传入你想要展示的列的名字:</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-14-49-02-9d3028148319acd5aa4b30c3c2713da5-3086a.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 656px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 35.670731707317074%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABFUlEQVQY001Q267DIAzr/3/jtFWs9DJKuUO4lM6ddKRj+SExkZ0wvF7PZZ75NK3r+mDLg3H2vmtgl1IIMb2nmc8Yg8IYQ7sLYbSe53lYlnWa+LZ9DnlYY5VU2zjafa8xkZQ5xrN3KeVxqBhjyYUIWgwhwneglPAWfAjex+ATZOdghGlnjHcOo5my9/5QOqWUCZ6Sc456cN4rbRPlkEAKlK0LO18EmyzScg2RoMtl3ZcNGVgoYjISVhjurp7lvKj+2K6Qin4xPb7Vc7QfSaVDNHz1m0hYvF0g1Z5rG+C1CWUDpdKQc0el7LRxynhtvXU/sXmDoyjVK+UGRqqlNNxMWqmcMz6mnSd447r+eIu99+uH/h/n+QWs8I6DpSYTlAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 14 49 02"\n        title=""\n        src="/static/2019-03-19-14-49-02-9d3028148319acd5aa4b30c3c2713da5-3086a.png"\n        srcset="/static/2019-03-19-14-49-02-9d3028148319acd5aa4b30c3c2713da5-a142c.png 200w,\n/static/2019-03-19-14-49-02-9d3028148319acd5aa4b30c3c2713da5-201ef.png 400w,\n/static/2019-03-19-14-49-02-9d3028148319acd5aa4b30c3c2713da5-3086a.png 656w"\n        sizes="(max-width: 656px) 100vw, 656px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="table-和--的配合"><a href="#table-%E5%92%8C--%E7%9A%84%E9%85%8D%E5%90%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>table 和 {} 的配合</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-14-51-01-7e7a8f2440b47f65ae352853544aa000-c391c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 525px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABIElEQVQoz5VSa5ODIAz0///Ndrw5BUEgCa/gLb3Ht3Z6O0xcAxvDxuVz24yx24bn5pxrrdW59HoCVWXmWiv4Ej0JdxFJkZCFMBFx7s/EqG6txckpppOYKASERlR70zHG9R4WCsQnc8j7brFEig59oR6/mGL04J1v9XHT1sYb+KuynOEMIXjvEVNKOefXrfbeY4w/hn2sq3NHinFd1xDOGMJxHESEEzA/pYiK3jmURvI8z8Pa++1m9n1+2R6OWGISYzxLTsQxUi4VHERywQox4RXJOQjJtfVcCma2SNWqF2XlqkWvJD2yln5JHT42qRc4COUBgl0uA1tS+hSjSQy5PYD71OncJIhwvk+Kv6AgrdpzrqVM8m3tcr/fjTHj/4BhX7mGgsd6hVQ+AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 14 51 01"\n        title=""\n        src="/static/2019-03-19-14-51-01-7e7a8f2440b47f65ae352853544aa000-c391c.png"\n        srcset="/static/2019-03-19-14-51-01-7e7a8f2440b47f65ae352853544aa000-99d74.png 200w,\n/static/2019-03-19-14-51-01-7e7a8f2440b47f65ae352853544aa000-ef08a.png 400w,\n/static/2019-03-19-14-51-01-7e7a8f2440b47f65ae352853544aa000-c391c.png 525w"\n        sizes="(max-width: 525px) 100vw, 525px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="consoledir"><a href="#consoledir" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>console.dir</h3>\n<p>有时候你想要打印一个 DOM 节点。 console.log 会将这个交互式的元素渲染成像是从 Elements 中剪切出来的一样。如果说你想要查看这个节点所关联到的真实的 js 对象呢？并且想要查看他的属性等等？</p>\n<p>在那样的情况下，就可以使用 console.dir:</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-14-52-57-94221578239c617da9d6f1e5a77d7b30-9f4d2.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 619px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 73.34410339256866%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB0UlEQVQoz4VT2XLbMAz0//9cn9JO40lS24lJ8QAJ3pfsQtbElR88hSiJFLlc7BLalVpzit65qFXLeYxL74PaGvOYKa5PYtd6TzGjtk5xtHYSAV0AY4y1GiD5VEJ5Dm5daVBCaSkY44iRvhTKp1Z6dtq7jcst5nlp29jRBq20ZF00oqYkZbLWgaYLaMPgYnL5crnewTf8MlyYc85SKSGFsZhLGaNvE6OVy+Lba9U/b9h3tVWSZ9H5SGoxpULTY7Rxt+yx3cDfzNRFRJDqi4GLy9wglaPckSvTlvKfYTRotamj5nshDiq4QB5RPHP4AUw3HZXYS/574j+Z/FDnPbNgnUMDhpKyhvrOGEDrHeYVvmawgL3z08cEJyPfpJrgfGJ8ElJrpbVFbxiBojLgQ8QJI0aLVmsdQrkxp3x4ORK5Oio4MBR0XFAQawjVuUarrK1oM+Kie758e06ar1cySL6pr5czKYc/HN7P+lMFCdX5grZ5XwxU0M25VfSD5uAjcfJfXLxLKTRnk0FvwWtuyPf/GOZdIJ/gBKjwzBgjwZIKR4OQnvOes/c+xdi8y6C3B7Gk3WonzuOPE9tPKIV4fSUX2lLVnQTXUmNKVOpzKT2l7U/2FzTRYfy1IvSHAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 14 52 57"\n        title=""\n        src="/static/2019-03-19-14-52-57-94221578239c617da9d6f1e5a77d7b30-9f4d2.png"\n        srcset="/static/2019-03-19-14-52-57-94221578239c617da9d6f1e5a77d7b30-a6aa8.png 200w,\n/static/2019-03-19-14-52-57-94221578239c617da9d6f1e5a77d7b30-6c7b5.png 400w,\n/static/2019-03-19-14-52-57-94221578239c617da9d6f1e5a77d7b30-9f4d2.png 619w"\n        sizes="(max-width: 619px) 100vw, 619px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="给-logs-加上时间戳"><a href="#%E7%BB%99-logs-%E5%8A%A0%E4%B8%8A%E6%97%B6%E9%97%B4%E6%88%B3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>给 logs 加上时间戳</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-14-53-34-e82be77d4958e7fd841457bdb29b8e38-a54b5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 55.08474576271186%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABi0lEQVQoz3VSTUvDQBDdPyzevHsRLHgRvCm9VEXwIHgSRBG9tH5C2pqGJmm+dpMm3d0kbT3YRF8SGqPgO4TZ2Xnz5u2EOI6j6zrzC4xGo/F4LIQwDGM4HAZBwBhD0nXdKIpUVUUeASo552EYkrmUH2ny9Rv5GnXcDGqQZ5t2HTbhQgqOrrPZDMpxHKclkiRJ/wGuyLZibrzox++mbej9wUBRFE3T4EVKKUpgwjqoAIEiyTlpG3RvZF87fiK4HwSVT9u2Ue1Rj1GGLrAHn3+sZXlOdrVwU/EvHL6IpZASw4CG3pgc7cHEhKIBWKOUzufzLMvIpfl0qt09UjXlEhyIQBw60+kUdfhSxpbLJaoXJRCgDJmCfPR23uoedvpXimXxkoy7oGTCK45wkTfQ3Ahp93r79w+t25uz/itEIQVZy7IQYOZCH73W8DxvtVr9rCponThbB9FOJ9RM12eMUpCDko9nAxmj1ksG83MNxCSeRnTiLIRM4uKpoIanqvdUPVjlFj6xQtM08cPBC87fugJcprIRa5cAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 14 53 34"\n        title=""\n        src="/static/2019-03-19-14-53-34-e82be77d4958e7fd841457bdb29b8e38-a54b5.png"\n        srcset="/static/2019-03-19-14-53-34-e82be77d4958e7fd841457bdb29b8e38-33798.png 200w,\n/static/2019-03-19-14-53-34-e82be77d4958e7fd841457bdb29b8e38-27c47.png 400w,\n/static/2019-03-19-14-53-34-e82be77d4958e7fd841457bdb29b8e38-a54b5.png 590w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="监测执行时间"><a href="#%E7%9B%91%E6%B5%8B%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>监测执行时间</h3>\n<p>与其在所有事上展示一个时间戳，或许你对脚本中的特殊的节点之间执行的时间跨度更加感兴趣，对于这样的情况，我们可以采用一对有效的 console 方法</p>\n<ul>\n<li>console.time() — 开启一个计时器</li>\n<li>console.timeEnd() — 结束计时并且将结果在 console 中打印出来</li>\n</ul>\n<p>如果你想一次记录多件事，可以往这些函数中传入不同的标签值。(例如: console.time(‘loading’) ， console.timeEnd(‘loading’) )</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-14-56-43-5c80b1ad2c2b611eb8f5cb41222504a1-73362.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 609px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 55.993431855500816%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABqUlEQVQoz11R2XLrIBTz//9f7zRx6oVg8Ao2++4eJ+19qIaBGUASElWRMXPPdmmE9cJ5n0o5Ad77rusxHhBCx3H0fV/X9TwvmEwfn/cG4Y2xKjPnR7MwoaRzu/EmpHyxrbW32w04TdNM0zQMwzzP68a6kX+i6V9H+yeuoouJeav8sktrfDQB2EA2xoDnuq6EkG29oLUWQhitUvDemp3zKqZy5rPkknLKGZbyfrZSCo5hxhiP07QsC6Fj27aUjuvGpVRwp3Ixq5iCiVGHFHOxMelQXmTGmDYGYzIQyjhHCLdd//hq7vWjR88YY5VSUSoZGcLhg0lX4P/OO1daoye0NoAQOH+1Xf2AEjqQ2PfjIp+h5JCd81dcGPHKrF/OxlpKoa/5OASQ8UBu97ppO1CE76iyS2kwG+GIrnpTmuxOuYusNeccZvAFGmMc1icmPcJ38G07KSQ4Z2mclCaDf4biSiwlnaeQatuY1oaO0NfM+U4onZcFlEACCkwpVdCwsEEcRqxS23go52Px+RRKzct2pX938Iufz3ihgoLLa+O9l3/P4MGQ+c/tP/gGWppwYiAnBx4AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 14 56 43"\n        title=""\n        src="/static/2019-03-19-14-56-43-5c80b1ad2c2b611eb8f5cb41222504a1-73362.png"\n        srcset="/static/2019-03-19-14-56-43-5c80b1ad2c2b611eb8f5cb41222504a1-06e0b.png 200w,\n/static/2019-03-19-14-56-43-5c80b1ad2c2b611eb8f5cb41222504a1-70531.png 400w,\n/static/2019-03-19-14-56-43-5c80b1ad2c2b611eb8f5cb41222504a1-73362.png 609w"\n        sizes="(max-width: 609px) 100vw, 609px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="直接在回调中使用-consolelog"><a href="#%E7%9B%B4%E6%8E%A5%E5%9C%A8%E5%9B%9E%E8%B0%83%E4%B8%AD%E4%BD%BF%E7%94%A8-consolelog" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>直接在回调中使用 console.log</h3>\n<p>不仅减少了输入，还可能在回调中接收多个参数</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-14-58-18-c42b1996a07d26c5fbb0b2de2aaf2219-715c5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 658px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 38.60182370820669%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJElEQVQY001RiY7EIAj1//9xk53tbe20HoAH2sXdzGTwhYACPkAdx2GMEa213rZtN13mad73fZ7nEALnQj5ExISUAMh5cUXXwipAEPjgAYCZc0qVubVWubba7k8RT24+oPSkzbqv03qcZ6YcrwAeU64SmlNGwBRTpCiGQCr2Ei+oEjIT19R/4sgtVYBIqTQpXZgASQ6gt84LVUm+X8n3rZZpIYwxYAISnswvru3mwgKpIve1tq5LrZmbxPw9qXTF4ig5qpALZOvg3ajQ9tajDM250xz2ugpAuq5kLT2fGUlt86wXo7U3xu7LIliGYR0nwTZOelzM4fYDnieYEy12Im9Rw+MxDNPPuH19j8466VBGDwH+gSj7YSQmmQV1o6+g9rGL8QuUCM2D0iKMxAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 14 58 18"\n        title=""\n        src="/static/2019-03-19-14-58-18-c42b1996a07d26c5fbb0b2de2aaf2219-715c5.png"\n        srcset="/static/2019-03-19-14-58-18-c42b1996a07d26c5fbb0b2de2aaf2219-c456f.png 200w,\n/static/2019-03-19-14-58-18-c42b1996a07d26c5fbb0b2de2aaf2219-60786.png 400w,\n/static/2019-03-19-14-58-18-c42b1996a07d26c5fbb0b2de2aaf2219-715c5.png 658w"\n        sizes="(max-width: 658px) 100vw, 658px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3 id="使用实时表达式"><a href="#%E4%BD%BF%E7%94%A8%E5%AE%9E%E6%97%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用实时表达式</h3>\n<p>DevTools 在 Console 面板中引入了一个非常漂亮的附加功能，这是一个名为 Live expression 的工具</p>\n<p>只需按下 “眼睛” 符号，你就可以在那里定义任何 JavaScript 表达式。 它会不断更新，所以表达的结果将永远，存在 :-)</p>\n<p>同时支持定义好几个：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-15-01-21-b50001d93aab84a0b4568f2635b23720-de7e2.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 48.05936073059361%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfElEQVQoz5WOy0rDQBiF51F0IYhiG0xbW/URXAiCC9/AhY8hdOGi9Gp6y8KH8bKqoNCLmpmk12mbJjO5NL0Y/5ZCBTf143A4/DNn/kFn5xdCKBaKnoKEcDQgRoJiBHw/KIpHJ/tCaC8YEsLHQjh2IEZ2A4fbWzu3l1ep65vHooyk0kNGKqclOZOX0/elZG6lRKaQzJWz+VJWKkkFWSrK6Vw+kcqCUqlsPH738vSMxhPfnfl84jsz35r4zFuIe741XYRvf43rec7YgzCfz6ezueM6CFcr+PMDq+oXxppKQCrGhGCCFRWcEEVRMMYLI0TTNMMwTNME73a7qNOjg8GgOxypvUGn09H1EWMcAINr7XabUjocDvUVI3MJhCYdoWarpRuGbdsW5zCFmrUEJv1+nyy3QYAJ/8XiacYRVbV+s2lQuj5YAgEWwVpowtfgn/wPqF151atVXqsxTJhtM9NkG4Mot9nUY1CqN/5dZtW6VW9Yb+8OJu504jqOuzE/Dyz0ZTM6SFcAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 15 01 21"\n        title=""\n        src="/static/2019-03-19-15-01-21-b50001d93aab84a0b4568f2635b23720-fee1c.png"\n        srcset="/static/2019-03-19-15-01-21-b50001d93aab84a0b4568f2635b23720-a67b7.png 200w,\n/static/2019-03-19-15-01-21-b50001d93aab84a0b4568f2635b23720-0b187.png 400w,\n/static/2019-03-19-15-01-21-b50001d93aab84a0b4568f2635b23720-fee1c.png 800w,\n/static/2019-03-19-15-01-21-b50001d93aab84a0b4568f2635b23720-de7e2.png 876w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="network-篇"><a href="#network-%E7%AF%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Network 篇</h1>\n<h2 id="请求过滤"><a href="#%E8%AF%B7%E6%B1%82%E8%BF%87%E6%BB%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>请求过滤</h2>\n<p>Network 面板中的过滤器输入框接受字符串或正则表达式，对应显示匹配的请求。 但是你也可以使用它来过滤很多属性。</p>\n<p>只需输入 例如 method 或者 mime-type :</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-15-08-43-7e6076e1eaa9ae6fa70eb9a7a0498656-ac14c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 674px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 56.82492581602374%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB00lEQVQoz12S2Y6bQBBF+d58QqTkKR+Q30giJXnIpijvWewYywaMod17Q4PBmPYYLzO2c5mRR6Pch1Y1VNWpW+DpshSqV9M0jLGU0qIollWVEiKFaNuWUkYprVfNQuhxEFFpEBNCkOzlw4EIQyqkyXKSpCoIpJTVsuSMaa2FEFJJgyizE6L8ORsnQuJic/C8fOyjyOSZ0UoI3hlRLJemaoTOtFLAGmOU0qifRSFm4Ixyzm1R9MUfp+XbgX7/N3/zS3wNyu/8bmoP7f42rx36UcaSNCULyoUcjvz0PjBZprVJUuK9/qFefNLPP9uXX7JX3/SzD827UdO5VQVnV6HeH08sZrU2iudFUQZhZG3hacnTWWC1WCRxHE62NzfddoM9dV23vUoqhV673Q79six3bsO4QOyBPg1ncUqiOA3jRJkcC3HOnU6nu3sh6FNXzeVyaVuHRugLLF55/mi4oBS25glBzfF43O/3gHRPRBmvqvpwONR1jUbr9RrD4/RoEsPSbI4JqNtsHoGPeiA3zbonO8el2nYdVtjtdp4/HGCd2CHgNYw9sfogPCCEFmWJiaqqwsfCCuN50pP//P4JKnJur5z/dD6f8aes2xZk+FLKwBTIOP8BjvdRbKi+HD0AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 15 08 43"\n        title=""\n        src="/static/2019-03-19-15-08-43-7e6076e1eaa9ae6fa70eb9a7a0498656-ac14c.png"\n        srcset="/static/2019-03-19-15-08-43-7e6076e1eaa9ae6fa70eb9a7a0498656-2d27a.png 200w,\n/static/2019-03-19-15-08-43-7e6076e1eaa9ae6fa70eb9a7a0498656-cc70c.png 400w,\n/static/2019-03-19-15-08-43-7e6076e1eaa9ae6fa70eb9a7a0498656-ac14c.png 674w"\n        sizes="(max-width: 674px) 100vw, 674px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>如果想要显示所有可能的关键字，在空白的输入框按下 <code class="language-text">[ctrl] + [space]</code></p>\n<h2 id="自定义请求表"><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%B7%E6%B1%82%E8%A1%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自定义请求表</h2>\n<p>要自定义显示哪些列，右键单击请求表标题上的任意位置。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-15-11-42-adb3b6d2d3408f8de8ec23ec1c5c843b-7c992.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 52.30914231856739%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABL0lEQVQoz22Ri26EIBBF/f9PbOo2myAg+OA1guCjV90029obMhlwztwBq5rpWlhu8n0JWx7SfrCBDVF3/TiO67qJMX5ycxVUjdLt4Chv9zWV3dDsppKWnYistfu++1i4HkNaUVApLZw1Jc/3tZQ8UYgTrQsSGoYx55xilILPKaKg6rUahj6XQ/m3cBICLGlZFuecDwHOMUYhREoJBVWnJOZJp+4w0QtGNMZcMOf8BWuthJRd16H3v/A0TYC9c0gAIzYnjMNKqY4x1rYt/C/gR5chdM7v21aBPMaWkgKhUaUfTHKhtAaPn4EW45swDkwAI8e03vljfjxwKQfcMPZ8PkGGU/g2vwlbWKEUEbbruiL2fb9t2wHXjy/WNFprvIf3Hj5/YFTjOheMBJEoXJf6BsHrPL0ULKbRAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 15 11 42"\n        title=""\n        src="/static/2019-03-19-15-11-42-adb3b6d2d3408f8de8ec23ec1c5c843b-fee1c.png"\n        srcset="/static/2019-03-19-15-11-42-adb3b6d2d3408f8de8ec23ec1c5c843b-a67b7.png 200w,\n/static/2019-03-19-15-11-42-adb3b6d2d3408f8de8ec23ec1c5c843b-0b187.png 400w,\n/static/2019-03-19-15-11-42-adb3b6d2d3408f8de8ec23ec1c5c843b-fee1c.png 800w,\n/static/2019-03-19-15-11-42-adb3b6d2d3408f8de8ec23ec1c5c843b-7c992.png 1061w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="重新发送-xhr-的请求（已过时）"><a href="#%E9%87%8D%E6%96%B0%E5%8F%91%E9%80%81-xhr-%E7%9A%84%E8%AF%B7%E6%B1%82%EF%BC%88%E5%B7%B2%E8%BF%87%E6%97%B6%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>重新发送 XHR 的请求（已过时）</h2>\n<h2 id="xhrfetch-断点"><a href="#xhrfetch-%E6%96%AD%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>XHR/fetch 断点</h2>\n<p>在某一特定时刻，你想要对已发送的 “ajax” 请求进行捕获怎么做呢？ 可以使用 XHR/fetch breakpoint 。</p>\n<blockquote>\n<p>这些只能在 Source 面板中设置。（我也同样希望可以直接在 Network 面板中设置，但事实并非如此）</p>\n</blockquote>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-15-19-25-b48c3040562827b9da5f5e74adc8b848-5d858.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 81.65760869565217%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACU0lEQVQoz1VT2W7bMBDM//9WCqQvSZA+OD5SW9Zlivcl3lK6kuIiGRAEQe5wh7PLB2PHG6aMccYYpZQQIlYopYwxORehrTSj0EaPjitTpunzjgfGxaVuL9W1bVuMCed8GIa6rqWUWuuQwo12RGAiBqYoLPQolKXWqXmeH04fHy/Pz8fj4Vo3mJBxHCGhtRaY1oxw/TSVNDmXlPWKm0E7wTVOOS6Z94fD4+Ovw4LT3/MF9ENO0CwkR7wKxcTJhTIaJ5nG3GDrNfBhXsjn8+Xp6fd+vyeEIjT0fY8xds55PyJ5LlP8nBfkksqUhSEuWNgpJS9kyAMEsEoISZe0anQ+hBBjTClvxqzkKcEFOc3zN8O2Mx8j15YIBQMx7kLYWOv4DClhLrFQVIKF6Qc554wIQYT2AwYBfDU656+glNJAaIcGwhjEwGlOC77IJZdLVe12++PxVNeN0Ro8B8M3Mui/XuuqukI5GWUxRKMNBCxkDubBE4O/4RaRth9aoXhMsZQCx9AxIaYQPZTHBcMUxryXmkHAUudpmsEGzFCP6xtpqURMIW3FRg6LbWmgfYsqtHRLj3kHMVTcfLCLbMhbN+21bmGGakGrDBjDwzfZUDbYb9oODrwHZ6Nf8fXm75hXe0ES9LD1Abo65bxuzPeqzVvMQgZddhy3y3JZAOZDwOhCT3iHGSwgfFpxv+JeKvgMu93729uf4+mEEOq6rmma4D1UG3qNKUmlvFE6MFH1PVPqBxm+0e79/eX1FTq0729rVwswKWYPv2f0Wlnwdnmh9RL+xn/NgH8bCYyrDV2/iQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 15 19 25"\n        title=""\n        src="/static/2019-03-19-15-19-25-b48c3040562827b9da5f5e74adc8b848-fee1c.png"\n        srcset="/static/2019-03-19-15-19-25-b48c3040562827b9da5f5e74adc8b848-a67b7.png 200w,\n/static/2019-03-19-15-19-25-b48c3040562827b9da5f5e74adc8b848-0b187.png 400w,\n/static/2019-03-19-15-19-25-b48c3040562827b9da5f5e74adc8b848-fee1c.png 800w,\n/static/2019-03-19-15-19-25-b48c3040562827b9da5f5e74adc8b848-b1a91.png 1200w,\n/static/2019-03-19-15-19-25-b48c3040562827b9da5f5e74adc8b848-5d858.png 1472w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="drawer-篇"><a href="#drawer-%E7%AF%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Drawer 篇</h1>\n<h2 id="检查代码-coverage"><a href="#%E6%A3%80%E6%9F%A5%E4%BB%A3%E7%A0%81-coverage" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>检查代码 coverage</h2>\n<p>实际开发中，你的页面可能并不需要位于尾部的许多代码。也许那是来自外部库的一大块 JavaScript，也许是被遗忘的选择器上的一些 CSS 规则，它们不再匹配任何东西。</p>\n<p>使用 coverage 面板来获得关于冗余代码的摘要-细节信息。使用 Drawer 菜单或者 Command 菜单来打开它。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-15-27-40-2cd5404f4b62d47b4ef8a33d3d434589-63a9f.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 24.77064220183486%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA2UlEQVQY001PyW6DMBDl/78qpx4SpFYmVU1MxB5bxdiuNwxc+hJUqe/gGc28ZZzxx/DFupF/e++klNULjDFKaV3XQghjzDRNnHM0P/+gtc6UEkYr76xzDuumaaC836tbWcILk5TSuq54rbUxxvSHEEJmpVRaz/OsFKo2RkttOy6t8wdpWRZoQPXexwPPaQo+ZKprXQhIQA4Y+77D5sHFwUEaVkjetm19ShKcFhwdjYkmeyfkcj7neV4UxTAMfd+3bYuCFhP8v3thHMeS0g9Cmutn9Xa6sJyw4hcbsBMiWao08gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 15 27 40"\n        title=""\n        src="/static/2019-03-19-15-27-40-2cd5404f4b62d47b4ef8a33d3d434589-fee1c.png"\n        srcset="/static/2019-03-19-15-27-40-2cd5404f4b62d47b4ef8a33d3d434589-a67b7.png 200w,\n/static/2019-03-19-15-27-40-2cd5404f4b62d47b4ef8a33d3d434589-0b187.png 400w,\n/static/2019-03-19-15-27-40-2cd5404f4b62d47b4ef8a33d3d434589-fee1c.png 800w,\n/static/2019-03-19-15-27-40-2cd5404f4b62d47b4ef8a33d3d434589-63a9f.png 872w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>DevTools 的 coverage 工具可以跟踪当前加载的 JS 和 CSS 文件的哪些行正在被执行，并显示未使用字节的百分比。</p>\n<p>它用绿色的线条标记运行和用红色的线条标记未运行。举个例子：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-15-29-35-304c57bed5a232cb4002fb65e58535bc-a15de.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 617px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 48.946515397082656%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHklEQVQoz5WSyW7EIAxA8/8/2J7aJGSZiAnEYMye1MypM4dR+8QmwPYTovv8vn2J2zBOg5jFchPzMk7LfdfWWvMMALzsdNroj1mI9ehHKQbVD3exHYf1RIQOOQUiOud49N7XZzpLdoHluq7k/C420Qs4lFYK0QakHHO9znq2xlzPdMaZVbdgPtLy2NZ16kcld+d8xEDkcwiFXAmhxlgYHomTRs7VIRopW3BJxWHwLKl4iimXnEri3m634DPnplBy9T6nxGuuDMujstNkdlBSx5C4QOWbudZSX11/a3sDOE3XwztiNNJ4S/ysZCiCJ9ce6U2wscvMq5pZMF7/oUML2zbWekbiskDAKq5p1+b8nk5rNc7DJKb2BwC00gz8jR9kvkD6n1dhcgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 15 29 35"\n        title=""\n        src="/static/2019-03-19-15-29-35-304c57bed5a232cb4002fb65e58535bc-a15de.png"\n        srcset="/static/2019-03-19-15-29-35-304c57bed5a232cb4002fb65e58535bc-70603.png 200w,\n/static/2019-03-19-15-29-35-304c57bed5a232cb4002fb65e58535bc-4a3ab.png 400w,\n/static/2019-03-19-15-29-35-304c57bed5a232cb4002fb65e58535bc-a15de.png 617w"\n        sizes="(max-width: 617px) 100vw, 617px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="检查你修改的内容"><a href="#%E6%A3%80%E6%9F%A5%E4%BD%A0%E4%BF%AE%E6%94%B9%E7%9A%84%E5%86%85%E5%AE%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>检查你修改的内容</h2>\n<p>通过浏览器进行设计和调整 css ：能够在代码执行的地方进行调试是方便又有趣的开发方式。 但在某些时候，你可能希望将 已更改的内容 与 最初加载的样式表 进行比较。</p>\n<p>为此，可以使用 DevTools’ Drawer 中的更改工具。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-15-31-03-974602d3f945a097b95574ff1b7f1bf9-fee1c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 46.37500000000001%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABQElEQVQoz23OXU/CMBSAYf7/P9BIuPFW441GQJQYRTF8zbEgDMpgwNjWdt/ttq6riFFxevJcnDZ5k1N67WqdtjKQBrIyUoCu6ubcQJQmaZIylvGM53sZy/4qJZSRMCaEUBoLzjFE0LLTkFLscRJzlseMszQT/02p8I4JtTEeruRup9aTm03w8qhJU3cFfONDYJgUW9T5tI/zH7sLTYSqo/pVo3zWvjy9u25NH+63w/pKullLt2tp7C1ngT7d+x0LgZGz3WxpkrA8T4VgefHU3Qf/Uow9x/M9P9L1cPIWLE1rApltZxAyCDMEdwtH6FsxJiFBGFv6zOi3gDp/et4Y1sYLoeNZ2DULirGLXQRRglAEQLhcWmNgAs1eaMS2BaF5RA4V48APU5qwXi9qVO1aTS2fqJVK//hocXEulJGQlUPvprD24PZW4hkAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 15 31 03"\n        title=""\n        src="/static/2019-03-19-15-31-03-974602d3f945a097b95574ff1b7f1bf9-fee1c.png"\n        srcset="/static/2019-03-19-15-31-03-974602d3f945a097b95574ff1b7f1bf9-a67b7.png 200w,\n/static/2019-03-19-15-31-03-974602d3f945a097b95574ff1b7f1bf9-0b187.png 400w,\n/static/2019-03-19-15-31-03-974602d3f945a097b95574ff1b7f1bf9-fee1c.png 800w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>它不仅会使用差异形式的变化（像 Git 这样的源控制工具一样）向你展示，同时还可以撤销它们。</p>\n<p>举个例子：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-19-15-33-54-b5c1eea0d7c85b3d95fa340784467d86-ab313.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 677px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 59.527326440177255%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACGElEQVQoz2VSu24TQRTd/0Kg/AGKyD9QUFBRUFBRUSAaJDpIhdIgpwAJoUiIWOERHBw7AWIl3thx4uzuvGfnse9wdiOl4czqavZozp1z79yA0Fgyvzd/1Tu42xutfTl5BIazdG/+sjde3RyvbU8fU0oEc7uzF5sHq73xvf70CaWMUhrE8SUn7nv4fP3rrdfbK5+O7sfJJSP6W/hsfef2m+2VrcmDJIk5sTvTpy3Tv7M1eZgkJEmSoCzLumpMdk79L5btczcBU5W1zubEXTNH+K/KBgz1QzDCH5cdAqlkagwXxtnKmcrZItUpYNLM29roInOV1tpaq5XLXGPT0tvCew9VIBjnlF5EMEJQhrVGd5BSaK24YDpVALIxTlOjCE2WywucbG0baaLTM7Gko3DQ//NhMT8PwxD3OOcRvM8QjTGtF2NNiuQOW865lDJQTMYXsZJyODnZ+PgjPCVC8vZgp4cKDq86NFiIdVPXjXPIaIOqqjUVikWjw8Xbd8PR74WUDCUgcZ7nOIR4rQTqpvG5RTnInmUZGqai+TIOZ39n/d3jjThZosKr/9CJoW20UXimsqpABkabKFw6ZQ5n+5/H7xlj6ARuq+u61XS41sMvYuY9epsXRSvObeaUxW5xthgMfmJ0CCFRFCOi2hvlDYqiEFIorfAigVXWKeeVnk+n4/EBNKwD5g8WhBC4sPXcfRDnRR4nCZqPIfkHrmSQC+A7CggAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 19 15 33 54"\n        title=""\n        src="/static/2019-03-19-15-33-54-b5c1eea0d7c85b3d95fa340784467d86-ab313.png"\n        srcset="/static/2019-03-19-15-33-54-b5c1eea0d7c85b3d95fa340784467d86-94813.png 200w,\n/static/2019-03-19-15-33-54-b5c1eea0d7c85b3d95fa340784467d86-beb37.png 400w,\n/static/2019-03-19-15-33-54-b5c1eea0d7c85b3d95fa340784467d86-ab313.png 677w"\n        sizes="(max-width: 677px) 100vw, 677px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>以上更新于<code class="language-text">2019-3-19 15:43:42</code></p>\n<hr>',
id:"/github/workspace/blog/Chrome调试技巧/index.md absPath of file >>> MarkdownRemark",timeToRead:14,frontmatter:{date:"2019-03-19 15:43:42",path:"/chrome-debug-practice/",tags:"前端, 调试",title:"Chrome调试技巧",draft:null}},{excerpt:"构造函数 constructor 返回创建实例对象时构造函数的引用（即 对象.constructor === 构造函数.prototype.constructor），此属性的值是对函数本身的引用，而不是一个包含函数名称的字符串 构造函数本身就是一个函数，与普通函数没有任何区别，不过为了规范一般将其首字母大写。构造函数和普通函数的区别在于，使用 new 生成实例的函数就是构造函数，直接调用的就是普通函数。 那是不是意味着普通函数创建的实例没有 constructor 属性呢？不一定。 Symbol…",html:'<h1 id="构造函数"><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>构造函数</h1>\n<p>constructor 返回创建实例对象时构造函数的引用（即 对象.constructor === 构造函数.prototype.constructor），此属性的值是对函数本身的引用，而不是一个包含函数名称的字符串</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="70857098111318240000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Parent(age) {\n  this.age = age;\n}\n\nvar p = new Parent(50);\np.constructor === Parent; // true\np.constructor === Object; // false`, `70857098111318240000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\np<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Parent<span class="token punctuation">;</span> <span class="token comment">// true</span>\np<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object<span class="token punctuation">;</span> <span class="token comment">// false</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>构造函数本身就是一个函数，与普通函数没有任何区别，不过为了规范一般将其首字母大写。构造函数和普通函数的区别在于，使用 new 生成实例的函数就是构造函数，直接调用的就是普通函数。</p>\n<p>那是不是意味着普通函数创建的实例没有 constructor 属性呢？不一定。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55841639529427560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 普通函数\nfunction parent2(age) {\n  this.age = age;\n}\nvar p2 = parent2(50);\n// undefined\n\n// 普通函数\nfunction parent3(age) {\n  return {\n    age: age\n  };\n}\nvar p3 = parent3(50);\np3.constructor === Object; // true\np3.constructor === Object.prototype.constructor; // true`, `55841639529427560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 普通函数</span>\n<span class="token keyword">function</span> <span class="token function">parent2</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token function">parent2</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// undefined</span>\n\n<span class="token comment">// 普通函数</span>\n<span class="token keyword">function</span> <span class="token function">parent3</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    age<span class="token punctuation">:</span> age\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">var</span> p3 <span class="token operator">=</span> <span class="token function">parent3</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\np3<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object<span class="token punctuation">;</span> <span class="token comment">// true</span>\np3<span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">;</span> <span class="token comment">// true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="symbol-的构造函数"><a href="#symbol-%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Symbol 的构造函数</h2>\n<p>Symbol 是基本数据类型，但作为构造函数来说它并不完整，因为它不支持语法 new Symbol()，Chrome 认为其不是构造函数，如果要生成实例直接使用 Symbol()</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27821000528123040000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`new Symbol(123); // Symbol is not a constructor\n\nSymbol(123); // Symbol(123)`, `27821000528123040000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">Symbol</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol is not a constructor</span>\n\n<span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(123)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<p>虽然是基本数据类型，但 Symbol(123) 实例可以获取 constructor 属性值</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="72887313283007440000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var sym = Symbol(123);\nconsole.log(sym);\n// Symbol(123)\n\nconsole.log(sym.constructor);\n// ƒ Symbol() { [native code] }`, `72887313283007440000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// Symbol(123)</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// ƒ Symbol() { [native code] }</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里的 constructor 属性来自哪里？其实是 Symbol 原型上的，即 Symbol.prototype.constructor 返回创建实例原型的函数， 默认为 Symbol 函数。</p>\n<h2 id="constructor-只读？"><a href="#constructor-%E5%8F%AA%E8%AF%BB%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>constructor 只读？</h2>\n<p>对于引用类型来说 constructor 属性值是可以修改的，但是对于基本类型来说是只读的</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="95269089945613390000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Foo() {\n  this.value = 42;\n}\nFoo.prototype = {\n  method: function() {}\n};\n\nfunction Bar() {}\n\n// 设置 Bar 的 prototype 属性为 Foo 的实例对象\nBar.prototype = new Foo();\nBar.prototype.foo = \'Hello World\';\n\nBar.prototype.constructor === Object; // true\n\n// 修正 Bar.prototype.constructor 为 Bar 本身\n// Bar.prototype.constructor = Bar;\n\nvar test = new Bar(); // 创建 Bar 的一个新实例\nconsole.log(test);`, `95269089945613390000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">method</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token comment">// 设置 Bar 的 prototype 属性为 Foo 的实例对象</span>\n<span class="token class-name">Bar</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token class-name">Bar</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">\'Hello World\'</span><span class="token punctuation">;</span>\n\n<span class="token class-name">Bar</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Object<span class="token punctuation">;</span> <span class="token comment">// true</span>\n\n<span class="token comment">// 修正 Bar.prototype.constructor 为 Bar 本身</span>\n<span class="token comment">// Bar.prototype.constructor = Bar;</span>\n\n<span class="token keyword">var</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建 Bar 的一个新实例</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-11-21-11-10-5677e43fc6990725b563b864cff37caa-ff6e4.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 479px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 37.995824634655534%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1UlEQVQY042PyW7DMAxE/f+/mEsOjh3Ypah9o2iVck6tXaAPBChAHA5nqrX6EKw1WiMo5bxDRAAIzlmDzrre+yH0Uf0nU6nlyM1ARJ2KDWbToICYIMITn5hQBbWY5bE/EqXfYnEOLszza9thXXfYvsSNmVsjapUa8cGNpdGwv4pzyagg+hzT+D4+JfAoPpFHvzDlnKXlkN3i3aLtDE6Z92vRWhORrKaT1tqfYtnt3sGDDSuw96Q1303fi0spUQ7fY0wMqNCYa8J7sXDOm3GbxGxthPwH30s704T4yPqUAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 11 21 11 10"\n        title=""\n        src="/static/2019-03-11-21-11-10-5677e43fc6990725b563b864cff37caa-ff6e4.png"\n        srcset="/static/2019-03-11-21-11-10-5677e43fc6990725b563b864cff37caa-d5807.png 200w,\n/static/2019-03-11-21-11-10-5677e43fc6990725b563b864cff37caa-dba8d.png 400w,\n/static/2019-03-11-21-11-10-5677e43fc6990725b563b864cff37caa-ff6e4.png 479w"\n        sizes="(max-width: 479px) 100vw, 479px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>对于基本类型来说是只读的，比如 1、“muyiy”、true、Symbol，当然 null 和 undefined 是没有 constructor 属性的。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="42671748754307146000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Type() {}\nvar types = [1, \'muyiy\', true, Symbol(123)];\n\nfor (var i = 0; i < types.length; i++) {\n  types[i].constructor = Type;\n  types[i] = [types[i].constructor, types[i] instanceof Type, types[i].toString()];\n}\n\nconsole.log(types.join(\'\\n\'));\n// function Number() { [native code] }, false, 1\n// function String() { [native code] }, false, muyiy\n// function Boolean() { [native code] }, false, true\n// function Symbol() { [native code] }, false, Symbol(123)`, `42671748754307146000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token keyword">var</span> types <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">\'muyiy\'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> types<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  types<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">=</span> Type<span class="token punctuation">;</span>\n  types<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>types<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>constructor<span class="token punctuation">,</span> types<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Type</span><span class="token punctuation">,</span> types<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">\'\\n\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// function Number() { [native code] }, false, 1</span>\n<span class="token comment">// function String() { [native code] }, false, muyiy</span>\n<span class="token comment">// function Boolean() { [native code] }, false, true</span>\n<span class="token comment">// function Symbol() { [native code] }, false, Symbol(123)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>为什么呢？因为创建他们的是只读的原生构造函数（native constructors），这个例子也说明了依赖一个对象的 constructor 属性并不安全。</p>\n<h2 id="模拟实现-new"><a href="#%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0-new" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>模拟实现 new</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="12149326292966701000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function create() {\n  // 1、创建一个空的对象\n  var obj = new Object(),\n    // 2、获得构造函数，同时删除 arguments 中第一个参数\n    Con = [].shift.call(arguments);\n  // 3、链接到原型，obj 可以访问构造函数原型中的属性\n  Object.setPrototypeOf(obj, Con.prototype); // obj.__proto__ = Con.prototype 没有这个效率高\n  // 4、绑定 this 实现继承，obj 可以访问到构造函数中的属性\n  var ret = Con.apply(obj, arguments);\n  // 5、优先返回构造函数返回的对象\n  return ret instanceof Object ? ret : obj;\n}`, `12149326292966701000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 1、创建一个空的对象</span>\n  <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token comment">// 2、获得构造函数，同时删除 arguments 中第一个参数</span>\n    Con <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 3、链接到原型，obj 可以访问构造函数原型中的属性</span>\n  Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token class-name">Con</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// obj.__proto__ = Con.prototype 没有这个效率高</span>\n  <span class="token comment">// 4、绑定 this 实现继承，obj 可以访问到构造函数中的属性</span>\n  <span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token function">Con</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 5、优先返回构造函数返回的对象</span>\n  <span class="token keyword">return</span> ret <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> ret <span class="token punctuation">:</span> obj<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="原型"><a href="#%E5%8E%9F%E5%9E%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>原型</h1>\n<h2 id="prototype"><a href="#prototype" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>prototype</h2>\n<p>JavaScript 是一种基于原型的语言 (prototype-based language)，这个和 Java 等基于类的语言不一样。</p>\n<p>每个对象拥有一个原型对象，对象以其原型为模板，从原型继承方法和属性，这些属性和方法定义在对象的构造器函数的 prototype 属性上，而非对象实例本身。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-12-14-05-21-d9274c5f47a7aa7e131748b581c9a9f8-53b00.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 608px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 90.46052631578947%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACJ0lEQVQ4y42TaU/cMBCG+f//iG+USlVpKWIJ1yabZJNsnMNXfEycy04NCPplFzoaW5ZGz8w7o/HZYAw/UJYRmmBedruUZXmX7gmllFC2fmpnzjmE6rZuaItx0za1P3if7nvQPuyc/QyepklrVTZNWtWHlpSYZKgmQiNMy87Bss7rOth1ccdgnx2G6SKmV3F3navfqfiViptS/8jU+T06D7JvIfpZdA+dPQqv1q0HbZN2iAod5irMdULMYyU3+zrCKiaQ8KE27jj8ZvMwAVGaqBFACa5Et0zjFwP7eI1mVgQklkIAZsZ6QW715T78c3jilZSdJqgWNTWUgFLupSn34tbfJ2AfHSRorIw2A+N9U02cuHn6L9nWLkHOglzfp/J+rx/KPuY2lXZLx7uSB5UIkAz5fAT2e+Lva9RdH+A2g5tcb4r+z15chu3Ftj2/jS/D6vuuuWrGE5UXC6BNP0oKujP+IcDskqRqagXwhexpng0Y1SrZyL7rQWiGtaDS+c1anFushAnMPM7WOndk2p7BMWEZY/mbkzppqqTBOWakCxIZ7MTuoPthee30HRaji1j/dBBByDeP5O6ZPpd6T+ShLLI8a3HLOT8p+4lNGyTTdggRREhHGAq1BNx6kfM8+01ZlsXaE7vtP00hx10lklKn1avXfcWAC4iiKM/zoii01h+Me7V/PS/zBEz0rQKsBg4D1YaB4kr3S1XV2+02jmOf4i0XQsgr8tRfsMcFv2UD0hAAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 12 14 05 21"\n        title=""\n        src="/static/2019-03-12-14-05-21-d9274c5f47a7aa7e131748b581c9a9f8-53b00.png"\n        srcset="/static/2019-03-12-14-05-21-d9274c5f47a7aa7e131748b581c9a9f8-17576.png 200w,\n/static/2019-03-12-14-05-21-d9274c5f47a7aa7e131748b581c9a9f8-52273.png 400w,\n/static/2019-03-12-14-05-21-d9274c5f47a7aa7e131748b581c9a9f8-53b00.png 608w"\n        sizes="(max-width: 608px) 100vw, 608px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>从上面这张图可以发现，Parent 对象有一个原型对象 Parent.prototype，其上有两个属性，分别是 constructor 和 <code class="language-text">__proto__</code>，其中 <code class="language-text">__proto__</code> 已被弃用。</p>\n<p>构造函数 Parent 有一个指向原型的指针，原型 Parent.prototype 有一个指向构造函数的指针 Parent.prototype.constructor，如上图所示，其实就是一个循环引用。</p>\n<h2 id="proto"><a href="#proto" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>proto</h2>\n<p>下图可以看到 Parent 原型（ Parent.prototype ）上有 <code class="language-text">__proto__</code> 属性，这是一个访问器属性（即 getter 函数和 setter 函数），通过它可以访问到对象的内部 [[Prototype]] (一个对象或 null )。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-12-14-07-10-aab43634d088b80a6f2a4c6df1655951-a605e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 14.387211367673181%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAwElEQVQI1w2NvwqCQBzHfZLWWptrzK22XqGtJwiKIsIatEKil4iI9iCCXsDFRVNLCO9O9LyUywuv3/Llw5fvH4VSGkVREARhGCZJQggBR0pZliXnXIiSix87H5k2y3Tts98yU2e6li0m3/tNgVyappZl+b4PXFWVbduw5Xme6zjew3Ve4XM4wM06Utuk38U9FXVa70aN7TYKNOEQzjHGwHEcI4SEEEVR5HkOWklZnA50PmamkRlLtl5BjU5H/Hr5A834klwvuiibAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 12 14 07 10"\n        title=""\n        src="/static/2019-03-12-14-07-10-aab43634d088b80a6f2a4c6df1655951-fee1c.png"\n        srcset="/static/2019-03-12-14-07-10-aab43634d088b80a6f2a4c6df1655951-a67b7.png 200w,\n/static/2019-03-12-14-07-10-aab43634d088b80a6f2a4c6df1655951-0b187.png 400w,\n/static/2019-03-12-14-07-10-aab43634d088b80a6f2a4c6df1655951-fee1c.png 800w,\n/static/2019-03-12-14-07-10-aab43634d088b80a6f2a4c6df1655951-a605e.png 1126w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><code class="language-text">__proto__</code> 发音 dunder proto，最先被 Firefox 使用，后来在 ES6 被列为 Javascript 的标准内建属性。</p>\n<p>[[Prototype]] 是对象的一个内部属性，外部代码无法直接访问。</p>\n<blockquote>\n<p>遵循 ECMAScript 标准，someObject.[[Prototype]] 符号用于指向 someObject 的原型。</p>\n</blockquote>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-12-14-29-01-47c4d8863a751f0bf195147c3d3577a5-200d5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 474px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 78.05907172995781%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACjElEQVQoz21Ta5ObOgzd//+P+q3T2/bu3bvdtknYBIJ5m6exMcYvwKZmk3am02okYWwdpCOLB6mkIILmZMwJKweaYoyED0heMBBRMlDGpjQvlNbbH/KwrIsaJL60OKdtMQiESYTrAANQHk4gipMsz4MQjIy5aGOMfZM72BkjDIKiKBoQw2kiEMAKQPeeZunE+eSE89WYv2R2RtkYxlEIoksQ1E2bQ/jq+98OpzjNXEIhhFLKFT8MdKB0HBkmZJ7nO5gL4TBOO9S7Q4T6NMvrusoLmOZ53TRuAcvKbSZZ5pjESerC7mD3YehOSxddtF3nikR9X2Er9M7N2S+Sv8RRd7qDtdZt2/QuN8yHrpOUDj3CdNF6vWHf4u3v+sb59py48Nsp6o2X8WM6naG8tFM4zMm0xcwAZiJmUr4l3MbMuk0w2l7ZG9i2avucMz9rrxmLqimuuR9TACe3Toj0W/3fOfp4DB7P0Wcv9IoOzdtLv94z13ILEV/VZPVqKbdMGC43sy5iKuKIYYwbyCneFmUXaeZ9YHxqHszeDNvq7UurmkFUeCk6WfYadqqiM6Ti6QyOIPWSsmSKLFuvNqQsUfbrLfOiJO7RAZKnqHlOuu/V8Jx1X3J0rMZvkJzq8bnertTmcotdCyZH21wGU0uzd7tk+t25/BS273ffPcb4Q9D8EzQv1fQxbD9cu3eX8THjJ6S+N+KI5mC0i7H3e/boVo+ix4z0CjWcUk2wxEgSIgmTFdYgTU9+6AXgDBI3M2e6teIn+DRYRJnm0ypm0TOnepSzlGJi3uGQJ3FdQs75bTacdxQ6eQfbK12/dvoV6VOzq9fu/tgqr9f/xt1Thl/K8RXv1Tqq19H8j1aq3X9ifwB6XH7cADn8EAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 12 14 29 01"\n        title=""\n        src="/static/2019-03-12-14-29-01-47c4d8863a751f0bf195147c3d3577a5-200d5.png"\n        srcset="/static/2019-03-12-14-29-01-47c4d8863a751f0bf195147c3d3577a5-4fa1a.png 200w,\n/static/2019-03-12-14-29-01-47c4d8863a751f0bf195147c3d3577a5-57557.png 400w,\n/static/2019-03-12-14-29-01-47c4d8863a751f0bf195147c3d3577a5-200d5.png 474w"\n        sizes="(max-width: 474px) 100vw, 474px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>这里用 <code class="language-text">p.__proto__</code> 获取对象的原型，<code class="language-text">__proto__</code> 是每个实例上都有的属性，prototype 是构造函数的属性，这两个并不一样，但 <code class="language-text">p.__proto__</code> 和 Parent.prototype 指向同一个对象。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61719155946600866000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Parent() {}\nvar p = new Parent();\np.__proto__ === Parent.prototype;\n// true`, `61719155946600866000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\np<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>\n<span class="token comment">// true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>所以构造函数 Parent、Parent.prototype 和 p 的关系如下图。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-12-14-45-23-8f41b5ec2054e09686033907e3bb7026-c84fc.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 685px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 65.98540145985402%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABo0lEQVQoz6VS20ocQRCdD/MxGgKCMQ+5QpS8+IlCAhLyBTFmdyc+jIO6rdv36ZnZmb6W1SOJsKAEPBRNT01VnapTXcAzUGw6YgTvwdo0jtlCSPluISZIaTM5hGCMadt2PcEQ0tZ1UgrQpADnoG0T5+HsNPwpA7kOy+tAloGusFbRNI1zTmtdluV8PvchCKWYEFzKW0pvCOGmvTz9yV6/ZLsv5NGh+PyWbm+JL5+SswWmjROqqqrrOgKsGLuoa0rp1XKJRo1h5Zzt7ciP+/T9Hv+wz968EgfvcKjCe4/kXddxzrF/Q26aqkpagx0TZ8BYWlFg1P34rr8eX518s79/udmZPy8hxQfB+r531oKzMKyh62AYsnIoUoxj3+u2G6x7VG0hZScl1sgKCZ60QqdumktCpGnShtTTZ4FeHDjGKIRYD4NPyYaAP3yISmnGmOXcYVHsQum8AiHyec9sJkgpF4vFbDbD+RmlWkqlFG4hM4wjzp/373yeBYfC8z4Zg5AZ424n4NqRDdf+t7v01Auz1iIbRqPgqBlesNzTOY8/z/8g/Ic7v1TgCMEAijEAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 12 14 45 23"\n        title=""\n        src="/static/2019-03-12-14-45-23-8f41b5ec2054e09686033907e3bb7026-c84fc.png"\n        srcset="/static/2019-03-12-14-45-23-8f41b5ec2054e09686033907e3bb7026-18514.png 200w,\n/static/2019-03-12-14-45-23-8f41b5ec2054e09686033907e3bb7026-82fbc.png 400w,\n/static/2019-03-12-14-45-23-8f41b5ec2054e09686033907e3bb7026-c84fc.png 685w"\n        sizes="(max-width: 685px) 100vw, 685px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="注意点"><a href="#%E6%B3%A8%E6%84%8F%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>注意点</h2>\n<p><code class="language-text">__proto__</code> 属性在 ES6 时才被标准化，以确保 Web 浏览器的兼容性，但是不推荐使用，除了标准化的原因之外还有性能问题。为了更好的支持，推荐使用 Object.getPrototypeOf()。</p>\n<blockquote>\n<p>通过改变一个对象的 [[Prototype]] 属性来改变和继承属性会对性能造成非常严重的影响，并且性能消耗的时间也不是简单的花费在 <code class="language-text">obj.__proto__</code> = … 语句上, 它还会影响到所有继承自该 [[Prototype]] 的对象，如果你关心性能，你就不应该修改一个对象的 [[Prototype]]。</p>\n</blockquote>\n<p>如果要读取或修改对象的 [[Prototype]] 属性，建议使用如下方案，但是此时设置对象的 [[Prototype]] 依旧是一个缓慢的操作，如果性能是一个问题，就要避免这种操作。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="5629321280446975000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 获取\nObject.getPrototypeOf();\nReflect.getPrototypeOf();\n\n// 修改\nObject.setPrototypeOf();\nReflect.setPrototypeOf();`, `5629321280446975000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 获取</span>\nObject<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nReflect<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 修改</span>\nObject<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nReflect<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>如果要创建一个新对象，同时继承另一个对象的 [[Prototype]] ，推荐使用 Object.create()。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="16401954711547507000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Parent() {\n  age: 50;\n}\nvar p = new Parent();\n// 相当于 Object.setPrototypeOf(child, p.constructor), child.__proto__ = p.constructor\nvar child = Object.create(p);`, `16401954711547507000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  age<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 相当于 Object.setPrototypeOf(child, p.constructor), child.__proto__ = p.constructor</span>\n<span class="token keyword">var</span> child <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里 child 是一个新的空对象，有一个指向对象 p 的指针 <code class="language-text">__proto__</code>。</p>\n<h2 id="优化实现-new"><a href="#%E4%BC%98%E5%8C%96%E5%AE%9E%E7%8E%B0-new" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优化实现 new</h2>\n<p>正如上面介绍的不建议使用 <code class="language-text">__proto__</code>，所以我们使用 Object.create() 来模拟实现，优化后的代码如下</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="61174720526634020000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function create() {\n  // 1、获得构造函数，同时删除 arguments 中第一个参数\n  Con = [].shift.call(arguments);\n  // 2、创建一个空的对象并链接到原型，obj 可以访问构造函数原型中的属性\n  var obj = Object.create(Con.prototype);\n  // 3、绑定 this 实现继承，obj 可以访问到构造函数中的属性\n  var ret = Con.apply(obj, arguments);\n  // 4、优先返回构造函数返回的对象\n  return ret instanceof Object ? ret : obj;\n}`, `61174720526634020000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 1、获得构造函数，同时删除 arguments 中第一个参数</span>\n  Con <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 2、创建一个空的对象并链接到原型，obj 可以访问构造函数原型中的属性</span>\n  <span class="token keyword">var</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Con</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 3、绑定 this 实现继承，obj 可以访问到构造函数中的属性</span>\n  <span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token function">Con</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// 4、优先返回构造函数返回的对象</span>\n  <span class="token keyword">return</span> ret <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> ret <span class="token punctuation">:</span> obj<span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="原型链"><a href="#%E5%8E%9F%E5%9E%8B%E9%93%BE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>原型链</h1>\n<p>每个对象拥有一个原型对象，通过 <code class="language-text">__proto__</code> 指针指向上一个原型 ，并从中继承方法和属性，同时原型对象也可能拥有原型，这样一层一层，最终指向 null。这种关系被称为原型链 (prototype chain)，通过原型链一个对象会拥有定义在其他对象中的属性和方法。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="97256487990084530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Parent(age) {\n  this.age = age;\n}\n\nvar p = new Parent(50);\np.constructor === Parent; // true`, `97256487990084530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\np<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Parent<span class="token punctuation">;</span> <span class="token comment">// true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这里 p.constructor 指向 Parent，那是不是意味着 p 实例存在 constructor 属性呢？并不是。</p>\n<p>我们打印下 p 值就知道了</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-12-15-13-41-40644d1bb1d47876c4d5fca22a84eb7f-534ce.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 342px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 43.27485380116959%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABE0lEQVQoz5VRy26DMBDM/39Mq/bQD0CIA1IJUUtUIahIH1HUFpOAwV6vbTqQS8ml7R7Wa8sz4xmv2rYbx9F7P/6/VkI0F+C/E62YWUqJbozRWmOw1mJ2zmFGV8q2rSEibbwc7AJcFEUQBGmartN1FEWHw+F0OibJPeYsy7Qettv+6vp9V1XVByd5vwD7uZiYBqMH7b0TYtjv266TkJ0teEOGGcquV/YSjOXtYf949/S83ikt81zd3H4C+Ltn0Pf99BjqiWFZsyXjeFI4e67rWgihlMJbUAswkijLErdJ0tdOiNdj/YLesOKmbhAhzIdhuNls4jhGQKBbKE+yA6lOIWc//ZR31mFrkO9sCudgOQPcj/oG0PsG7d3C3CkAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 12 15 13 41"\n        title=""\n        src="/static/2019-03-12-15-13-41-40644d1bb1d47876c4d5fca22a84eb7f-534ce.png"\n        srcset="/static/2019-03-12-15-13-41-40644d1bb1d47876c4d5fca22a84eb7f-20d63.png 200w,\n/static/2019-03-12-15-13-41-40644d1bb1d47876c4d5fca22a84eb7f-534ce.png 342w"\n        sizes="(max-width: 342px) 100vw, 342px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>由图可以看到实例对象 p 本身没有 constructor 属性，是通过原型链向上查找 <code class="language-text">__proto__</code> ，最终查找到 constructor 属性，该属性指向 Parent。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="68957344489505700000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Parent(age) {\n  this.age = age;\n}\nvar p = new Parent(50);\n\np; // Parent {age: 50}\np.__proto__ === Parent.prototype; // true\np.__proto__.__proto__ === Object.prototype; // true\np.__proto__.__proto__.__proto__ === null; // true`, `68957344489505700000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\np<span class="token punctuation">;</span> <span class="token comment">// Parent {age: 50}</span>\np<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>\np<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>\np<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>下图展示了原型链的运作机制。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-12-15-16-30-36a109c0bdb3ad97f1a83901fbe970d8-3c1cf.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 8.792497069167645%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAaUlEQVQI1w2NSw7FIAwDe/9DIgQ0BQokKZ+nPhZpNl5Y4/FhjGHmvaX3VUoJIVhrEXGM+W7hp9davfcxRmYa8/f+hYm1JKLjvnNrOJZoxOtSCABSSohPn1IrO+d0rFKAE2mNKaW0nLMefJU0b1PceP4KAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 12 15 16 30"\n        title=""\n        src="/static/2019-03-12-15-16-30-36a109c0bdb3ad97f1a83901fbe970d8-fee1c.png"\n        srcset="/static/2019-03-12-15-16-30-36a109c0bdb3ad97f1a83901fbe970d8-a67b7.png 200w,\n/static/2019-03-12-15-16-30-36a109c0bdb3ad97f1a83901fbe970d8-0b187.png 400w,\n/static/2019-03-12-15-16-30-36a109c0bdb3ad97f1a83901fbe970d8-fee1c.png 800w,\n/static/2019-03-12-15-16-30-36a109c0bdb3ad97f1a83901fbe970d8-b1a91.png 1200w,\n/static/2019-03-12-15-16-30-36a109c0bdb3ad97f1a83901fbe970d8-95179.png 1600w,\n/static/2019-03-12-15-16-30-36a109c0bdb3ad97f1a83901fbe970d8-3c1cf.png 1706w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-03-12-14-13-05-e2a8e0220432f5bf68e3a0f812d19b1c-005b2.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 61.41479099678456%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/klEQVQoz42ShwqEQAxE9///UcTeu9g977kBUU/hBoy7MTOZBNV2xUdje8e5QG1/4Ki+6aplWfI8N03Tdd1hGMqyjOM4SZIsy1yNKIps2zYMIwgCx3GoJNN13U5e15UXH3zf5yBMOpCf55nYti0SaZpWVUUNzHEchbXbpjmXoijQI/LtSGIkDEPyuKvr+m6bB22E8dz3vRimiDMuMEwrz/NE8Tb2ZWGoUEo3mkCGaVkWumL1d5HqLEYrSomM1zQNhgMN2eUzWTBNE8vEM2QmxwVkT4P+st4HMpYaDbZClLYkuaKCHFHW+0CWPVFKpI6ZIdMq02AQko8/z19/2Bu+RuC281lmx+QAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 03 12 14 13 05"\n        title=""\n        src="/static/2019-03-12-14-13-05-e2a8e0220432f5bf68e3a0f812d19b1c-fee1c.png"\n        srcset="/static/2019-03-12-14-13-05-e2a8e0220432f5bf68e3a0f812d19b1c-a67b7.png 200w,\n/static/2019-03-12-14-13-05-e2a8e0220432f5bf68e3a0f812d19b1c-0b187.png 400w,\n/static/2019-03-12-14-13-05-e2a8e0220432f5bf68e3a0f812d19b1c-fee1c.png 800w,\n/static/2019-03-12-14-13-05-e2a8e0220432f5bf68e3a0f812d19b1c-b1a91.png 1200w,\n/static/2019-03-12-14-13-05-e2a8e0220432f5bf68e3a0f812d19b1c-005b2.png 1244w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="总结"><a href="#%E6%80%BB%E7%BB%93" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h1>\n<ul>\n<li>Symbol 作为构造函数来说并不完整，因为不支持语法 new Symbol()，但其原型上拥有 constructor 属性，即 Symbol.prototype.constructor。</li>\n<li>引用类型 constructor 属性值是可以修改的，但是对于基本类型来说是只读的，当然 null 和 undefined 没有 constructor 属性。</li>\n<li><code class="language-text">__proto__</code> 是每个实例上都有的属性，prototype 是构造函数的属性，这两个并不一样，但 <code class="language-text">p.__proto__</code> 和 Parent.prototype 指向同一个对象。</li>\n<li><code class="language-text">__proto__</code> 属性在 ES6 时被标准化，但因为性能问题并不推荐使用，推荐使用 Object.getPrototypeOf()。</li>\n<li>每个对象拥有一个原型对象，通过 <code class="language-text">__proto__</code> 指针指向上一个原型 ，并从中继承方法和属性，同时原型对象也可能拥有原型，这样一层一层，最终指向 null，这就是原型链。</li>\n<li>Object 是所有对象的爸爸，所有对象都可以通过 <code class="language-text">__proto__</code> 找到它</li>\n<li>Function 是所有函数的爸爸，所有函数都可以通过 <code class="language-text">__proto__</code> 找到它</li>\n<li>Function.prototype 和 Object.prototype 是两个特殊的对象，他们由引擎来创建</li>\n<li>除了以上两个特殊对象，其他对象都是通过构造器 new 出来的</li>\n<li>函数的 prototype 是一个对象，也就是原型</li>\n</ul>',
id:"/github/workspace/blog/JS构造函数、原型、原型链/index.md absPath of file >>> MarkdownRemark",timeToRead:5,frontmatter:{date:"2019-03-11 20:03:54",path:"/js-constructor-prototype-proto/",tags:"前端, JS, 原型链",title:"JS构造函数、原型、原型链",draft:null}},{excerpt:"需求背景 最近要做一个声音波形图组件，方便运营人员对声音进行切分，以配合完成人工切分录音的工作 核心思路 利用 ref 属性调用原生方法 解决方案 功能点 点击播放只会在播放区域进行播放，再次点击暂停播放，鼠标右键点击播放区域也可播放 可以添加播放区域，添加时会删除上一个播放区域，按住 shift + 鼠标右键可删除播放区域 可以放大缩小波形图 WaveFormDivider/index.js WaveFormDivider/styles.css 类似实现效果",html:'<h1 id="需求背景"><a href="#%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需求背景</h1>\n<p>最近要做一个声音波形图组件，方便运营人员对声音进行切分，以配合完成人工切分录音的工作</p>\n<h1 id="核心思路"><a href="#%E6%A0%B8%E5%BF%83%E6%80%9D%E8%B7%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>核心思路</h1>\n<p>利用 ref 属性调用原生方法</p>\n<h1 id="解决方案"><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>解决方案</h1>\n<h2 id="功能点"><a href="#%E5%8A%9F%E8%83%BD%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>功能点</h2>\n<ul>\n<li>点击播放只会在播放区域进行播放，再次点击暂停播放，鼠标右键点击播放区域也可播放</li>\n<li>可以添加播放区域，添加时会删除上一个播放区域，按住 shift + 鼠标右键可删除播放区域</li>\n<li>可以放大缩小波形图</li>\n</ul>\n<h2 id="waveformdividerindexjs"><a href="#waveformdividerindexjs" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WaveFormDivider/index.js</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="41102938843384340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/* eslint-disable no-unused-expressions */\n/* eslint-disable import/no-unresolved */\n/* eslint-disable no-param-reassign */\nimport React from \'react\';\nimport WaveSurfer from \'waveSurfer.js\';\nimport RegionsPlugin from \'waveSurfer.js/dist/plugin/waveSurfer.regions\';\nimport TimelinePlugin from \'waveSurfer.js/dist/plugin/waveSurfer.timeline\';\nimport MinimapPlugin from \'waveSurfer.js/dist/plugin/waveSurfer.minimap\';\nimport { Slider, Button, Icon } from \'antd\';\nimport { fromJS } from \'immutable\';\nimport styles from \'./styles.css\';\n\n/**\n * Use formatTimeCallback to style the notch labels as you wish, such\n * as with more detail as the number of pixels per second increases.\n *\n * Here we format as M:SS.frac, with M suppressed for times < 1 minute,\n * and frac having 0, 1, or 2 digits as the zoom increases.\n *\n * Note that if you override the default function, you\'ll almost\n * certainly want to override timeInterval, primaryLabelInterval and/or\n * secondaryLabelInterval so they all work together.\n *\n * @param: seconds\n * @param: pxPerSec\n */\nfunction formatTimeCallback(seconds, pxPerSec) {\n  seconds = Number(seconds);\n  const minutes = Math.floor(seconds / 60);\n  seconds %= 60;\n\n  // fill up seconds with zeroes\n  let secondsStr = Math.round(seconds).toString();\n  if (pxPerSec >= 25 * 10) {\n    secondsStr = seconds.toFixed(2);\n  } else if (pxPerSec >= 25 * 1) {\n    secondsStr = seconds.toFixed(1);\n  }\n\n  if (minutes > 0) {\n    if (seconds < 10) {\n      secondsStr = \\`0\\${secondsStr}\\`;\n    }\n    return \\`\\${minutes}:\\${secondsStr}\\`;\n  }\n  return secondsStr;\n}\n\n/**\n * Use timeInterval to set the period between notches, in seconds,\n * adding notches as the number of pixels per second increases.\n *\n * Note that if you override the default function, you\'ll almost\n * certainly want to override formatTimeCallback, primaryLabelInterval\n * and/or secondaryLabelInterval so they all work together.\n *\n * @param: pxPerSec\n */\nfunction timeInterval(pxPerSec) {\n  let retval = 1;\n  if (pxPerSec >= 25 * 100) {\n    retval = 0.01;\n  } else if (pxPerSec >= 25 * 40) {\n    retval = 0.025;\n  } else if (pxPerSec >= 25 * 10) {\n    retval = 0.1;\n  } else if (pxPerSec >= 25 * 4) {\n    retval = 0.25;\n  } else if (pxPerSec >= 25) {\n    retval = 1;\n  } else if (pxPerSec * 5 >= 25) {\n    retval = 5;\n  } else if (pxPerSec * 15 >= 25) {\n    retval = 15;\n  } else {\n    retval = Math.ceil(0.5 / pxPerSec) * 60;\n  }\n  return retval;\n}\n\n/**\n * Return the cadence of notches that get labels in the primary color.\n * EG, return 2 if every 2nd notch should be labeled,\n * return 10 if every 10th notch should be labeled, etc.\n *\n * Note that if you override the default function, you\'ll almost\n * certainly want to override formatTimeCallback, primaryLabelInterval\n * and/or secondaryLabelInterval so they all work together.\n *\n * @param pxPerSec\n */\nfunction primaryLabelInterval(pxPerSec) {\n  let retval = 1;\n  if (pxPerSec >= 25 * 100) {\n    retval = 10;\n  } else if (pxPerSec >= 25 * 40) {\n    retval = 4;\n  } else if (pxPerSec >= 25 * 10) {\n    retval = 10;\n  } else if (pxPerSec >= 25 * 4) {\n    retval = 4;\n  } else if (pxPerSec >= 25) {\n    retval = 1;\n  } else if (pxPerSec * 5 >= 25) {\n    retval = 5;\n  } else if (pxPerSec * 15 >= 25) {\n    retval = 15;\n  } else {\n    retval = Math.ceil(0.5 / pxPerSec) * 60;\n  }\n  return retval;\n}\n\n/**\n * Return the cadence of notches to get labels in the secondary color.\n * EG, return 2 if every 2nd notch should be labeled,\n * return 10 if every 10th notch should be labeled, etc.\n *\n * Secondary labels are drawn after primary labels, so if\n * you want to have labels every 10 seconds and another color labels\n * every 60 seconds, the 60 second labels should be the secondaries.\n *\n * Note that if you override the default function, you\'ll almost\n * certainly want to override formatTimeCallback, primaryLabelInterval\n * and/or secondaryLabelInterval so they all work together.\n *\n * @param pxPerSec\n */\nfunction secondaryLabelInterval(pxPerSec) {\n  // draw one every 10s as an example\n  return Math.floor(10 / timeInterval(pxPerSec));\n}\n\nexport class WaveFormDivider extends React.PureComponent {\n  // eslint-disable-line react/prefer-stateless-function\n  static defaultProps = {\n    startTime: undefined,\n    endTime: undefined,\n    src: \'\'\n  };\n\n  static initState = {\n    data: fromJS({\n      zoom: 0,\n      playing: false\n    })\n  };\n\n  state = WaveFormDivider.initState;\n\n  componentDidMount() {\n    const { src } = this.props;\n    src && this.initWaveSurfer();\n  }\n\n  componentWillUnmount() {\n    this.destroyWaveSurfer();\n  }\n\n  setImmState = (fn, cb) => {\n    this.setState(\n      ({ data }) => ({\n        data: fn(data)\n      }),\n      cb\n    );\n  };\n\n  destroyWaveSurfer = () => {\n    this.setState(WaveFormDivider.initState);\n    this.waveSurfer && this.waveSurfer.destroy();\n  };\n\n  initWaveSurfer = () => {\n    const { data } = this.state;\n    const { handleChangeStartEnd, src, startTime, endTime } = this.props;\n    this.waveSurfer = WaveSurfer.create({\n      container: this.waveForm,\n      scrollParent: true,\n      waveColor: \'#A8DBA8\',\n      progressColor: \'#3B8686\',\n      plugins: [\n        MinimapPlugin.create(),\n        RegionsPlugin.create({\n          dragSelection: {\n            slop: 5\n          }\n        }),\n        TimelinePlugin.create({\n          container: this.waveTimeline,\n          formatTimeCallback,\n          timeInterval,\n          primaryLabelInterval,\n          secondaryLabelInterval,\n          primaryColor: \'blue\',\n          secondaryColor: \'red\',\n          primaryFontColor: \'blue\',\n          secondaryFontColor: \'red\'\n        })\n      ]\n    });\n    this.waveSurfer.load(src);\n    this.waveSurfer.on(\'ready\', () => {\n      this.waveSurfer.zoom(data.get(\'zoom\'));\n      if (data.get(\'playing\')) {\n        this.waveSurfer.play();\n      }\n      startTime !== undefined && endTime !== undefined && this.addWaveFormRegion(startTime, endTime);\n    });\n    this.waveSurfer.on(\'region-update-end\', (e) => {\n      const { start, end } = e;\n      handleChangeStartEnd && handleChangeStartEnd(start, end);\n    });\n    this.waveSurfer.on(\'region-created\', () => {\n      this.waveSurfer.clearRegions();\n    });\n    // this.waveSurfer.on(\'region-removed\', () => {\n    //   handleChangeStartEnd && handleChangeStartEnd(undefined, undefined);\n    // });\n    this.waveSurfer.on(\'pause\', () => {\n      this.setImmState((dat) => dat.set(\'playing\', false));\n    });\n    this.waveSurfer.on(\'play\', () => {\n      this.setImmState((dat) => dat.set(\'playing\', true));\n    });\n    this.waveSurfer.on(\'zoom\', (value) => {\n      this.setImmState((dat) => dat.set(\'zoom\', value));\n    });\n    this.waveSurfer.on(\'region-click\', (region, e) => {\n      e.stopPropagation();\n      if (e.shiftKey) {\n        region.remove();\n        handleChangeStartEnd && handleChangeStartEnd(undefined, undefined);\n      } else {\n        region.play();\n      }\n    });\n  };\n\n  addWaveFormRegion = (start, end) => {\n    this.waveSurfer.addRegion({\n      start,\n      end,\n      color: \'hsla(400, 100%, 30%, 0.5)\'\n    });\n  };\n\n  handleWaveFormZoom = (value) => {\n    let tmp = value;\n    if (value < 0) {\n      tmp = 0;\n    }\n    if (value > 1000) {\n      tmp = 1000;\n    }\n    this.waveSurfer.zoom(tmp);\n  };\n\n  handleWaveFormPlayOrPause = () => {\n    const { data } = this.state;\n    const { startTime, endTime } = this.props;\n    if (data.get(\'playing\')) {\n      this.waveSurfer.pause();\n    } else {\n      this.waveSurfer.play(startTime, endTime);\n    }\n  };\n\n  render() {\n    const { data } = this.state;\n    return (\n      <div className={styles.container}>\n        <div\n          ref={(r) => {\n            this.waveForm = r;\n          }}\n          className={styles.waveForm}\n        />\n        <div\n          ref={(r) => {\n            this.waveTimeline = r;\n          }}\n        />\n        <div className={styles.control}>\n          <div className={styles.zoomContainer}>\n            <Icon type=\'minus-circle-o\' onClick={() => this.handleWaveFormZoom(data.get(\'zoom\') - 100)} />\n            <Slider\n              tipFormatter={(value) => \\`\\${value}%\\`}\n              max={1000}\n              onChange={(value) => this.handleWaveFormZoom(value)}\n              value={data.get(\'zoom\')}\n            />\n            <Icon type=\'plus-circle-o\' onClick={() => this.handleWaveFormZoom(data.get(\'zoom\') + 100)} />\n          </div>\n          <Button className={styles.playBtn} type=\'primary\' onClick={this.handleWaveFormPlayOrPause}>\n            {data.get(\'playing\') ? \'暂停\' : \'播放\'}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nWaveFormDivider.propTypes = {\n  src: React.PropTypes.string,\n  handleChangeStartEnd: React.PropTypes.func,\n  startTime: React.PropTypes.number,\n  endTime: React.PropTypes.number\n};\n\nexport default WaveFormDivider;`, `41102938843384340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token comment">/* eslint-disable no-unused-expressions */</span>\n<span class="token comment">/* eslint-disable import/no-unresolved */</span>\n<span class="token comment">/* eslint-disable no-param-reassign */</span>\n<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> WaveSurfer <span class="token keyword">from</span> <span class="token string">\'waveSurfer.js\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> RegionsPlugin <span class="token keyword">from</span> <span class="token string">\'waveSurfer.js/dist/plugin/waveSurfer.regions\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> TimelinePlugin <span class="token keyword">from</span> <span class="token string">\'waveSurfer.js/dist/plugin/waveSurfer.timeline\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> MinimapPlugin <span class="token keyword">from</span> <span class="token string">\'waveSurfer.js/dist/plugin/waveSurfer.minimap\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> Slider<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> Icon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'antd\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> fromJS <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'immutable\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">\'./styles.css\'</span><span class="token punctuation">;</span>\n\n<span class="token comment">/**\n * Use formatTimeCallback to style the notch labels as you wish, such\n * as with more detail as the number of pixels per second increases.\n *\n * Here we format as M:SS.frac, with M suppressed for times &lt; 1 minute,\n * and frac having 0, 1, or 2 digits as the zoom increases.\n *\n * Note that if you override the default function, you\'ll almost\n * certainly want to override timeInterval, primaryLabelInterval and/or\n * secondaryLabelInterval so they all work together.\n *\n * @param: seconds\n * @param: pxPerSec\n */</span>\n<span class="token keyword">function</span> <span class="token function">formatTimeCallback</span><span class="token punctuation">(</span><span class="token parameter">seconds<span class="token punctuation">,</span> pxPerSec</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  seconds <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>seconds<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> minutes <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>seconds <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  seconds <span class="token operator">%=</span> <span class="token number">60</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// fill up seconds with zeroes</span>\n  <span class="token keyword">let</span> secondsStr <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>seconds<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    secondsStr <span class="token operator">=</span> seconds<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    secondsStr <span class="token operator">=</span> seconds<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>minutes <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>seconds <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      secondsStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">0</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>secondsStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minutes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>secondsStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> secondsStr<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Use timeInterval to set the period between notches, in seconds,\n * adding notches as the number of pixels per second increases.\n *\n * Note that if you override the default function, you\'ll almost\n * certainly want to override formatTimeCallback, primaryLabelInterval\n * and/or secondaryLabelInterval so they all work together.\n *\n * @param: pxPerSec\n */</span>\n<span class="token keyword">function</span> <span class="token function">timeInterval</span><span class="token punctuation">(</span><span class="token parameter">pxPerSec</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> retval <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">40</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">0.025</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">>=</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">*</span> <span class="token number">15</span> <span class="token operator">>=</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">0.5</span> <span class="token operator">/</span> pxPerSec<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> retval<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Return the cadence of notches that get labels in the primary color.\n * EG, return 2 if every 2nd notch should be labeled,\n * return 10 if every 10th notch should be labeled, etc.\n *\n * Note that if you override the default function, you\'ll almost\n * certainly want to override formatTimeCallback, primaryLabelInterval\n * and/or secondaryLabelInterval so they all work together.\n *\n * @param pxPerSec\n */</span>\n<span class="token keyword">function</span> <span class="token function">primaryLabelInterval</span><span class="token punctuation">(</span><span class="token parameter">pxPerSec</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> retval <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">40</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">>=</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">>=</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pxPerSec <span class="token operator">*</span> <span class="token number">15</span> <span class="token operator">>=</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n    retval <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">0.5</span> <span class="token operator">/</span> pxPerSec<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> retval<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">/**\n * Return the cadence of notches to get labels in the secondary color.\n * EG, return 2 if every 2nd notch should be labeled,\n * return 10 if every 10th notch should be labeled, etc.\n *\n * Secondary labels are drawn after primary labels, so if\n * you want to have labels every 10 seconds and another color labels\n * every 60 seconds, the 60 second labels should be the secondaries.\n *\n * Note that if you override the default function, you\'ll almost\n * certainly want to override formatTimeCallback, primaryLabelInterval\n * and/or secondaryLabelInterval so they all work together.\n *\n * @param pxPerSec\n */</span>\n<span class="token keyword">function</span> <span class="token function">secondaryLabelInterval</span><span class="token punctuation">(</span><span class="token parameter">pxPerSec</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// draw one every 10s as an example</span>\n  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token function">timeInterval</span><span class="token punctuation">(</span>pxPerSec<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">WaveFormDivider</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>\n  <span class="token comment">// eslint-disable-line react/prefer-stateless-function</span>\n  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>\n    startTime<span class="token punctuation">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>\n    endTime<span class="token punctuation">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>\n    src<span class="token punctuation">:</span> <span class="token string">\'\'</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">static</span> initState <span class="token operator">=</span> <span class="token punctuation">{</span>\n    data<span class="token punctuation">:</span> <span class="token function">fromJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      zoom<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n      playing<span class="token punctuation">:</span> <span class="token boolean">false</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  state <span class="token operator">=</span> WaveFormDivider<span class="token punctuation">.</span>initState<span class="token punctuation">;</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> src <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    src <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initWaveSurfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">destroyWaveSurfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function-variable function">setImmState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>\n      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>\n        data<span class="token punctuation">:</span> <span class="token function">fn</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      cb\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">destroyWaveSurfer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>WaveFormDivider<span class="token punctuation">.</span>initState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">initWaveSurfer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> handleChangeStartEnd<span class="token punctuation">,</span> src<span class="token punctuation">,</span> startTime<span class="token punctuation">,</span> endTime <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer <span class="token operator">=</span> WaveSurfer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      container<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>waveForm<span class="token punctuation">,</span>\n      scrollParent<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      waveColor<span class="token punctuation">:</span> <span class="token string">\'#A8DBA8\'</span><span class="token punctuation">,</span>\n      progressColor<span class="token punctuation">:</span> <span class="token string">\'#3B8686\'</span><span class="token punctuation">,</span>\n      plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n        MinimapPlugin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        RegionsPlugin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n          dragSelection<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n            slop<span class="token punctuation">:</span> <span class="token number">5</span>\n          <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        TimelinePlugin<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n          container<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>waveTimeline<span class="token punctuation">,</span>\n          formatTimeCallback<span class="token punctuation">,</span>\n          timeInterval<span class="token punctuation">,</span>\n          primaryLabelInterval<span class="token punctuation">,</span>\n          secondaryLabelInterval<span class="token punctuation">,</span>\n          primaryColor<span class="token punctuation">:</span> <span class="token string">\'blue\'</span><span class="token punctuation">,</span>\n          secondaryColor<span class="token punctuation">:</span> <span class="token string">\'red\'</span><span class="token punctuation">,</span>\n          primaryFontColor<span class="token punctuation">:</span> <span class="token string">\'blue\'</span><span class="token punctuation">,</span>\n          secondaryFontColor<span class="token punctuation">:</span> <span class="token string">\'red\'</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span>\n      <span class="token punctuation">]</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'ready\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">zoom</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'zoom\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'playing\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      startTime <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> endTime <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addWaveFormRegion</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span> endTime<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'region-update-end\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> <span class="token punctuation">{</span> start<span class="token punctuation">,</span> end <span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>\n      handleChangeStartEnd <span class="token operator">&amp;&amp;</span> <span class="token function">handleChangeStartEnd</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'region-created\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">clearRegions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// this.waveSurfer.on(\'region-removed\', () => {</span>\n    <span class="token comment">//   handleChangeStartEnd &amp;&amp; handleChangeStartEnd(undefined, undefined);</span>\n    <span class="token comment">// });</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'pause\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setImmState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dat</span><span class="token punctuation">)</span> <span class="token operator">=></span> dat<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">\'playing\'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'play\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setImmState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dat</span><span class="token punctuation">)</span> <span class="token operator">=></span> dat<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">\'playing\'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'zoom\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setImmState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dat</span><span class="token punctuation">)</span> <span class="token operator">=></span> dat<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">\'zoom\'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'region-click\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">region<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>shiftKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        region<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        handleChangeStartEnd <span class="token operator">&amp;&amp;</span> <span class="token function">handleChangeStartEnd</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        region<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">addWaveFormRegion</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">addRegion</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      start<span class="token punctuation">,</span>\n      end<span class="token punctuation">,</span>\n      color<span class="token punctuation">:</span> <span class="token string">\'hsla(400, 100%, 30%, 0.5)\'</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">handleWaveFormZoom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> tmp <span class="token operator">=</span> value<span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      tmp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">></span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      tmp <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">zoom</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">handleWaveFormPlayOrPause</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> startTime<span class="token punctuation">,</span> endTime <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'playing\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>waveSurfer<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span> endTime<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n          <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span>waveForm <span class="token operator">=</span> r<span class="token punctuation">;</span>\n          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n          <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>waveForm<span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n          <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span>waveTimeline <span class="token operator">=</span> r<span class="token punctuation">;</span>\n          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>control<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>zoomContainer<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>minus-circle-o<span class="token punctuation">\'</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleWaveFormZoom</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'zoom\'</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Slider</span></span>\n              <span class="token attr-name">tipFormatter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span>\n              <span class="token attr-name">max</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span>\n              <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleWaveFormZoom</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n              <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'zoom\'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>\n            <span class="token punctuation">/></span></span><span class="token plain-text">\n            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Icon</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>plus-circle-o<span class="token punctuation">\'</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleWaveFormZoom</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'zoom\'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>playBtn<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">\'</span>primary<span class="token punctuation">\'</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleWaveFormPlayOrPause<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n            </span><span class="token punctuation">{</span>data<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'playing\'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">\'暂停\'</span> <span class="token punctuation">:</span> <span class="token string">\'播放\'</span><span class="token punctuation">}</span><span class="token plain-text">\n          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nWaveFormDivider<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>\n  src<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>\n  handleChangeStartEnd<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span>\n  startTime<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span>\n  endTime<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>number\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> WaveFormDivider<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="waveformdividerstylescss"><a href="#waveformdividerstylescss" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WaveFormDivider/styles.css</h2>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="89814627038334530000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`@import \'styles/vars.css\';\n\n.control {\n  text-align: center;\n}\n\n.zoomContainer {\n  position: relative;\n  padding: 0 30px;\n\n  :global {\n    .anticon {\n      position: absolute;\n      top: -2px;\n      width: 16px;\n      height: 16px;\n      line-height: 1;\n      font-size: 16px;\n      color: rgba(0, 0, 0, 0.25);\n      cursor: pointer;\n\n      &:hover {\n        color: var(--color-primary);\n      }\n    }\n\n    .anticon:first-child {\n      left: 0;\n    }\n\n    .anticon:last-child {\n      right: 0;\n    }\n  }\n}`, `89814627038334530000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                css 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">\'styles/vars.css\'</span><span class="token punctuation">;</span></span>\n\n<span class="token selector">.control</span> <span class="token punctuation">{</span>\n  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.zoomContainer</span> <span class="token punctuation">{</span>\n  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>\n  <span class="token property">padding</span><span class="token punctuation">:</span> 0 30px<span class="token selector">;\n\n  :global</span> <span class="token punctuation">{</span>\n    <span class="token selector">.anticon</span> <span class="token punctuation">{</span>\n      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>\n      <span class="token property">top</span><span class="token punctuation">:</span> -2px<span class="token punctuation">;</span>\n      <span class="token property">width</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n      <span class="token property">height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>\n      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>\n      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.25<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token selector">;\n\n      &amp;:hover</span> <span class="token punctuation">{</span>\n        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color-primary<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.anticon:first-child</span> <span class="token punctuation">{</span>\n      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token selector">.anticon:last-child</span> <span class="token punctuation">{</span>\n      <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="类似实现效果"><a href="#%E7%B1%BB%E4%BC%BC%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>类似实现效果</h1>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-02-13-21-04-20-af1dd3e56833318bd0edabddebf90dc2-370b5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 26.169265033407573%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA7ElEQVQY0z2O206DQBCGef8rLxr1LTRpoykv4IXetIZGoBJICzTA7BHYA7uLS0mcfPky82cu/mCeZzc7JejA2pHD2MNIG6PEmhvrhDYrcrJycmLxgjY28E/fZbnZ757D7VO4fdzvXj/eo9tXQs8nfDpCdGjTY5tG3e+ZlAVtMlKn6BJDUfE20FoDIcUly/M4LxJPlkVNe0UMY4Y6giqACjrvGkEN0DGGh6HjvJcyELwnmFPSe7jvTjw+6TFaoEA96L6jBc65UtJJYaS41/6fl8/rJkwe3uKfkvnTOrfmSikzGWvM7Jy3tV5G6+kPBjYVZAAEFH0AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 02 13 21 04 20"\n        title=""\n        src="/static/2019-02-13-21-04-20-af1dd3e56833318bd0edabddebf90dc2-fee1c.png"\n        srcset="/static/2019-02-13-21-04-20-af1dd3e56833318bd0edabddebf90dc2-a67b7.png 200w,\n/static/2019-02-13-21-04-20-af1dd3e56833318bd0edabddebf90dc2-0b187.png 400w,\n/static/2019-02-13-21-04-20-af1dd3e56833318bd0edabddebf90dc2-fee1c.png 800w,\n/static/2019-02-13-21-04-20-af1dd3e56833318bd0edabddebf90dc2-370b5.png 898w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>',
id:"/github/workspace/blog/基于wavesurfer.js声音波形图的研究/index.md absPath of file >>> MarkdownRemark",timeToRead:6,frontmatter:{date:"2019-02-13 20:39:46",path:"/wavesurfer-voice-wave-research/",tags:"前端, wavesurfer, 声音波形图, 预研",title:"基于wavesurfer.js声音波形图的研究",draft:null}},{excerpt:"需求背景 最近要做一个需求类似于富文本框的功能，需要输入带有 span 标签并显示，同时 span 标签是一个整体，只能同时输入同时删除，目前需求只有这一个 html 标签，暂时无其他标签 需求难点 placeholder 提示语 input 和 textarea 能轻松实现 placeholder 提示语的效果，但作用于 contenteditable 的元素，placeholder 不起作用，可以通过 css 的:empty 解决： 获取输入框的内容 可以利用 innerHTML…",html:'<h1 id="需求背景"><a href="#%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需求背景</h1>\n<p>最近要做一个需求类似于富文本框的功能，需要输入带有 span 标签并显示，同时 span 标签是一个整体，只能同时输入同时删除，目前需求只有这一个 html 标签，暂时无其他标签</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2018-11-26-09-42-43-6e232250eebef2695e175b9c1728f894-262af.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 517px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 76.40232108317214%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABcElEQVQoz6WRzU7CQBCA9018F+WCBxGsBylwNproCxjfQgmirTdPnvRigjQxUqIXw80ohkCMCUEEYpd2u9sdp638JMUE4pev23a6szO7JVsR0um0oiiapl/dmtflarFYTCaTqqpGZxI1QiaT3VQU8+FxtwL7Vaia94m1RDaXi84k6yMS4Q2rpDbiq3HjrnJgwqEJhmGsxGIpRcFPEwOIhv2hOopDgK4XTwov9cZOCfbKUK+/5vPHun6uRSDC8/q9PrVos9miQxsApMQBmIDtG98QCTMgnLuObTPmUGq5jHlCoFJwl4vTmjyrSYnvnIfxsRjBi7gCLEdSx7MChy6E4rPHBTodHEsZYCLBzI/2Z7vdabbeu1997Fl4v9rcV0xFxvolGRBcQ3gy2JT8Y2szwAw6SoZFmSRz4ZeUi8jDthnHs/GXmd9vBwY2OHhg8A+InBv/77qMMlFqyMtn+daTC1R2GBt0O62eu3wBS0ei8AQ/QIX1KtIumHEAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2018 11 26 09 42 43"\n        title=""\n        src="/static/2018-11-26-09-42-43-6e232250eebef2695e175b9c1728f894-262af.png"\n        srcset="/static/2018-11-26-09-42-43-6e232250eebef2695e175b9c1728f894-1499b.png 200w,\n/static/2018-11-26-09-42-43-6e232250eebef2695e175b9c1728f894-ea081.png 400w,\n/static/2018-11-26-09-42-43-6e232250eebef2695e175b9c1728f894-262af.png 517w"\n        sizes="(max-width: 517px) 100vw, 517px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2018-11-26-09-43-03-0442172c9f7cda8456f5c041925c2056-bb96f.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 512px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 59.1796875%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA2klEQVQoz5WSPY7CMBCFfTfuQUHPETgDJTegoUJoq+22oEKiJFWQoFliWYmNIY49PzjKIsGyWofRkxvP55l5HgEAZ2OstbKQ1l64dyCiCN6fvk9GV/s8V2VJzERpkohC8IJ+5xIgBUgLkYXzKJUulFGFXO7c+JMzSfHl2lMT/tO1IRGTtDY6jl2p9aGZbvhousYSnUewhfElj1J6hOnHBSa83yXDdXByvD91cRTdZsD35IEdtGf3Vf315Inov1KxTLuCoV5kPPrAydc7cPS1LCusz7MtD+YwXOENMGe/iP1tGC4AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2018 11 26 09 43 03"\n        title=""\n        src="/static/2018-11-26-09-43-03-0442172c9f7cda8456f5c041925c2056-bb96f.png"\n        srcset="/static/2018-11-26-09-43-03-0442172c9f7cda8456f5c041925c2056-7728b.png 200w,\n/static/2018-11-26-09-43-03-0442172c9f7cda8456f5c041925c2056-23f96.png 400w,\n/static/2018-11-26-09-43-03-0442172c9f7cda8456f5c041925c2056-bb96f.png 512w"\n        sizes="(max-width: 512px) 100vw, 512px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="需求难点"><a href="#%E9%9C%80%E6%B1%82%E9%9A%BE%E7%82%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需求难点</h1>\n<h2 id="placeholder-提示语"><a href="#placeholder-%E6%8F%90%E7%A4%BA%E8%AF%AD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>placeholder 提示语</h2>\n<p>input 和 textarea 能轻松实现 placeholder 提示语的效果，但作用于 contenteditable 的元素，placeholder 不起作用，可以通过 css 的:empty 解决：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="85568048074553560000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`[contenteditable=\'true\']:empty::before {\n  content: attr(placeholder);\n}`, `85568048074553560000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                css 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="css"><pre style="counter-reset: linenumber NaN" class="language-css line-numbers"><code class="language-css"><span class="token selector">[contenteditable=\'true\']:empty::before</span> <span class="token punctuation">{</span>\n  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token function">attr</span><span class="token punctuation">(</span>placeholder<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>\n<h2 id="获取输入框的内容"><a href="#%E8%8E%B7%E5%8F%96%E8%BE%93%E5%85%A5%E6%A1%86%E7%9A%84%E5%86%85%E5%AE%B9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>获取输入框的内容</h2>\n<p>可以利用 innerHTML、innerText、textContent 获取输入框的内容，详细对比介绍一下这几个方法：</p>\n<ol>\n<li>innerHTML 返回或修改标签之间的内容，包括标签和文本信息，基本上所有浏览器都支持。</li>\n<li>innerText 打印标签之间的纯文本信息，会将标签过滤掉,此功能最初由 Internet Explorer 引入，在 Firefox 上存在兼容问题。</li>\n</ol>\n<h3 id="innertext--textcontent"><a href="#innertext--textcontent" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>innerText !== textContent</h3>\n<p>innerText 和 textContent 均能获取标签的内容，但二者存在差别，使用的时候还需注意浏览器兼容性：</p>\n<ol>\n<li>textContent 会获取 style 元素里的文本（若有 script 元素也是这样），而 innerText 不会</li>\n<li>textContent 会保留空行、空格与换行符</li>\n<li>innerText 并不是标准，而 textContent 更早被纳入标准中</li>\n<li>innerText 会忽略 display: none 标签内的内容，textContent 则不会</li>\n<li>性能上 textContent > innerText</li>\n</ol>\n<h2 id="光标的位置"><a href="#%E5%85%89%E6%A0%87%E7%9A%84%E4%BD%8D%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>光标的位置</h2>\n<p>首先遇到的一个问题是利用上述方法实现 placeholder 后，输入框的光标在 Firefox 中的位置会比其它浏览器要高一截。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2018-11-26-09-37-29-8ad3cfaf5af4a8082cd2deccd1bcab8e-38753.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 665px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 14.73684210526316%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAQklEQVQI15XNwQ0AIQhEUfoviAboxIXIxQ0cV4NICe47z88AESFiezgzI2Jfqz2YGbOM8VY557pXPYiIdnX376c6O9FlreVw/XlNAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2018 11 26 09 37 29"\n        title=""\n        src="/static/2018-11-26-09-37-29-8ad3cfaf5af4a8082cd2deccd1bcab8e-38753.png"\n        srcset="/static/2018-11-26-09-37-29-8ad3cfaf5af4a8082cd2deccd1bcab8e-a480d.png 200w,\n/static/2018-11-26-09-37-29-8ad3cfaf5af4a8082cd2deccd1bcab8e-4026e.png 400w,\n/static/2018-11-26-09-37-29-8ad3cfaf5af4a8082cd2deccd1bcab8e-38753.png 665w"\n        sizes="(max-width: 665px) 100vw, 665px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>尝试了很多方法来解决均无果，最终发现默认放置 <code class="language-text">&lt;\\br&gt;</code> 标签后，光标位置正常了。</p>\n<h3 id="受控组件下光标每次输入跳到文本开头"><a href="#%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6%E4%B8%8B%E5%85%89%E6%A0%87%E6%AF%8F%E6%AC%A1%E8%BE%93%E5%85%A5%E8%B7%B3%E5%88%B0%E6%96%87%E6%9C%AC%E5%BC%80%E5%A4%B4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>受控组件下光标每次输入跳到文本开头</h3>\n<p>另一个需求是输入文本时，在 react 富文本组件受控（即 setState) 的影响下，光标每次输入会跳到文本开头，而非受控组件不会出现此问题，但是需求原因，非受控组件是 react 的一种反模式，同时也会影响到组件的取值赋值过程不好同步，解决办法是只能自己控制光标的位置，实现受控组件</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6297015290201724000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function isChildOf(node, parentId) {\n  while (node !== null) {\n    if (node.id === parentId) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n\n  return false;\n}\n\nfunction getCurrentCursorPosition(parentId) {\n  const selection = window.getSelection();\n  let charCount = -1;\n  let node;\n\n  if (selection.focusNode) {\n    if (isChildOf(selection.focusNode, parentId)) {\n      node = selection.focusNode;\n      charCount = selection.focusOffset;\n      while (node) {\n        if (node.id === parentId) {\n          break;\n        }\n\n        if (node.previousSibling) {\n          node = node.previousSibling;\n          charCount += node.textContent.length;\n        } else {\n          node = node.parentNode;\n          if (node === null) {\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  return charCount;\n}\n\nfunction createRange(node, chars, range) {\n  if (!range) {\n    range = document.createRange();\n    range.selectNode(node);\n    range.setStart(node, 0);\n  }\n\n  if (chars.count === 0) {\n    range.setEnd(node, chars.count);\n  } else if (node && chars.count > 0) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      if (node.textContent.length < chars.count) {\n        chars.count -= node.textContent.length;\n      } else {\n        range.setEnd(node, chars.count);\n        chars.count = 0;\n      }\n    } else {\n      for (let lp = 0; lp < node.childNodes.length; lp++) {\n        range = createRange(node.childNodes[lp], chars, range);\n\n        if (chars.count === 0) {\n          break;\n        }\n      }\n    }\n  }\n\n  return range;\n}\n\nfunction setCurrentCursorPosition(that, chars, node) {\n  if (chars >= 0) {\n    const selection = window.getSelection();\n\n    const range = createRange(that, { count: chars }, node);\n\n    if (range) {\n      range.collapse(false);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n}`, `6297015290201724000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">isChildOf</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> parentId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>id <span class="token operator">===</span> parentId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    node <span class="token operator">=</span> node<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">getCurrentCursorPosition</span><span class="token punctuation">(</span><span class="token parameter">parentId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> selection <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">let</span> charCount <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n  <span class="token keyword">let</span> node<span class="token punctuation">;</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>selection<span class="token punctuation">.</span>focusNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isChildOf</span><span class="token punctuation">(</span>selection<span class="token punctuation">.</span>focusNode<span class="token punctuation">,</span> parentId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      node <span class="token operator">=</span> selection<span class="token punctuation">.</span>focusNode<span class="token punctuation">;</span>\n      charCount <span class="token operator">=</span> selection<span class="token punctuation">.</span>focusOffset<span class="token punctuation">;</span>\n      <span class="token keyword">while</span> <span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>id <span class="token operator">===</span> parentId<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">break</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>previousSibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          node <span class="token operator">=</span> node<span class="token punctuation">.</span>previousSibling<span class="token punctuation">;</span>\n          charCount <span class="token operator">+=</span> node<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n          node <span class="token operator">=</span> node<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>\n          <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">break</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> charCount<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">createRange</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> chars<span class="token punctuation">,</span> range</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>range<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    range<span class="token punctuation">.</span><span class="token function">selectNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    range<span class="token punctuation">.</span><span class="token function">setStart</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>chars<span class="token punctuation">.</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    range<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> chars<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> chars<span class="token punctuation">.</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> Node<span class="token punctuation">.</span><span class="token constant">TEXT_NODE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> chars<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        chars<span class="token punctuation">.</span>count <span class="token operator">-=</span> node<span class="token punctuation">.</span>textContent<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        range<span class="token punctuation">.</span><span class="token function">setEnd</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> chars<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        chars<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> lp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> lp <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> lp<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        range <span class="token operator">=</span> <span class="token function">createRange</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>lp<span class="token punctuation">]</span><span class="token punctuation">,</span> chars<span class="token punctuation">,</span> range<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>chars<span class="token punctuation">.</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">break</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> range<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">setCurrentCursorPosition</span><span class="token punctuation">(</span><span class="token parameter">that<span class="token punctuation">,</span> chars<span class="token punctuation">,</span> node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>chars <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> selection <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> range <span class="token operator">=</span> <span class="token function">createRange</span><span class="token punctuation">(</span>that<span class="token punctuation">,</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> chars <span class="token punctuation">}</span><span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>range<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      range<span class="token punctuation">.</span><span class="token function">collapse</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      selection<span class="token punctuation">.</span><span class="token function">removeAllRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      selection<span class="token punctuation">.</span><span class="token function">addRange</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>具体用法是先得到富文本框之前的光标位置，然后在 setState 之后恢复光标的位置</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44304857257263850000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`const lastRange = getCurrentCursorPosition(this.id);\nthis.setState(innerHTML, () => {\n  const that = document.getElementById(this.id);\n  setCurrentCursorPosition(that, lastRange);\n});`, `44304857257263850000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> lastRange <span class="token operator">=</span> <span class="token function">getCurrentCursorPosition</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>innerHTML<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> that <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">setCurrentCursorPosition</span><span class="token punctuation">(</span>that<span class="token punctuation">,</span> lastRange<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="删除遇到-span-时光标跳到文本开头"><a href="#%E5%88%A0%E9%99%A4%E9%81%87%E5%88%B0-span-%E6%97%B6%E5%85%89%E6%A0%87%E8%B7%B3%E5%88%B0%E6%96%87%E6%9C%AC%E5%BC%80%E5%A4%B4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>删除遇到 span 时光标跳到文本开头</h3>\n<p>接着又遇到一个坑，因为想实现的是整体删除 span，所以设置了 contenteditable 属性为 false，在删除光标遇到带有 span 标签的字符时，光标也会跳到不正确的位置</p>\n<p>经过一步步的调试，发现取出函数 getCurrentCursorPosition 的光标位置是不对的，它取出的是在 span 内部光标的位置，比如说<code class="language-text">3233&lt;span&gt; 我是 &lt;/span&gt;</code>，此时取出的光标位置值为 2，而不是 6，考虑到修改 getCurrentCursorPosition 会影响之前的 bug，所以只能在删除遇到标签时做下特殊处理，在遇到 span 标签删除后，光标强制移到文本最后</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55481025250367200000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function selectAllText(elem) {\n  // 将光标移到文本末尾\n  if (window.getSelection) {\n    elem.focus();\n    const range = window.getSelection();\n    range.selectAllChildren(elem);\n    range.collapseToEnd();\n  } else if (document.selection) {\n    const range = document.selection.createTextRange();\n    range.moveToElementText(elem);\n    range.collapse(false);\n    range.select(); /* 避免产生空格*/\n  }\n}\n\nconst selection = window.getSelection();\nif (selection.focusNode.id === this.id) {\n  // 焦点在 span 内部，即光标遇到 span 标签\n  this.props.onChange(innerHTML, () => {\n    const that = document.getElementById(this.id);\n    selectAllText(that);\n  });\n  return;\n}`, `55481025250367200000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">selectAllText</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 将光标移到文本末尾</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>getSelection<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    elem<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> range <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    range<span class="token punctuation">.</span><span class="token function">selectAllChildren</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    range<span class="token punctuation">.</span><span class="token function">collapseToEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>selection<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">createTextRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    range<span class="token punctuation">.</span><span class="token function">moveToElementText</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    range<span class="token punctuation">.</span><span class="token function">collapse</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    range<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* 避免产生空格*/</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> selection <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>selection<span class="token punctuation">.</span>focusNode<span class="token punctuation">.</span>id <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// 焦点在 span 内部，即光标遇到 span 标签</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span>innerHTML<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> that <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">selectAllText</span><span class="token punctuation">(</span>that<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="中文输入法会将英文字符一起输入"><a href="#%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95%E4%BC%9A%E5%B0%86%E8%8B%B1%E6%96%87%E5%AD%97%E7%AC%A6%E4%B8%80%E8%B5%B7%E8%BE%93%E5%85%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>中文输入法会将英文字符一起输入</h2>\n<p>在输入中文字符时，会将英文字符一起输入，解决办法是触发相应事件给一个标志变量，判断中文输入是否已完成</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2018-11-26-10-07-29-b4670c1a79f7577f8ffd3da66e1b49e8-262af.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 517px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 58.027079303675045%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZElEQVQoz41SS07DMBDNDRFrbgAHYM8NOAQLpIoFK1ixAMQKNkhVVQRqq7YpIXGaxPFvxjPYCXQBSGT0Ir1x/OyZN05KIaqq3qRpWZY8OBCRiJI8F8W2WS2XQuRI7DD8Iib6RwwQxbtdkUQNoWcgNkAWyCG5jvTp1woSIEfx+ZgOLvlhZtpGntzR8Q2noi1EZSxaZGVZOdbIznNIDXQp8FbHGpP7JZ8+8lvhyOnRhM7GLFv1MltPN22rXSwIjJVyXVrRWGOB2QcARiThmB8R6ilr9zpZy/kqVJvXZpXLWWGf13pRWgM+k7jVGEgSyghNUtcteMZoliejucj4PTXGZRIKhRZw00DWgLL4ISGgMZhUOnaif0F51tG22Bt03cI3CZdJEy1Iwvc3ensjiYLerR4qnO7iZJJuRgOxmyl1zoQ5dy9iCFqlvVFPKR1d+8MrP6/izUOjbqRrq9uF37/weyM/FfwJXsW31yUTGZIAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2018 11 26 10 07 29"\n        title=""\n        src="/static/2018-11-26-10-07-29-b4670c1a79f7577f8ffd3da66e1b49e8-262af.png"\n        srcset="/static/2018-11-26-10-07-29-b4670c1a79f7577f8ffd3da66e1b49e8-1499b.png 200w,\n/static/2018-11-26-10-07-29-b4670c1a79f7577f8ffd3da66e1b49e8-ea081.png 400w,\n/static/2018-11-26-10-07-29-b4670c1a79f7577f8ffd3da66e1b49e8-262af.png 517w"\n        sizes="(max-width: 517px) 100vw, 517px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="35715642588620165000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<html>\n  <script>\n    handlingComposition = () => {\n      this.isCompositionEnd = false;\n    };\n\n    handleComposition = (e) => {\n      this.isCompositionEnd = true;\n      // 以下是解决中文字符在文本框末尾时不赋值的 bug\n      this.setState(e.target.innerHTML, () => {\n        const that = document.getElementById(this.id);\n        selectAllText(that); // 光标跳转到最后\n      });\n    };\n\n    emitChange = (e) => {\n      if (!this.isCompositionEnd) {\n        return; // 直接跳过，不赋值\n      }\n    };\n  </script>\n  <div\n    contenteditable\n    onInput=&quot;{this.emitChange}&quot;\n    onCompositionStart=&quot;{this.handlingComposition}&quot;\n    onCompositionUpdate=&quot;{this.handlingComposition}&quot;\n    onCompositionEnd=&quot;{this.handleComposition}&quot;\n  />\n</html>`, `35715642588620165000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                html 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">\n    <span class="token function-variable function">handlingComposition</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>isCompositionEnd <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function-variable function">handleComposition</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>isCompositionEnd <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n      <span class="token comment">// 以下是解决中文字符在文本框末尾时不赋值的 bug</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>innerHTML<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> that <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token function">selectAllText</span><span class="token punctuation">(</span>that<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 光标跳转到最后</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n    <span class="token function-variable function">emitChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isCompositionEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 直接跳过，不赋值</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n    <span class="token attr-name">contenteditable</span>\n    <span class="token attr-name">onInput</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{this.emitChange}<span class="token punctuation">"</span></span>\n    <span class="token attr-name">onCompositionStart</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{this.handlingComposition}<span class="token punctuation">"</span></span>\n    <span class="token attr-name">onCompositionUpdate</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{this.handlingComposition}<span class="token punctuation">"</span></span>\n    <span class="token attr-name">onCompositionEnd</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{this.handleComposition}<span class="token punctuation">"</span></span>\n  <span class="token punctuation">/></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>暂时遇到这么多问题，以后遇到 bug 再更新</p>\n<p>以上更新于<code class="language-text">2018-11-26 08:55:56</code></p>\n<hr>\n<h1 id="最终解决方案-draft-js"><a href="#%E6%9C%80%E7%BB%88%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-draft-js" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>最终解决方案 draft-js</h1>\n<h2 id="代码注释"><a href="#%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>代码注释</h2>\n<p>以上方法有很多未知的 bug，比较明显的问题就是光标会到处乱跑，自己解决起来有太多的坑，故采用业界比较成熟的 <a href="https://github.com/draft-js-plugins/draft-js-plugins" target="_blank" rel="nofollow noreferrer noopener">draft-js-plugins</a>，底层采用 facebook 的开源库 <a href="https://github.com/facebook/draft-js" target="_blank" rel="nofollow noreferrer noopener">draft-js</a>，期间也遇到不少问题，详见代码注释</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="75976849597128310000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import React from \'react\';\nimport PropTypes from \'prop-types\';\nimport { EditorState } from \'draft-js\';\nimport { convertFromHTML, convertToHTML } from \'draft-convert\';\nimport classnames from \'classnames\';\nimport Editor from \'draft-js-plugins-editor\';\nimport createMentionPlugin, { defaultSuggestionsFilter, defaultTheme } from \'draft-js-mention-plugin\';\nimport \'draft-js-mention-plugin/lib/plugin.css\';\nimport utils from \'utils\';\n\nimport styles from \'./styles.css\';\n// 为了解决ie9下parseFromString(\'\', \'text/html\')的报错\nimport \'./DomParserPloyfill\';\n\nclass GraphHintTextArea extends React.PureComponent {\n  // eslint-disable-line react/prefer-stateless-function\n  constructor(props) {\n    super(props);\n    let theme = {\n      ...defaultTheme,\n      mention: styles.mention\n    };\n    const browser = utils.getBrowserInfo();\n    if (browser.name === \'msie\' && browser.version === \'9\') {\n      theme = {\n        ...defaultTheme,\n        mention: styles.mention,\n        mentionSuggestions: styles.mentionSuggestions\n      };\n    }\n    // 设置mention标签的可变性、触发字符、样式\n    this.mentionPlugin = createMentionPlugin({\n      entityMutability: \'IMMUTABLE\',\n      mentionTrigger: \'\\$\',\n      theme\n    });\n\n    const { value } = this.props;\n    const contentState = convertFromHTML({\n      // 遇到class带有mention的标签进行实体的不可变转化，此时mention即话术变量标签是一体的\n      // 删除只能整个删除，添加也将转化为普通字符\n      // eslint-disable-next-line consistent-return\n      htmlToEntity: (nodeName, node, createEntity) => {\n        if (nodeName === \'span\' && node.className === \'mention\') {\n          const name = node.innerText || \'\';\n          return createEntity(\'\\$mention\', \'IMMUTABLE\', {\n            mention: {\n              name,\n              _id: node.id\n            }\n          });\n        }\n      }\n    })(value);\n\n    this.state = {\n      editorState: EditorState.createWithContent(contentState),\n      suggestions: []\n    };\n  }\n\n  // componentDidMount = () => {\n  //   this.focus();\n  // }\n\n  // https://github.com/facebook/draft-js/issues/1198\n  // 因为此处最开始打算使用componentWillReceiveProps，但在和onChange一起作用时，\n  // 导致多次执行，光标跳到行首，只能采用非受控组件的方式手动调用\n  setEditorContent(text) {\n    const contentState = convertFromHTML({\n      // eslint-disable-next-line consistent-return\n      htmlToEntity: (nodeName, node, createEntity) => {\n        if (nodeName === \'span\' && node.className === \'mention\') {\n          const name = node.innerText || \'\';\n          return createEntity(\'\\$mention\', \'IMMUTABLE\', {\n            mention: {\n              name,\n              _id: node.id\n            }\n          });\n        }\n      }\n    })(text);\n    const { editorState } = this.state;\n    // 这里必须用push方法，不然会导致编辑器提示框不能弹出\n    // https://github.com/draft-js-plugins/draft-js-plugins/issues/210\n    const newEditorState = EditorState.push(editorState, contentState);\n    this.setState({\n      editorState: newEditorState\n    });\n  }\n\n  // https://github.com/draft-js-plugins/draft-js-plugins/issues/800\n  // 不能直接调用focus，否则会造成draft-js-mention-plugin的失效\n  // focus = () => {\n  //   setTimeout(() => {\n  //     this.editor.focus();\n  //   }, 0);\n  // }\n\n  handleChange = (editorState) => {\n    const contentState = editorState.getCurrentContent();\n    const pureText = this.convertToPureText(contentState);\n    // 暂时不能阻挡非受控组件的输入\n    // const { maxLength } = this.props;\n    // if (pureText.length > maxLength) {\n    //   return;\n    // }\n    this.setState(\n      {\n        editorState\n      },\n      () => {\n        this.triggerChange(contentState, pureText);\n      }\n    );\n  };\n\n  handleSearchChange = ({ value }) => {\n    const { hints } = this.props;\n    this.setState({\n      suggestions: defaultSuggestionsFilter(value, hints)\n    });\n  };\n\n  // 这里是转成看到标签的效果，目的是得到实际字符\n  convertToPureText = (contentState) => {\n    let htmlToPureText = convertToHTML({\n      // eslint-disable-next-line consistent-return\n      blockToHTML: (data) => {\n        const { type } = data;\n        if (type === \'unstyled\') {\n          return {\n            start: \'\',\n            end: \'\',\n            empty: \'\'\n          };\n        }\n      }\n    })(contentState);\n    htmlToPureText = htmlToPureText.replace(/<\\/?.+?\\/?>|\\s+/g, \'\');\n    return htmlToPureText;\n  };\n\n  // 这里是转成要传给后端的效果\n  triggerChange = (contentState, pureText) => {\n    const { onChange } = this.props;\n    let html = convertToHTML({\n      // 将遇到的实体标签转化为\\${id}，以便后端进行处理\n      entityToHTML: (entity, originalText) => {\n        if (entity.type === \'\\$mention\') {\n          return \\`\\$\\{\\${entity.data.mention._id}}\\`;\n        }\n        return originalText;\n      },\n      // 语音合成需求要求，去除所有换行，即所有无用标签p，否则会读出标签p\n      // https://github.com/HubSpot/draft-convert/issues/59\n      // eslint-disable-next-line consistent-return\n      blockToHTML: (data) => {\n        const { type } = data;\n        if (type === \'unstyled\') {\n          return {\n            start: \'\',\n            end: \'\',\n            // empty属性代表所有换行都去掉，而不是转为空格\n            empty: \'\'\n          };\n        }\n      }\n    })(contentState);\n    // 语音合成需求要求，去掉所有空白字符（包含空格、制表符、换页符）和html标签（包含<div class=&quot;test&quot;></div>、<img />、<My-Tag></My-Tag>这几种）\n    html = html.replace(/<\\/?.+?\\/?>|\\s+/g, \'\');\n    if (typeof onChange === \'function\') {\n      onChange(html, pureText);\n    }\n    return html;\n  };\n\n  handleFocus = () => {\n    const { onFocus } = this.props;\n    if (typeof onFocus === \'function\') {\n      onFocus();\n    }\n  };\n\n  handleBlur = () => {\n    const { onBlur } = this.props;\n    if (typeof onBlur === \'function\') {\n      onBlur();\n    }\n  };\n\n  render() {\n    const { placeholder, className } = this.props;\n    const { MentionSuggestions } = this.mentionPlugin;\n    const plugins = [this.mentionPlugin];\n    return (\n      <div className={classnames(styles.editor, className)}>\n        <Editor\n          editorState={this.state.editorState}\n          onChange={this.handleChange}\n          plugins={plugins}\n          placeholder={placeholder}\n          onFocus={this.handleFocus}\n          onBlur={this.handleBlur}\n          ref={(r) => {\n            this.editor = r;\n          }}\n        />\n        <MentionSuggestions onSearchChange={this.handleSearchChange} suggestions={this.state.suggestions} />\n      </div>\n    );\n  }\n}\n\nGraphHintTextArea.propTypes = {\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  value: PropTypes.string,\n  hints: PropTypes.array,\n  className: PropTypes.string,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func\n};\n\nexport default GraphHintTextArea;`, `75976849597128310000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx{12-13,23-29} 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">\'prop-types\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> EditorState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'draft-js\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> convertFromHTML<span class="token punctuation">,</span> convertToHTML <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'draft-convert\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> classnames <span class="token keyword">from</span> <span class="token string">\'classnames\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> Editor <span class="token keyword">from</span> <span class="token string">\'draft-js-plugins-editor\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> createMentionPlugin<span class="token punctuation">,</span> <span class="token punctuation">{</span> defaultSuggestionsFilter<span class="token punctuation">,</span> defaultTheme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'draft-js-mention-plugin\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token string">\'draft-js-mention-plugin/lib/plugin.css\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> utils <span class="token keyword">from</span> <span class="token string">\'utils\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">\'./styles.css\'</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line"><span class="token comment">// 为了解决ie9下parseFromString(\'\', \'text/html\')的报错</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">import</span> <span class="token string">\'./DomParserPloyfill\'</span><span class="token punctuation">;</span></span>\n<span class="token keyword">class</span> <span class="token class-name">GraphHintTextArea</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>\n  <span class="token comment">// eslint-disable-line react/prefer-stateless-function</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> theme <span class="token operator">=</span> <span class="token punctuation">{</span>\n      <span class="token operator">...</span>defaultTheme<span class="token punctuation">,</span>\n      mention<span class="token punctuation">:</span> styles<span class="token punctuation">.</span>mention\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> browser <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">getBrowserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>browser<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">\'msie\'</span> <span class="token operator">&amp;&amp;</span> browser<span class="token punctuation">.</span>version <span class="token operator">===</span> <span class="token string">\'9\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      theme <span class="token operator">=</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">        <span class="token operator">...</span>defaultTheme<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">        mention<span class="token punctuation">:</span> styles<span class="token punctuation">.</span>mention<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">        mentionSuggestions<span class="token punctuation">:</span> styles<span class="token punctuation">.</span>mentionSuggestions</span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span>\n    <span class="token comment">// 设置mention标签的可变性、触发字符、样式</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>mentionPlugin <span class="token operator">=</span> <span class="token function">createMentionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      entityMutability<span class="token punctuation">:</span> <span class="token string">\'IMMUTABLE\'</span><span class="token punctuation">,</span>\n      mentionTrigger<span class="token punctuation">:</span> <span class="token string">\'$\'</span><span class="token punctuation">,</span>\n      theme\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">const</span> contentState <span class="token operator">=</span> <span class="token function">convertFromHTML</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token comment">// 遇到class带有mention的标签进行实体的不可变转化，此时mention即话术变量标签是一体的</span>\n      <span class="token comment">// 删除只能整个删除，添加也将转化为普通字符</span>\n      <span class="token comment">// eslint-disable-next-line consistent-return</span>\n      <span class="token function-variable function">htmlToEntity</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">nodeName<span class="token punctuation">,</span> node<span class="token punctuation">,</span> createEntity</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>nodeName <span class="token operator">===</span> <span class="token string">\'span\'</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">\'mention\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">const</span> name <span class="token operator">=</span> node<span class="token punctuation">.</span>innerText <span class="token operator">||</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n          <span class="token keyword">return</span> <span class="token function">createEntity</span><span class="token punctuation">(</span><span class="token string">\'$mention\'</span><span class="token punctuation">,</span> <span class="token string">\'IMMUTABLE\'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n            mention<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n              name<span class="token punctuation">,</span>\n              _id<span class="token punctuation">:</span> node<span class="token punctuation">.</span>id\n            <span class="token punctuation">}</span>\n          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>\n      editorState<span class="token punctuation">:</span> EditorState<span class="token punctuation">.</span><span class="token function">createWithContent</span><span class="token punctuation">(</span>contentState<span class="token punctuation">)</span><span class="token punctuation">,</span>\n      suggestions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// componentDidMount = () => {</span>\n  <span class="token comment">//   this.focus();</span>\n  <span class="token comment">// }</span>\n\n  <span class="token comment">// https://github.com/facebook/draft-js/issues/1198</span>\n  <span class="token comment">// 因为此处最开始打算使用componentWillReceiveProps，但在和onChange一起作用时，</span>\n  <span class="token comment">// 导致多次执行，光标跳到行首，只能采用非受控组件的方式手动调用</span>\n  <span class="token function">setEditorContent</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> contentState <span class="token operator">=</span> <span class="token function">convertFromHTML</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token comment">// eslint-disable-next-line consistent-return</span>\n      <span class="token function-variable function">htmlToEntity</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">nodeName<span class="token punctuation">,</span> node<span class="token punctuation">,</span> createEntity</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>nodeName <span class="token operator">===</span> <span class="token string">\'span\'</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">\'mention\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">const</span> name <span class="token operator">=</span> node<span class="token punctuation">.</span>innerText <span class="token operator">||</span> <span class="token string">\'\'</span><span class="token punctuation">;</span>\n          <span class="token keyword">return</span> <span class="token function">createEntity</span><span class="token punctuation">(</span><span class="token string">\'$mention\'</span><span class="token punctuation">,</span> <span class="token string">\'IMMUTABLE\'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n            mention<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n              name<span class="token punctuation">,</span>\n              _id<span class="token punctuation">:</span> node<span class="token punctuation">.</span>id\n            <span class="token punctuation">}</span>\n          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> editorState <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n    <span class="token comment">// 这里必须用push方法，不然会导致编辑器提示框不能弹出</span>\n    <span class="token comment">// https://github.com/draft-js-plugins/draft-js-plugins/issues/210</span>\n    <span class="token keyword">const</span> newEditorState <span class="token operator">=</span> EditorState<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>editorState<span class="token punctuation">,</span> contentState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      editorState<span class="token punctuation">:</span> newEditorState\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// https://github.com/draft-js-plugins/draft-js-plugins/issues/800</span>\n  <span class="token comment">// 不能直接调用focus，否则会造成draft-js-mention-plugin的失效</span>\n  <span class="token comment">// focus = () => {</span>\n  <span class="token comment">//   setTimeout(() => {</span>\n  <span class="token comment">//     this.editor.focus();</span>\n  <span class="token comment">//   }, 0);</span>\n  <span class="token comment">// }</span>\n\n  <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">editorState</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> contentState <span class="token operator">=</span> editorState<span class="token punctuation">.</span><span class="token function">getCurrentContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> pureText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">convertToPureText</span><span class="token punctuation">(</span>contentState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 暂时不能阻挡非受控组件的输入</span>\n    <span class="token comment">// const { maxLength } = this.props;</span>\n    <span class="token comment">// if (pureText.length > maxLength) {</span>\n    <span class="token comment">//   return;</span>\n    <span class="token comment">// }</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>\n      <span class="token punctuation">{</span>\n        editorState\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerChange</span><span class="token punctuation">(</span>contentState<span class="token punctuation">,</span> pureText<span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">handleSearchChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> hints <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      suggestions<span class="token punctuation">:</span> <span class="token function">defaultSuggestionsFilter</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> hints<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 这里是转成看到标签的效果，目的是得到实际字符</span>\n  <span class="token function-variable function">convertToPureText</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">contentState</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> htmlToPureText <span class="token operator">=</span> <span class="token function">convertToHTML</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token comment">// eslint-disable-next-line consistent-return</span>\n      <span class="token function-variable function">blockToHTML</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">\'unstyled\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token punctuation">{</span>\n            start<span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span>\n            end<span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span>\n            empty<span class="token punctuation">:</span> <span class="token string">\'\'</span>\n          <span class="token punctuation">}</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>contentState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    htmlToPureText <span class="token operator">=</span> htmlToPureText<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&lt;\\/?.+?\\/?>|\\s+/g</span><span class="token punctuation">,</span> <span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> htmlToPureText<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 这里是转成要传给后端的效果</span>\n  <span class="token function-variable function">triggerChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">contentState<span class="token punctuation">,</span> pureText</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> onChange <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">let</span> html <span class="token operator">=</span> <span class="token function">convertToHTML</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token comment">// 将遇到的实体标签转化为${id}，以便后端进行处理</span>\n      <span class="token function-variable function">entityToHTML</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">entity<span class="token punctuation">,</span> originalText</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>entity<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">\'$mention\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$\\{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entity<span class="token punctuation">.</span>data<span class="token punctuation">.</span>mention<span class="token punctuation">.</span>_id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">return</span> originalText<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token comment">// 语音合成需求要求，去除所有换行，即所有无用标签p，否则会读出标签p</span>\n      <span class="token comment">// https://github.com/HubSpot/draft-convert/issues/59</span>\n      <span class="token comment">// eslint-disable-next-line consistent-return</span>\n      <span class="token function-variable function">blockToHTML</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">\'unstyled\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">return</span> <span class="token punctuation">{</span>\n            start<span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span>\n            end<span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span>\n            <span class="token comment">// empty属性代表所有换行都去掉，而不是转为空格</span>\n            empty<span class="token punctuation">:</span> <span class="token string">\'\'</span>\n          <span class="token punctuation">}</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>contentState<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 语音合成需求要求，去掉所有空白字符（包含空格、制表符、换页符）和html标签（包含&lt;div class="test">&lt;/div>、&lt;img />、&lt;My-Tag>&lt;/My-Tag>这几种）</span>\n    html <span class="token operator">=</span> html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&lt;\\/?.+?\\/?>|\\s+/g</span><span class="token punctuation">,</span> <span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onChange <span class="token operator">===</span> <span class="token string">\'function\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">onChange</span><span class="token punctuation">(</span>html<span class="token punctuation">,</span> pureText<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> html<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">handleFocus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> onFocus <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onFocus <span class="token operator">===</span> <span class="token string">\'function\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">onFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">handleBlur</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> onBlur <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onBlur <span class="token operator">===</span> <span class="token string">\'function\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token function">onBlur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> placeholder<span class="token punctuation">,</span> className <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> MentionSuggestions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mentionPlugin<span class="token punctuation">;</span>\n    <span class="token keyword">const</span> plugins <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>mentionPlugin<span class="token punctuation">]</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classnames</span><span class="token punctuation">(</span>styles<span class="token punctuation">.</span>editor<span class="token punctuation">,</span> className<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Editor</span></span>\n          <span class="token attr-name">editorState</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>editorState<span class="token punctuation">}</span></span>\n          <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span></span>\n          <span class="token attr-name">plugins</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>plugins<span class="token punctuation">}</span></span>\n          <span class="token attr-name">placeholder</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>placeholder<span class="token punctuation">}</span></span>\n          <span class="token attr-name">onFocus</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleFocus<span class="token punctuation">}</span></span>\n          <span class="token attr-name">onBlur</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleBlur<span class="token punctuation">}</span></span>\n          <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token keyword">this</span><span class="token punctuation">.</span>editor <span class="token operator">=</span> r<span class="token punctuation">;</span>\n          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n        <span class="token punctuation">/></span></span><span class="token plain-text"></span>\n<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MentionSuggestions</span></span> <span class="token attr-name">onSearchChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSearchChange<span class="token punctuation">}</span></span> <span class="token attr-name">suggestions</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>suggestions<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span>\n<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\nGraphHintTextArea<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>\n  placeholder<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>\n  onChange<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span>\n  value<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>\n  hints<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>array<span class="token punctuation">,</span>\n  className<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>\n  onFocus<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span>\n  onBlur<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> GraphHintTextArea<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>效果如下：</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-02-13-20-25-26-c7c9f642535351288665d3e4f1a6baa7-91452.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 521px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 61.42034548944337%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOUlEQVQoz42SS1LDMAyGcySOwe1Ys2HZy3TFY90FTV9JhySOI/kp8SfpQGlhqEbj0dj6ZP2yCyZqmqZr2+1m23ZGVUVE/7M8WUFEXdP2nTkc9r21N8NphJk5qUbRLJqy+CQu3uAJ+VKYwVXVx7Gu3xtZllq2yTGhUEwoLueO7DzdMZ5mBT/CIaYYg49qvbKPgL33+cJQK8XvtkX9DE8STzpRprcDMc8ZoifHtSGEP+F5JR9XlX1d7VYV7axujGx7hSOwfAV3g0ujjJMetF23tD40R+NsUOOk9wpHAH1zjnxpJnY+owzmrC4CDsxUV3uiYeonz40jIBcAwAnTiSNfOOfOHxCasQN5WPmn4ejitQsM9voPiPzyUzDy4B2F/PSiD0t9q6G568C7G8yYfleu13V/v+C7x2HxzJ+1K7veUJ4W1gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 02 13 20 25 26"\n        title=""\n        src="/static/2019-02-13-20-25-26-c7c9f642535351288665d3e4f1a6baa7-91452.png"\n        srcset="/static/2019-02-13-20-25-26-c7c9f642535351288665d3e4f1a6baa7-e8fc4.png 200w,\n/static/2019-02-13-20-25-26-c7c9f642535351288665d3e4f1a6baa7-c0ace.png 400w,\n/static/2019-02-13-20-25-26-c7c9f642535351288665d3e4f1a6baa7-91452.png 521w"\n        sizes="(max-width: 521px) 100vw, 521px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="兼容性问题"><a href="#%E5%85%BC%E5%AE%B9%E6%80%A7%E9%97%AE%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>兼容性问题</h2>\n<p>这里遇到两个兼容性问题，如以上代码高亮部分</p>\n<ul>\n<li>在 IE9 下 draft-js 源码里面的 <code class="language-text">parseFromString(&#39;&#39;, &#39;text/html&#39;)</code> 会报错，引入一段兼容代码如下</li>\n</ul>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="87558097078318190000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`/*\n * DOMParser HTML extension\n * 2012-09-04\n *\n * By Eli Grey, http://eligrey.com\n * Public domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\n/*! @source https://gist.github.com/1129031 */\n/* global document, DOMParser*/\n\n// eslint-disable-next-line func-names\n(function(DOMParser) {\n  // eslint-disable-next-line\n  const DOMParser_proto = DOMParser.prototype,\n    real_parseFromString = DOMParser_proto.parseFromString;\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if (new DOMParser().parseFromString(\'\', \'text/html\')) {\n      // text/html parsing is natively supported\n      return;\n    }\n    // eslint-disable-next-line no-empty\n  } catch (ex) {}\n\n  // eslint-disable-next-line func-names\n  DOMParser_proto.parseFromString = function(markup, type) {\n    if (/^\\s*text\\/html\\s*(?:;|\\$)/i.test(type)) {\n      const doc = document.implementation.createHTMLDocument(\'\');\n      if (markup.toLowerCase().indexOf(\'<!doctype\') > -1) {\n        doc.documentElement.innerHTML = markup;\n      } else {\n        doc.body.innerHTML = markup;\n      }\n      return doc;\n      // eslint-disable-next-line no-else-return\n    } else {\n      // eslint-disable-next-line prefer-rest-params\n      return real_parseFromString.apply(this, arguments);\n    }\n  };\n})(DOMParser);`, `87558097078318190000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">/*\n * DOMParser HTML extension\n * 2012-09-04\n *\n * By Eli Grey, http://eligrey.com\n * Public domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */</span>\n\n<span class="token comment">/*! @source https://gist.github.com/1129031 */</span>\n<span class="token comment">/* global document, DOMParser*/</span>\n\n<span class="token comment">// eslint-disable-next-line func-names</span>\n<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">DOMParser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// eslint-disable-next-line</span>\n  <span class="token keyword">const</span> DOMParser_proto <span class="token operator">=</span> <span class="token class-name">DOMParser</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span>\n    real_parseFromString <span class="token operator">=</span> DOMParser_proto<span class="token punctuation">.</span>parseFromString<span class="token punctuation">;</span>\n  <span class="token comment">// Firefox/Opera/IE throw errors on unsupported types</span>\n  <span class="token keyword">try</span> <span class="token punctuation">{</span>\n    <span class="token comment">// WebKit returns null on unsupported types</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DOMParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseFromString</span><span class="token punctuation">(</span><span class="token string">\'\'</span><span class="token punctuation">,</span> <span class="token string">\'text/html\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// text/html parsing is natively supported</span>\n      <span class="token keyword">return</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">// eslint-disable-next-line no-empty</span>\n  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n  <span class="token comment">// eslint-disable-next-line func-names</span>\n  DOMParser_proto<span class="token punctuation">.</span><span class="token function-variable function">parseFromString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">markup<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/^\\s*text\\/html\\s*(?:;|$)/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> doc <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">createHTMLDocument</span><span class="token punctuation">(</span><span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>markup<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">\'&lt;!doctype\'</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> markup<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        doc<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> markup<span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">return</span> doc<span class="token punctuation">;</span>\n      <span class="token comment">// eslint-disable-next-line no-else-return</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      <span class="token comment">// eslint-disable-next-line prefer-rest-params</span>\n      <span class="token keyword">return</span> <span class="token function">real_parseFromString</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>DOMParser<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>IE9 下不能弹出下拉框，这里查看了源码发现了是 IE9 transfrom 属性需要兼容下 IE9，去掉 transfrom 变换或者添加 -ms 前缀</li>\n</ul>',
id:"/github/workspace/blog/富文本框疑难点处理过程/index.md absPath of file >>> MarkdownRemark",timeToRead:9,frontmatter:{date:"2019-02-13 20:13:58",path:"/rich-input-question/",tags:"前端, 富文本框, contenteditable, 预研",title:"富文本框疑难点处理过程",draft:null}},{excerpt:"需求背景 解决 react-player 控件在 IE 浏览器下声音的播放 核心思路 ReactPlayer 底层调用了 audio 标签来播放音频，video 标签来播放视频，因为在 IE 浏览器下是没有 audio 标签的，所以使用了 embed 标签，其在 IE 下是调用 windows media player，关于其用法如下 功能 播放: MediaPlayer.Play() 暂停: MediaPlayer.Pause() 定位: MediaPlayer.SetCurrentEntry…",html:'<h1 id="需求背景"><a href="#%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需求背景</h1>\n<p>解决 react-player 控件在 IE 浏览器下声音的播放</p>\n<h1 id="核心思路"><a href="#%E6%A0%B8%E5%BF%83%E6%80%9D%E8%B7%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>核心思路</h1>\n<p>ReactPlayer 底层调用了 audio 标签来播放音频，video 标签来播放视频，因为在 IE 浏览器下是没有 audio 标签的，所以使用了 embed 标签，其在 IE 下是调用 windows media player，关于其用法如下</p>\n<h2 id="功能"><a href="#%E5%8A%9F%E8%83%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>功能</h2>\n<blockquote>\n<p>播放: MediaPlayer.Play()<br>\n暂停: MediaPlayer.Pause()<br>\n定位:</p>\n<ul>\n<li>MediaPlayer.SetCurrentEntry(lWhichEntry)</li>\n<li>MediaPlayer.Next()</li>\n<li>MediaPlayer.Previous()</li>\n</ul>\n<p>循环: MediaPlayer.PlayCount = 0</p>\n<ul>\n<li>0: the clip plays repeatedly</li>\n<li>1: once</li>\n</ul>\n<p>停止: MediaPlayer.Stop()</p>\n</blockquote>\n<h2 id="属性"><a href="#%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>属性</h2>\n<blockquote>\n<p>AllowChangeDisplaySize 返回或设置最终用户是否能设置显示尺寸(逻辑型)<br>\nAllowScan 返回或设置是否允许扫描(逻辑型)<br>\nAnimationAtStart 返回或设置控件开始播放之前是否先播放一个动画序列(逻辑型)<br>\nAudioStream 返回或设置音频流的编号(用于多音频流的剪辑，默认为-1)(长整型)<br>\nAutoRewind 返回或设置媒体文件播放完毕后是否自动回绕(逻辑型)<br>\nAutoSize 返回或设置是否自动调整控件大小来适应载入的媒体(逻辑型)<br>\nAutoStart 返回或设置在载入媒体文件之后是否自动开始播放(逻辑型)<br>\nBalance 返回或设置指定立体声媒体文件的播放声道(-10000 为左声道，10000 为右声道，0 为立体声)(长整型)<br>\nBandwidth 返回或设置当前文件的带宽(长整型)<br>\nBaseURL 返回基本的 HTTP URL(字符串)<br>\nBufferingCount 返回媒体文件回放时缓冲的总时间(长整型)<br>\nBufferingProgress 返回缓冲完成的百分比(长整型)<br>\nBufferingTime 返回缓冲的时间(双精度型)<br>\nCanPreview 返回或设置当前显示的剪辑是能否被预览(逻辑型)<br>\nCanScan 返回或设置当前文件是否支持快进或快退(逻辑型)<br>\nCanSeek 返回或设置当前文件是否能搜索并定位到某个时间(逻辑型)<br>\nCanSeekToMarkers 返回或设置文件是否支持搜索到标签(逻辑型)<br>\nCaptioningID 返回在标题中显示的帧或控件的名称(字符串)<br>\nChannelDescription 返回电台的描述(字符串)<br>\nChannelName 返回电台的名称(字符串)<br>\nChannelURL 返回电台的元文件的位置(字符串)<br>\nClickToPlay 返回或设置是否可以通过点击图像暂停或播放剪辑(逻辑型)<br>\nClientID 返回客户端唯一的标识符(字符串)<br>\nCodecCount 返回文件使用的可安装的 codecs 的个数(长整型)<br>\nContactAddress 返回电台的联系地址(字符串)<br>\nContactEmail 返回电台的联系电子邮件地址(字符串)<br>\nContactPhone 返回电台的联系电话(字符串)<br>\nCreationDate 返回剪辑的创建日期(日期型)<br>\nCurrentMarker 返回或设置当前书签号码(长整型)<br>\nCurrentPosition 返回或设置剪辑的当前位置(双精度型)<br>\nCursorType 返回或设置指针类型(长整型)<br>\nDefaultFrame 返回或设置控件的默认目标 Http 帧(字符串)<br>\nDisplayBackColor 返回或设置显示面板的背景色(OLE<em>COLOR 值)<br>\nDisplayForeColor 返回或设置显示面板的前景色(OLE_COLOR 值)<br>\nDisplayMode 返回或设置显示面板是否用秒或帧的形式显示当前位置(MPDisplayModeConstants 值)<br>\nDisplaySize 返回或设置图像显示窗口的大小(MPDisplaySizeConstant 值)<br>\nDuration 返回或设置剪辑剪辑的播放时间(双精度型)<br>\nEnableContextMenu 返回或设置是否允许使用上下文菜单(逻辑型)<br>\nEnabled 返回或设置控件是否可用(逻辑型)<br>\nEnableFullScreenControls 返回或设置全屏幕控制是否可用(逻辑型)<br>\nEnablePositionControls 返回或设置位置控制是否可用(逻辑型)<br>\nEnableTracker 返回或设置搜索栏控制是否可用(逻辑型)<br>\nErrorCode 返回当前错误代码(长整型)<br>\nErrorCorrection 返回当前剪辑的错误修正类型(长整型)<br>\nErrorDescription 返回当前错误的描述(字符串)<br>\nFileName 返回或设置要播放的剪辑的文件名称(字符串)<br>\nHasError 返回控件是否发生错误(逻辑型)<br>\nHasMultipleItems 返回或设置控件是否包含某些多重项目的内容(逻辑型)<br>\nImageSourceHeight 返回或设置当前剪辑的原始图像高度(长整型)<br>\nImageSourceWidth 返回或设置当前剪辑的原始图像宽度(长整型)<br>\nInvokeURLs 返回或设置 URL 是否自动发送请求(逻辑型)<br>\nIsBroadcast 返回或设置源是否进行广播(逻辑型)<br>\nIsDurationValid 返回或设置持续时间值是否有效(逻辑型)<br>\nLanguage 返回或设置用于本地化语言支持的当前区域语言(长整型)<br>\nLostPackets 返回丢失的数据包数量(长整型)<br>\nMarkerCount 返回文件书签的数量(长整型)<br>\nMute 返回或设置控件是否播放声音(逻辑型)<br>\nOpenState 返回控件的内容源状态(长整型)<br>\nPlayCount 返回或设置一个剪辑播放的次数(长整型)<br>\nPlayState 返回控件的当前操作状态(长整型)<br>\nPreviewMode 返回或设置控件是否处在预览模式(逻辑型)<br>\nRate 返回或设置回放帧频(双精度型)<br>\nReadyState 返回控件是否准备就绪(ReadyStateConstant 值)<br>\nReceivedPackets 返回已接收到的数据包的数量(长整型)<br>\nReceptionQuality 返回最后 30 秒接收到的数据包的百分比(长整型)<br>\nRecoveredPackets 返回已转换的数据包的数量(长整型)<br>\nSAMIFileName 返回或设置 closed-captioning 文件名(字符串)<br>\nSAMILang 返回或设置 closed captioning 语言(字符串)<br>\nSAMIStyle 返回或设置 closed captioning 风格(字符串)<br>\nSelectionEnd 返回或设置流的结束位置(双精度型)<br>\nSelectionStart 返回或设置流的起始位置(双精度型)<br>\nSendErrorEvents 返回或设置控件是否发送错误事件(逻辑型)<br>\nSendKeyboardEvents 返回或设置控件是否发送键盘事件(逻辑型)<br>\nSendMouseClickEvents 返回或设置控件是否发送鼠标单击事件(逻辑型)<br>\nSendMouseMoveEvents 返回或设置控件是否发送鼠标移动事件(逻辑型)<br>\nSendOpenStateChangeEvents 返回或设置控件是否发送打开状态改变事件(逻辑型)<br>\nSendPlayStateChangeEvents 返回或设置控件是否发送播放状态改变事件(逻辑型)<br>\nSendWarningEvents 返回或设置控件是否发送警告事件(逻辑型)<br>\nShowAudioControls 返回或设置是否显示音频控制(逻辑型)<br>\nShowCaptioning 返回或设置是否显示字幕(逻辑型)<br>\nShowControls 返回或设置控制面板是否可见(逻辑型)<br>\nShowDisplay 返回或设置是否显示显示面板(逻辑型)<br>\nShowGotoBar 返回或设置是否显示跳转栏(逻辑型)<br>\nShowPositionControls 返回或设置是否显示位置控制(逻辑型)<br>\nShowStatusBar 返回或设置是否显示状态栏(逻辑型)<br>\nShowTracker 返回或设置是否显示搜索栏(逻辑型)<br>\nSourceLink 返回内容文件的路径(字符串)<br>\nSourceProtocol 返回用于接收数据的协议(长整型)<br>\nStreamCount 返回媒体帧的数量(长整型)<br>\nTransparentAtStart 返回或设置在开始播放之前和停止之后控件是否透明(逻辑型)<br>\nVideoBorder3D 返回或设置视频边框是否显示为 3D 效果(逻辑型)<br>\nVideoBorderColor 返回或设置视频边框的颜色(OLE</em>颜色)<br>\nVideoBorderWidth 返回或设置视频边框的宽度(长整型)<br>\nVolume 返回或设置音量(长整型)</p>\n</blockquote>\n<h1 id="解决方案"><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>解决方案</h1>\n<p>兼容 IE9~IE11 的 react-player</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="10740017588423268000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import React from \'react\';\nimport PropTypes from \'prop-types\';\n\nfunction noop() {}\n\n// IE下的audio标签不能播放wav文件，改用embed标签播放，兼容版本：IE9~11\nexport class IEReactPlayer extends React.PureComponent {\n  static propTypes = {\n    url: PropTypes.string, // 播放路径\n    playing: PropTypes.bool, // 播放状态\n    onProgress: PropTypes.func, // 进度更新回调，返回已播放百分比\n    onDuration: PropTypes.func, // 录音长度回调，返回录音总时长，单位为秒\n    onEnded: PropTypes.func, // 录音结束回调，无返回值\n    volume: PropTypes.number, // 音量属性，范围0~1，此属性调整音量不生效，待解决\n    autostart: PropTypes.string, // 是否自动播放，此属性为了兼容Audio组件点击按钮后才请求url，防止点击两次播放按钮才开始播放的情况出现\n    progressInterval: PropTypes.number // 进度刷新间隔，默认100\n  };\n\n  static defaultProps = {\n    url: \'\',\n    playing: false,\n    autostart: \'false\',\n    progressInterval: 100\n  };\n\n  componentDidMount() {\n    const { progressInterval } = this.props;\n    this.timer = setInterval(() => {\n      // 0：停止状态，1：暂停状态，2：播放状态，4:资源加载完成\n      const { onProgress = noop, onDuration = noop, onEnded = noop } = this.props;\n      if (this.embed && this.embed.ReadyState === 4) {\n        onDuration(this.embed.Duration);\n        if (this.embed.PlayState !== 2) {\n          onEnded();\n        }\n        if (this.embed.PlayState === 2 || this.embed.PlayState === 0) {\n          onProgress({\n            played: this.embed.CurrentPosition / this.embed.Duration\n          });\n        }\n      }\n    }, progressInterval);\n  }\n\n  componentWillUnmount() {\n    this.timer && clearInterval(this.timer);\n  }\n\n  seekTo = (value) => {\n    // 设置播放位置，以秒为单位\n    this.embed.CurrentPosition = value * this.embed.Duration;\n  };\n\n  render() {\n    const { url, playing, volume, autostart } = this.props;\n    if (this.embed && this.embed.ReadyState === 4) {\n      if (playing) {\n        this.embed.play();\n      } else {\n        this.embed.pause();\n      }\n      this.embed.Volume = volume * 100;\n    }\n    return (\n      <div>\n        {url && (\n          <embed\n            ref={(r) => {\n              this.embed = r;\n            }}\n            src={url}\n            autostart={autostart}\n            hidden\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default IEReactPlayer;`, `10740017588423268000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                jsx 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="jsx"><pre style="counter-reset: linenumber NaN" class="language-jsx line-numbers"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">\'prop-types\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">noop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n<span class="token comment">// IE下的audio标签不能播放wav文件，改用embed标签播放，兼容版本：IE9~11</span>\n<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">IEReactPlayer</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>\n  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>\n    url<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> <span class="token comment">// 播放路径</span>\n    playing<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>bool<span class="token punctuation">,</span> <span class="token comment">// 播放状态</span>\n    onProgress<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span> <span class="token comment">// 进度更新回调，返回已播放百分比</span>\n    onDuration<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span> <span class="token comment">// 录音长度回调，返回录音总时长，单位为秒</span>\n    onEnded<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">,</span> <span class="token comment">// 录音结束回调，无返回值</span>\n    volume<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span> <span class="token comment">// 音量属性，范围0~1，此属性调整音量不生效，待解决</span>\n    autostart<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span> <span class="token comment">// 是否自动播放，此属性为了兼容Audio组件点击按钮后才请求url，防止点击两次播放按钮才开始播放的情况出现</span>\n    progressInterval<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>number <span class="token comment">// 进度刷新间隔，默认100</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>\n    url<span class="token punctuation">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span>\n    playing<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    autostart<span class="token punctuation">:</span> <span class="token string">\'false\'</span><span class="token punctuation">,</span>\n    progressInterval<span class="token punctuation">:</span> <span class="token number">100</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> progressInterval <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token comment">// 0：停止状态，1：暂停状态，2：播放状态，4:资源加载完成</span>\n      <span class="token keyword">const</span> <span class="token punctuation">{</span> onProgress <span class="token operator">=</span> noop<span class="token punctuation">,</span> onDuration <span class="token operator">=</span> noop<span class="token punctuation">,</span> onEnded <span class="token operator">=</span> noop <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>ReadyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">onDuration</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>PlayState <span class="token operator">!==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token function">onEnded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>PlayState <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>PlayState <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token function">onProgress</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n            played<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>CurrentPosition <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>Duration\n          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> progressInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function-variable function">seekTo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token comment">// 设置播放位置，以秒为单位</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>CurrentPosition <span class="token operator">=</span> value <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>Duration<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> url<span class="token punctuation">,</span> playing<span class="token punctuation">,</span> volume<span class="token punctuation">,</span> autostart <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>embed <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>ReadyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>playing<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>embed<span class="token punctuation">.</span>Volume <span class="token operator">=</span> volume <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">\n        </span><span class="token punctuation">{</span>url <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>embed</span>\n            <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n              <span class="token keyword">this</span><span class="token punctuation">.</span>embed <span class="token operator">=</span> r<span class="token punctuation">;</span>\n            <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n            <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span>\n            <span class="token attr-name">autostart</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>autostart<span class="token punctuation">}</span></span>\n            <span class="token attr-name">hidden</span>\n          <span class="token punctuation">/></span></span>\n        <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> IEReactPlayer<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h1 id="实现效果"><a href="#%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现效果</h1>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-2936c.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 71.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZElEQVQoz41Su07EMBD0l9LxDTR8BQX/QIsQJaKgAyFRIEBUp0hwcnIJeTj2rl9M4rsoF+DEyLHs3Z3d2XVE27Z5nocQYoxhRPwfnHOCmZVS2LXW3vu5G4mstTASEbwLMryi7/uyLKWUWZbh0HXdlAKHoiiqqlqv1yjws7hAVjjqut5sNtjRAvhTbrhwRYHhCqlhWFNjAumh2e6ATngHjANqk4UIMRwjDSuwMabvlYCPZoB1OoOZrvgsU9XR+YM7vfV3Kzbdl8yLJXkOqJ2TtaGLZ3t27x4/2Bo01B8iN02DEBpFK01Pn/wm+b3gvEU+jUYOkTECEFHbMZUdndz44+twdBUuX9mbDkIGMrSlCS3IGD5GPdknP1owIwTSIwIPglC7z08Rv4raklPlrKIXSW1PPI5nV4r/6ggUvIVw3htiZbjVvEAaWOp8gS1ZcZAqGhdbG1d1tC5M8CNC2LOAk0ThD/sGEMUrqJkTcrQAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 02 13 20 52 02"\n        title=""\n        src="/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-fee1c.png"\n        srcset="/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-a67b7.png 200w,\n/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-0b187.png 400w,\n/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-fee1c.png 800w,\n/static/2019-02-13-20-52-02-f4d5994a8a436d0e7485e76e6dd1fed7-2936c.png 850w"\n        sizes="(max-width: 800px) 100vw, 800px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>',id:"/github/workspace/blog/ReactPlayer之IE兼容性研究/index.md absPath of file >>> MarkdownRemark",timeToRead:4,frontmatter:{date:"2019-02-13 19:50:08",path:"/reactplayer-ie-compatibility/",tags:"前端, ReactPlayer, IE兼容性, 预研",title:"ReactPlayer之IE兼容性研究",draft:null}}],length:131,tag:"前端",pagesSum:27,page:20}}}});