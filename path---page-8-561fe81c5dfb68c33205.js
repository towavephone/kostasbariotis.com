webpackJsonp([0xde38df5eaa34],{1215:function(n,a){n.exports={data:{site:{siteMetadata:{description:'前端工程师，黑猫女王控，欢迎勾搭，技术相关<a href="https://github.com/towavephone" target="_blank">@towavephone</a>，QQ闲聊<a href="tencent://AddContact/?fromId=45&fromSubId=1&subcmd=all&uin=634407147&website=www.oicqzone.com">@towave</a>，bili关注<a href="https://space.bilibili.com/11507708#/" target="_blank">@towave</a>',siteUrl:"https://blog.towavephone.com"}}},pathContext:{posts:[{excerpt:"JavaScript 原生 js 系列 JavaScript 深入系列、JavaScript 专题系列、ES6 系列 完全熟练掌握 eventLoop tasks-microtasks-queues-and-schedules Promise 你需要阅读 Promise A+规范，注意其中的细节，并且灵活的运用到开发当中去。 Promise A+ 英文文档 你需要跟着精品教程手写一遍 Promise…",html:'<h1 id="javascript"><a href="#javascript" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JavaScript</h1>\n<h2 id="原生-js-系列"><a href="#%E5%8E%9F%E7%94%9F-js-%E7%B3%BB%E5%88%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>原生 js 系列</h2>\n<p><a href="https://github.com/mqyqingfeng/Blog" target="_blank" rel="nofollow noreferrer noopener">JavaScript 深入系列、JavaScript 专题系列、ES6 系列</a></p>\n<h2 id="完全熟练掌握-eventloop"><a href="#%E5%AE%8C%E5%85%A8%E7%86%9F%E7%BB%83%E6%8E%8C%E6%8F%A1-eventloop" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>完全熟练掌握 eventLoop</h2>\n<p><a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules" target="_blank" rel="nofollow noreferrer noopener">tasks-microtasks-queues-and-schedules</a></p>\n<h2 id="promise"><a href="#promise" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Promise</h2>\n<ol>\n<li>你需要阅读 Promise A+规范，注意其中的细节，并且灵活的运用到开发当中去。<br>\n<a href="http://promisesaplus.com/" target="_blank" rel="nofollow noreferrer noopener">Promise A+ 英文文档</a></li>\n<li>你需要跟着精品教程手写一遍 Promise，对里面的细节深入思考，并且把其中异步等待、错误处理等等细节融会贯通到你的开发思想里去。 <a href="https://github.com/xieranmaya/blog/issues/3" target="_blank" rel="nofollow noreferrer noopener">剖析 Promise 内部结构，一步一步实现一个完整的、能通过所有 Test case 的 Promise 类</a></li>\n<li>最后，对于 promise 的核心，异步的链式调用，你必须能写出来简化版的代码。 <a href="https://juejin.im/post/5e6f4579f265da576429a907" target="_blank" rel="nofollow noreferrer noopener">最简实现 Promise，支持异步链式调用（20 行）</a></li>\n</ol>\n<h2 id="async-await"><a href="#async-await" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>async await</h2>\n<p>对于 Promise 我们非常熟悉了，进一步延伸到 async await，这是目前开发中非常非常常用的异步处理方式，我们最好是熟悉它的 babel 编译后的源码。</p>\n<p><a href="https://juejin.im/post/5e79e841f265da5726612b6e" target="_blank" rel="nofollow noreferrer noopener">手写 async await 的最简实现（20 行搞定）</a></p>\n<p>babel 对于 async await 配合 generator 函数，做的非常巧妙，这里面的思想我们也要去学习，如何递归的处理一个串行的 promise 链？</p>\n<p>这个技巧在 <a href="https://github.com/axios/axios/blob/e50a08b2c392c6ce3b5a9dc85ebc860d50414529/lib/core/Axios.js#L49-L62" target="_blank" rel="nofollow noreferrer noopener">axios 的源码</a> 里也有应用。平常经常用的拦截器，本质上就是一串 promise 的串行执行。</p>\n<p>当然，如果你还有余力的话，也可以继续深入的去看 generator 函数的 babel 编译源码。不强制要求，毕竟 generator 函数在开发中已经用的非常少了。</p>\n<p><a href="https://github.com/mqyqingfeng/Blog/issues/102" target="_blank" rel="nofollow noreferrer noopener">ES6 系列之 Babel 将 Generator 编译成了什么样子</a></p>\n<h2 id="异常处理"><a href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>异常处理</h2>\n<p>你必须精通异步场景下的错误处理，这是高级工程师必备的技能，如果开发中的异常被你写的库给吞掉了，那岂不是可笑。</p>\n<p><a href="https://juejin.im/post/589036f8570c3500621a3be2" target="_blank" rel="nofollow noreferrer noopener">Callback Promise Generator Async-Await 和异常处理的演进</a></p>\n<h2 id="插件机制"><a href="#%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>插件机制</h2>\n<p>你需要大概理解前端各个库中的<code class="language-text">插件</code>机制是如何实现的，在你自己开发一些库的时候也能融入自己适合的插件机制。</p>\n<p><a href="https://juejin.im/post/5e13ea6a6fb9a0482b297e8e" target="_blank" rel="nofollow noreferrer noopener">Koa 的洋葱中间件，Redux 的中间件，Axios 的拦截器让你迷惑吗？实现一个精简版的就彻底搞懂了。</a></p>\n<h2 id="设计模式"><a href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设计模式</h2>\n<p>对于一些复杂场景，你的开发不能再是<code class="language-text">if else</code>嵌套一把梭了，你需要把设计模式好好看一遍，在合适的场景下选择合适的设计模式。这里就推荐掘金小册吧，相信这篇小册会让你的<code class="language-text">工程能力</code>得到质的飞跃，举例来说，在 Vue 的源码中就用到了<code class="language-text">观察者模式</code>、<code class="language-text">发布订阅模式</code>、<code class="language-text">策略模式</code>、<code class="language-text">适配器模式</code>、<code class="language-text">发布订阅模式</code>、<code class="language-text">工厂模式</code>、<code class="language-text">组合模式</code>、<code class="language-text">代理模式</code>、<code class="language-text">门面模式</code>等等。</p>\n<p>而这些设计模式如果你没学习过可能很难想到如何应用在工程之中，但是如果你学习过，它就变成了你内在的<code class="language-text">工程能力</code>，往大了说，也可以是<code class="language-text">架构能力</code>的一部分。</p>\n<blockquote>\n<p>在《设计模式》这本小册中我们提到过，即使是在瞬息万变的前端领域，也存在一些具备“一次学习，终生受用”特性的知识。从工程的角度看，我推荐大家着重学习的是设计模式。 -修言</p>\n</blockquote>\n<p>这里推荐掘金修言的<a href="https://user-gold-cdn.xitu.io/2020/5/6/171e6247f6ea460a?w=750&#x26;h=1334&#x26;f=png&#x26;s=679081" target="_blank" rel="nofollow noreferrer noopener">设计模式小册</a>。</p>\n<h2 id="开发思想"><a href="#%E5%BC%80%E5%8F%91%E6%80%9D%E6%83%B3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>开发思想</h2>\n<p>有时候组合是优于继承的，不光是面向对象编程可以实现复用，在某些场景下，组合的思想可能会更加简洁优雅。</p>\n<p><a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-s-the-difference-between-class-prototypal-inheritance-e4cd0a7562e9" target="_blank" rel="nofollow noreferrer noopener">https://medium.com/javascript-scene/master-the-javascript-interview-what-s-the-difference-between-class-prototypal-inheritance-e4cd0a7562e9</a></p>\n<blockquote>\n<p>“…the problem with object-oriented languages is they’ve got all this implicit environment that they carry around with them. You wanted a banana but what you got was a gorilla holding the banana and the entire jungle.” ~ Joe Armstrong — “Coders at Work”</p>\n</blockquote>\n<blockquote>\n<p>面向对象语言的问题在于它们带来了所有这些隐含的环境。你想要一个香蕉，但你得到的是拿着香蕉和整个丛林的大猩猩。</p>\n</blockquote>\n<h2 id="代码规范"><a href="#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>代码规范</h2>\n<p>你需要熟读 clean-code-javascript，并且深入结合到日常开发中，结合你们小组的场景制定自己的规范。 <a href="https://github.com/beginor/clean-code-javascript" target="_blank" rel="nofollow noreferrer noopener">clean-code-javascript</a></p>\n<h1 id="算法"><a href="#%E7%AE%97%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>算法</h1>\n<p>算法这里我就不推荐各种小册，笔记，博文了。因为从我自己学习算法的经验来看，在没有太多的算法基础的情况下，文章基本上是很难真正的看进去并理解的，这里只推荐慕课网 bobo 老师的 <a href="https://coding.imooc.com/class/82.html" target="_blank" rel="nofollow noreferrer noopener">LeetCode 真题课程</a>，在这个课程里算法大牛 bobo 老师会非常细心的把各个算法做成动图，由浅入深给你讲解各种分类的 LeetCode 真题。这是我最近学到的最有收获的一门课程了。</p>\n<p>由于这门课程是 C++ 为主要语言的（不影响理解课程），我也针对此课程维护了一个对应的 <a href="https://github.com/sl1673495/leetcode-javascript/issues" target="_blank" rel="nofollow noreferrer noopener">JavaScript 版题解仓库</a>，在 Issue 里也根据标签分类整理了各个题型的讲解，欢迎 Star ✨。</p>\n<p>算法对于前端来说重要吗？也许你觉得做题没用，但是我个人在做题后并且分门别类的整理好各个题型的思路和解法后，是能真切的感觉到自己的代码能力在飞速提高的。</p>\n<p>对于很多觉得自己不够聪明，不敢去学习算法的同学来说，推荐 bobo 老师的这篇<a href="https://mp.weixin.qq.com/s/QvXIDpyrpiOmvEhcOUUmxQ" target="_blank" rel="nofollow noreferrer noopener">《天生不聪明》</a>，也正是这篇文章激励我开始了算法学习的旅程。</p>\n<p>在这里列一下前端需要掌握的基础算法知识，希望能给你一个路线：</p>\n<ol>\n<li>算法的复杂度分析。</li>\n<li>排序算法，以及他们的区别和优化。</li>\n<li>数组中的双指针、滑动窗口思想。</li>\n<li>利用 Map 和 Set 处理查找表问题。</li>\n<li>链表的各种问题。</li>\n<li>利用递归和迭代法解决二叉树问题。</li>\n<li>栈、队列、DFS、BFS。</li>\n<li>回溯法、贪心算法、动态规划。</li>\n</ol>\n<p>算法是底层的基础，把地基打扎实后，会让你在后续的职业生涯中大受裨益的。</p>\n<h1 id="框架篇"><a href="#%E6%A1%86%E6%9E%B6%E7%AF%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>框架篇</h1>\n<p>对于高级工程师来说，你必须要有一个你趁手的框架，它就像你手中的一把利剑，能够让你披荆斩棘，斩杀各种项目于马下。</p>\n<p>下面我会分为 <code class="language-text">Vue</code> 和 <code class="language-text">React</code> 两个方面深入去讲。</p>\n<h2 id="vue"><a href="#vue" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vue</h2>\n<p>Vue 方面的话，我主要是师从黄轶老师，跟着他认真走，基本上在 Vue 这方面你可以做到基本无敌。</p>\n<h3 id="熟练运用"><a href="#%E7%86%9F%E7%BB%83%E8%BF%90%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>熟练运用</h3>\n<ol>\n<li>\n<p>对于 Vue 你必须非常熟练的运用，官网的 api 你基本上要全部过一遍。并且你要利用一些高级的 api 去实现巧妙的封装。举几个简单的例子。</p>\n</li>\n<li>\n<p>你要知道怎么用<code class="language-text">slot-scope</code>去做一些数据和 ui 分离的封装。以<a href="https://github.com/posva/vue-promised" target="_blank" rel="nofollow noreferrer noopener">vue-promised</a>这个库为例。 Promised 组件并不关注你的视图展示成什么样，它只是帮你管理异步流程，并且通过你传入的<code class="language-text">slot-scope</code>，在合适的时机把数据回抛给你，并且帮你去展示你传入的视图。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="17155333009551055000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<template>\n <Promised :promise=&quot;usersPromise&quot;>\n   <!-- Use the &quot;pending&quot; slot to display a loading message -->\n   <template v-slot:pending>\n     <p>Loading...</p>\n   </template>\n   <!-- The default scoped slot will be used as the result -->\n   <template v-slot=&quot;data&quot;>\n     <ul>\n       <li v-for=&quot;user in data&quot;>{{ user.name }}</li>\n     </ul>\n   </template>\n   <!-- The &quot;rejected&quot; scoped slot will be used if there is an error -->\n   <template v-slot:rejected=&quot;error&quot;>\n     <p>Error: {{ error.message }}</p>\n   </template>\n </Promised>\n</template>`, `17155333009551055000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                vue 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="vue"><pre style="counter-reset: linenumber NaN" class="language-vue line-numbers"><code class="language-vue">&lt;template&gt;\n &lt;Promised :promise=&quot;usersPromise&quot;&gt;\n   &lt;!-- Use the &quot;pending&quot; slot to display a loading message --&gt;\n   &lt;template v-slot:pending&gt;\n     &lt;p&gt;Loading...&lt;/p&gt;\n   &lt;/template&gt;\n   &lt;!-- The default scoped slot will be used as the result --&gt;\n   &lt;template v-slot=&quot;data&quot;&gt;\n     &lt;ul&gt;\n       &lt;li v-for=&quot;user in data&quot;&gt;{{ user.name }}&lt;/li&gt;\n     &lt;/ul&gt;\n   &lt;/template&gt;\n   &lt;!-- The &quot;rejected&quot; scoped slot will be used if there is an error --&gt;\n   &lt;template v-slot:rejected=&quot;error&quot;&gt;\n     &lt;p&gt;Error: {{ error.message }}&lt;/p&gt;\n   &lt;/template&gt;\n &lt;/Promised&gt;\n&lt;/template&gt;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>你需要熟练的使用<code class="language-text">Vue.extends</code>，配合项目做一些<code class="language-text">命令式api</code>的封装。并且知道它为什么可以这样用。（需要具备源码知识） <a href="https://github.com/sl1673495/vue-netease-music/blob/master/src/base/confirm.vue" target="_blank" rel="nofollow noreferrer noopener">confirm 组件</a></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="28900570364403343000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`export const confirm = function(text, title, onConfirm = () => {}) {\n if (typeof title === \'function\') {\n   onConfirm = title;\n   title = undefined;\n }\n const ConfirmCtor = Vue.extend(Confirm);\n const getInstance = () => {\n   if (!instanceCache) {\n     instanceCache = new ConfirmCtor({\n       propsData: {\n         text,\n         title,\n         onConfirm\n       }\n     });\n     // 生成dom\n     instanceCache.\\$mount();\n     document.body.appendChild(instanceCache.\\$el);\n   } else {\n     // 更新属性\n     instanceCache.text = text;\n     instanceCache.title = title;\n     instanceCache.onConfirm = onConfirm;\n   }\n   return instanceCache;\n };\n const instance = getInstance();\n // 确保更新的prop渲染到dom\n // 确保动画效果\n Vue.nextTick(() => {\n   instance.visible = true;\n });\n};`, `28900570364403343000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">confirm</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> title<span class="token punctuation">,</span> <span class="token function-variable function">onConfirm</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> title <span class="token operator">===</span> <span class="token string">\'function\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   onConfirm <span class="token operator">=</span> title<span class="token punctuation">;</span>\n   title <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>\n <span class="token punctuation">}</span>\n <span class="token keyword">const</span> ConfirmCtor <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>Confirm<span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token keyword">const</span> <span class="token function-variable function">getInstance</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instanceCache<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n     instanceCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConfirmCtor</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n       propsData<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n         text<span class="token punctuation">,</span>\n         title<span class="token punctuation">,</span>\n         onConfirm\n       <span class="token punctuation">}</span>\n     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n     <span class="token comment">// 生成dom</span>\n     instanceCache<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n     document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>instanceCache<span class="token punctuation">.</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>\n   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n     <span class="token comment">// 更新属性</span>\n     instanceCache<span class="token punctuation">.</span>text <span class="token operator">=</span> text<span class="token punctuation">;</span>\n     instanceCache<span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>\n     instanceCache<span class="token punctuation">.</span>onConfirm <span class="token operator">=</span> onConfirm<span class="token punctuation">;</span>\n   <span class="token punctuation">}</span>\n   <span class="token keyword">return</span> instanceCache<span class="token punctuation">;</span>\n <span class="token punctuation">}</span><span class="token punctuation">;</span>\n <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n <span class="token comment">// 确保更新的prop渲染到dom</span>\n <span class="token comment">// 确保动画效果</span>\n Vue<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n   instance<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>你要开始使用<code class="language-text">JSX</code>来编写你项目中的复杂组件了，比如在我的网易云音乐项目中，我遇到了一个<a href="https://juejin.im/post/5d40fa605188255d2e32c929" target="_blank" rel="nofollow noreferrer noopener">复杂的音乐表格需求</a>，支持搜索文字高亮、动态隐藏列等等。当然对于现在版本的 Vue，JSX 还是不太好用，有很多属性需要写嵌套对象，这会造成很多不必要的麻烦，比如没办法像 React 一样直接把外层组件传入的 props 透传下去，Vue3 的 rfc 中提到会把 vnode 节点的属性进一步扁平化，我们期待得到接近于 React 的完美 JSX 开发体验吧。</p>\n</li>\n<li>\n<p>你要深入了解 Vue 中 nextTick 的原理，并且知道为什么要用微任务队列优于宏任务队列，结合你的 eventloop 知识深度思考。最后融入到你的<code class="language-text">异步合并优化</code>的知识体系中去。 <a href="https://segmentfault.com/a/1190000008589736" target="_blank" rel="nofollow noreferrer noopener">Vue 源码详解之 nextTick：MutationObserver 只是浮云，microtask 才是核心！</a></p>\n</li>\n<li>\n<p>你要能理解 Vue 中的高阶组件。关于这篇文章中为什么 slot-scope 不生效的问题，你不能看他的文章讲解都一头雾水。（需要你具备源码知识） <a href="https://segmentfault.com/p/1210000012743259/read" target="_blank" rel="nofollow noreferrer noopener">探索 Vue 高阶组件 | HcySunYang</a></p>\n</li>\n<li>\n<p>推荐一下我自己总结的 Vue 高阶组件文章，里面涉及到了一些进阶的用法。 <a href="https://juejin.im/post/5e8b5fa6f265da47ff7cc139" target="_blank" rel="nofollow noreferrer noopener">Vue 进阶必学之高阶组件 HOC</a></p>\n</li>\n<li>\n<p>对于 Vuex 的使用必须非常熟练，知道什么时候该用 Vuex，知道怎么根据需求去编写 Vuex 的 plugin，合理的去使用 Vuex 的 subscribe 功能完成一些全局维度的封装，比如我对于 Vuex 中 action 的错误处理懒得一个个去<code class="language-text">try catch</code>，就封装了一个<a href="https://github.com/sl1673495/vuex-error-plugin/blob/master/plugin.js" target="_blank" rel="nofollow noreferrer noopener">vuex-error-plugin</a>。代码很简单，重要的是去理解为什么能这样做。这里用了 <code class="language-text">monkey patch</code> 的做法，并不是很好的实践，仅以此作为引子。</p>\n</li>\n<li>\n<p>对于 vue-router 的使用必须非常熟练，知道什么需求需要利用什么样的 router 钩子，这样才能 hold 住一个大型的项目，这个我觉得官方仓库里的进阶中文文档其实很好，不知道为什么好像没放在官网。 <a href="https://github.com/vuejs/vue-router/tree/dev/docs/zh/guide/advanced" target="_blank" rel="nofollow noreferrer noopener">vue-router-advanced</a></p>\n</li>\n<li>\n<p>理解虚拟 DOM 的本质，虚拟 DOM 一定比真实 DOM 更快吗？这篇是尤雨溪的回答，看完这个答案，相信你会对虚拟 DOM 有更进一步的认识和理解。 <a href="https://www.zhihu.com/question/31809713/answer/53544875" target="_blank" rel="nofollow noreferrer noopener">网上都说操作真实 DOM 慢，但测试结果却比 React 更快，为什么？</a></p>\n</li>\n</ol>\n<h3 id="源码深入"><a href="#%E6%BA%90%E7%A0%81%E6%B7%B1%E5%85%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>源码深入</h3>\n<ol>\n<li>你不光要熟练运用 Vue，由于 Vue 的源码写的非常精美，而且阅读难度不是非常大，很多人也选择去阅读 Vue 的源码。视频课这里推荐黄轶老师的 Vue 源码课程。这里也包括了 Vuex 和 vue-router 的源码。 <a href="https://coding.imooc.com/class/228.html" target="_blank" rel="nofollow noreferrer noopener">Vue.js 源码全方位深入解析 （含 Vue3.0 源码分析）</a></li>\n<li>推荐 HcySunYang 大佬的 Vue 逐行分析，需要下载 git 仓库，切到 elegant 分支自己本地启动。 <a href="https://github.com/HcySunYang/vue-design" target="_blank" rel="nofollow noreferrer noopener">Vue 逐行级别的源码分析</a></li>\n<li>当然，这个仓库的 master 分支也是宝藏，是这个作者的渲染器系列文章，脱离框架讲解了 vnode 和 diff 算法的本质 <a href="http://hcysun.me/vue-design/zh/essence-of-comp.html#%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BA%A7%E5%87%BA%E6%98%AF%E4%BB%80%E4%B9%88" target="_blank" rel="nofollow noreferrer noopener">组件的本质</a></li>\n</ol>\n<h3 id="vue3-展望"><a href="#vue3-%E5%B1%95%E6%9C%9B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vue3 展望</h3>\n<ol>\n<li>Vue3 已经发布了 Beta 版本，你可以提前学习<code class="language-text">Hook</code>相关的开发模式了。这里推荐一下我写的这篇 Vue3 相关介绍： <a href="https://juejin.im/post/5e9ce011f265da47b8450c11" target="_blank" rel="nofollow noreferrer noopener">Vue3 究竟好在哪里？（和 React Hook 的详细对比）</a></li>\n</ol>\n<h3 id="vue3-源码"><a href="#vue3-%E6%BA%90%E7%A0%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vue3 源码</h3>\n<p>对于响应式部分，如果你已经非常熟悉 Vue2 的响应式原理了，那么 Vue3 的响应式原理对你来说应该没有太大的难度。甚至在学习之中你会相互比较，知道 Vue3 为什么这样做更好，Vue2 还有哪部分需要改进等等。</p>\n<p>Vue3 其实就是把实现换成了更加强大的 Proxy，并且把响应式部分做的更加的抽象，甚至可以，不得不说，Vue3 的响应式模型更加接近<code class="language-text">响应式类库</code>的核心了，甚至<code class="language-text">react-easy-state</code>等 React 的响应式状态管理库，也是用这套类似的核心做出来的。</p>\n<p>再次强调，非常非常推荐学习 Vue3 的<code class="language-text">@vue/reactivity</code>这个分包。</p>\n<p>推一波自己的文章吧，细致了讲解了 Vue3 响应式的核心流程。</p>\n<ol>\n<li><a href="https://juejin.im/post/5e21196fe51d454d523be084" target="_blank" rel="nofollow noreferrer noopener">带你彻底搞懂 Vue3 的 Proxy 响应式原理！TypeScript 从零实现基于 Proxy 的响应式库。</a></li>\n<li><a href="https://juejin.im/post/5e23b20f51882510073eb571" target="_blank" rel="nofollow noreferrer noopener">带你彻底搞懂 Vue3 的 Proxy 响应式原理！基于函数劫持实现 Map 和 Set 的响应式</a></li>\n<li><a href="https://juejin.im/post/5e2fdf29e51d45026866107d" target="_blank" rel="nofollow noreferrer noopener">深度解析：Vue3 如何巧妙的实现强大的 computed</a></li>\n</ol>\n<p>在学习之后，我把<code class="language-text">@vue/reactivity</code>包轻松的集成到了 React 中，做了一个状态管理的库，这也另一方面佐证了这个包的抽象程度： <a href="https://juejin.im/post/5e70970af265da576429aada" target="_blank" rel="nofollow noreferrer noopener">40 行代码把 Vue3 的响应式集成进 React 做状态管理</a></p>\n<h2 id="react"><a href="#react" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React</h2>\n<p>React 已经进入了 Hook 为主的阶段，社区的各个库也都在积极拥抱 Hook，虽然它还有很多陷阱和不足，但是这基本上是未来的方向没跑了。这篇文章里我会减少 class 组件的开发技巧的提及，毕竟好多不错的公司也已经全面拥抱 Hook 了。</p>\n<h3 id="熟练应用"><a href="#%E7%86%9F%E7%BB%83%E5%BA%94%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>熟练应用</h3>\n<ol>\n<li>\n<p>你必须掌握官网中提到的所有技巧，就算没有使用过，你也要大概知道该在什么场景使用。</p>\n</li>\n<li>\n<p>推荐 React 小书，虽然书中的很多 api 已经更新了，但是核心的设计思想还是没有变 <a href="http://huziketang.mangojuice.top/books/react" target="_blank" rel="nofollow noreferrer noopener">React.js 小书</a></p>\n</li>\n<li>\n<p>关于熟练应用，其实掘金的小册里有几个宝藏</p>\n<ol>\n<li>诚身大佬（悄悄告诉你，他的职级非常高）的企业级管理系统小册，这个项目里的代码非常深入，而且在抽象和优化方面也做的无可挑剔，自己抽象了<code class="language-text">acl</code>权限管理系统和<code class="language-text">router</code>路由管理，并且引入了<code class="language-text">reselect</code>做性能优化，一年前我初次读的时候，很多地方懵懵懂懂，这一年下来我也从无到有经手了一套带<code class="language-text">acl</code>和<code class="language-text">权限路由</code>的管理系统后，才知道他的抽象能力有多强。真的是</li>\n</ol>\n<blockquote>\n<p>初闻不知曲中意，再闻已是曲中人。</p>\n</blockquote>\n<p>  <a href="https://juejin.im/book/5b1e15f76fb9a01e516d14a0" target="_blank" rel="nofollow noreferrer noopener">React 组合式开发实践：打造企业管理系统五大核心模块</a></p>\n<ol start="2">\n<li>三元大佬的 React Hooks 与 Immutable 数据流实战，深入浅出的带你实现一个音乐播放器。三元大家都认识吧？那是神，神带你们写应用项目，不学能说得过去吗？ <a href="https://juejin.im/book/5da96626e51d4524ba0fd237" target="_blank" rel="nofollow noreferrer noopener">React Hooks 与 Immutable 数据流实战</a></li>\n</ol>\n</li>\n<li>\n<p>深入理解 React 中的<code class="language-text">key</code> <a href="https://kentcdodds.com/blog/understanding-reacts-key-prop" target="_blank" rel="nofollow noreferrer noopener">understanding-reacts-key-prop</a> <a href="https://zhuanlan.zhihu.com/p/112917118" target="_blank" rel="nofollow noreferrer noopener">react 中为何推荐设置 key</a></p>\n</li>\n<li>\n<p>React 官方团队成员对于<code class="language-text">派生状态</code>的思考： <a href="https://zh-hans.reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html" target="_blank" rel="nofollow noreferrer noopener">you-probably-dont-need-derived-state</a></p>\n</li>\n</ol>\n<h3 id="react-hook"><a href="#react-hook" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React Hook</h3>\n<p>你必须熟练掌握 Hook 的技巧，除了官网文档熟读以外：</p>\n<ol>\n<li>推荐 Dan 的博客，他就是 Hook 的代码实际编写者之一，看他怎么说够权威了吧？这里贴心的送上汉化版。 <a href="https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/" target="_blank" rel="nofollow noreferrer noopener">useEffect 完整指南</a> 看完这篇以后，进入<a href="https://overreacted.io/zh-hans" target="_blank" rel="nofollow noreferrer noopener">dan 的博客主页</a>，找出所有和 Hook 有关的，全部精读！</li>\n<li>推荐黄子毅大佬的精读周刊系列 <a href="https://github.com/dt-fe/weekly/blob/v2/096.%E7%B2%BE%E8%AF%BB%E3%80%8AuseEffect%20%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97%E3%80%8B.md" target="_blank" rel="nofollow noreferrer noopener">096.精读《useEffect 完全指南》.md</a> 注意！不是只看这一篇，而是这个仓库里所有有关于 React Hook 的文章都去看一遍，结合自己的思想分析。</li>\n<li>Hook 陷阱系列还是 Dan 老哥的文章，详细的讲清楚了所谓<code class="language-text">闭包陷阱</code>产生的原因和设计中的权衡。 <a href="https://overreacted.io/zh-hans/how-are-function-components-different-from-classes/" target="_blank" rel="nofollow noreferrer noopener">函数式组件与类组件有何不同？</a></li>\n<li>去找一些社区的精品自定义 hook，看看他们的开发和设计思路，有没有能融入自己的日常开发中去的。 <a href="https://segmentfault.com/a/1190000020964640" target="_blank" rel="nofollow noreferrer noopener">精读《Hooks 取数 - swr 源码》</a> <a href="https://zhuanlan.zhihu.com/p/103150605?utm_source=wechat_session" target="_blank" rel="nofollow noreferrer noopener">Umi Hooks - 助力拥抱 React Hooks</a> <a href="https://zhuanlan.zhihu.com/p/106665408" target="_blank" rel="nofollow noreferrer noopener">React Hooks 的体系设计之一 - 分层</a></li>\n</ol>\n<h3 id="react-性能优化"><a href="#react-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React 性能优化</h3>\n<p>React 中优化组件重渲染，这里有几个隐含的知识点。 <a href="https://kentcdodds.com/blog/optimize-react-re-renders" target="_blank" rel="nofollow noreferrer noopener">optimize-react-re-renders</a></p>\n<p>如何对 React 函数式组件进行性能优化？这篇文章讲的很详细，值得仔细阅读一遍。 <a href="https://juejin.im/post/5dd337985188252a1873730f" target="_blank" rel="nofollow noreferrer noopener">如何对 React 函数式组件进行优化</a></p>\n<h3 id="react-单元测试"><a href="#react-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React 单元测试</h3>\n<ol>\n<li>使用<code class="language-text">@testing-library/react</code>测试组件，这个库相比起 enzyme 更好的原因在于，它更注重于<strong>站在用户的角度</strong>去测试一个组件，而不是测试这个组件的<strong>实现细节</strong>。 <a href="https://kentcdodds.com/blog/introducing-the-react-testing-library" target="_blank" rel="nofollow noreferrer noopener">Introducing The React Testing Library</a> <a href="https://kentcdodds.com/blog/testing-implementation-details" target="_blank" rel="nofollow noreferrer noopener">Testing Implementation Details</a></li>\n<li>使用<code class="language-text">@testing-library/react-hooks</code>测试自定义 Hook <a href="https://kentcdodds.com/blog/how-to-test-custom-react-hooks" target="_blank" rel="nofollow noreferrer noopener">how-to-test-custom-react-hooks</a></li>\n</ol>\n<h3 id="react-和-typescript-结合使用"><a href="#react-%E5%92%8C-typescript-%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React 和 TypeScript 结合使用</h3>\n<ol>\n<li>这个仓库非常详细的介绍了如何把 React 和 TypeScript 结合，并且给出了一些进阶用法的示例，非常值得过一遍！ <a href="https://github.com/typescript-cheatsheets/react-typescript-cheatsheet" target="_blank" rel="nofollow noreferrer noopener">react-typescript-cheatsheet</a></li>\n<li>这篇文章是蚂蚁金服数据体验技术部的同学带来的，其实除了这里面的技术文章以外，蚂蚁金服的同学也由非常生动给我们讲解了一个高级前端同学是如何去社区寻找方案，如何思考和落地到项目中的，由衷的佩服。 <a href="https://juejin.im/post/5dccc9b8e51d4510840165e2" target="_blank" rel="nofollow noreferrer noopener">React + Typescript 工程化治理实践</a></li>\n<li>微软的大佬带你写一个类型安全的组件，非常深入，非常过瘾… <a href="https://blog.andrewbran.ch/polymorphic-react-components/" target="_blank" rel="nofollow noreferrer noopener">Writing Type-Safe Polymorphic React Components (Without Crashing TypeScript)</a></li>\n<li>React + TypeScript 10 个需要避免的错误模式。 <a href="https://medium.com/@martin_hotell/10-typescript-pro-tips-patterns-with-or-without-react-5799488d6680" target="_blank" rel="nofollow noreferrer noopener">10-typescript-pro-tips-patterns-with-or-without-react</a></li>\n</ol>\n<h3 id="react-代码抽象思考"><a href="#react-%E4%BB%A3%E7%A0%81%E6%8A%BD%E8%B1%A1%E6%80%9D%E8%80%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React 代码抽象思考</h3>\n<ol>\n<li>何时应该把代码拆分为组件？ <a href="https://kentcdodds.com/blog/when-to-break-up-a-component-into-multiple-components" target="_blank" rel="nofollow noreferrer noopener">when-to-break-up-a-component-into-multiple-components</a></li>\n<li>仔细思考你的 React 应用中，状态应该放在什么位置，是组件自身，提升到父组件，亦或是局部 context 和 redux，这会有益于提升应用的性能和可维护性。 <a href="https://kentcdodds.com/blog/state-colocation-will-make-your-react-app-faster/" target="_blank" rel="nofollow noreferrer noopener">state-colocation-will-make-your-react-app-faster</a></li>\n<li>仔细思考 React 组件中的状态应该如何管理，优先使用派生状态，并且在适当的时候利用 useMemo、reselect 等库去优化他们。 <a href="https://kentcdodds.com/blog/dont-sync-state-derive-it" target="_blank" rel="nofollow noreferrer noopener">dont-sync-state-derive-it</a></li>\n<li>React Hooks 的自定义 hook 中，如何利用 reducer 的模式提供更加灵活的数据管理，让用户拥有数据的控制权。 <a href="https://kentcdodds.com/blog/the-state-reducer-pattern-with-react-hooks" target="_blank" rel="nofollow noreferrer noopener">the-state-reducer-pattern-with-react-hooks</a></li>\n</ol>\n<h1 id="typescript"><a href="#typescript" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript</h1>\n<p>自从 Vue3 横空出世以来，TypeScript 好像突然就火了。这是一件好事，推动前端去学习强类型语言，开发更加严谨。并且第三方包的 ts 类型支持的加入，让我们甚至很多时候都不再需要打开文档对着 api 撸了。</p>\n<p>关于 TypeScript 学习，其实几个月前我还对于这门 JavaScript 的超集一窍不通，经过两三个月的静心学习，我能够去理解一些相对复杂的类型了，</p>\n<p>可以说 TypeScript 的学习和学一个库或者学一个框架是完全不同的，</p>\n<h2 id="入门"><a href="#%E5%85%A5%E9%97%A8" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>入门</h2>\n<ol>\n<li>除了官方文档以外，还有一些比较好的中文入门教程。 <a href="https://zhongsp.gitbooks.io/typescript-handbook/content/" target="_blank" rel="nofollow noreferrer noopener">TypeScript Handbook 入门教程 </a></li>\n<li>TypeScript Deep Dive 非常高质量的英文入门教学。 <a href="https://basarat.gitbook.io/typescript/type-system" target="_blank" rel="nofollow noreferrer noopener">TypeScript Deep Dive</a></li>\n<li>工具泛型在日常开发中都非常的常用，必须熟练掌握。 <a href="https://zhuanlan.zhihu.com/p/40311981" target="_blank" rel="nofollow noreferrer noopener">TS 一些工具泛型的使用及其实现</a></li>\n<li>视频课程，还是黄轶大佬的，并且这个课程对于单元测试、前端手写框架、以及网络请求原理都非常有帮助。 <a href="https://coding.imooc.com/class/330.html" target="_blank" rel="nofollow noreferrer noopener">基于 TypeScript 从零重构 axios</a></li>\n</ol>\n<h2 id="进阶"><a href="#%E8%BF%9B%E9%98%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进阶</h2>\n<ol>\n<li>这五篇文章里借助非常多的案例，为我们讲解了 ts 的一些高级用法，请务必反复在 ide 里尝试，理解，不懂的概念及时回到文档中补习。 <a href="https://juejin.im/post/5c8a518ee51d455e4d719e2e" target="_blank" rel="nofollow noreferrer noopener">巧用 TypeScript 系列 一共五篇</a></li>\n<li>TS 进阶非常重要的一点，条件类型，很多泛型推导都需要借助它的力量。 <a href="https://mariusschulz.com/blog/conditional-types-in-typescript" target="_blank" rel="nofollow noreferrer noopener">conditional-types-in-typescript</a></li>\n<li>以及上面那个大佬博客中的所有 TS 文章。 <a href="https://mariusschulz.com" target="_blank" rel="nofollow noreferrer noopener">https://mariusschulz.com</a></li>\n</ol>\n<h2 id="实战"><a href="#%E5%AE%9E%E6%88%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实战</h2>\n<ol>\n<li>\n<p>一个参数简化的实战，涉及到的高级知识点非常多。</p>\n<ol>\n<li>🎉TypeScript 的高级类型（Advanced Type）</li>\n<li>🎉Conditional Types (条件类型)</li>\n<li>🎉Distributive conditional types (分布条件类型)</li>\n<li>🎉Mapped types（映射类型）</li>\n<li>🎉 函数重载 <a href="https://juejin.im/post/5e38dd65518825492b509dd6" target="_blank" rel="nofollow noreferrer noopener">TypeScript 参数简化实战</a></li>\n</ol>\n</li>\n<li>\n<p>实现一个简化版的 Vuex，同样知识点结合满满。</p>\n<ol>\n<li>🎉TypeScript 的高级类型（<a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html" target="_blank" rel="nofollow noreferrer noopener">Advanced Type</a>）</li>\n<li>🎉TypeScript 中利用泛型进行反向类型推导。(<a href="https://www.typescriptlang.org/docs/handbook/generics.html" target="_blank" rel="nofollow noreferrer noopener">Generics</a>)</li>\n<li>🎉Mapped types（映射类型）</li>\n<li>🎉Distributive Conditional Types（条件类型分配）</li>\n<li>🎉TypeScript 中 Infer 的实战应用（<a href="https://github.com/vuejs/vue-next/blob/985f4c91d9d3f47e1314d230c249b3faf79c6b90/packages/reactivity/src/ref.ts#L89" target="_blank" rel="nofollow noreferrer noopener">Vue3 源码里 infer 的一个很重要的使用</a>） <a href="https://juejin.im/post/5e38dd65518825492b509dd6" target="_blank" rel="nofollow noreferrer noopener">TS 实现智能类型推导的简化版 Vuex</a></li>\n</ol>\n</li>\n</ol>\n<h2 id="刻意训练"><a href="#%E5%88%BB%E6%84%8F%E8%AE%AD%E7%BB%83" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>刻意训练</h2>\n<p>它几乎是一门新的语言（在类型世界里来说），需要你花费很大的精力去学好它。</p>\n<p>我对于 TypeScript 的学习建议其实就是一个关键词：<code class="language-text">刻意训练</code>，在过基础概念的时候，不厌其烦的在<code class="language-text">vscode</code>中敲击，理解，思考。在基础概念过完以后去寻找实践文章，比如我上面<code class="language-text">进阶</code>和<code class="language-text">实战</code>部分推荐的几篇，继续<code class="language-text">刻意训练</code>，一定要堆积代码量，学习一门新的语言是不可能靠看文档获得成功的。</p>\n<p>我会建立一个仓库，专门记录我遇到的<a href="https://github.com/sl1673495/typescript-codes" target="_blank" rel="nofollow noreferrer noopener">TypeScript 的有趣代码</a>，自己动手敲一遍，并且深入理解。</p>\n<h2 id="能力分级"><a href="#%E8%83%BD%E5%8A%9B%E5%88%86%E7%BA%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>能力分级</h2>\n<p>其实 TypeScript 的能力也是两级分化的，日常写业务来说，你定义一些 interface，配合 React.FC 这种官方内置的类型也就跑通了，没什么特别难的点。</p>\n<p>但是如果是造轮子呢？如果你自己写了一个工具库，并且类型比较复杂，你能保证推导出来吗？亦或者就拿 Vue3 来说，ref 是一个很复杂的嵌套类型，</p>\n<p>假如我们这样定义一个值<code class="language-text">const value = ref(ref(2))</code>，对于嵌套的 ref，Vue3 会做一层<code class="language-text">拆包</code>，也就是说其实<code class="language-text">ref.value</code>会是 2，</p>\n<p>那么它是如何让 ts 提示出 value 的类型是 number 的呢？</p>\n<p>如果你看到源码里的这段代码，你只有基础的话，保证懵逼。</p>\n<p><a href="https://juejin.im/post/5e94595c6fb9a03c341daa75" target="_blank" rel="nofollow noreferrer noopener">Vue3 跟着尤雨溪学 TypeScript 之 Ref 类型从零实现</a></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27710988347319153000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// Recursively unwraps nested value bindings.\nexport type UnwrapRef<T> = {\n  cRef: T extends ComputedRef<infer V> ? UnwrapRef<V> : T\n  ref: T extends Ref<infer V> ? UnwrapRef<V> : T\n  array: T\n  object: { [K in keyof T]: UnwrapRef<T[K]> }\n}[T extends ComputedRef<any>\n  ? \'cRef\'\n  : T extends Array<any>\n    ? \'array\'\n    : T extends Ref | Function | CollectionTypes | BaseTypes\n      ? \'ref\' // bail out on types that shouldn\'t be unwrapped\n      : T extends object ? \'object\' : \'ref\']`, `27710988347319153000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Recursively unwraps nested value bindings.</span>\n<span class="token keyword">export</span> type UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  cRef<span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">ComputedRef</span><span class="token operator">&lt;</span>infer <span class="token constant">V</span><span class="token operator">></span> <span class="token operator">?</span> UnwrapRef<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">></span> <span class="token punctuation">:</span> <span class="token constant">T</span>\n  ref<span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref</span><span class="token operator">&lt;</span>infer <span class="token constant">V</span><span class="token operator">></span> <span class="token operator">?</span> UnwrapRef<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">></span> <span class="token punctuation">:</span> <span class="token constant">T</span>\n  array<span class="token punctuation">:</span> <span class="token constant">T</span>\n  object<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span> UnwrapRef<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">></span> <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">ComputedRef</span><span class="token operator">&lt;</span>any<span class="token operator">></span>\n  <span class="token operator">?</span> <span class="token string">\'cRef\'</span>\n  <span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span><span class="token operator">&lt;</span>any<span class="token operator">></span>\n    <span class="token operator">?</span> <span class="token string">\'array\'</span>\n    <span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Ref</span> <span class="token operator">|</span> Function <span class="token operator">|</span> CollectionTypes <span class="token operator">|</span> BaseTypes\n      <span class="token operator">?</span> <span class="token string">\'ref\'</span> <span class="token comment">// bail out on types that shouldn\'t be unwrapped</span>\n      <span class="token punctuation">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span> <span class="token operator">?</span> <span class="token string">\'object\'</span> <span class="token punctuation">:</span> <span class="token string">\'ref\'</span><span class="token punctuation">]</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="业务开发人员"><a href="#%E4%B8%9A%E5%8A%A1%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>业务开发人员</h3>\n<p>如果短期内你对自己的要求是能上手业务，那么你理解 TypeScript 基础的<code class="language-text">interface</code>和<code class="language-text">type</code>编写和泛型的普通使用（可以理解为类型系统里的函数传参）也已经足够。</p>\n<h3 id="框架开发人员"><a href="#%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>框架开发人员</h3>\n<p>但是长期来看，如果你的目的是能够自己编写一些类型完善的库或框架，或者说你在公司扮演<code class="language-text">前端架构师</code>、<code class="language-text">轮子专家</code>等等角色，经常需要写一些偏底层的库给你的小伙伴们使用，那么你必须深入学习，这样才能做到给你的框架使用用户完美的类型体验。</p>\n<h2 id="面试题"><a href="#%E9%9D%A2%E8%AF%95%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>面试题</h2>\n<p>TypeScript 相关的面试题我见得不多，不过<code class="language-text">力扣中国</code>的面试题算是难度偏高的，其中有一道 TS 的面试题，可以说是实用性和难度都有所兼顾，简单来说就是解包。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="47299987191455380000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 解开参数和返回值中的Promise\nasyncMethod<T, U>(input: Promise<T>): Promise<Action<U>>\n ↓\nasyncMethod<T, U>(input: T): Action<U>\n\n// 解开参数中的Action\nsyncMethod<T, U>(action: Action<T>): Action<U>\n ↓\nsyncMethod<T, U>(action: T): Action<U>`, `47299987191455380000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                ts 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="ts"><pre style="counter-reset: linenumber NaN" class="language-ts line-numbers"><code class="language-ts"><span class="token comment">// 解开参数和返回值中的Promise</span>\nasyncMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Action<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">>></span>\n ↓\nasyncMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Action<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span>\n\n<span class="token comment">// 解开参数中的Action</span>\nsyncMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> Action<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">:</span> Action<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span>\n ↓\nsyncMethod<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">></span><span class="token punctuation">(</span>action<span class="token punctuation">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Action<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我在高强度学习了两三个月 TS 的情况下，已经能把这道题目相对轻松的解出来，相信这也是说明我的学习路线没有走偏（题解就不放了，尊重面试题，其实就是考察了<code class="language-text">映射类型</code>和<code class="language-text">infer</code>的使用）。 <a href="https://github.com/LeetCode-OpenSource/hire/blob/master/typescript_zh.md" target="_blank" rel="nofollow noreferrer noopener">力扣面试题</a></p>\n<h1 id="代码质量"><a href="#%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>代码质量</h1>\n<h2 id="代码风格"><a href="#%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>代码风格</h2>\n<ol>\n<li>在项目中集成 Prettier + ESLint + Airbnb Style Guide <a href="https://blog.echobind.com/integrating-prettier-eslint-airbnb-style-guide-in-vscode-47f07b5d7d6a" target="_blank" rel="nofollow noreferrer noopener">integrating-prettier-eslint-airbnb-style-guide-in-vscode</a></li>\n<li><a href="https://levelup.gitconnected.com/setting-up-eslint-with-prettier-typescript-and-visual-studio-code-d113bbec9857" target="_blank" rel="nofollow noreferrer noopener">在项目中集成 ESLint with Prettier, TypeScript</a></li>\n</ol>\n<h2 id="高质量架构"><a href="#%E9%AB%98%E8%B4%A8%E9%87%8F%E6%9E%B6%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>高质量架构</h2>\n<ol>\n<li>如何重构一个过万 Star 开源项—BetterScroll，是由滴滴的大佬<a href="https://github.com/theniceangel" target="_blank" rel="nofollow noreferrer noopener">嵇智</a>所带来的，无独有偶的是，这篇文章除了详细的介绍一个合格的开源项目应该做到的代码质量保证，测试流程，持续集成流程以外，也体现了他的一些思考深度，非常值得学习。 <a href="https://juejin.im/post/5e40f72df265da5732551bdf" target="_blank" rel="nofollow noreferrer noopener">如何重构一个过万 Star 开源项目—BetterScroll</a></li>\n</ol>\n<h2 id="git-提交信息"><a href="#git-%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Git 提交信息</h2>\n<ol>\n<li>很多新手在提交 Git 信息的时候会写的很随意，比如<code class="language-text">fix</code>、<code class="language-text">test</code>、<code class="language-text">修复</code>，这么糊弄的话是会被 leader 揍的！ <a href="https://jiongks.name/blog/git-commit" target="_blank" rel="nofollow noreferrer noopener">[译]如何撰写 Git 提交信息</a> <a href="https://www.jianshu.com/p/c7e40dab5b05" target="_blank" rel="nofollow noreferrer noopener">Git-Commit-Log 规范（Angular 规范）</a> <a href="https://www.npmjs.com/package/commitizen" target="_blank" rel="nofollow noreferrer noopener">commitizen</a>规范流程的 commit 工具，规范的 commit 格式也会让工具帮你生成友好的<code class="language-text">changelog</code></li>\n</ol>\n<h1 id="构建工具"><a href="#%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>构建工具</h1>\n<ol>\n<li>webpack 基础和优化 <a href="http://www.xbhub.com/wiki/webpack/" target="_blank" rel="nofollow noreferrer noopener">深入浅出 webpack</a></li>\n<li>滴滴前端工程师的 webpack 深入源码分析系列，非常的优秀。 <a href="https://github.com/DDFE/DDFE-blog/issues/36" target="_blank" rel="nofollow noreferrer noopener">webpack 系列之一总览</a></li>\n</ol>\n<h1 id="性能优化"><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>性能优化</h1>\n<ol>\n<li>推荐修言大佬的<a href="https://user-gold-cdn.xitu.io/2020/5/6/171e625d5fe327af?w=750&#x26;h=1334&#x26;f=png&#x26;s=807503" target="_blank" rel="nofollow noreferrer noopener">性能优化小册</a>，这个真的是讲的深入浅出，从<code class="language-text">webpack</code>到<code class="language-text">网络</code>到<code class="language-text">dom操作</code>，全方位的带你做一些性能优化实战。这本小册我当时看的时候真的是完全停不下来，修言大佬的风格既轻松又幽默。但是讲解的东西却能让你受益匪浅。</li>\n<li>谷歌开发者性能优化章节，不用多说了吧？很权威了。左侧菜单栏里还有更多相关内容，可以按需选择学习。 <a href="https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics" target="_blank" rel="nofollow noreferrer noopener">user-centric-performance-metrics</a></li>\n<li>详谈合成层，合成层这个东西离我们忽远忽近，可能你的一个不小心的操作就造成<code class="language-text">层爆炸</code>，当然需要仔细关注啦。起码，在性能遇到瓶颈的时候，你可以打开 chrome 的<code class="language-text">layer</code>面板，看看你的页面到底是怎么样的一个层分布。 <a href="https://juejin.im/entry/59dc9aedf265da43200232f9" target="_blank" rel="nofollow noreferrer noopener">详谈层合成（composite）</a></li>\n<li>刘博文大佬的性能优化指南，非常清晰的讲解了网页优化的几个重要的注意点。 <a href="https://zhuanlan.zhihu.com/p/66398148" target="_blank" rel="nofollow noreferrer noopener">让你的网页更丝滑</a></li>\n</ol>\n<h1 id="社区讨论"><a href="#%E7%A4%BE%E5%8C%BA%E8%AE%A8%E8%AE%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>社区讨论</h1>\n<p>作为一个合格的前端工程师，一定要积极的深入社区去了解最新的动向，比如在<code class="language-text">twitter</code>上关注你喜欢的技术开发人员，如 Dan、尤雨溪。</p>\n<p>另外 Github 上的很多 issue 也是宝藏讨论，我就以最近我对于 Vue3 的学习简单的举几个例子。</p>\n<h2 id="为什么-vue3-不需要时间切片？"><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88-vue3-%E4%B8%8D%E9%9C%80%E8%A6%81%E6%97%B6%E9%97%B4%E5%88%87%E7%89%87%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>为什么 Vue3 不需要时间切片？</h2>\n<p>尤雨溪解释关于为什么在 Vue3 中不加入 React 时间切片功能？并且详细的分析了 React 和 Vue3 之间的一些细节差别，狠狠的吹了一波 Vue3（爱了爱了）。 <a href="https://github.com/vuejs/rfcs/issues/89" target="_blank" rel="nofollow noreferrer noopener">Why remove time slicing from vue3?</a></p>\n<h2 id="vue3-的composition-api到底好在哪？"><a href="#vue3-%E7%9A%84composition-api%E5%88%B0%E5%BA%95%E5%A5%BD%E5%9C%A8%E5%93%AA%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vue3 的<code class="language-text">composition-api</code>到底好在哪？</h2>\n<p>Vue3 的 functional-api 相关的 rfc，尤大舌战群儒，深入浅出的为大家讲解了 Vue3 的设计思路等等。 <a href="https://github.com/vuejs/rfcs/issues/63" target="_blank" rel="nofollow noreferrer noopener">Amendment proposal to Function-based Component API</a></p>\n<h2 id="vue3composition-api的第一手文档"><a href="#vue3composition-api%E7%9A%84%E7%AC%AC%E4%B8%80%E6%89%8B%E6%96%87%E6%A1%A3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Vue3<code class="language-text">composition-api</code>的第一手文档</h2>\n<p>vue-composition-api 的 rfc 文档，在国内资料还不齐全的情况下，我去阅读了 <a href="https://vue-composition-api-rfc.netlify.com/#summary" target="_blank" rel="nofollow noreferrer noopener">vue-composition-api-rfc</a> 英文版文档，对于里面的设计思路叹为观止，学到了非常非常多尤大的思想。</p>\n<p>总之，对于你喜欢的仓库，都可以去看看它的 issue 有没有看起来感兴趣的讨论，你也会学到非常多的东西。并且你可以和作者保持思路上的同步，这是非常难得的一件事情。</p>\n<h2 id="关于-hook-的一些收获"><a href="#%E5%85%B3%E4%BA%8E-hook-%E7%9A%84%E4%B8%80%E4%BA%9B%E6%94%B6%E8%8E%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关于 Hook 的一些收获</h2>\n<p>我在狠狠的吸收了一波尤大对于 Vue3 <code class="language-text">composition-api</code>的设计思路的讲解，新旧模式的对比以后，这篇文章就是我对 Vue3 新模式的一些见解。 <a href="https://juejin.im/post/5e0da5606fb9a048483ecf64" target="_blank" rel="nofollow noreferrer noopener">Vue3 Composition-Api + TypeScript + 新型状态管理模式探索。</a></p>\n<p>在 Vue2 里，可以通过<code class="language-text">plugin</code>先体验<code class="language-text">composition-api</code>，截取这篇文章对应的实战项目中的一小部分代码吧：</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="9962166653891113000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`<template>\n  <Books :books=&quot;booksAvaluable&quot; :loading=&quot;loading&quot; />\n</template>\n\n<script lang=&quot;ts&quot;>\nimport { createComponent } from \'@vue/composition-api\';\nimport Books from \'@/components/Books.vue\';\nimport { useAsync } from \'@/hooks\';\nimport { getBooks } from \'@/hacks/fetch\';\nimport { useBookListInject } from \'@/context\';\nexport default createComponent({\n  name: \'books\',\n  setup() {\n    const { books, setBooks, booksAvaluable } = useBookListInject();\n    const loading = useAsync(async () => {\n      const requestBooks = await getBooks();\n      setBooks(requestBooks);\n    });\n    return { booksAvaluable, loading };\n  },\n  components: {\n    Books\n  }\n});\n</script>\n\n<style>\n.content {\n  max-width: 700px;\n  margin: auto;\n}\n</style>`, `9962166653891113000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                vue 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="vue"><pre style="counter-reset: linenumber NaN" class="language-vue line-numbers"><code class="language-vue">&lt;template&gt;\n  &lt;Books :books=&quot;booksAvaluable&quot; :loading=&quot;loading&quot; /&gt;\n&lt;/template&gt;\n\n&lt;script lang=&quot;ts&quot;&gt;\nimport { createComponent } from &#39;@vue/composition-api&#39;;\nimport Books from &#39;@/components/Books.vue&#39;;\nimport { useAsync } from &#39;@/hooks&#39;;\nimport { getBooks } from &#39;@/hacks/fetch&#39;;\nimport { useBookListInject } from &#39;@/context&#39;;\nexport default createComponent({\n  name: &#39;books&#39;,\n  setup() {\n    const { books, setBooks, booksAvaluable } = useBookListInject();\n    const loading = useAsync(async () =&gt; {\n      const requestBooks = await getBooks();\n      setBooks(requestBooks);\n    });\n    return { booksAvaluable, loading };\n  },\n  components: {\n    Books\n  }\n});\n&lt;/script&gt;\n\n&lt;style&gt;\n.content {\n  max-width: 700px;\n  margin: auto;\n}\n&lt;/style&gt;</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>本实战对应仓库：</p>\n<p><a href="https://github.com/sl1673495/vue-bookshelf" target="_blank" rel="nofollow noreferrer noopener">vue-bookshelf</a></p>\n<p>并且由于它和<code class="language-text">React Hook</code>在很多方面的思想也非常相近，这甚至对于我在<code class="language-text">React Hook</code>上的使用也大有裨益，比如代码组织的思路上，</p>\n<p>在第一次使用<code class="language-text">Hook</code>开发的时候，大部分人可能还是会保留着以前的思想，把<code class="language-text">state</code>集中起来定义在代码的前一大段，把<code class="language-text">computed</code>集中定义在第二段，把<code class="language-text">mutation</code>定义在第三段，如果不看尤大对于设计思想的讲解，我也一直是在这样做。</p>\n<p>但是为什么 Logical Concerns 优于 Vue2 和 React Class Component 的 Option Types？看完<a href="https://vue-composition-api-rfc.netlify.com/#detailed-design" target="_blank" rel="nofollow noreferrer noopener">detailed-design</a>这个章节你就全部明白了，并且这会融入到你日常开发中去。</p>\n<p>总之，看完这篇以后，我果断的把公司里的首屏组件的一坨代码直接抽成了 n 个自定义 hook，维护效率提升简直像是坐火箭。</p>\n<p>当然，社区里的宝藏 issue 肯定不止这些，我只是简单的列出了几个，但就是这几个都让我的技术视野开阔了很多，并且是真正的融入到公司的业务实战中去，是<code class="language-text">具有业务价值</code>的。希望你养成看 issue，紧跟英文社区的习惯，Github issue 里单纯的技术探讨氛围，真的是国内很少有社区可以媲美的。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="38153207171677140000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function AppInner({ children }) {\n  const [menus, setMenus] = useState({});\n\n  // 用户信息\n  const user = useUser();\n\n  // 主题能力\n  useTheme();\n\n  // 权限获取\n  useAuth({\n    setMenus\n  });\n\n  // 动态菜单也需要用到菜单的能力\n  useDynamicMenus({\n    menus,\n    setMenus\n  });\n\n  return (\n    <Context.Provider value={user}>\n      <Layout routers={backgrounds}>{children}</Layout>\n    </Context.Provider>\n  );\n}`, `38153207171677140000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">AppInner</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> <span class="token punctuation">[</span>menus<span class="token punctuation">,</span> setMenus<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 用户信息</span>\n  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">useUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 主题能力</span>\n  <span class="token function">useTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 权限获取</span>\n  <span class="token function">useAuth</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    setMenus\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// 动态菜单也需要用到菜单的能力</span>\n  <span class="token function">useDynamicMenus</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    menus<span class="token punctuation">,</span>\n    setMenus\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>Context<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>Layout routers<span class="token operator">=</span><span class="token punctuation">{</span>backgrounds<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>Context<span class="token punctuation">.</span>Provider<span class="token operator">></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>可以看到，<code class="language-text">Hook</code>在代码组织的方面有着得天独厚的优势，甚至各个<code class="language-text">模块</code>之间值的传递都是那么的自然，仅仅是函数传参而已。总之，社区推出一些新的东西，它总归是解决了之前的一些痛点。我们跟着大佬的思路走，一定有肉吃。</p>\n<h2 id="tree-shaking-的-issue"><a href="#tree-shaking-%E7%9A%84-issue" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tree Shaking 的 Issue</h2>\n<p>相学长的文章<a href="https://zhuanlan.zhihu.com/p/32831172" target="_blank" rel="nofollow noreferrer noopener">你的 Tree-Shaking 并没什么卵用</a>中，也详细的描述了他对于<code class="language-text">副作用</code>的一些探寻过程，在<a href="https://github.com/mishoo/UglifyJS2/issues/1261" target="_blank" rel="nofollow noreferrer noopener">UglifyJS 的 Issue</a>中找到了最终的答案，然后贡献给中文社区，这些内容最开始不会在任何中文社区里出现，只有靠你去探寻和发现。</p>\n<h1 id="学习方法的转变"><a href="#%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95%E7%9A%84%E8%BD%AC%E5%8F%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>学习方法的转变</h1>\n<p>从初中级前端开始往高级前端进阶，有一个很重要的点，就是很多情况下国内社区能找到的资料已经不够用了，而且有很多优质资料也是从国外社区二手、三手翻译过来的，翻译质量也不能保证。</p>\n<p>这就引申出我们进阶的第一个点，<strong>开始接受英文资料</strong>。</p>\n<p>这里很多同学说，我的英文能力不行啊，看不懂。其实我想说，笔者的英语能力也很一般，从去年开始我立了个目标，就是带着划词翻译插件也要开始艰难的看英文文章和资料，遇到不懂的单词就划出来看两眼（没有刻意去背），第五六次遇见这个单词的时候，就差不多记得它是什么意思了。</p>\n<p>半年左右的时间下来，（大概保持每周 3 篇以上的阅读量）能肉眼可见的感觉自己的英语能力在进步，很多时候不用划词翻译插件，也可以完整的阅读下来一段文章。</p>\n<p>这里是我当时阅读英文优质文章的一些记录，</p>\n<p><a href="https://github.com/sl1673495/blogs/issues/15" target="_blank" rel="nofollow noreferrer noopener">英文技术文章阅读</a></p>\n<p>后面英文阅读慢慢成了一件比较自然的事情，也就没有再刻意去记录，前期可以用这种方式激励自己。</p>\n<p>推荐两个英文站点吧，有很多高质量的前端文章。</p>\n<p><a href="https://dev.to/t/javascript" target="_blank" rel="nofollow noreferrer noopener">dev.to</a> <a href="https://medium.com" target="_blank" rel="nofollow noreferrer noopener">medium</a></p>\n<p>medium 可能需要借助一些科学工具才能查看，但是里面的会员付费以及作者激励机制使得文章非常的优质。登录自己的谷歌账号即可成为会员，前期可能首页不会推荐一些前端相关的文章，你可以自己去搜索关键字如<code class="language-text">Vue</code>、<code class="language-text">React</code>、<code class="language-text">Webpack</code>，任何你兴趣的前端技术栈，不需要过多久你的首页就会出现前端的推荐内容。好好享受这个高质量的英文社区吧。</p>\n<h1 id="关于实践"><a href="#%E5%85%B3%E4%BA%8E%E5%AE%9E%E8%B7%B5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>关于实践</h1>\n<p>社区有很多大佬实力很强，但是对新手写的代码嗤之以鼻，认为有 <code class="language-text">any</code> 的就不叫 <code class="language-text">TypeScript</code>、认为没有<code class="language-text">单元测试</code>就没资格丢到 Github 上去。这种言论其实也不怪他们，他们也只是对开源软件的要求高到偏执而已。但是对于新手学习来说，这种言论很容易对大家造成打击，导致不敢写 ts，写的东西不敢放出来。其实大可不必，<code class="language-text">工业聚</code> 对于这些观点就发表了一篇很好的看法，让我觉得深受打动，也就是这篇文章开始，我慢慢的把旧项目用 ts 改造起来，慢慢的进步。</p>\n<p><a href="https://mp.weixin.qq.com/s?__biz=MzA4Njc2MTE3Ng==&#x26;mid=2456151423&#x26;idx=1&#x26;sn=2fec2ff0606b865abaaaaea48ddfd167&#x26;chksm=88528ec8bf2507de91cec62b4bad281fb8bf6d16c8a1ea04ea3fedb871099dfb7fda42082fff&#x26;mpshare=1&#x26;scene=1&#x26;srcid=&#x26;sharer_sharetime=1585884823115&#x26;sharer_shareid=82384198865aad802052fa45394cd852#rd" target="_blank" rel="nofollow noreferrer noopener">Vue 3.0 公开代码之后……</a></p>',
id:"/github/workspace/blog/高级前端必备知识点/index.md absPath of file >>> MarkdownRemark",timeToRead:20,frontmatter:{date:"2020-06-02 14:58:45",path:"/advanced-front-end-knowledge-points/",tags:"前端, 高级前端",title:"高级前端必备知识点",draft:null}},{excerpt:"HTML 篇 HTML5 语义化 html5 语义化标签 CSS 篇 CSS 常见面试题 50 道 CSS 经典面试题 能不能讲一讲 Flex 布局，以及常用的属性？ 阮一峰的 flex 系列 BFC 是什么？能解决什么问题？ 什么是 BFC？什么条件下会触发？应用场景有哪些？ JS 基础篇 讲讲 JS 的数据类型？ 最新的 ECMAScript 标准定义了 8 种数据类型: 6 种原始类型 Boolean Undefined Number BigInt String Symbol null…",html:'<h1 id="html-篇"><a href="#html-%E7%AF%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTML 篇</h1>\n<h2 id="html5-语义化"><a href="#html5-%E8%AF%AD%E4%B9%89%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTML5 语义化</h2>\n<p><a href="https://rainylog.com/post/ife-note-1" target="_blank" rel="nofollow noreferrer noopener">html5 语义化标签</a></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-06-01-11-49-31-0a0d5f1dc79b9e5edce94c7580ca9b50-87f29.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 602px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 75.24916943521596%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABnklEQVQoz3WSSW7CQBBF+/6HQGwQEitkMAbMBRBIiCE2gxlCDB5iJtliSx5dApE4/EXrd1X96hpaLZdL3/e32+3Xb3y+gCsBfyxAJUmSpul+vw+CIH3gcrlEUfStQQDZd7sdRCxxHJ9OpyzLlGVZtm23Wq1ms9nW4Mppmmaj0TA1IKVSqVarEWNpENDpdJTjOB8as9lsPp9DRqPRZDLhHAwGkPF4jLFcLvf7/eFwuFgsVquV53n0qyiJHrjQA6VSXvTA7XbDS1IKrtfrkDAMUW42G9qEKxji9XpNepLhQwBBTFeFQoGXD4dDtVqlRh4gEomEKZSMihnIMDDBeQrx+XxGxvzQGIYhJSBGgpfH72IKeA4WE5WTm3domFCWhAWx67qklkoBxn/EuNF4GlIkGsTT6RSvryEZldSQvEBaEC5bhbAnxKyXFuSxu5iGEcfvgfd4PLJhhiSzECN6JVvtdruc5HZf4GiwBWTFYrHX6/ERnl6CFc2QlT9k5SDfTkilUmHVzx8muP/tTCPNIdQQfr1e8zGKAUgPeQQa0Xv8ACwoB2w737imAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 06 01 11 49 31"\n        title=""\n        src="/static/2020-06-01-11-49-31-0a0d5f1dc79b9e5edce94c7580ca9b50-87f29.png"\n        srcset="/static/2020-06-01-11-49-31-0a0d5f1dc79b9e5edce94c7580ca9b50-38577.png 200w,\n/static/2020-06-01-11-49-31-0a0d5f1dc79b9e5edce94c7580ca9b50-26124.png 400w,\n/static/2020-06-01-11-49-31-0a0d5f1dc79b9e5edce94c7580ca9b50-87f29.png 602w"\n        sizes="(max-width: 602px) 100vw, 602px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="css-篇"><a href="#css-%E7%AF%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 篇</h1>\n<h2 id="css-常见面试题"><a href="#css-%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS 常见面试题</h2>\n<p><a href="https://www.itcodemonkey.com/article/2853.html" target="_blank" rel="nofollow noreferrer noopener">50 道 CSS 经典面试题</a></p>\n<h2 id="能不能讲一讲-flex-布局，以及常用的属性？"><a href="#%E8%83%BD%E4%B8%8D%E8%83%BD%E8%AE%B2%E4%B8%80%E8%AE%B2-flex-%E5%B8%83%E5%B1%80%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%B8%B8%E7%94%A8%E7%9A%84%E5%B1%9E%E6%80%A7%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>能不能讲一讲 Flex 布局，以及常用的属性？</h2>\n<p><a href="https://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="nofollow noreferrer noopener">阮一峰的 flex 系列</a></p>\n<h2 id="bfc-是什么？能解决什么问题？"><a href="#bfc-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E8%83%BD%E8%A7%A3%E5%86%B3%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BFC 是什么？能解决什么问题？</h2>\n<p><a href="http://47.98.159.95/my_blog/css/008.html" target="_blank" rel="nofollow noreferrer noopener">什么是 BFC？什么条件下会触发？应用场景有哪些？</a></p>\n<h1 id="js-基础篇"><a href="#js-%E5%9F%BA%E7%A1%80%E7%AF%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JS 基础篇</h1>\n<h2 id="讲讲-js-的数据类型？"><a href="#%E8%AE%B2%E8%AE%B2-js-%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲 JS 的数据类型？</h2>\n<p>最新的 ECMAScript 标准定义了 8 种数据类型:</p>\n<ul>\n<li>\n<p>6 种原始类型</p>\n<ul>\n<li>Boolean</li>\n<li>Undefined</li>\n<li>Number</li>\n<li>BigInt</li>\n<li>String</li>\n<li>Symbol</li>\n</ul>\n</li>\n<li>null</li>\n<li>Object</li>\n<li>Function</li>\n</ul>\n<h2 id="讲讲-map-和-set？"><a href="#%E8%AE%B2%E8%AE%B2-map-%E5%92%8C-set%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲 Map 和 Set？</h2>\n<ol>\n<li>Map 的 key 相比较普通对象来说更为灵活，普通对象的 key 只能以基础数据类型作为 key 值，并且所有传入的 key 值都会被转化成 string 类型，而 Map 的 key 可以是各种数据类型格式。</li>\n<li>Set 可以讲讲它去重的特性。</li>\n</ol>\n<h2 id="weakmap-和-map-之间的区别？"><a href="#weakmap-%E5%92%8C-map-%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WeakMap 和 Map 之间的区别？</h2>\n<p>WeakMap 只能以复杂数据类型也就是对象作为 key，并且 key 值是弱引用，对于垃圾回收更加友好。</p>\n<h2 id="讲讲原型链？"><a href="#%E8%AE%B2%E8%AE%B2%E5%8E%9F%E5%9E%8B%E9%93%BE%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲原型链？</h2>\n<p><a href="https://github.com/mqyqingfeng/Blog/issues/2" target="_blank" rel="nofollow noreferrer noopener">JavaScript 深入之从原型到原型链</a></p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="3462453008746769000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`function Person() {}\nvar person = new Person();\nconsole.log(person.constructor === Person); // true，person 没有 constructor 属性，会从 person 的原型也就是 Person.prototype 中取，即 person.constructor === Person.prototype.constructor\nconsole.log(person.__proto__ == Person.prototype); // true，__proto__ 属性会指向该对象的原型\nconsole.log(Person.prototype.constructor == Person); // true\n// 顺便学习一个ES5的方法,可以获得对象的原型\nconsole.log(Object.getPrototypeOf(person) === Person.prototype); // true\nconsole.log(Object.prototype.__proto__ === null); // true`, `3462453008746769000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true，person 没有 constructor 属性，会从 person 的原型也就是 Person.prototype 中取，即 person.constructor === Person.prototype.constructor</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>__proto__ <span class="token operator">==</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true，__proto__ 属性会指向该对象的原型</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">==</span> Person<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\n<span class="token comment">// 顺便学习一个ES5的方法,可以获得对象的原型</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-06-02-16-04-31-db29159941798d734765763d30d0c6fe-a54b5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 88.98305084745762%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABAklEQVQ4y7VT2w7CIAwdpUA3mbpNH4yJ//+ZHqjDaXBRow0j7drTO03zDzLGEBHuj5HW2pCJmd/Cw1REXCbELPG991ClWyRZiIB/8AihnQk6+0jQIgXAVFvJRYtUHgziAzD/SdbdeGKJ9bRhB+uFr9spsmwP0k8IsQo2KQnnvIWIhH3r2ijbidiHzd4Q1TvM+FwIcZQ4SD8GnDg4iexFMRDh13wxeAUT/LsUZW1DSp8LMoG7Xb3mJaF4n+mp4fF4MZYrAF2GVPViSXR5dEkwOukirGBQ6bbmCR0YylQY3XN2ge61NC9nrnu6aEwCbKYz5ZmsNezl/vcDsvnynWr+v3nzVzXPCAXbnt/2AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 06 02 16 04 31"\n        title=""\n        src="/static/2020-06-02-16-04-31-db29159941798d734765763d30d0c6fe-a54b5.png"\n        srcset="/static/2020-06-02-16-04-31-db29159941798d734765763d30d0c6fe-33798.png 200w,\n/static/2020-06-02-16-04-31-db29159941798d734765763d30d0c6fe-27c47.png 400w,\n/static/2020-06-02-16-04-31-db29159941798d734765763d30d0c6fe-a54b5.png 590w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="讲讲-this？"><a href="#%E8%AE%B2%E8%AE%B2-this%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲 this？</h2>\n<p><a href="https://juejin.im/post/59748cbb6fb9a06bb21ae36d" target="_blank" rel="nofollow noreferrer noopener">JavaScript 中的 this</a></p>\n<h2 id="浅拷贝和深拷贝的区别"><a href="#%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%8C%BA%E5%88%AB" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>浅拷贝和深拷贝的区别</h2>\n<ul>\n<li>\n<p>浅拷贝：一般指的是把对象的第一层拷贝到一个新对象上去，比如</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="34698329354451810000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var a = { count: 1, deep: { count: 2 } };\nvar b = Object.assign({}, a);\n// 或者\nvar b = { ...a };`, `34698329354451810000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> deep<span class="token punctuation">:</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> b <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 或者</span>\n<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>深拷贝：一般需要借助递归实现，如果对象的值还是个对象，要进一步的深入拷贝，完全替换掉每一个复杂类型的引用。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="55445495549387050000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var deepCopy = (obj) => {\nvar ret = {};\nfor (var key in obj) {\n  var value = obj[key];\n  ret[key] = typeof value === \'object\' ? deepCopy(value) : value;\n}\nreturn ret;\n};`, `55445495549387050000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">deepCopy</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>\n  ret<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">\'object\'</span> <span class="token operator">?</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">:</span> value<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">return</span> ret<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ul>\n<p>对于同一个用例来说</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="92889981396628340000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 浅拷贝\nvar a = { count: 1, deep: { count: 2 } };\nvar b = { ...a };\n\na.deep.count = 5;\nb.deep.count; // 5\n\nvar a = { count: 1, deep: { count: 2 } };\nvar b = deepCopy(a);\na.deep.count = 5;\nb.deep.count; // 2`, `92889981396628340000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 浅拷贝</span>\n<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> deep<span class="token punctuation">:</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\na<span class="token punctuation">.</span>deep<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\nb<span class="token punctuation">.</span>deep<span class="token punctuation">.</span>count<span class="token punctuation">;</span> <span class="token comment">// 5</span>\n\n<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> deep<span class="token punctuation">:</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>\na<span class="token punctuation">.</span>deep<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>\nb<span class="token punctuation">.</span>deep<span class="token punctuation">.</span>count<span class="token punctuation">;</span> <span class="token comment">// 2</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="讲讲事件冒泡和事件捕获以及事件代理？"><a href="#%E8%AE%B2%E8%AE%B2%E4%BA%8B%E4%BB%B6%E5%86%92%E6%B3%A1%E5%92%8C%E4%BA%8B%E4%BB%B6%E6%8D%95%E8%8E%B7%E4%BB%A5%E5%8F%8A%E4%BA%8B%E4%BB%B6%E4%BB%A3%E7%90%86%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲事件冒泡和事件捕获以及事件代理？</h2>\n<p><a href="https://juejin.im/post/5cc941436fb9a03236394027" target="_blank" rel="nofollow noreferrer noopener">你真的理解事件冒泡和事件捕获吗？</a></p>\n<h1 id="框架篇"><a href="#%E6%A1%86%E6%9E%B6%E7%AF%87" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>框架篇</h1>\n<h2 id="react"><a href="#react" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React</h2>\n<h3 id="react2019-高频面试题"><a href="#react2019-%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React2019 高频面试题</h3>\n<p><a href="https://juejin.im/post/5d5f44dae51d4561df7805b4" target="_blank" rel="nofollow noreferrer noopener">2019 年 17 道高频 React 面试题及详解</a></p>\n<h3 id="有没有使用过-react-hooks？"><a href="#%E6%9C%89%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8%E8%BF%87-react-hooks%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>有没有使用过 React Hooks？</h3>\n<ul>\n<li>常用的有哪些？都有什么作用？</li>\n<li>如何使用 hook 在依赖改变的时候重新发送请求？</li>\n<li>写过自定义 hook 吗？解决了哪些问题。</li>\n<li>讲讲 React Hooks 的闭包陷阱，你是怎么解决的？</li>\n</ul>\n<p><a href="https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/" target="_blank" rel="nofollow noreferrer noopener">useEffect 完整指南</a></p>\n<h3 id="讲讲-react-中的组件复用？"><a href="#%E8%AE%B2%E8%AE%B2-react-%E4%B8%AD%E7%9A%84%E7%BB%84%E4%BB%B6%E5%A4%8D%E7%94%A8%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲 React 中的组件复用？</h3>\n<p><a href="https://juejin.im/post/5cad39b3f265da03502b1c0a" target="_blank" rel="nofollow noreferrer noopener">【React 深入】从 Mixin 到 HOC 再到 Hook</a></p>\n<h1 id="工具"><a href="#%E5%B7%A5%E5%85%B7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>工具</h1>\n<h2 id="webpack-的基础知识"><a href="#webpack-%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>webpack 的基础知识</h2>\n<p><a href="https://juejin.im/post/5e5c65fc6fb9a07cd00d8838" target="_blank" rel="nofollow noreferrer noopener">掘金刘小夕的 webpack 系列</a></p>\n<h1 id="性能优化"><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>性能优化</h1>\n<h2 id="讲讲-web-各个阶段的性能优化？"><a href="#%E8%AE%B2%E8%AE%B2-web-%E5%90%84%E4%B8%AA%E9%98%B6%E6%AE%B5%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲 web 各个阶段的性能优化？</h2>\n<p><a href="https://mp.weixin.qq.com/s/XSvhOF_N0VbuOKStwi0IYw" target="_blank" rel="nofollow noreferrer noopener">React 16 加载性能优化指南</a></p>\n<h2 id="webpack-代码分割是怎么做的？"><a href="#webpack-%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E7%9A%84%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>webpack 代码分割是怎么做的？</h2>\n<p><a href="https://juejin.im/post/5e796ec1e51d45271e2a9af9" target="_blank" rel="nofollow noreferrer noopener">webpack 的代码分割（路由懒加载同理）</a></p>\n<h1 id="网络"><a href="#%E7%BD%91%E7%BB%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网络</h1>\n<h2 id="讲讲-http-的基本结构？"><a href="#%E8%AE%B2%E8%AE%B2-http-%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲 http 的基本结构？</h2>\n<p><a href="http://47.98.159.95/my_blog/http/001.html#%E8%B5%B7%E5%A7%8B%E8%A1%8C" target="_blank" rel="nofollow noreferrer noopener">http 的基础结构</a></p>\n<h2 id="浏览器从输入-url-到渲染页面，发生了什么？"><a href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BB%8E%E8%BE%93%E5%85%A5-url-%E5%88%B0%E6%B8%B2%E6%9F%93%E9%A1%B5%E9%9D%A2%EF%BC%8C%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>浏览器从输入 url 到渲染页面，发生了什么？</h2>\n<p><a href="https://juejin.im/post/5e32449d6fb9a02fe4581907" target="_blank" rel="nofollow noreferrer noopener">细说浏览器输入 URL 后发生了什么</a></p>\n<h2 id="讲讲你对-cookie-的理解？包括-samesite-属性"><a href="#%E8%AE%B2%E8%AE%B2%E4%BD%A0%E5%AF%B9-cookie-%E7%9A%84%E7%90%86%E8%A7%A3%EF%BC%9F%E5%8C%85%E6%8B%AC-samesite-%E5%B1%9E%E6%80%A7" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲你对 cookie 的理解？包括 SameSite 属性</h2>\n<p><a href="https://juejin.im/post/5e718ecc6fb9a07cda098c2d" target="_blank" rel="nofollow noreferrer noopener">预测最近面试会考 Cookie 的 SameSite 属性</a></p>\n<h2 id="谈谈-https-的原理？为什么-https-能保证安全？"><a href="#%E8%B0%88%E8%B0%88-https-%E7%9A%84%E5%8E%9F%E7%90%86%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88-https-%E8%83%BD%E4%BF%9D%E8%AF%81%E5%AE%89%E5%85%A8%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>谈谈 https 的原理？为什么 https 能保证安全？</h2>\n<p><a href="https://juejin.im/post/59e4c02151882578d02f4aca" target="_blank" rel="nofollow noreferrer noopener">谈谈 HTTPS</a></p>\n<h2 id="谈谈前端的安全知识？xss、csrf，以及如何防范。"><a href="#%E8%B0%88%E8%B0%88%E5%89%8D%E7%AB%AF%E7%9A%84%E5%AE%89%E5%85%A8%E7%9F%A5%E8%AF%86%EF%BC%9Fxss%E3%80%81csrf%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E9%98%B2%E8%8C%83%E3%80%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>谈谈前端的安全知识？XSS、CSRF，以及如何防范。</h2>\n<p><a href="https://juejin.im/post/5cd6ad7a51882568d3670a8e" target="_blank" rel="nofollow noreferrer noopener">寒冬求职之你必须要懂的 Web 安全</a></p>\n<h2 id="讲讲-http-的缓存机制吧，强缓存，协商缓存？"><a href="#%E8%AE%B2%E8%AE%B2-http-%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%E5%90%A7%EF%BC%8C%E5%BC%BA%E7%BC%93%E5%AD%98%EF%BC%8C%E5%8D%8F%E5%95%86%E7%BC%93%E5%AD%98%EF%BC%9F" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>讲讲 http 的缓存机制吧，强缓存，协商缓存？</h2>\n<p><a href="https://www.jianshu.com/p/54cc04190252" target="_blank" rel="nofollow noreferrer noopener">深入理解浏览器的缓存机制</a></p>\n<h1 id="手写系列"><a href="#%E6%89%8B%E5%86%99%E7%B3%BB%E5%88%97" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>手写系列</h1>\n<h2 id="基础"><a href="#%E5%9F%BA%E7%A1%80" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>基础</h2>\n<h3 id="手写各种原生方法"><a href="#%E6%89%8B%E5%86%99%E5%90%84%E7%A7%8D%E5%8E%9F%E7%94%9F%E6%96%B9%E6%B3%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>手写各种原生方法</h3>\n<ul>\n<li>如何模拟实现一个 new 的效果？</li>\n<li>如何模拟实现一个 bind 的效果？</li>\n<li>如何实现一个 call/apply 函数？</li>\n</ul>\n<p><a href="http://47.98.159.95/my_blog/js-api/001.html" target="_blank" rel="nofollow noreferrer noopener">三元-手写代码系列</a></p>\n<h2 id="进阶"><a href="#%E8%BF%9B%E9%98%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进阶</h2>\n<p><a href="https://juejin.im/post/5e6f4579f265da576429a907" target="_blank" rel="nofollow noreferrer noopener">手写 Promise 20 行</a></p>\n<p><a href="https://github.com/xieranmaya/blog/issues/3" target="_blank" rel="nofollow noreferrer noopener">剖析 Promise 内部结构，一步一步实现一个完整的、能通过所有 Test case 的 Promise 类</a></p>',
id:"/github/workspace/blog/中级前端必备知识点/index.md absPath of file >>> MarkdownRemark",timeToRead:9,frontmatter:{date:"2020-06-01 11:25:48",path:"/middle-front-end-knowledge-points/",tags:"前端, 中级前端",title:"中级前端必备知识点",draft:null}},{excerpt:"Fiber 的数据结构 此小节会通过两个   来展示   以及   的数据结构。 首先用代码表示上图节点间的关系。比如  下有  , 就可以把它们间的关系写成  ; Stack Reconciler 在   之前，节点之间的关系可以用数据结构中   来表示。 如下实现   函数, 将深度遍历的节点打印出来。 输出结果为:  Fiber Reconciler…",html:'<h1 id="fiber-的数据结构"><a href="#fiber-%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fiber 的数据结构</h1>\n<p>此小节会通过两个 <code class="language-text">demo</code> 来展示 <code class="language-text">Stack Reconciler</code> 以及 <code class="language-text">Fiber Reconciler</code> 的数据结构。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-05-28-14-50-48-09d9e762f85f9e5c7638bf975d99727d-7027d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 300px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAIAAADzvTiPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB1klEQVQ4y5WU2Y6CUBBE5/9/SL/A+OCDPrivuCtq3FFUmDNU5sbcuTDYieYCXV3d1QVfcRxHURQEweVyeT6fURJxvvjiB6zf78/n88ViEX8SP+Dz+Tybzfb7faPRGI1Gk8nkM3Cz2RwOh+Px+PF4TKdT+s8L1tgmlsvl6/V6v/MP2ITv+8y/Xq/B52U2/CCRrdPpMDyFOO92u7xgxgaDZqvVCi2OxyPntC4cbdfrdcQ3o9ZqtTAMc4EJONFc5+12WywW05bnADOnqO73Oy1cr1fP86iiKXBUFhipxUwJlo/zWq0WVfwkEJKibjD24DFsukRqYSQn/6VSSfpzaYMHgwGC93o9g393EearVqvYURa0V4U2OIxtd7tdWvWSECcA7pxOJ3LUuc1MzzgEsFkPjYiHEkhAAsxuMH4gm9db2VwWCgXY9BQhAW82myy1RQshVHTRbrfNe8bObrdbKpiZBSaJPZHNkGaKcrmcqrbA2jM9o5bIZW8eVSoVZtZlFlh4zkqlc1ZFI6zTLZjlbUtLGmEE1uEGU54MyyEmMDafusPhoM3bYLzFkNQ2kub9ktAYXaEwq04jz3ol6RlVcMLfDwATUTH4DXRxOAwxnJ9e5mQWnoZJkPkNxuof2xgpx1gAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 05 28 14 50 48"\n        title=""\n        src="/static/2020-05-28-14-50-48-09d9e762f85f9e5c7638bf975d99727d-7027d.png"\n        srcset="/static/2020-05-28-14-50-48-09d9e762f85f9e5c7638bf975d99727d-55fa9.png 200w,\n/static/2020-05-28-14-50-48-09d9e762f85f9e5c7638bf975d99727d-7027d.png 300w"\n        sizes="(max-width: 300px) 100vw, 300px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>首先用代码表示上图节点间的关系。比如 <code class="language-text">a1 节点</code>下有 <code class="language-text">b1、b2、b3 节点</code>, 就可以把它们间的关系写成 <code class="language-text">a1.render = () =&gt; [b1, b2, b3]</code>;</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="76351292650819260000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var a1 = { name: \'a1\', render = () => [b1, b2, b3] }\nvar b1 = { name: \'b1\', render = () => [c1] }\nvar b2 = { name: \'b2\', render = () => [c2] }\nvar b3 = { name: \'b3\', render = () => [] }\nvar c1 = { name: \'c1\', render = () => [d1] }\nvar c2 = { name: \'c2\', render = () => [] }\nvar d1 = { name: \'d1\', render = () => [d2] }\nvar d2 = { name: \'d2\', render = () => [] }`, `76351292650819260000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'a1\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>b1<span class="token punctuation">,</span> b2<span class="token punctuation">,</span> b3<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> b1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'b1\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>c1<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> b2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'b2\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>c2<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> b3 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'b3\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> c1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'c1\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>d1<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> c2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'c2\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> d1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'d1\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span>d2<span class="token punctuation">]</span> <span class="token punctuation">}</span>\n<span class="token keyword">var</span> d2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">\'d2\'</span><span class="token punctuation">,</span> <span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="stack-reconciler"><a href="#stack-reconciler" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stack Reconciler</h2>\n<p>在 <code class="language-text">React 16</code> 之前，节点之间的关系可以用数据结构中 <code class="language-text">树的深度遍历</code> 来表示。</p>\n<p>如下实现 <code class="language-text">walk</code> 函数, 将深度遍历的节点打印出来。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="27499986141323653000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`walk(a1);\n\nfunction walk(instance) {\n  if (!instance) return;\n  console.log(instance.name);\n  instance.render().map(walk);\n}`, `27499986141323653000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">walk</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">walk</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>walk<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>输出结果为: <code class="language-text">a1 b1 c1 d1 d2 b2 c2 b3</code></p>\n<h2 id="fiber-reconciler"><a href="#fiber-reconciler" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fiber Reconciler</h2>\n<p>在 <code class="language-text">React 16</code> 中，节点之间的关系可以用数据结构中的 <code class="language-text">链表</code> 来表示。</p>\n<p>节点之间的链表有三种情形, 用图表示如下:</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-05-28-14-52-10-62a31ae4097adb3c3b9f05ed0d77f9da-7027d.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 300px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 133.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAIAAADzvTiPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADL0lEQVQ4y5VU2ZKcNhTt/89P5MFvSV5SqVT5JUulEtvjTs00PXRPL4CaHQlJSIDYBEQC3O01Ht8qiovQ0T0690grznkYhlEUIZSO4zgMw/jsWHmeByHEhByfdk1Zjt8SKwAucRQyip+2WwrcMiX9ROBZ4Jxn93v75d0Bo0TBmOfXYqr/DPxKPYcoe/G3PX8X5o78+lJjpfwqXoOZEK8Pbi07hNHe2FyMRxs4w9A/q3Im6gcAEWembSv9KOfHg439oOGsadrhy1vQ4KrpHpxEJX4YGdtNEtrf//LWOAZjLWgYlTkbvtBCDe46uQFx28teDownOLVJnruEzjPYel373mclXM2vvZ/CXIssZVUWsUpijGlREE6tV6+tN3cBQgtCLfFuldXM5xQiH+tSnSyLQm+hH2TC8reGyfKccH4+HPtKtKWQsruyWMAezewYq1R2Bef+1acny/ZcD6fwux//fTp5HcuyIGx4MU9YwCHN/DQt6z5Fx0fzp35YwDnnyvM8I3+ZzqO/MGf/vKoOx1tlBc6qcnuyT6e95zuObWmTjDeZuKhML87KEqrl12uwefDCcDX/SzkvqtYOAsuxEUL3m713dhpCRF4Ok0JN17mYoKLcHk8QQcqYcsQCVsJS0WYEb81t5J9/+M3YADTKhkMoIJ4JuKlOHABM8xE49vl8XmgrPojrVjEGk8QSVXVJ6dhrh8a//4kNQyWqnJomu47SCEJQ1+0CLusmokx3qK/VvlSCGEuUilEIDgfwdPB8v2q7AJPJVEKU+GYS7U2cyb6Xqs95PPPkVb3emoRSTKnjOLqjKZHDyBlIEuMDsJtm6ocC53k4UdCMwMVxXS8IArXDWZogIY51t9//kefVDRwSJZmqLfI8upqkrmsyRTndUGrozWZ/8bwEQi3YPKS7VeQpF2q+0m5u8EfHYPFiqNsZR5HrujcwLQtS1F1LITTev0aHKa4jaYoAAL7vqwv3RrvreyfElnX/sPmZMf5p5c+f5+uqxglYDkhTYllW27b/j9QH431wGCe73c6eommaj2ZLKYVQ9lmi67oPwOrAXYDqYaK29Om9o0aU+GrRdoq+7/8DKMcIrds8ZhQAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 05 28 14 52 10"\n        title=""\n        src="/static/2020-05-28-14-52-10-62a31ae4097adb3c3b9f05ed0d77f9da-7027d.png"\n        srcset="/static/2020-05-28-14-52-10-62a31ae4097adb3c3b9f05ed0d77f9da-55fa9.png 200w,\n/static/2020-05-28-14-52-10-62a31ae4097adb3c3b9f05ed0d77f9da-7027d.png 300w"\n        sizes="(max-width: 300px) 100vw, 300px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol>\n<li>父节点到子节点(红色虚线)</li>\n<li>同层节点(黄色虚线)</li>\n<li>子节点到父节点(蓝色虚线)</li>\n</ol>\n<blockquote>\n<p>父节点指向第一个子节点, 每个子节点都指向父节点，同层节点间是单向链表。</p>\n</blockquote>\n<p>首先, 构建节点的数据结构, 如下所示:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="53357077350723215000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var FiberNode = function(instance) {\n  this.instance = instance;\n  this.parent = null;\n  this.sibling = null;\n  this.child = null;\n};`, `53357077350723215000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">FiberNode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">instance</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> instance<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>sibling <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>child <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然后创建一个将节点串联起来的 <code class="language-text">connect</code> 函数:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="39414512289413660000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var connect = function(parent, childList) {\n  parent.child = childList.reduceRight((prev, current) => {\n    const fiberNode = new FiberNode(current);\n    fiberNode.parent = parent;\n    fiberNode.sibling = prev;\n    return fiberNode;\n  }, null);\n\n  return parent.child;\n};`, `39414512289413660000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">connect</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> childList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  parent<span class="token punctuation">.</span>child <span class="token operator">=</span> childList<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> fiberNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FiberNode</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    fiberNode<span class="token punctuation">.</span>parent <span class="token operator">=</span> parent<span class="token punctuation">;</span>\n    fiberNode<span class="token punctuation">.</span>sibling <span class="token operator">=</span> prev<span class="token punctuation">;</span>\n    <span class="token keyword">return</span> fiberNode<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">return</span> parent<span class="token punctuation">.</span>child<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>在 JavaScript 中实现链表的数据结构可以巧用 reduceRight</p>\n</blockquote>\n<p><code class="language-text">connect</code> 函数中实现了上述链表关系。可以像这样使用它:</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79077469801027320000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`var parent = new FiberNode(a1);\nvar childFirst = connect(\n  parent,\n  a1.render()\n);`, `79077469801027320000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FiberNode</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">var</span> childFirst <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>\n  parent<span class="token punctuation">,</span>\n  a1<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>这样子便完成了 <code class="language-text">a1 节点</code>指向 <code class="language-text">b1 节点</code>的链表、<code class="language-text">b1、b2、b3 节点间</code>的单向链表以及 <code class="language-text">b1、b2、b3 节点</code>指向 <code class="language-text">a1 节点</code> 的链表。</p>\n<p>最后剩下 <code class="language-text">goWalk</code> 函数将全部节点给遍历完。</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="60081878935534650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 打印日志以及添加列表\nvar walk = function(node) {\n  console.log(node.instance.name);\n  const childLists = node.instance.render();\n  let child = null;\n  if (childLists.length > 0) {\n    child = connect(\n      node,\n      childLists\n    );\n  }\n  return child;\n};\n\nvar goWalk = function(root) {\n  let currentNode = root;\n\n  while (true) {\n    const child = walk(currentNode);\n    // 如果有子节点\n    if (child) {\n      currentNode = child;\n      continue;\n    }\n\n    // 如果没有相邻节点, 则返回到父节点\n    while (!currentNode.sibling) {\n      currentNode = currentNode.parent;\n      if (currentNode === root) {\n        return;\n      }\n    }\n\n    // 相邻节点\n    currentNode = currentNode.sibling;\n  }\n};\n\n// 调用\ngoWalk(new FiberNode(a1));`, `60081878935534650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 打印日志以及添加列表</span>\n<span class="token keyword">var</span> <span class="token function-variable function">walk</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> childLists <span class="token operator">=</span> node<span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">let</span> child <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>childLists<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    child <span class="token operator">=</span> <span class="token function">connect</span><span class="token punctuation">(</span>\n      node<span class="token punctuation">,</span>\n      childLists\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> child<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> <span class="token function-variable function">goWalk</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">let</span> currentNode <span class="token operator">=</span> root<span class="token punctuation">;</span>\n\n  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token function">walk</span><span class="token punctuation">(</span>currentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token comment">// 如果有子节点</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      currentNode <span class="token operator">=</span> child<span class="token punctuation">;</span>\n      <span class="token keyword">continue</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// 如果没有相邻节点, 则返回到父节点</span>\n    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>currentNode<span class="token punctuation">.</span>sibling<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>parent<span class="token punctuation">;</span>\n      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentNode <span class="token operator">===</span> root<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token comment">// 相邻节点</span>\n    currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>sibling<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 调用</span>\n<span class="token function">goWalk</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FiberNode</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>打印结果为 <code class="language-text">a1 b1 c1 d1 d2 b2 c2 b3</code></p>\n<p><code class="language-text">Fiber</code> 在一个节点上的执行流程总结如下:</p>\n<ul>\n<li>\n<p>在当前节点下寻找是否有子节点</p>\n<ul>\n<li>若有, 则进入子节点</li>\n<li>若没有, 则在当前节点下寻找是否有下一个相邻节点</li>\n<li>若有, 则进入下一个相邻节点</li>\n<li>若没有, 则返回它的父节点</li>\n</ul>\n</li>\n</ul>\n<h1 id="fiber-reconciler-的优势"><a href="#fiber-reconciler-%E7%9A%84%E4%BC%98%E5%8A%BF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fiber Reconciler 的优势</h1>\n<p>通过分析上述两种数据结构实现的代码，可以得出下面结论:</p>\n<ul>\n<li>基于树的深度遍历实现的 Reconciler: 一旦进入调用栈便无法暂停;</li>\n<li>基于链表实现的 Reconciler: 在 <code class="language-text">while(true) {}</code> 的循环中, 可以通过 <code class="language-text">currentNode</code> 的赋值重新得到需要操作的节点，而在赋值之前便可以’暂停’来执行其它逻辑, 这也是 <code class="language-text">requestIdleCallback</code> 能得以在 <code class="language-text">Fiber Reconciler</code> 的原因。</li>\n</ul>\n<h1 id="相关链接"><a href="#%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>相关链接</h1>\n<ul>\n<li><a href="https://medium.com/react-in-depth/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-67f1014d0eb7" target="_blank" rel="nofollow noreferrer noopener">The how and why on React’s usage of linked list in Fiber to walk the component’s tree</a></li>\n<li><a href="https://github.com/facebook/react/issues/7942" target="_blank" rel="nofollow noreferrer noopener">Fiber Principles: Contributing To Fiber</a>: Fiber 设计思想相关 issue, 推荐。</li>\n</ul>',
id:"/github/workspace/blog/React Fiber数据结构/index.md absPath of file >>> MarkdownRemark",timeToRead:3,frontmatter:{date:"2020-05-28 14:32:24",path:"/react-fiber-data-struct/",tags:"前端, React Fiber, 数据结构",title:"React Fiber 数据结构",draft:null}},{excerpt:"需求背景 由于每个周末放假前都要给出代码量的统计，如果是手动统计的话需要到各个开发过的项目下运行相应的脚本，太过繁琐。故写出以下第一版统计代码量的脚本 代码展示 以下是统计 G:/project/tungee/ 目录下的代码量，其中标红部分需要修改为自己的项目路径和 git 邮箱 第一版 按项目统计 运行效果 以上更新于 第二版 增加按日期统计和 shell 参数输入 运行效果 第三版 增加按分支统计的功能，去掉 shell…",html:'<h1 id="需求背景"><a href="#%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需求背景</h1>\n<p>由于每个周末放假前都要给出代码量的统计，如果是手动统计的话需要到各个开发过的项目下运行相应的脚本，太过繁琐。故写出以下第一版统计代码量的脚本</p>\n<h1 id="代码展示"><a href="#%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>代码展示</h1>\n<p>以下是统计 G:/project/tungee/ 目录下的代码量，其中标红部分需要修改为自己的项目路径和 git 邮箱</p>\n<h2 id="第一版"><a href="#%E7%AC%AC%E4%B8%80%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>第一版</h2>\n<h3 id="按项目统计"><a href="#%E6%8C%89%E9%A1%B9%E7%9B%AE%E7%BB%9F%E8%AE%A1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>按项目统计</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="2747396335988949500"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#!/bin/sh\n# 能够检测一些错误，并在错误发生时中断程序并输出信息\n# 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。\nset -euo pipefail\ntrap &quot;echo \'error: Script failed: see failed command above\'&quot; ERR\n# {} 防止下载不完全代码被执行\n{\n  function to_array(){\n    x=\\$1\n    OLD_IFS=&quot;\\$IFS&quot;\n    IFS=&quot;,&quot;\n    array=(\\$x)\n    IFS=&quot;\\$OLD_IFS&quot;\n    for each in \\${array[*]}\n    do\n    echo \\$each\n    done\n  }\n  echo &quot;输入项目名，以英文逗号分隔，不能有空格&quot;\n  read input\n  files=(\\$(to_array \\$input))\n  echo -e &quot;\\n&quot;\n  for file in \\${files[@]}\n  do\n    if [ ! -d &quot;G:/project/tungee/\\$file&quot; ]; then\n      echo -e &quot;\\$file 目录不存在。&quot;\n      continue;\n    fi\n    if [ ! -d &quot;G:/project/tungee/\\$file/.git&quot; ]; then\n      echo -e &quot;\\$file 不是git仓库。&quot;\n      continue;\n    fi\n    cd &quot;G:/project/tungee/\\$file&quot;\n    echo &quot;\\$file 代码量统计：&quot;\n    i=\\`date +%w\\`\n    while [ \\$i -ge 1 ]\n    do\n      sinceDate=\\`date -d &quot;-\\$i day&quot; +%Y-%m-%d\\`\n      untilDate=\\`date -d &quot;-\\$((\\$i-1)) day&quot; +%Y-%m-%d\\`\n      git log --author=&quot;634407147@qq.com&quot; --since=\\$sinceDate --until=\\$untilDate --pretty=tformat: --numstat | gawk \'{ add += \\$1 ; subs += \\$2 ; loc += \\$1 - \\$2 } END { printf &quot;\'\\$untilDate\' 增加行总数：%s，删除行总数：%s，总代码行：%s\\n&quot;, add, subs, loc }\'\n      i=\\$((\\$i-1))\n    done\n    echo -e &quot;\\n&quot;\n  done\n}`, `2747396335988949500`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash{25,29,33,40} 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>\n<span class="token comment"># 能够检测一些错误，并在错误发生时中断程序并输出信息</span>\n<span class="token comment"># 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。</span>\n<span class="token builtin class-name">set</span> -euo pipefail\n<span class="token builtin class-name">trap</span> <span class="token string">"echo \'error: Script failed: see failed command above\'"</span> ERR\n<span class="token comment"># {} 防止下载不完全代码被执行</span>\n<span class="token punctuation">{</span>\n  <span class="token keyword">function</span> <span class="token function-name function">to_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token variable">$1</span>\n    <span class="token assign-left variable">OLD_IFS</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$IFS</span>"</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">","</span>\n    <span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">)</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">"<span class="token variable">$OLD_IFS</span>"</span>\n    <span class="token keyword">for</span> <span class="token for-or-select variable">each</span> <span class="token keyword">in</span> <span class="token variable">${array<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>\n    <span class="token keyword">do</span>\n    <span class="token builtin class-name">echo</span> <span class="token variable">$each</span>\n    <span class="token keyword">done</span>\n  <span class="token punctuation">}</span>\n  <span class="token builtin class-name">echo</span> <span class="token string">"输入项目名，以英文逗号分隔，不能有空格"</span>\n  <span class="token builtin class-name">read</span> input\n  <span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span>to_array $input<span class="token variable">)</span></span><span class="token punctuation">)</span>\n  <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\\n">\\n</span>"</span>\n  <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${files<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n  <span class="token keyword">do</span>\n<span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"G:/project/tungee/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span>      <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n      <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n    <span class="token keyword">fi</span>\n<span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"G:/project/tungee/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span>      <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n      <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n    <span class="token keyword">fi</span>\n<span class="gatsby-highlight-code-line">    <span class="token builtin class-name">cd</span> <span class="token string">"G:/project/tungee/<span class="token variable">$file</span>"</span></span>    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$file</span> 代码量统计："</span>\n    <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> +%w<span class="token variable">`</span></span>\n    <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -ge <span class="token number">1</span> <span class="token punctuation">]</span>\n    <span class="token keyword">do</span>\n      <span class="token assign-left variable">sinceDate</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable">$i</span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n      <span class="token assign-left variable">untilDate</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n<span class="gatsby-highlight-code-line">      <span class="token function">git</span> log --author<span class="token operator">=</span><span class="token string">"634407147@qq.com"</span> --since<span class="token operator">=</span><span class="token variable">$sinceDate</span> --until<span class="token operator">=</span><span class="token variable">$untilDate</span> --pretty<span class="token operator">=</span>tformat: --numstat <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">\'{ add += <span class="token variable">$1</span> ; subs += <span class="token variable">$2</span> ; loc += <span class="token variable">$1</span> - <span class="token variable">$2</span> } END { printf "\'</span><span class="token variable">$untilDate</span><span class="token string">\' 增加行总数：%s，删除行总数：%s，总代码行：%s<span class="token entity" title="\\n">\\n</span>", add, subs, loc }\'</span></span>      <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span>\n    <span class="token keyword">done</span>\n    <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\\n">\\n</span>"</span>\n  <span class="token keyword">done</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="运行效果"><a href="#%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行效果</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-05-22-22-18-59-ca5128d9bf69c497af557dbc93c8cf74-d5813.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 443px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 68.62302483069978%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABq0lEQVQoz5VS2ZKbMBCUOcTh5RCHhITMjcE25MHr2vz/n6WNU1vrxFuVdFEjNFKrenqGGNqgHaWV4yiHMEIy8mbsD0THJN6/ESEIY2S3I68x9dPQjKfppAqlhNRK60oXuoiTWHCkDlKWlDqvyZxnaZ7leR5FUZokaZpmSOT5fc1Sz/Nc1zUMY7fhBR/Zx7Fpmjal36v8C0PftV1X17VS8jTP1+u17wfbtpMkgRZEhzq2bcUxYwkzTPO55mlqmkYWxdD367rO0x24/f5+PU7z7Xa7k+Locllw6nreE5kxFgQhKmNxjFJRKAyA/qIQOJJSomzf9+AFVFiW9US2bAuf47ggfOvqpzt/7EtV1tVhXX9czmfoJ/+FtmvLsmya+ufHxzCOYRRBp2lalNphGPr+HoBabJGHhWgH7PzdtuPxWFW14KJtmmVZ5nme5tn3/XEcTufzsqwHXbEkadt2GEapJJ7bXt9sF0LAoygM4ZXWuixVIWUQBJgQXWqlIKsMwpDz+xQJwXEZnkPUZphlYkA2YV/0/CPSLMUzaAnnHNF1vcfMPeLnVH7NbD937i9mWyf8SD5sHwAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 05 22 22 18 59"\n        title=""\n        src="/static/2019-05-22-22-18-59-ca5128d9bf69c497af557dbc93c8cf74-d5813.png"\n        srcset="/static/2019-05-22-22-18-59-ca5128d9bf69c497af557dbc93c8cf74-bf07a.png 200w,\n/static/2019-05-22-22-18-59-ca5128d9bf69c497af557dbc93c8cf74-250cd.png 400w,\n/static/2019-05-22-22-18-59-ca5128d9bf69c497af557dbc93c8cf74-d5813.png 443w"\n        sizes="(max-width: 443px) 100vw, 443px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>以上更新于<code class="language-text">2019-5-22 22:17:24</code></p>\n<hr>\n<h2 id="第二版"><a href="#%E7%AC%AC%E4%BA%8C%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>第二版</h2>\n<h3 id="增加按日期统计和-shell-参数输入"><a href="#%E5%A2%9E%E5%8A%A0%E6%8C%89%E6%97%A5%E6%9C%9F%E7%BB%9F%E8%AE%A1%E5%92%8C-shell-%E5%8F%82%E6%95%B0%E8%BE%93%E5%85%A5" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>增加按日期统计和 shell 参数输入</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="79679195655864170000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#!/bin/sh\n# 周一到今天的代码量统计，使用方式：./git.bash mockingbird robin koala 或 执行 ./git.bash 后自行输入\n# 能够检测一些错误，并在错误发生时中断程序并输出信息\n# 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。\nset -euo pipefail\ntrap &quot;echo \'error: Script failed: see failed command above\'&quot; ERR\n# {} 防止下载不完全代码被执行\n{\n  function to_array() {\n    x=\\$1\n    OLD_IFS=&quot;\\$IFS&quot;\n    IFS=&quot;,&quot;\n    array=(\\$x)\n    IFS=&quot;\\$OLD_IFS&quot;\n    for each in \\${array[*]}\n    do\n    echo \\$each\n    done\n  }\n\n  file_path=&quot;G:/project/tungee&quot;\n  git_email=&quot;634407147@qq.com&quot;\n  date_stat=&quot;date +%w&quot; # 今天是一周的第几天，可换成具体数字 date_stat=&quot;echo 5&quot; 以实现统计几天前代码的功能\n\n  if [ \\$# -lt 1 ]; then\n    echo &quot;输入项目名，以英文逗号分隔，不能有空格&quot;\n    read input\n    files=(\\$(to_array \\$input))\n  else\n    files=\\$*\n  fi\n\n  echo -e &quot;按日期统计：&quot;\n  i=\\$(\\$date_stat)\n  while [ \\$i -ge 1 ]\n  do\n    add_sum=0\n    subs_sum=0\n    loc_sum=0\n    for file in \\${files[@]}\n    do\n      if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n        echo -e &quot;\\$file 目录不存在。&quot;\n        continue;\n      fi\n      if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n        echo -e &quot;\\$file 不是git仓库。&quot;\n        continue;\n      fi\n      cd &quot;\\$file_path/\\$file&quot;\n      since_date=\\`date -d &quot;-\\$i day&quot; +%Y-%m-%d\\`\n      until_date=\\`date -d &quot;-\\$((\\$i-1)) day&quot; +%Y-%m-%d\\`\n      eval \\$(git log --author=\\$git_email --since=\\$since_date --until=\\$until_date --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += \\$1 ; subs += \\$2 ; loc += \\$1 - \\$2 } END { printf &quot;add=%s; subs=%s; loc=%s;&quot;, add, subs, loc }\')\n      add_sum=\\$((\\$add_sum + \\$add))\n      subs_sum=\\$((\\$subs_sum + \\$subs))\n      loc_sum=\\$((\\$loc_sum + \\$loc))\n    done\n    printf &quot;\\$until_date 增加行总数：\\$add_sum，删除行总数：\\$subs_sum，总代码行：\\$loc_sum\\n&quot;\n    i=\\$((\\$i-1))\n  done\n\n  echo -e &quot;\\n按项目统计：&quot;\n  for file in \\${files[@]}\n  do\n    if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n      echo -e &quot;\\$file 目录不存在。&quot;\n      continue;\n    fi\n    if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n      echo -e &quot;\\$file 不是git仓库。&quot;\n      continue;\n    fi\n    cd &quot;\\$file_path/\\$file&quot;\n    echo &quot;\\$file 代码量统计：&quot;\n    i=\\$(\\$date_stat)\n    while [ \\$i -ge 1 ]\n    do\n      since_date=\\`date -d &quot;-\\$i day&quot; +%Y-%m-%d\\`\n      until_date=\\`date -d &quot;-\\$((\\$i-1)) day&quot; +%Y-%m-%d\\`\n      git log --author=\\$git_email --since=\\$since_date --until=\\$until_date --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += \\$1 ; subs += \\$2 ; loc += \\$1 - \\$2 } END { printf &quot;\'\\$until_date\' 增加行总数：%s，删除行总数：%s，总代码行：%s\\n&quot;, add, subs, loc }\'\n      i=\\$((\\$i-1))\n    done\n  done\n}`, `79679195655864170000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash{21-22} 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>\n<span class="token comment"># 周一到今天的代码量统计，使用方式：./git.bash mockingbird robin koala 或 执行 ./git.bash 后自行输入</span>\n<span class="token comment"># 能够检测一些错误，并在错误发生时中断程序并输出信息</span>\n<span class="token comment"># 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。</span>\n<span class="token builtin class-name">set</span> -euo pipefail\n<span class="token builtin class-name">trap</span> <span class="token string">"echo \'error: Script failed: see failed command above\'"</span> ERR\n<span class="token comment"># {} 防止下载不完全代码被执行</span>\n<span class="token punctuation">{</span>\n  <span class="token keyword">function</span> <span class="token function-name function">to_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token variable">$1</span>\n    <span class="token assign-left variable">OLD_IFS</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$IFS</span>"</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">","</span>\n    <span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">)</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">"<span class="token variable">$OLD_IFS</span>"</span>\n    <span class="token keyword">for</span> <span class="token for-or-select variable">each</span> <span class="token keyword">in</span> <span class="token variable">${array<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>\n    <span class="token keyword">do</span>\n    <span class="token builtin class-name">echo</span> <span class="token variable">$each</span>\n    <span class="token keyword">done</span>\n  <span class="token punctuation">}</span>\n\n<span class="gatsby-highlight-code-line">  <span class="token assign-left variable">file_path</span><span class="token operator">=</span><span class="token string">"G:/project/tungee"</span></span><span class="gatsby-highlight-code-line">  <span class="token assign-left variable">git_email</span><span class="token operator">=</span><span class="token string">"634407147@qq.com"</span></span>  <span class="token assign-left variable">date_stat</span><span class="token operator">=</span><span class="token string">"date +%w"</span> <span class="token comment"># 今天是一周的第几天，可换成具体数字 date_stat="echo 5" 以实现统计几天前代码的功能</span>\n\n  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> -lt <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n    <span class="token builtin class-name">echo</span> <span class="token string">"输入项目名，以英文逗号分隔，不能有空格"</span>\n    <span class="token builtin class-name">read</span> input\n    <span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span>to_array $input<span class="token variable">)</span></span><span class="token punctuation">)</span>\n  <span class="token keyword">else</span>\n    <span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token variable">$*</span>\n  <span class="token keyword">fi</span>\n\n  <span class="token builtin class-name">echo</span> -e <span class="token string">"按日期统计："</span>\n  <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>$date_stat<span class="token variable">)</span></span>\n  <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -ge <span class="token number">1</span> <span class="token punctuation">]</span>\n  <span class="token keyword">do</span>\n    <span class="token assign-left variable">add_sum</span><span class="token operator">=</span><span class="token number">0</span>\n    <span class="token assign-left variable">subs_sum</span><span class="token operator">=</span><span class="token number">0</span>\n    <span class="token assign-left variable">loc_sum</span><span class="token operator">=</span><span class="token number">0</span>\n    <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${files<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n    <span class="token keyword">do</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n        <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n      <span class="token keyword">fi</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n        <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n      <span class="token keyword">fi</span>\n      <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span>\n      <span class="token assign-left variable">since_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable">$i</span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n      <span class="token assign-left variable">until_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n      <span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> log --author<span class="token operator">=</span>$git_email --since<span class="token operator">=</span>$since_date --until<span class="token operator">=</span>$until_date --pretty<span class="token operator">=</span>tformat: --numstat <span class="token operator">|</span> <span class="token function">awk</span> -v <span class="token assign-left variable">add</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">subs</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">loc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token string">\'{ add += <span class="token variable">$1</span> ; subs += <span class="token variable">$2</span> ; loc += <span class="token variable">$1</span> - <span class="token variable">$2</span> } END { printf "add=%s; subs=%s; loc=%s;", add, subs, loc }\'</span><span class="token variable">)</span></span>\n      <span class="token assign-left variable">add_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$add_sum <span class="token operator">+</span> $add<span class="token variable">))</span></span>\n      <span class="token assign-left variable">subs_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$subs_sum <span class="token operator">+</span> $subs<span class="token variable">))</span></span>\n      <span class="token assign-left variable">loc_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$loc_sum <span class="token operator">+</span> $loc<span class="token variable">))</span></span>\n    <span class="token keyword">done</span>\n    <span class="token builtin class-name">printf</span> <span class="token string">"<span class="token variable">$until_date</span> 增加行总数：<span class="token variable">$add_sum</span>，删除行总数：<span class="token variable">$subs_sum</span>，总代码行：<span class="token variable">$loc_sum</span><span class="token entity" title="\\n">\\n</span>"</span>\n    <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span>\n  <span class="token keyword">done</span>\n\n  <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\\n">\\n</span>按项目统计："</span>\n  <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${files<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n  <span class="token keyword">do</span>\n    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n      <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n      <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n    <span class="token keyword">fi</span>\n    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n      <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n      <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n    <span class="token keyword">fi</span>\n    <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span>\n    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$file</span> 代码量统计："</span>\n    <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>$date_stat<span class="token variable">)</span></span>\n    <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -ge <span class="token number">1</span> <span class="token punctuation">]</span>\n    <span class="token keyword">do</span>\n      <span class="token assign-left variable">since_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable">$i</span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n      <span class="token assign-left variable">until_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n      <span class="token function">git</span> log --author<span class="token operator">=</span><span class="token variable">$git_email</span> --since<span class="token operator">=</span><span class="token variable">$since_date</span> --until<span class="token operator">=</span><span class="token variable">$until_date</span> --pretty<span class="token operator">=</span>tformat: --numstat <span class="token operator">|</span> <span class="token function">awk</span> -v <span class="token assign-left variable">add</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">subs</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">loc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token string">\'{ add += <span class="token variable">$1</span> ; subs += <span class="token variable">$2</span> ; loc += <span class="token variable">$1</span> - <span class="token variable">$2</span> } END { printf "\'</span><span class="token variable">$until_date</span><span class="token string">\' 增加行总数：%s，删除行总数：%s，总代码行：%s<span class="token entity" title="\\n">\\n</span>", add, subs, loc }\'</span>\n      <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span>\n    <span class="token keyword">done</span>\n  <span class="token keyword">done</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="运行效果-1"><a href="#%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行效果</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-05-27-17-41-19-6e109b97f31386c105d585a5d20e1785-5032e.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 438px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 92.46575342465754%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACqklEQVQ4y3VT55KjMAzOklACphgIwZjiQoeUnX3/d7vPyV7u12lgBmEkfUUc6pbroR/mIS0yEgY0p2maJWESh3EYEUqjMDwfDoevL+vwCsuykCBMMg5jr3VTN03FpZB13VRV5QckjiOtFeeNEDKOE5rQorgopcqyJGEY+L4pllLyqrrkFym6bdvGcez7IaG0yPN934ah39Y1SdOyvDZN0/c9Pg4BiQSmeBhGDKwqPmj1eNzXdR2nKUkoen0/n8u8LMsaxzGv2DSN0zznWU4IsW3bFOMgBC3v7PtB+MKDM8dxff+M+TiNk8RxHM9zgRYzbRvP3pv/QYgOTDA8IARv8zz3weetx//jr2DjBNpd1+G+7fvPzw9wBkHAyhJScc5LVrmum2eZUvpSFHi2Pq2lVDXnxaVQQszzrPseHyU0bdv2dtunaQLpKIyaphZCKK2LogBHdDfFWveQEcWia7dtnaYZ10swcb/dIP68rKDa1DUaCangmQtJXPfNWUF9NP5+PJZ1RWNKKRSiNIF/GRaGUts+wfYsy8Iocmzn6wPbEKtMzC+EQMvgZBSZJVGqrmspRRQncRRnaQpdGWM4JW/Y8L1t2uv1CmP3zZAEbHgCnI/HYzKwF0JCzti+3zohQMFx7N/JWuu2aa7XUnat2ZDBbBi8NQu37+OIvR/Rq6rYMI5SKTQ6f3zusF6MQbPn8zHPS365ALLreSTw4Tk1kRp9XDdJ4jRNceR+it+Tse4T1njbwBPmBQEBeRBA0knpeWfOK6SMVf75bFl/BcN6gR5E7toGgg3DAPNomgEnfglQWBbjHCtZXXMcQTCYjBX+FazrBF5pKfbdCAZu0BMz77c7fEYa+AEqIYERjITH4/HXrdPpZBLLOh1PriFnbvzxjgn3nWMfX6nzr+wVfwAoYlosBX0uZQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 05 27 17 41 19"\n        title=""\n        src="/static/2019-05-27-17-41-19-6e109b97f31386c105d585a5d20e1785-5032e.png"\n        srcset="/static/2019-05-27-17-41-19-6e109b97f31386c105d585a5d20e1785-86481.png 200w,\n/static/2019-05-27-17-41-19-6e109b97f31386c105d585a5d20e1785-1ca59.png 400w,\n/static/2019-05-27-17-41-19-6e109b97f31386c105d585a5d20e1785-5032e.png 438w"\n        sizes="(max-width: 438px) 100vw, 438px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id="第三版"><a href="#%E7%AC%AC%E4%B8%89%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>第三版</h2>\n<h3 id="增加按分支统计的功能，去掉-shell-参数输入（暂时不支持）"><a href="#%E5%A2%9E%E5%8A%A0%E6%8C%89%E5%88%86%E6%94%AF%E7%BB%9F%E8%AE%A1%E7%9A%84%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%8E%BB%E6%8E%89-shell-%E5%8F%82%E6%95%B0%E8%BE%93%E5%85%A5%EF%BC%88%E6%9A%82%E6%97%B6%E4%B8%8D%E6%94%AF%E6%8C%81%EF%BC%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>增加按分支统计的功能，去掉 shell 参数输入（暂时不支持）</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="98123654277310760000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#!/bin/sh\n# 周一到今天的代码量统计，使用方式：./git.bash mockingbird robin koala 或 执行 ./git.bash 后自行输入\n# 能够检测一些错误，并在错误发生时中断程序并输出信息\n# 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。\n# set -euo pipefail\n# trap &quot;echo \'error: Script failed: see failed command above\'&quot; ERR\n# {} 防止下载不完全代码被执行\n{\n  function to_array() {\n    x=\\$1\n    OLD_IFS=&quot;\\$IFS&quot;\n    IFS=&quot;,&quot;\n    array=(\\$x)\n    IFS=&quot;\\$OLD_IFS&quot;\n    for each in \\${array[*]}\n    do\n    echo \\$each\n    done\n  }\n\n  file_path=&quot;G:/project/tungee&quot;\n  git_email=&quot;634407147@qq.com&quot;\n  date_stat=&quot;date +%w&quot; # 今天是一周的第几天，可换成具体数字如 date_stat=&quot;echo 5&quot; 以实现统计几天前代码的功能\n\n  echo &quot;输入项目名，以英文逗号分隔，不能有空格&quot;\n  read input\n  projects=(\\$(to_array \\$input))\n  echo &quot;输入分支名，以英文逗号分隔，不能有空格&quot;\n  read input\n  branches=(\\$(to_array \\$input))\n\n  for branch in \\${branches[@]}\n  do\n    exist_branch_projects=()\n    for file in \\${projects[@]}\n    do\n      if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n        echo -e &quot;\\$file 目录不存在。&quot;\n        continue;\n      fi\n      if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n        echo -e &quot;\\$file 不是git仓库。&quot;\n        continue;\n      fi\n      cd &quot;\\$file_path/\\$file&quot;\n      git checkout \\$branch -q >/dev/null 2>&1 # 重定向错误信息，即屏蔽错误信息\n      if [ \\$? -ne 0 ]; then\n        echo -e &quot;\\n\\$file 切换分支到 \\$branch 失败，可能不存在此分支&quot;\n      else\n        exist_branch_projects+=(\\$file)\n        git pull origin \\$branch -q\n      fi\n    done\n    echo -e &quot;\\n分支 \\$branch 上的代码统计：&quot;\n    {\n      echo -e &quot;按日期统计：&quot;\n      i=\\$(\\$date_stat)\n      while [ \\$i -ge 1 ]\n      do\n        add_sum=0\n        subs_sum=0\n        loc_sum=0\n        for file in \\${exist_branch_projects[@]}\n        do\n          if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n            echo -e &quot;\\$file 目录不存在。&quot;\n            continue;\n          fi\n          if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n            echo -e &quot;\\$file 不是git仓库。&quot;\n            continue;\n          fi\n          cd &quot;\\$file_path/\\$file&quot;\n          # git checkout master\n          since_date=\\`date -d &quot;-\\$i day&quot; +%Y-%m-%d\\`\n          until_date=\\`date -d &quot;-\\$((\\$i-1)) day&quot; +%Y-%m-%d\\`\n          eval \\$(git log --author=\\$git_email --since=\\$since_date --until=\\$until_date --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += \\$1 ; subs += \\$2 ; loc += \\$1 - \\$2 } END { printf &quot;add=%s; subs=%s; loc=%s;&quot;, add, subs, loc }\')\n          add_sum=\\$((\\$add_sum + \\$add))\n          subs_sum=\\$((\\$subs_sum + \\$subs))\n          loc_sum=\\$((\\$loc_sum + \\$loc))\n        done\n        printf &quot;\\$until_date 增加行总数：\\$add_sum，删除行总数：\\$subs_sum，总代码行：\\$loc_sum\\n&quot;\n        i=\\$((\\$i-1))\n      done\n\n      echo -e &quot;按项目统计：&quot;\n      for file in \\${exist_branch_projects[@]}\n      do\n        if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n          echo -e &quot;\\$file 目录不存在。&quot;\n          continue;\n        fi\n        if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n          echo -e &quot;\\$file 不是git仓库。&quot;\n          continue;\n        fi\n        cd &quot;\\$file_path/\\$file&quot;\n        # git checkout master\n        echo &quot;\\$file 代码量统计：&quot;\n        i=\\$(\\$date_stat)\n        while [ \\$i -ge 1 ]\n        do\n          since_date=\\`date -d &quot;-\\$i day&quot; +%Y-%m-%d\\`\n          until_date=\\`date -d &quot;-\\$((\\$i-1)) day&quot; +%Y-%m-%d\\`\n          git log --author=\\$git_email --since=\\$since_date --until=\\$until_date --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += \\$1 ; subs += \\$2 ; loc += \\$1 - \\$2 } END { printf &quot;\'\\$until_date\' 增加行总数：%s，删除行总数：%s，总代码行：%s\\n&quot;, add, subs, loc }\'\n          i=\\$((\\$i-1))\n        done\n      done\n    }\n  done\n}`, `98123654277310760000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>\n<span class="token comment"># 周一到今天的代码量统计，使用方式：./git.bash mockingbird robin koala 或 执行 ./git.bash 后自行输入</span>\n<span class="token comment"># 能够检测一些错误，并在错误发生时中断程序并输出信息</span>\n<span class="token comment"># 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。</span>\n<span class="token comment"># set -euo pipefail</span>\n<span class="token comment"># trap "echo \'error: Script failed: see failed command above\'" ERR</span>\n<span class="token comment"># {} 防止下载不完全代码被执行</span>\n<span class="token punctuation">{</span>\n  <span class="token keyword">function</span> <span class="token function-name function">to_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token variable">$1</span>\n    <span class="token assign-left variable">OLD_IFS</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$IFS</span>"</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">","</span>\n    <span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">)</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">"<span class="token variable">$OLD_IFS</span>"</span>\n    <span class="token keyword">for</span> <span class="token for-or-select variable">each</span> <span class="token keyword">in</span> <span class="token variable">${array<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>\n    <span class="token keyword">do</span>\n    <span class="token builtin class-name">echo</span> <span class="token variable">$each</span>\n    <span class="token keyword">done</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token assign-left variable">file_path</span><span class="token operator">=</span><span class="token string">"G:/project/tungee"</span>\n  <span class="token assign-left variable">git_email</span><span class="token operator">=</span><span class="token string">"634407147@qq.com"</span>\n  <span class="token assign-left variable">date_stat</span><span class="token operator">=</span><span class="token string">"date +%w"</span> <span class="token comment"># 今天是一周的第几天，可换成具体数字如 date_stat="echo 5" 以实现统计几天前代码的功能</span>\n\n  <span class="token builtin class-name">echo</span> <span class="token string">"输入项目名，以英文逗号分隔，不能有空格"</span>\n  <span class="token builtin class-name">read</span> input\n  <span class="token assign-left variable">projects</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span>to_array $input<span class="token variable">)</span></span><span class="token punctuation">)</span>\n  <span class="token builtin class-name">echo</span> <span class="token string">"输入分支名，以英文逗号分隔，不能有空格"</span>\n  <span class="token builtin class-name">read</span> input\n  <span class="token assign-left variable">branches</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span>to_array $input<span class="token variable">)</span></span><span class="token punctuation">)</span>\n\n  <span class="token keyword">for</span> <span class="token for-or-select variable">branch</span> <span class="token keyword">in</span> <span class="token variable">${branches<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n  <span class="token keyword">do</span>\n    <span class="token assign-left variable">exist_branch_projects</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${projects<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n    <span class="token keyword">do</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n        <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n      <span class="token keyword">fi</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n        <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n      <span class="token keyword">fi</span>\n      <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span>\n      <span class="token function">git</span> checkout <span class="token variable">$branch</span> -q <span class="token operator">></span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token comment"># 重定向错误信息，即屏蔽错误信息</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> -ne <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\\n">\\n</span><span class="token variable">$file</span> 切换分支到 <span class="token variable">$branch</span> 失败，可能不存在此分支"</span>\n      <span class="token keyword">else</span>\n        <span class="token assign-left variable">exist_branch_projects</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span>\n        <span class="token function">git</span> pull origin <span class="token variable">$branch</span> -q\n      <span class="token keyword">fi</span>\n    <span class="token keyword">done</span>\n    <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\\n">\\n</span>分支 <span class="token variable">$branch</span> 上的代码统计："</span>\n    <span class="token punctuation">{</span>\n      <span class="token builtin class-name">echo</span> -e <span class="token string">"按日期统计："</span>\n      <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>$date_stat<span class="token variable">)</span></span>\n      <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -ge <span class="token number">1</span> <span class="token punctuation">]</span>\n      <span class="token keyword">do</span>\n        <span class="token assign-left variable">add_sum</span><span class="token operator">=</span><span class="token number">0</span>\n        <span class="token assign-left variable">subs_sum</span><span class="token operator">=</span><span class="token number">0</span>\n        <span class="token assign-left variable">loc_sum</span><span class="token operator">=</span><span class="token number">0</span>\n        <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${exist_branch_projects<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n        <span class="token keyword">do</span>\n          <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n            <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n            <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n          <span class="token keyword">fi</span>\n          <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n            <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n            <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n          <span class="token keyword">fi</span>\n          <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span>\n          <span class="token comment"># git checkout master</span>\n          <span class="token assign-left variable">since_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable">$i</span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n          <span class="token assign-left variable">until_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n          <span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> log --author<span class="token operator">=</span>$git_email --since<span class="token operator">=</span>$since_date --until<span class="token operator">=</span>$until_date --pretty<span class="token operator">=</span>tformat: --numstat <span class="token operator">|</span> <span class="token function">awk</span> -v <span class="token assign-left variable">add</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">subs</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">loc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token string">\'{ add += <span class="token variable">$1</span> ; subs += <span class="token variable">$2</span> ; loc += <span class="token variable">$1</span> - <span class="token variable">$2</span> } END { printf "add=%s; subs=%s; loc=%s;", add, subs, loc }\'</span><span class="token variable">)</span></span>\n          <span class="token assign-left variable">add_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$add_sum <span class="token operator">+</span> $add<span class="token variable">))</span></span>\n          <span class="token assign-left variable">subs_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$subs_sum <span class="token operator">+</span> $subs<span class="token variable">))</span></span>\n          <span class="token assign-left variable">loc_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$loc_sum <span class="token operator">+</span> $loc<span class="token variable">))</span></span>\n        <span class="token keyword">done</span>\n        <span class="token builtin class-name">printf</span> <span class="token string">"<span class="token variable">$until_date</span> 增加行总数：<span class="token variable">$add_sum</span>，删除行总数：<span class="token variable">$subs_sum</span>，总代码行：<span class="token variable">$loc_sum</span><span class="token entity" title="\\n">\\n</span>"</span>\n        <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span>\n      <span class="token keyword">done</span>\n\n      <span class="token builtin class-name">echo</span> -e <span class="token string">"按项目统计："</span>\n      <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${exist_branch_projects<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n      <span class="token keyword">do</span>\n        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n          <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n          <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n        <span class="token keyword">fi</span>\n        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n          <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n          <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n        <span class="token keyword">fi</span>\n        <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span>\n        <span class="token comment"># git checkout master</span>\n        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$file</span> 代码量统计："</span>\n        <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>$date_stat<span class="token variable">)</span></span>\n        <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -ge <span class="token number">1</span> <span class="token punctuation">]</span>\n        <span class="token keyword">do</span>\n          <span class="token assign-left variable">since_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable">$i</span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n          <span class="token assign-left variable">until_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n          <span class="token function">git</span> log --author<span class="token operator">=</span><span class="token variable">$git_email</span> --since<span class="token operator">=</span><span class="token variable">$since_date</span> --until<span class="token operator">=</span><span class="token variable">$until_date</span> --pretty<span class="token operator">=</span>tformat: --numstat <span class="token operator">|</span> <span class="token function">awk</span> -v <span class="token assign-left variable">add</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">subs</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">loc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token string">\'{ add += <span class="token variable">$1</span> ; subs += <span class="token variable">$2</span> ; loc += <span class="token variable">$1</span> - <span class="token variable">$2</span> } END { printf "\'</span><span class="token variable">$until_date</span><span class="token string">\' 增加行总数：%s，删除行总数：%s，总代码行：%s<span class="token entity" title="\\n">\\n</span>", add, subs, loc }\'</span>\n          <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span>\n        <span class="token keyword">done</span>\n      <span class="token keyword">done</span>\n    <span class="token punctuation">}</span>\n  <span class="token keyword">done</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="运行效果-2"><a href="#%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C-2" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行效果</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2019-08-13-17-03-10-58491b105bbc6cb6b8465acbeca65cfa-aee79.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 563px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 74.06749555950266%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABjklEQVQoz41T2ZKkIBBsbW9OARXQ9r7m/39ws3si9klnpp4qiEryKHjELsl8llVZoIJABDo05aNkLDBVmCbB4+fq+34cR+d99SlTGS54KWVTN4TSX8DneY7jgCter5cB1BghpdZl27aMcwwEwT3/Z1qUZVkURZ4XhNAwDB9/rPPr6zwO61xdVc45rTVu4ZwTQpIkybKMMZ6m2TX/vu/D0AMG5W+pjAEPI+gpZUqprm1h5FrOuq7zPCOq1vvjODgXSRJTSuEhiqI4jr8lXMt+9b2zzbKsx3mAXAppvpk7qOAazF13y7wsS+sdbCN27z0AkIrsrbVFQaQQUHQLxqj8pG2tq+uaMw5m7x084xC7gKM8z68Dkygh3gsTIIBmwyiFVQAIgfH8GUU/PZJ92xprtVZ1XZVKfWAES3o+n+/AiiJN02vmdd3wvuBwGAZkg1UZo+d5woN7B6YVGnnnedv3eZqapvHObdvGuMCG8jz7z4wmulPetS/bQLU9dshfldK4CB1+CxcSP2WaRqX1JfM/AHop/RSDCV0AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2019 08 13 17 03 10"\n        title=""\n        src="/static/2019-08-13-17-03-10-58491b105bbc6cb6b8465acbeca65cfa-aee79.png"\n        srcset="/static/2019-08-13-17-03-10-58491b105bbc6cb6b8465acbeca65cfa-b3674.png 200w,\n/static/2019-08-13-17-03-10-58491b105bbc6cb6b8465acbeca65cfa-2063d.png 400w,\n/static/2019-08-13-17-03-10-58491b105bbc6cb6b8465acbeca65cfa-aee79.png 563w"\n        sizes="(max-width: 563px) 100vw, 563px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>以上更新于<code class="language-text">2019-8-15 20:49:40</code></p>\n<hr>\n<h2 id="第四版"><a href="#%E7%AC%AC%E5%9B%9B%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>第四版</h2>\n<p>第三版的统计代码的数量对不上对应的时间，把昨天写的代码统计到今天了，做以下修复</p>\n<p>同时增加星期几的优化提示</p>\n<h3 id="修复代码统计对应不上错误的时间以及添加星期几的提示"><a href="#%E4%BF%AE%E5%A4%8D%E4%BB%A3%E7%A0%81%E7%BB%9F%E8%AE%A1%E5%AF%B9%E5%BA%94%E4%B8%8D%E4%B8%8A%E9%94%99%E8%AF%AF%E7%9A%84%E6%97%B6%E9%97%B4%E4%BB%A5%E5%8F%8A%E6%B7%BB%E5%8A%A0%E6%98%9F%E6%9C%9F%E5%87%A0%E7%9A%84%E6%8F%90%E7%A4%BA" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>修复代码统计对应不上错误的时间以及添加星期几的提示</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="82782070466068510000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#!/bin/sh\n# 周一到今天的代码量统计，使用方式：./git.bash mockingbird robin koala 或 执行 ./git.bash 后自行输入\n# 能够检测一些错误，并在错误发生时中断程序并输出信息\n# 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。\n# set -euo pipefail\n# trap &quot;echo \'error: Script failed: see failed command above\'&quot; ERR\n# {} 防止下载不完全代码被执行\n{\n  function to_array() {\n    x=\\$1\n    OLD_IFS=&quot;\\$IFS&quot;\n    IFS=&quot;,&quot;\n    array=(\\$x)\n    IFS=&quot;\\$OLD_IFS&quot;\n    for each in \\${array[*]}\n    do\n    echo \\$each\n    done\n  }\n\n  file_path=&quot;G:/project/tungee&quot;\n  git_email=&quot;634407147@qq.com&quot;\n  date_stat=&quot;date +%w&quot; # 今天是一周的第几天，可换成具体数字如 date_stat=&quot;echo 5&quot; 以实现统计几天前代码的功能\n\n  # if [ \\$date_stat -eq 0 ]; then\n  #   date_stat=7\n  # fi\n\n  echo &quot;输入项目名，以英文逗号分隔，不能有空格&quot;\n  read input\n  projects=(\\$(to_array \\$input))\n  echo &quot;输入分支名，以英文逗号分隔，不能有空格&quot;\n  read input\n  branches=(\\$(to_array \\$input))\n\n  for branch in \\${branches[@]}\n  do\n    exist_branch_projects=()\n    for file in \\${projects[@]}\n    do\n      if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n        echo -e &quot;\\$file 目录不存在。&quot;\n        continue;\n      fi\n      if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n        echo -e &quot;\\$file 不是git仓库。&quot;\n        continue;\n      fi\n      cd &quot;\\$file_path/\\$file&quot;\n      git checkout \\$branch -q >/dev/null 2>&1 # 重定向错误信息，即屏蔽错误信息\n      if [ \\$? -eq 0 ]; then\n        exist_branch_projects+=(\\$file)\n        git pull origin \\$branch -q\n      # else\n      #   # echo -e &quot;\\n\\$file 切换分支到 \\$branch 失败，可能不存在此分支&quot;\n      fi\n    done\n    echo -e &quot;\\n分支 \\$branch 上的代码统计：&quot;\n    {\n      echo -e &quot;按日期统计：&quot;\n      # 或 i=\\$((\\$(\\$date_stat)-1))\n      # \\$((\\$a+\\$b)) 用于整数运算，相当于 \\`expr \\$a + \\$b\\`\n      # \\$() 与 \\`\\` 相当于命令替换，执行结果替换\n      i=\\`expr \\$(\\$date_stat) - 1\\`\n      while [ \\$i -ge 0 ]\n      do\n        add_sum=0\n        subs_sum=0\n        loc_sum=0\n        for file in \\${exist_branch_projects[@]}\n        do\n          if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n            echo -e &quot;\\$file 目录不存在。&quot;\n            continue;\n          fi\n          if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n            echo -e &quot;\\$file 不是git仓库。&quot;\n            continue;\n          fi\n          cd &quot;\\$file_path/\\$file&quot;\n          # git checkout \\$branch\n          since_date=\\`date -d &quot;-\\$i day&quot; +%Y-%m-%d\\`\n          since_week=\\`date -d &quot;-\\$i day&quot; +%A\\`\n          until_date=\\`date -d &quot;-\\$((\\$i-1)) day&quot; +%Y-%m-%d\\`\n          eval \\$(git log --author=\\$git_email --since=\\$since_date --until=\\$until_date --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += \\$1 ; subs += \\$2 ; loc += \\$1 - \\$2 } END { printf &quot;add=%s; subs=%s; loc=%s;&quot;, add, subs, loc }\')\n          add_sum=\\$((\\$add_sum + \\$add))\n          subs_sum=\\$((\\$subs_sum + \\$subs))\n          loc_sum=\\$((\\$loc_sum + \\$loc))\n        done\n        printf &quot;\\$since_date（\\$since_week） 增加行总数：\\$add_sum，删除行总数：\\$subs_sum，总代码行：\\$loc_sum\\n&quot;\n        i=\\$((\\$i-1))\n      done\n\n      # echo -e &quot;按项目统计：&quot;\n      # for file in \\${exist_branch_projects[@]}\n      # do\n      #   if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n      #     echo -e &quot;\\$file 目录不存在。&quot;\n      #     continue;\n      #   fi\n      #   if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n      #     echo -e &quot;\\$file 不是git仓库。&quot;\n      #     continue;\n      #   fi\n      #   cd &quot;\\$file_path/\\$file&quot;\n      #   # git checkout \\$branch\n      #   echo &quot;\\$file 代码量统计：&quot;\n      #   i=\\$(\\$date_stat)\n      #   while [ \\$i -ge 1 ]\n      #   do\n      #     since_date=\\`date -d &quot;-\\$i day&quot; +%Y-%m-%d\\`\n      #     until_date=\\`date -d &quot;-\\$((\\$i-1)) day&quot; +%Y-%m-%d\\`\n      #     git log --author=\\$git_email --since=\\$since_date --until=\\$until_date --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += \\$1 ; subs += \\$2 ; loc += \\$1 - \\$2 } END { printf &quot;\'\\$until_date\' 增加行总数：%s，删除行总数：%s，总代码行：%s\\n&quot;, add, subs, loc }\'\n      #     i=\\$((\\$i-1))\n      #   done\n      # done\n    }\n  done\n}`, `82782070466068510000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash{61-65,83,90} 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>\n<span class="token comment"># 周一到今天的代码量统计，使用方式：./git.bash mockingbird robin koala 或 执行 ./git.bash 后自行输入</span>\n<span class="token comment"># 能够检测一些错误，并在错误发生时中断程序并输出信息</span>\n<span class="token comment"># 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。</span>\n<span class="token comment"># set -euo pipefail</span>\n<span class="token comment"># trap "echo \'error: Script failed: see failed command above\'" ERR</span>\n<span class="token comment"># {} 防止下载不完全代码被执行</span>\n<span class="token punctuation">{</span>\n  <span class="token keyword">function</span> <span class="token function-name function">to_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token variable">$1</span>\n    <span class="token assign-left variable">OLD_IFS</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$IFS</span>"</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">","</span>\n    <span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">)</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">"<span class="token variable">$OLD_IFS</span>"</span>\n    <span class="token keyword">for</span> <span class="token for-or-select variable">each</span> <span class="token keyword">in</span> <span class="token variable">${array<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>\n    <span class="token keyword">do</span>\n    <span class="token builtin class-name">echo</span> <span class="token variable">$each</span>\n    <span class="token keyword">done</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token assign-left variable">file_path</span><span class="token operator">=</span><span class="token string">"G:/project/tungee"</span>\n  <span class="token assign-left variable">git_email</span><span class="token operator">=</span><span class="token string">"634407147@qq.com"</span>\n  <span class="token assign-left variable">date_stat</span><span class="token operator">=</span><span class="token string">"date +%w"</span> <span class="token comment"># 今天是一周的第几天，可换成具体数字如 date_stat="echo 5" 以实现统计几天前代码的功能</span>\n\n  <span class="token comment"># if [ $date_stat -eq 0 ]; then</span>\n  <span class="token comment">#   date_stat=7</span>\n  <span class="token comment"># fi</span>\n\n  <span class="token builtin class-name">echo</span> <span class="token string">"输入项目名，以英文逗号分隔，不能有空格"</span>\n  <span class="token builtin class-name">read</span> input\n  <span class="token assign-left variable">projects</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span>to_array $input<span class="token variable">)</span></span><span class="token punctuation">)</span>\n  <span class="token builtin class-name">echo</span> <span class="token string">"输入分支名，以英文逗号分隔，不能有空格"</span>\n  <span class="token builtin class-name">read</span> input\n  <span class="token assign-left variable">branches</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span>to_array $input<span class="token variable">)</span></span><span class="token punctuation">)</span>\n\n  <span class="token keyword">for</span> <span class="token for-or-select variable">branch</span> <span class="token keyword">in</span> <span class="token variable">${branches<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n  <span class="token keyword">do</span>\n    <span class="token assign-left variable">exist_branch_projects</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${projects<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n    <span class="token keyword">do</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n        <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n      <span class="token keyword">fi</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n        <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n      <span class="token keyword">fi</span>\n      <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span>\n      <span class="token function">git</span> checkout <span class="token variable">$branch</span> -q <span class="token operator">></span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token comment"># 重定向错误信息，即屏蔽错误信息</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token assign-left variable">exist_branch_projects</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span>\n        <span class="token function">git</span> pull origin <span class="token variable">$branch</span> -q\n      <span class="token comment"># else</span>\n      <span class="token comment">#   # echo -e "\\n$file 切换分支到 $branch 失败，可能不存在此分支"</span>\n      <span class="token keyword">fi</span>\n    <span class="token keyword">done</span>\n    <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\\n">\\n</span>分支 <span class="token variable">$branch</span> 上的代码统计："</span>\n    <span class="token punctuation">{</span>\n      <span class="token builtin class-name">echo</span> -e <span class="token string">"按日期统计："</span>\n<span class="gatsby-highlight-code-line">      <span class="token comment"># 或 i=$(($($date_stat)-1))</span></span><span class="gatsby-highlight-code-line">      <span class="token comment"># $(($a+$b)) 用于整数运算，相当于 `expr $a + $b`</span></span><span class="gatsby-highlight-code-line">      <span class="token comment"># $() 与 `` 相当于命令替换，执行结果替换</span></span><span class="gatsby-highlight-code-line">      <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token punctuation">$(</span>$date_stat<span class="token punctuation">)</span> - <span class="token number">1</span><span class="token variable">`</span></span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -ge <span class="token number">0</span> <span class="token punctuation">]</span></span>      <span class="token keyword">do</span>\n        <span class="token assign-left variable">add_sum</span><span class="token operator">=</span><span class="token number">0</span>\n        <span class="token assign-left variable">subs_sum</span><span class="token operator">=</span><span class="token number">0</span>\n        <span class="token assign-left variable">loc_sum</span><span class="token operator">=</span><span class="token number">0</span>\n        <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${exist_branch_projects<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n        <span class="token keyword">do</span>\n          <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n            <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n            <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n          <span class="token keyword">fi</span>\n          <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n            <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n            <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n          <span class="token keyword">fi</span>\n          <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span>\n          <span class="token comment"># git checkout $branch</span>\n          <span class="token assign-left variable">since_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable">$i</span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n<span class="gatsby-highlight-code-line">          <span class="token assign-left variable">since_week</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable">$i</span> day"</span> +%A<span class="token variable">`</span></span></span>          <span class="token assign-left variable">until_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n          <span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> log --author<span class="token operator">=</span>$git_email --since<span class="token operator">=</span>$since_date --until<span class="token operator">=</span>$until_date --pretty<span class="token operator">=</span>tformat: --numstat <span class="token operator">|</span> <span class="token function">awk</span> -v <span class="token assign-left variable">add</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">subs</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">loc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token string">\'{ add += <span class="token variable">$1</span> ; subs += <span class="token variable">$2</span> ; loc += <span class="token variable">$1</span> - <span class="token variable">$2</span> } END { printf "add=%s; subs=%s; loc=%s;", add, subs, loc }\'</span><span class="token variable">)</span></span>\n          <span class="token assign-left variable">add_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$add_sum <span class="token operator">+</span> $add<span class="token variable">))</span></span>\n          <span class="token assign-left variable">subs_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$subs_sum <span class="token operator">+</span> $subs<span class="token variable">))</span></span>\n          <span class="token assign-left variable">loc_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$loc_sum <span class="token operator">+</span> $loc<span class="token variable">))</span></span>\n        <span class="token keyword">done</span>\n<span class="gatsby-highlight-code-line">        <span class="token builtin class-name">printf</span> <span class="token string">"<span class="token variable">$since_date</span>（<span class="token variable">$since_week</span>） 增加行总数：<span class="token variable">$add_sum</span>，删除行总数：<span class="token variable">$subs_sum</span>，总代码行：<span class="token variable">$loc_sum</span><span class="token entity" title="\\n">\\n</span>"</span></span>        <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span>\n      <span class="token keyword">done</span>\n\n      <span class="token comment"># echo -e "按项目统计："</span>\n      <span class="token comment"># for file in ${exist_branch_projects[@]}</span>\n      <span class="token comment"># do</span>\n      <span class="token comment">#   if [ ! -d "$file_path/$file" ]; then</span>\n      <span class="token comment">#     echo -e "$file 目录不存在。"</span>\n      <span class="token comment">#     continue;</span>\n      <span class="token comment">#   fi</span>\n      <span class="token comment">#   if [ ! -d "$file_path/$file/.git" ]; then</span>\n      <span class="token comment">#     echo -e "$file 不是git仓库。"</span>\n      <span class="token comment">#     continue;</span>\n      <span class="token comment">#   fi</span>\n      <span class="token comment">#   cd "$file_path/$file"</span>\n      <span class="token comment">#   # git checkout $branch</span>\n      <span class="token comment">#   echo "$file 代码量统计："</span>\n      <span class="token comment">#   i=$($date_stat)</span>\n      <span class="token comment">#   while [ $i -ge 1 ]</span>\n      <span class="token comment">#   do</span>\n      <span class="token comment">#     since_date=`date -d "-$i day" +%Y-%m-%d`</span>\n      <span class="token comment">#     until_date=`date -d "-$(($i-1)) day" +%Y-%m-%d`</span>\n      <span class="token comment">#     git log --author=$git_email --since=$since_date --until=$until_date --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += $1 ; subs += $2 ; loc += $1 - $2 } END { printf "\'$until_date\' 增加行总数：%s，删除行总数：%s，总代码行：%s\\n", add, subs, loc }\'</span>\n      <span class="token comment">#     i=$(($i-1))</span>\n      <span class="token comment">#   done</span>\n      <span class="token comment"># done</span>\n    <span class="token punctuation">}</span>\n  <span class="token keyword">done</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="运行效果-3"><a href="#%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C-3" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行效果</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-03-07-12-12-03-2caad29e486eada9378d7c44986d3a3f-72de5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 648px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 65.74074074074075%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABh0lEQVQoz4WS2XKrMBBE2RMDvgJJGG1gCSHCEv//76XtPMXXVZ4HUJXo6ZnTRKUsyUhOvIxJQj4alrB/JKUsT9Ikeluz8955LbUb7dVeG952XW/08Pl5ei/uLh1llHf80l+00nVV53lenk5pmr4XG22GYTzfq26aJsuzOI7iOE6SJH1UHEU4Z1mW/N9unoOUalkW7+e+v4QQpmlijH09ilGG3s45QkhR5M/iJQStzXEc0+S1Vvu+Q9/34tj32+1b484M1lq8MVdZVX/E3ns4b9u2bpsxZl1XiDnnYZ4hHseB4QymGAcZ5H/NRS8IaSDDeIzSYRjgBRPIYIhpOe+UUnVdPytRUgilFb7GdVVVeFLKzvUZvOJHgRmAvaaNJa11y52TF0KAFgwppUBoH5wwC8YqPopXUZmBMT7P8zheRd//0oZ43+7kmqZFr3Eci+KVGGCw0rauy/KllEQ8k/eI6vZ9wLxtW+cs2r3+4Zx1UsgQZvhIKdDrN2fwD0ugDDkb5AwW2P9J+wME1TBgSiwCAQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 03 07 12 12 03"\n        title=""\n        src="/static/2020-03-07-12-12-03-2caad29e486eada9378d7c44986d3a3f-72de5.png"\n        srcset="/static/2020-03-07-12-12-03-2caad29e486eada9378d7c44986d3a3f-bb436.png 200w,\n/static/2020-03-07-12-12-03-2caad29e486eada9378d7c44986d3a3f-c5634.png 400w,\n/static/2020-03-07-12-12-03-2caad29e486eada9378d7c44986d3a3f-72de5.png 648w"\n        sizes="(max-width: 648px) 100vw, 648px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>以上更新于<code class="language-text">2020-3-7 11:57:55</code></p>\n<hr>\n<h2 id="第五版"><a href="#%E7%AC%AC%E4%BA%94%E7%89%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>第五版</h2>\n<p>第四版的代码统计今天的代码有 2 个问题：</p>\n<ol>\n<li>当 i 循环到 0 时，<code class="language-text">-$(($i-1))</code> 这一行代码有问题，统计到的 <code class="language-text">until_date</code> 比 <code class="language-text">since_date</code> 反而早了一天，造成脚本统计错误</li>\n<li>统计今天的代码时，只传年月日会默认带上当前时分秒的时间导致统计不上，即还要加上时分秒，否则不能统计到今天的代码</li>\n</ol>\n<h3 id="修复统计今天代码"><a href="#%E4%BF%AE%E5%A4%8D%E7%BB%9F%E8%AE%A1%E4%BB%8A%E5%A4%A9%E4%BB%A3%E7%A0%81" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>修复统计今天代码</h3>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="18505497659007910000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`#!/bin/sh\n# 周一到今天的代码量统计，使用方式：./git.bash mockingbird robin koala 或 执行 ./git.bash 后自行输入\n# 能够检测一些错误，并在错误发生时中断程序并输出信息\n# 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。\n# set -euo pipefail\n# trap &quot;echo \'error: Script failed: see failed command above\'&quot; ERR\n# {} 防止下载不完全代码被执行\n{\n  function to_array() {\n    x=\\$1\n    OLD_IFS=&quot;\\$IFS&quot;\n    IFS=&quot;,&quot;\n    array=(\\$x)\n    IFS=&quot;\\$OLD_IFS&quot;\n    for each in \\${array[*]}\n    do\n    echo \\$each\n    done\n  }\n\n  file_path=&quot;G:/project/tungee&quot;\n  git_email=&quot;634407147@qq.com&quot;\n  date_stat=&quot;echo 9&quot; # 今天是一周的第几天，可换成具体数字如 date_stat=&quot;echo 5&quot; 以实现统计几天前代码的功能\n\n  # if [ \\$date_stat -eq 0 ]; then\n  #   date_stat=7\n  # fi\n\n  echo &quot;输入项目名，以英文逗号分隔，不能有空格&quot;\n  read input\n  projects=(\\$(to_array \\$input))\n  echo &quot;输入分支名，以英文逗号分隔，不能有空格&quot;\n  read input\n  branches=(\\$(to_array \\$input))\n\n  for branch in \\${branches[@]}\n  do\n    exist_branch_projects=()\n    for file in \\${projects[@]}\n    do\n      if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n        echo -e &quot;\\$file 目录不存在。&quot;\n        continue;\n      fi\n      if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n        echo -e &quot;\\$file 不是git仓库。&quot;\n        continue;\n      fi\n      cd &quot;\\$file_path/\\$file&quot;\n      git checkout \\$branch -q >/dev/null 2>&1 # 重定向错误信息，即屏蔽错误信息\n      if [ \\$? -eq 0 ]; then\n        exist_branch_projects+=(\\$file)\n        # git pull origin \\$branch -q\n      # else\n      #   # echo -e &quot;\\n\\$file 切换分支到 \\$branch 失败，可能不存在此分支&quot;\n      fi\n    done\n    echo -e &quot;\\n分支 \\$branch 上的代码统计：&quot;\n    {\n      echo -e &quot;按日期统计：&quot;\n      # 或 i=\\$((\\$(\\$date_stat)-1))\n      # \\$((\\$a+\\$b)) 用于整数运算，相当于 \\`expr \\$a + \\$b\\`\n      # \\$() 与 \\`\\` 相当于命令替换，执行结果替换\n      i=\\`expr \\$(\\$date_stat) - 1\\`\n      while [ \\$i -ge 0 ]\n      do\n        add_sum=0\n        subs_sum=0\n        loc_sum=0\n        for file in \\${exist_branch_projects[@]}\n        do\n          if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n            echo -e &quot;\\$file 目录不存在。&quot;\n            continue;\n          fi\n          if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n            echo -e &quot;\\$file 不是git仓库。&quot;\n            continue;\n          fi\n          cd &quot;\\$file_path/\\$file&quot;\n          # git checkout \\$branch\n          since_date=\\`date -d &quot;-\\$i day&quot; +%Y-%m-%d\\`\n          if [ \\$i -ge 1 ]; then\n            until_date=\\`date -d &quot;-\\$((\\$i-1)) day&quot; +%Y-%m-%d\\`\n          else\n            until_date=\\`date -d &quot;+\\$((0-\\$i+1)) day&quot; +%Y-%m-%d\\`\n          fi\n          eval \\$(git log --author=\\$git_email --since=&quot;\\$since_date 00:00:00&quot; --until=&quot;\\$until_date 00:00:00&quot; --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += \\$1 ; subs += \\$2 ; loc += \\$1 - \\$2 } END { printf &quot;add=%s; subs=%s; loc=%s;&quot;, add, subs, loc }\')\n          add_sum=\\$((\\$add_sum + \\$add))\n          subs_sum=\\$((\\$subs_sum + \\$subs))\n          loc_sum=\\$((\\$loc_sum + \\$loc))\n        done\n        since_week=\\`date -d &quot;-\\$i day&quot; +%A\\`\n        printf &quot;\\$since_date（\\$since_week） 增加行总数：\\$add_sum，删除行总数：\\$subs_sum，总代码行：\\$loc_sum\\n&quot;\n        i=\\$((\\$i-1))\n      done\n\n      # echo -e &quot;按项目统计：&quot;\n      # for file in \\${exist_branch_projects[@]}\n      # do\n      #   if [ ! -d &quot;\\$file_path/\\$file&quot; ]; then\n      #     echo -e &quot;\\$file 目录不存在。&quot;\n      #     continue;\n      #   fi\n      #   if [ ! -d &quot;\\$file_path/\\$file/.git&quot; ]; then\n      #     echo -e &quot;\\$file 不是git仓库。&quot;\n      #     continue;\n      #   fi\n      #   cd &quot;\\$file_path/\\$file&quot;\n      #   # git checkout \\$branch\n      #   echo &quot;\\$file 代码量统计：&quot;\n      #   i=\\$(\\$date_stat)\n      #   while [ \\$i -ge 1 ]\n      #   do\n      #     since_date=\\`date -d &quot;-\\$i day&quot; +%Y-%m-%d\\`\n      #     until_date=\\`date -d &quot;-\\$((\\$i-1)) day&quot; +%Y-%m-%d\\`\n      #     git log --author=\\$git_email --since=\\$since_date --until=\\$until_date --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += \\$1 ; subs += \\$2 ; loc += \\$1 - \\$2 } END { printf &quot;\'\\$until_date\' 增加行总数：%s，删除行总数：%s，总代码行：%s\\n&quot;, add, subs, loc }\'\n      #     i=\\$((\\$i-1))\n      #   done\n      # done\n    }\n  done\n}`, `18505497659007910000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                bash{83-88} 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>\n<span class="token comment"># 周一到今天的代码量统计，使用方式：./git.bash mockingbird robin koala 或 执行 ./git.bash 后自行输入</span>\n<span class="token comment"># 能够检测一些错误，并在错误发生时中断程序并输出信息</span>\n<span class="token comment"># 使用 set -e 令脚本在发生错误时退出而不是继续运行；使用 set -u 来检查是否使用了未赋值的变量；试试 set -o pipefail，它可以监测管道中的错误。</span>\n<span class="token comment"># set -euo pipefail</span>\n<span class="token comment"># trap "echo \'error: Script failed: see failed command above\'" ERR</span>\n<span class="token comment"># {} 防止下载不完全代码被执行</span>\n<span class="token punctuation">{</span>\n  <span class="token keyword">function</span> <span class="token function-name function">to_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token variable">$1</span>\n    <span class="token assign-left variable">OLD_IFS</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$IFS</span>"</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">","</span>\n    <span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable">$x</span><span class="token punctuation">)</span>\n    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">"<span class="token variable">$OLD_IFS</span>"</span>\n    <span class="token keyword">for</span> <span class="token for-or-select variable">each</span> <span class="token keyword">in</span> <span class="token variable">${array<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>\n    <span class="token keyword">do</span>\n    <span class="token builtin class-name">echo</span> <span class="token variable">$each</span>\n    <span class="token keyword">done</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token assign-left variable">file_path</span><span class="token operator">=</span><span class="token string">"G:/project/tungee"</span>\n  <span class="token assign-left variable">git_email</span><span class="token operator">=</span><span class="token string">"634407147@qq.com"</span>\n  <span class="token assign-left variable">date_stat</span><span class="token operator">=</span><span class="token string">"echo 9"</span> <span class="token comment"># 今天是一周的第几天，可换成具体数字如 date_stat="echo 5" 以实现统计几天前代码的功能</span>\n\n  <span class="token comment"># if [ $date_stat -eq 0 ]; then</span>\n  <span class="token comment">#   date_stat=7</span>\n  <span class="token comment"># fi</span>\n\n  <span class="token builtin class-name">echo</span> <span class="token string">"输入项目名，以英文逗号分隔，不能有空格"</span>\n  <span class="token builtin class-name">read</span> input\n  <span class="token assign-left variable">projects</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span>to_array $input<span class="token variable">)</span></span><span class="token punctuation">)</span>\n  <span class="token builtin class-name">echo</span> <span class="token string">"输入分支名，以英文逗号分隔，不能有空格"</span>\n  <span class="token builtin class-name">read</span> input\n  <span class="token assign-left variable">branches</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span>to_array $input<span class="token variable">)</span></span><span class="token punctuation">)</span>\n\n  <span class="token keyword">for</span> <span class="token for-or-select variable">branch</span> <span class="token keyword">in</span> <span class="token variable">${branches<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n  <span class="token keyword">do</span>\n    <span class="token assign-left variable">exist_branch_projects</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${projects<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n    <span class="token keyword">do</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n        <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n      <span class="token keyword">fi</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n        <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n      <span class="token keyword">fi</span>\n      <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span>\n      <span class="token function">git</span> checkout <span class="token variable">$branch</span> -q <span class="token operator">></span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token comment"># 重定向错误信息，即屏蔽错误信息</span>\n      <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n        <span class="token assign-left variable">exist_branch_projects</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span>\n        <span class="token comment"># git pull origin $branch -q</span>\n      <span class="token comment"># else</span>\n      <span class="token comment">#   # echo -e "\\n$file 切换分支到 $branch 失败，可能不存在此分支"</span>\n      <span class="token keyword">fi</span>\n    <span class="token keyword">done</span>\n    <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\\n">\\n</span>分支 <span class="token variable">$branch</span> 上的代码统计："</span>\n    <span class="token punctuation">{</span>\n      <span class="token builtin class-name">echo</span> -e <span class="token string">"按日期统计："</span>\n      <span class="token comment"># 或 i=$(($($date_stat)-1))</span>\n      <span class="token comment"># $(($a+$b)) 用于整数运算，相当于 `expr $a + $b`</span>\n      <span class="token comment"># $() 与 `` 相当于命令替换，执行结果替换</span>\n      <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token punctuation">$(</span>$date_stat<span class="token punctuation">)</span> - <span class="token number">1</span><span class="token variable">`</span></span>\n      <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -ge <span class="token number">0</span> <span class="token punctuation">]</span>\n      <span class="token keyword">do</span>\n        <span class="token assign-left variable">add_sum</span><span class="token operator">=</span><span class="token number">0</span>\n        <span class="token assign-left variable">subs_sum</span><span class="token operator">=</span><span class="token number">0</span>\n        <span class="token assign-left variable">loc_sum</span><span class="token operator">=</span><span class="token number">0</span>\n        <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">${exist_branch_projects<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>\n        <span class="token keyword">do</span>\n          <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n            <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 目录不存在。"</span>\n            <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n          <span class="token keyword">fi</span>\n          <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>/.git"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>\n            <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token variable">$file</span> 不是git仓库。"</span>\n            <span class="token builtin class-name">continue</span><span class="token punctuation">;</span>\n          <span class="token keyword">fi</span>\n          <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$file_path</span>/<span class="token variable">$file</span>"</span>\n          <span class="token comment"># git checkout $branch</span>\n          <span class="token assign-left variable">since_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable">$i</span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span>\n<span class="gatsby-highlight-code-line">          <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> -ge <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span><span class="gatsby-highlight-code-line">            <span class="token assign-left variable">until_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span></span><span class="gatsby-highlight-code-line">          <span class="token keyword">else</span></span><span class="gatsby-highlight-code-line">            <span class="token assign-left variable">until_date</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"+<span class="token variable"><span class="token variable">$((</span><span class="token number">0</span><span class="token operator">-</span>$i<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span> day"</span> +%Y-%m-%d<span class="token variable">`</span></span></span><span class="gatsby-highlight-code-line">          <span class="token keyword">fi</span></span><span class="gatsby-highlight-code-line">          <span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> log --author<span class="token operator">=</span>$git_email --since<span class="token operator">=</span><span class="token string">"<span class="token variable">$since_date</span> 00:00:00"</span> --until<span class="token operator">=</span><span class="token string">"<span class="token variable">$until_date</span> 00:00:00"</span> --pretty<span class="token operator">=</span>tformat: --numstat <span class="token operator">|</span> <span class="token function">awk</span> -v <span class="token assign-left variable">add</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">subs</span><span class="token operator">=</span><span class="token number">0</span> -v <span class="token assign-left variable">loc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token string">\'{ add += <span class="token variable">$1</span> ; subs += <span class="token variable">$2</span> ; loc += <span class="token variable">$1</span> - <span class="token variable">$2</span> } END { printf "add=%s; subs=%s; loc=%s;", add, subs, loc }\'</span><span class="token variable">)</span></span></span>          <span class="token assign-left variable">add_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$add_sum <span class="token operator">+</span> $add<span class="token variable">))</span></span>\n          <span class="token assign-left variable">subs_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$subs_sum <span class="token operator">+</span> $subs<span class="token variable">))</span></span>\n          <span class="token assign-left variable">loc_sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$loc_sum <span class="token operator">+</span> $loc<span class="token variable">))</span></span>\n        <span class="token keyword">done</span>\n        <span class="token assign-left variable">since_week</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">date</span> -d <span class="token string">"-<span class="token variable">$i</span> day"</span> +%A<span class="token variable">`</span></span>\n        <span class="token builtin class-name">printf</span> <span class="token string">"<span class="token variable">$since_date</span>（<span class="token variable">$since_week</span>） 增加行总数：<span class="token variable">$add_sum</span>，删除行总数：<span class="token variable">$subs_sum</span>，总代码行：<span class="token variable">$loc_sum</span><span class="token entity" title="\\n">\\n</span>"</span>\n        <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$i<span class="token operator">-</span><span class="token number">1</span><span class="token variable">))</span></span>\n      <span class="token keyword">done</span>\n\n      <span class="token comment"># echo -e "按项目统计："</span>\n      <span class="token comment"># for file in ${exist_branch_projects[@]}</span>\n      <span class="token comment"># do</span>\n      <span class="token comment">#   if [ ! -d "$file_path/$file" ]; then</span>\n      <span class="token comment">#     echo -e "$file 目录不存在。"</span>\n      <span class="token comment">#     continue;</span>\n      <span class="token comment">#   fi</span>\n      <span class="token comment">#   if [ ! -d "$file_path/$file/.git" ]; then</span>\n      <span class="token comment">#     echo -e "$file 不是git仓库。"</span>\n      <span class="token comment">#     continue;</span>\n      <span class="token comment">#   fi</span>\n      <span class="token comment">#   cd "$file_path/$file"</span>\n      <span class="token comment">#   # git checkout $branch</span>\n      <span class="token comment">#   echo "$file 代码量统计："</span>\n      <span class="token comment">#   i=$($date_stat)</span>\n      <span class="token comment">#   while [ $i -ge 1 ]</span>\n      <span class="token comment">#   do</span>\n      <span class="token comment">#     since_date=`date -d "-$i day" +%Y-%m-%d`</span>\n      <span class="token comment">#     until_date=`date -d "-$(($i-1)) day" +%Y-%m-%d`</span>\n      <span class="token comment">#     git log --author=$git_email --since=$since_date --until=$until_date --pretty=tformat: --numstat | awk -v add=0 -v subs=0 -v loc=0 \'{ add += $1 ; subs += $2 ; loc += $1 - $2 } END { printf "\'$until_date\' 增加行总数：%s，删除行总数：%s，总代码行：%s\\n", add, subs, loc }\'</span>\n      <span class="token comment">#     i=$(($i-1))</span>\n      <span class="token comment">#   done</span>\n      <span class="token comment"># done</span>\n    <span class="token punctuation">}</span>\n  <span class="token keyword">done</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="运行效果-4"><a href="#%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C-4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>运行效果</h3>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-04-24-12-11-28-922ecf0ff70467d63f01bfc83dfac087-ad786.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 457px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 55.57986870897156%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABqElEQVQoz3VS23KbMBQUJdhggwSSAF24g3GwDZlx4zw04/TN//9J3ZI+1vug0eWc3T0LxFXuttnump2vAyII4YQ7whKzfwm4JEKQrU+eoqtaq4umbmIWi4SLRMhM0oQFu53ENldxnDxtPp9OXPyF72/TNJVpaoyVUoZhqLUqihJPT5uzLOOcG63TLNPaFIXVxoRh5Lou6Hzf32w2KHMc57veWfGvOYU5KY01lLF4BY0ixlgQ7ILAxx3Ysf5feTwchmGoqzKkFD6jMNzv97DKKP2mwCwYG8SwsPE8SkEevXjeD9clQz/0fb+OVzwej1xhY28fH5fLuev7iNJlni/zfL1eldZC8GmacAE7mIjUVYVRpRTGmNvtHWpIDRVd2xhrEVvXtWCHO2QZRWFVVUPfcS48bwPlA96stWVRfv3+ghT215/v0+tr27YsZvM8T9NpWZYsy+OYHY9HHBENpiN1XaMNmSmlPj9/JUmi8hw+h6EvimpV7sYVSmkEgj9iHI/4QH4QkKZpyrJEKhC83+9qxfL2No6Hum4Qz3HF6XxGcxLHSAjHhHPE9wdxxTPTv9OxngAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 04 24 12 11 28"\n        title=""\n        src="/static/2020-04-24-12-11-28-922ecf0ff70467d63f01bfc83dfac087-ad786.png"\n        srcset="/static/2020-04-24-12-11-28-922ecf0ff70467d63f01bfc83dfac087-aaeb0.png 200w,\n/static/2020-04-24-12-11-28-922ecf0ff70467d63f01bfc83dfac087-4d187.png 400w,\n/static/2020-04-24-12-11-28-922ecf0ff70467d63f01bfc83dfac087-ad786.png 457w"\n        sizes="(max-width: 457px) 100vw, 457px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>',
id:"/github/workspace/blog/git代码统计脚本/index.md absPath of file >>> MarkdownRemark",timeToRead:11,frontmatter:{date:"2020-04-24 11:17:09",path:"/git-code-statistics-script/",tags:"Git, git 代码统计, 预研",title:"git代码统计脚本",draft:null}},{excerpt:"需求背景 如下图所示，由于多个产品共存，当初设计产品架构时，侧边栏、打电话组件是存在于每个项目的子模块中的。迫于产品越来越多，需要动到侧边栏的时候越来越频繁，随着产品的不断增加导致了需要编译每个项目的工作越来越重，急需一种新的架构来分离侧边栏与各自产品端。 技术方案 基本原理类似于之前的文章  记一次组件打包为链接的实践 ，也就是主框架也就是侧边栏项目提前设定好元素的位置，再用 ReactDOM.render…",html:'<h1 id="需求背景"><a href="#%E9%9C%80%E6%B1%82%E8%83%8C%E6%99%AF" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>需求背景</h1>\n<p>如下图所示，由于多个产品共存，当初设计产品架构时，侧边栏、打电话组件是存在于每个项目的子模块中的。迫于产品越来越多，需要动到侧边栏的时候越来越频繁，随着产品的不断增加导致了需要编译每个项目的工作越来越重，急需一种新的架构来分离侧边栏与各自产品端。</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-04-01-11-05-14-5a6b0a65c26cd7517c48041183467750-8b0e1.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 294px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 117.68707482993197%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADKUlEQVQ4y41US08TURi9wMr4CmoCCSiKxPAQFLDY8lACpAIigeBKTFwYF+pKCW5EXPj4Mxp8ENQqBYuPhCUsSOgT2pJCSzud0k5n5s7M9cwUEwGr/fLlZu69Od/jfOcOOWO6bOq8Vt7QNu34wRhTFIXlbGTkyfOlZdfDsWeTNrsoCF6v1+PxuN3uFdjq6sbGhqZpWcGjT1+4PSsPHutgWRK9Ph9Qbo8HazgcjsVimqZmBZ9uaK2xdJ6otdhmv2MvK2omEVaAsMHJny5SfVVU3Un5+eaKhrbSatPrT46EyoKcuMbTFY4G4jSU0H39t+M7vEWdEXk1JqsKFSVKLFcGb90baekeevXxK8/Yz4Di4pgjwGxe5oqxaJpFhG0PCyyWZs6oFuD1mqhMSW2Ltf/G7bpW64RtTmTMzyvhNINvAJBmMVEHZByB4iJbiWuhLZWpiiRJ5OS55tKzF4srL9jn9FFRKisKTafTkiRSRSdA2+k4wjEmqoMb268ODN+pb+/5PDsHMBiOx+NOpxNsr6+vy7K8i2FMTlNVxBUBbu29fu/RODq32R165v+JxMBuD4ScqjPXXLxUUtU47fiGA0EQUE8ikdgybK/gAE4JYlKQkoJICvIL8vcdJoRMTU3hbtVQ1eLi4vLy8tLSUjKZ3AVWNS0WTwKZxqjyCsvyK3vJ/pLJtxO5aBtgjk/qIlEoIQeK8o5VkoJD79+9wR3P86Ca47iEYXtj6Zl5zIrxcY4UFpceKS49eLTINm3Xy/b7o9Goy+Xy+XzBYHAv25nMGV5JfXvfzbsjzT3XbTOO3MumKJtCntaB+6Njpo6+DBhpQTgeEyqPRCJgPlvPkBNeVVuVueNErXnGUFgwuAZYIBAA52AegbKUrWLc5Iypvamrv6zOYnd8z7FsnTDNIKyle3B0/GXX4PCHLzO4M1QtQR7IuZdtbFVVzWRG06TG0mUdGq42d04bmUHy5uYm1lAo5Pf7d/WMiOCZSxg9yzIpr29F2yU1TZlXlSvbhkoIfiMVjZeO15ozYFSF2aLgVCqFFrD915xP7wTDwPP8/PzCwgJ+o5TSvxGWTImSKNNfS47GKYR+jf4AAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 04 01 11 05 14"\n        title=""\n        src="/static/2020-04-01-11-05-14-5a6b0a65c26cd7517c48041183467750-8b0e1.png"\n        srcset="/static/2020-04-01-11-05-14-5a6b0a65c26cd7517c48041183467750-2d2ea.png 200w,\n/static/2020-04-01-11-05-14-5a6b0a65c26cd7517c48041183467750-8b0e1.png 294w"\n        sizes="(max-width: 294px) 100vw, 294px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h1 id="技术方案"><a href="#%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>技术方案</h1>\n<p>基本原理类似于之前的文章 <a href="/components-pack-as-library/">记一次组件打包为链接的实践</a>，也就是主框架也就是侧边栏项目提前设定好元素的位置，再用 ReactDOM.render 方法去渲染结点，当然还有许多其他要注意的地方，比如链接的缓存规则、路由之间的跳转、子框架应用间的通信、样式和脚本的隔离等等。</p>\n<p>参考市面上已有的解决的方案，发现比较符合微前端框架的适用场景，于是开始用以下微前端框架来做出一个 demo 级别的应用</p>\n<ol>\n<li><a href="https://github.com/ice-lab/icestark" target="_blank" rel="nofollow noreferrer noopener">ice-stark</a></li>\n<li><a href="https://github.com/single-spa/single-spa" target="_blank" rel="nofollow noreferrer noopener">single-spa</a></li>\n<li><a href="https://github.com/umijs/qiankun" target="_blank" rel="nofollow noreferrer noopener">qiankun</a></li>\n</ol>\n<h1 id="具体实施"><a href="#%E5%85%B7%E4%BD%93%E5%AE%9E%E6%96%BD" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>具体实施</h1>\n<h2 id="ice-stark"><a href="#ice-stark" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ice-stark</h2>\n<h3 id="主框架"><a href="#%E4%B8%BB%E6%A1%86%E6%9E%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>主框架</h3>\n<p>以路径作为识别子应用的方式，子应用需要配置 publicPath，否则访问不到</p>\n<p>这里假设产品 1 是采用了旧框架的子应用，产品 2 采用了新的</p>\n<p>以下是在 ice/stark 1.4.1 的版本上开始做的，需要添加代码如下：</p>\n<p>src\\platform\\layout\\index.js</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="6539794007969468000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import { AppRouter, AppRoute } from \'@ice/stark\';\n<AppRouter\n  NotFoundComponent={<div>未找到</div>}\n  LoadingComponent={<div>加载中</div>}\n  onRouteChange={this.handleRouteChange}\n>\n  <AppRoute path=\'/product1\' basename=\'/product1\' title=\'产品1\' entry=\'产品1的域名/index.html\' />\n  <AppRoute path=\'/product2\' basename=\'/product2\' title=\'产品2\' entry=\'产品2的域名/index.html\' />\n</AppRouter>;`, `6539794007969468000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> AppRouter<span class="token punctuation">,</span> AppRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'@ice/stark\'</span><span class="token punctuation">;</span>\n<span class="token operator">&lt;</span>AppRouter\n  NotFoundComponent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">></span>未找到<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span>\n  LoadingComponent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">></span>加载中<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span>\n  onRouteChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleRouteChange<span class="token punctuation">}</span>\n<span class="token operator">></span>\n  <span class="token operator">&lt;</span>AppRoute path<span class="token operator">=</span><span class="token string">\'/product1\'</span> basename<span class="token operator">=</span><span class="token string">\'/product1\'</span> title<span class="token operator">=</span><span class="token string">\'产品1\'</span> entry<span class="token operator">=</span><span class="token string">\'产品1的域名/index.html\'</span> <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token operator">&lt;</span>AppRoute path<span class="token operator">=</span><span class="token string">\'/product2\'</span> basename<span class="token operator">=</span><span class="token string">\'/product2\'</span> title<span class="token operator">=</span><span class="token string">\'产品2\'</span> entry<span class="token operator">=</span><span class="token string">\'产品2的域名/index.html\'</span> <span class="token operator">/</span><span class="token operator">></span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>AppRouter<span class="token operator">></span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>结合公司实际的应用场景，不同产品对应着不同的域名，这就不能用路径的方式来识别子应用的加载，需要作出如下改动</p>\n<p>当然对应的子应用就不需要路径别名的配置了，这样实现的缺点是 onRouteChange 这个函数不再起作用，而且不能控制子应用的缓存，这些不同域名的缓存全部交给对应的 nginx 来做了</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26987548032113650000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import { AppRouter, AppRoute } from \'@ice/stark\';\n<AppRouter\n  NotFoundComponent={<div>未找到</div>}\n  LoadingComponent={<div>加载中</div>}\n  onRouteChange={this.handleRouteChange}\n>\n  {产品1的域名 ? <AppRoute path=\'/\' basename=\'/\' title=\'产品1\' entry=\'产品1的域名/index.html\' /> : null}\n\n  {产品2的域名 ? <AppRoute path=\'/\' basename=\'/\' title=\'产品2\' entry=\'产品2的域名/index.html\' /> : null}\n</AppRouter>;`, `26987548032113650000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> AppRouter<span class="token punctuation">,</span> AppRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'@ice/stark\'</span><span class="token punctuation">;</span>\n<span class="token operator">&lt;</span>AppRouter\n  NotFoundComponent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">></span>未找到<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span>\n  LoadingComponent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">></span>加载中<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span>\n  onRouteChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleRouteChange<span class="token punctuation">}</span>\n<span class="token operator">></span>\n  <span class="token punctuation">{</span>产品<span class="token number">1</span>的域名 <span class="token operator">?</span> <span class="token operator">&lt;</span>AppRoute path<span class="token operator">=</span><span class="token string">\'/\'</span> basename<span class="token operator">=</span><span class="token string">\'/\'</span> title<span class="token operator">=</span><span class="token string">\'产品1\'</span> entry<span class="token operator">=</span><span class="token string">\'产品1的域名/index.html\'</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>\n\n  <span class="token punctuation">{</span>产品<span class="token number">2</span>的域名 <span class="token operator">?</span> <span class="token operator">&lt;</span>AppRoute path<span class="token operator">=</span><span class="token string">\'/\'</span> basename<span class="token operator">=</span><span class="token string">\'/\'</span> title<span class="token operator">=</span><span class="token string">\'产品2\'</span> entry<span class="token operator">=</span><span class="token string">\'产品2的域名/index.html\'</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>AppRouter<span class="token operator">></span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id="子框架"><a href="#%E5%AD%90%E6%A1%86%E6%9E%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>子框架</h3>\n<h4 id="老项目"><a href="#%E8%80%81%E9%A1%B9%E7%9B%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>老项目</h4>\n<p>老项目采用了 react-router 3.2.1，区别于新项目</p>\n<p>以下是在 ice/stark-app 1.2.0 的版本上开始做的，需要添加代码如下：</p>\n<h5 id="入口文件"><a href="#%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>入口文件</h5>\n<p>app\\app.js</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="64057797908597180000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import { applyRouterMiddleware, Router, browserHistory, useRouterHistory } from \'react-router\';\nimport { createHistory } from \'history\';\nimport { isInIcestark, getMountNode, registerAppEnter, registerAppLeave, getBasename } from \'@ice/stark-app\';\n\nconst baseHistory = useRouterHistory(createHistory)({\n  basename: getBasename()\n});\n\nconst isIE9 = utils.getBrowserInfo().msie && utils.getBrowserInfo().version === \'9.0\';\n\nconst history = syncHistoryWithStore(baseHistory, store, {\n  selectLocationState: makeSelectLocationState(),\n  adjustUrlOnReplay: isIE9 ? false : undefined\n});\n\nconst router = () => (\n  <ConfigProvider locale={zhCN}>\n    <Provider store={store}>\n      <Router\n        history={history}\n        routes={rootRoute}\n        render={\n          // Scroll to top when going to a new page, imitating default browser behaviour\n          applyRouterMiddleware(useScroll())\n        }\n      />\n    </Provider>\n  </ConfigProvider>\n);\n\nif (isInIcestark()) {\n  registerAppEnter(() => {\n    ReactDOM.render(router(), getMountNode());\n  });\n  registerAppLeave(() => {\n    ReactDOM.unmountComponentAtNode(getMountNode());\n  });\n} else {\n  ReactDOM.render(router(), document.getElementById(\'app\'));\n}`, `64057797908597180000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js{1-3,5-7,11,16-38} 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="gatsby-highlight-code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> applyRouterMiddleware<span class="token punctuation">,</span> Router<span class="token punctuation">,</span> browserHistory<span class="token punctuation">,</span> useRouterHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-router\'</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'history\'</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> isInIcestark<span class="token punctuation">,</span> getMountNode<span class="token punctuation">,</span> registerAppEnter<span class="token punctuation">,</span> registerAppLeave<span class="token punctuation">,</span> getBasename <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'@ice/stark-app\'</span><span class="token punctuation">;</span></span>\n<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> baseHistory <span class="token operator">=</span> <span class="token function">useRouterHistory</span><span class="token punctuation">(</span>createHistory<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  basename<span class="token punctuation">:</span> <span class="token function">getBasename</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="token keyword">const</span> isIE9 <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">getBrowserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>msie <span class="token operator">&amp;&amp;</span> utils<span class="token punctuation">.</span><span class="token function">getBrowserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version <span class="token operator">===</span> <span class="token string">\'9.0\'</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> history <span class="token operator">=</span> <span class="token function">syncHistoryWithStore</span><span class="token punctuation">(</span>baseHistory<span class="token punctuation">,</span> store<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>  selectLocationState<span class="token punctuation">:</span> <span class="token function">makeSelectLocationState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  adjustUrlOnReplay<span class="token punctuation">:</span> isIE9 <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token punctuation">:</span> <span class="token keyword">undefined</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">  <span class="token operator">&lt;</span>ConfigProvider locale<span class="token operator">=</span><span class="token punctuation">{</span>zhCN<span class="token punctuation">}</span><span class="token operator">></span></span><span class="gatsby-highlight-code-line">    <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">></span></span><span class="gatsby-highlight-code-line">      <span class="token operator">&lt;</span>Router</span><span class="gatsby-highlight-code-line">        history<span class="token operator">=</span><span class="token punctuation">{</span>history<span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">        routes<span class="token operator">=</span><span class="token punctuation">{</span>rootRoute<span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">        render<span class="token operator">=</span><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">          <span class="token comment">// Scroll to top when going to a new page, imitating default browser behaviour</span></span><span class="gatsby-highlight-code-line">          <span class="token function">applyRouterMiddleware</span><span class="token punctuation">(</span><span class="token function">useScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">      <span class="token operator">/</span><span class="token operator">></span></span><span class="gatsby-highlight-code-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span></span><span class="gatsby-highlight-code-line">  <span class="token operator">&lt;</span><span class="token operator">/</span>ConfigProvider<span class="token operator">></span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isInIcestark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token function">registerAppEnter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getMountNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token function">registerAppLeave</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    ReactDOM<span class="token punctuation">.</span><span class="token function">unmountComponentAtNode</span><span class="token punctuation">(</span><span class="token function">getMountNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'app\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h5 id="网络请求"><a href="#%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>网络请求</h5>\n<p>网络请求、资源都需要绝对路径，这就涉及到资源的跨域，需要处理</p>\n<p>app\\utils\\httpFetch.js</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="26918469441010730000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`export default function httpFetch(url, options) {\n  const newUrl = __COMMON_VARS__.robots + url;\n  // already forced sign out and has shown modal, cancel fetch\n  if (hasShownForcedSignOutModal) {\n    return new Promise((resolve, reject) => {\n      const error = new Error();\n      error.status = 401;\n      reject(error);\n    });\n  }\n  // eslint-disable-next-line no-param-reassign\n  options = {\n    ...options,\n    credentials: \'include\'\n  };\n  return runFetch(newUrl, options).then((response) => checkStatus(response, newUrl, options));\n}`, `26918469441010730000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js{2,12-17} 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">httpFetch</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> newUrl <span class="token operator">=</span> __COMMON_VARS__<span class="token punctuation">.</span>robots <span class="token operator">+</span> url<span class="token punctuation">;</span></span>  <span class="token comment">// already forced sign out and has shown modal, cancel fetch</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>hasShownForcedSignOutModal<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      error<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">401</span><span class="token punctuation">;</span>\n      <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token comment">// eslint-disable-next-line no-param-reassign</span>\n<span class="gatsby-highlight-code-line">  options <span class="token operator">=</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token operator">...</span>options<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    credentials<span class="token punctuation">:</span> <span class="token string">\'include\'</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">return</span> <span class="token function">runFetch</span><span class="token punctuation">(</span>newUrl<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">checkStatus</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> newUrl<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h5 id="webpack-配置"><a href="#webpack-%E9%85%8D%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>webpack 配置</h5>\n<p>internals\\webpack\\webpack.base.babel.js</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="44615056376398220000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`output: Object.assign({ // Compile into js/build.js\n  path: path.resolve(process.cwd(), \'build\'),\n  publicPath: \\`\\${globalVars.robots}/product1/\\`,\n}, options.output), // Merge with env dependent settings`, `44615056376398220000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js{3} 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">output<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// Compile into js/build.js</span>\n  path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">\'build\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="gatsby-highlight-code-line">  publicPath<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>globalVars<span class="token punctuation">.</span>robots<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/product1/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><span class="token punctuation">}</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>output<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Merge with env dependent settings</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>\n<h5 id="nodejs-服务器配置"><a href="#nodejs-%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>nodejs 服务器配置</h5>\n<p>server\\index.js</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="48446055838048890000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`// 设置允许资源文件跨域访问该服务\napp.all(\'*\', (req, res, next) => {\n  res.header(\'Access-Control-Allow-Origin\', \'*\');\n  next();\n});\n\n// Copy proxy.config.example.json to proxy.config.json to setup proxy\nconst proxy = require(\'http-proxy-middleware\');\nconfig.proxies.forEach((item) => {\n  app.use(\n    item.match,\n    proxy({\n      target: item.host,\n      changeOrigin: true,\n      // 修改响应头信息，实现跨域并允许带cookie\n      onProxyRes(proxyRes, req, res) {\n        res.header(\'Access-Control-Allow-Origin\', req.headers.origin);\n        res.header(\'Access-Control-Allow-Credentials\', \'true\');\n        res.header(\n          \'Access-Control-Allow-Headers\',\n          \'Content-Type, Content-Length, Authorization, Accept, X-Requested-With, Pragma, Cache-Control\'\n        );\n      }\n      // 修改响应信息中的cookie域名\n      // cookieDomainRewrite: \'www.domain1.com\', // 可以为false，表示不修改\n    })\n  );\n});\n\n// In production we need to pass these values in instead of relying on webpack\nsetup(app, {\n  outputPath: resolve(process.cwd(), \'build\'),\n  publicPath: \'/product1\'\n});`, `48446055838048890000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js{2-5,13-20,27} 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight has-highlighted-lines" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// 设置允许资源文件跨域访问该服务</span>\n<span class="gatsby-highlight-code-line">app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">\'*\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">\'Access-Control-Allow-Origin\'</span><span class="token punctuation">,</span> <span class="token string">\'*\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="token comment">// Copy proxy.config.example.json to proxy.config.json to setup proxy</span>\n<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'http-proxy-middleware\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconfig<span class="token punctuation">.</span>proxies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>\n    item<span class="token punctuation">.</span>match<span class="token punctuation">,</span>\n    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n<span class="gatsby-highlight-code-line">      target<span class="token punctuation">:</span> item<span class="token punctuation">.</span>host<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">      changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">      <span class="token comment">// 修改响应头信息，实现跨域并允许带cookie</span></span><span class="gatsby-highlight-code-line">      <span class="token function">onProxyRes</span><span class="token punctuation">(</span><span class="token parameter">proxyRes<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">        res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">\'Access-Control-Allow-Origin\'</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">        res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">\'Access-Control-Allow-Credentials\'</span><span class="token punctuation">,</span> <span class="token string">\'true\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">        res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">          <span class="token string">\'Access-Control-Allow-Headers\'</span><span class="token punctuation">,</span></span>          <span class="token string">\'Content-Type, Content-Length, Authorization, Accept, X-Requested-With, Pragma, Cache-Control\'</span>\n        <span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span>\n      <span class="token comment">// 修改响应信息中的cookie域名</span>\n      <span class="token comment">// cookieDomainRewrite: \'www.domain1.com\', // 可以为false，表示不修改</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="gatsby-highlight-code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// In production we need to pass these values in instead of relying on webpack</span>\n<span class="token function">setup</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n  outputPath<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">\'build\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  publicPath<span class="token punctuation">:</span> <span class="token string">\'/product1\'</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h4 id="新项目"><a href="#%E6%96%B0%E9%A1%B9%E7%9B%AE" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>新项目</h4>\n<p>新项目采用了 react-router 3.2.1，相同的部分不再阐述，只有入口文件不同于老项目</p>\n<h5 id="入口文件-1"><a href="#%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>入口文件</h5>\n<p>src\\index.js</p>\n<div\n              class="gatsby-code-button-container"\n              data-toaster-id="54212695184118580000"\n              data-toaster-class="gatsby-code-button-toaster"\n              data-toaster-text-class="gatsby-code-button-toaster-text"\n              data-toaster-text="复制成功"\n              data-toaster-duration="3500"\n              onClick="copyToClipboard(`import { BrowserRouter, Router } from \'react-router-dom\';\nimport { isInIcestark, getMountNode, registerAppEnter, registerAppLeave, getBasename } from \'@ice/stark-app\';\n\nconst router = () => (\n  <Provider {...stores}>\n    <Router history={history}>\n      <BrowserRouter basename={getBasename()}>\n        <ConfigProvider locale={zhCN}>\n          <App />\n        </ConfigProvider>\n      </BrowserRouter>\n    </Router>\n  </Provider>\n);\n\nif (isInIcestark()) {\n  registerAppEnter(() => {\n    ReactDOM.render(router(), getMountNode());\n  });\n  registerAppLeave(() => {\n    ReactDOM.unmountComponentAtNode(getMountNode());\n  });\n} else {\n  ReactDOM.render(router(), document.getElementById(\'app\'), renderCallback);\n}`, `54212695184118580000`)"\n            >\n              <div\n                class="gatsby-code-button"\n                \n              >\n                js 复制代码\n              </div>\n            </div>\n<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter<span class="token punctuation">,</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-router-dom\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> isInIcestark<span class="token punctuation">,</span> getMountNode<span class="token punctuation">,</span> registerAppEnter<span class="token punctuation">,</span> registerAppLeave<span class="token punctuation">,</span> getBasename <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'@ice/stark-app\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">router</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>Provider <span class="token punctuation">{</span><span class="token operator">...</span>stores<span class="token punctuation">}</span><span class="token operator">></span>\n    <span class="token operator">&lt;</span>Router history<span class="token operator">=</span><span class="token punctuation">{</span>history<span class="token punctuation">}</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span>BrowserRouter basename<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">getBasename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>ConfigProvider locale<span class="token operator">=</span><span class="token punctuation">{</span>zhCN<span class="token punctuation">}</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>ConfigProvider<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">></span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isInIcestark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token function">registerAppEnter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getMountNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">registerAppLeave</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    ReactDOM<span class="token punctuation">.</span><span class="token function">unmountComponentAtNode</span><span class="token punctuation">(</span><span class="token function">getMountNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'app\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> renderCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id="single-spa"><a href="#single-spa" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>single-spa</h2>\n<p>待研究，不过这个框架只兼容 IE 10</p>\n<h2 id="qiankun"><a href="#qiankun" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>qiankun</h2>\n<p>待研究，不过这个框架不兼容 IE</p>\n<h1 id="实现效果"><a href="#%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>实现效果</h1>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-04-01-15-21-23-c6a39b5a4d7756feb3fd70033eed98a2-a54b5.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 64.7457627118644%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB0klEQVQoz5WRyW4UMRCG/SbcQEoEXEBKJBCCIHgZDlzgEBIQiiagsDwCNyTEgQsvlJlJL7N0e+m221vZ/DOBMCxCovSrVN32V/XbZsaYEIIZrJSdNuasrCdFeTqZjqdFUc2KqobKej5fNsitUMa6Tg+QHixzRoiWR9eKtqpnS6vnSsyKYmFUyZuyqhbOzLE0npSmn4mmLNd/rOF1vWD7R68/ffkag9N91/U6UaAYfIgphRj9RWGdT+Sx4pyn6GldsUdPDz98/MzbZrmYIef/CXbp6s7jZyMZ85mgShE31Bpaaiq46zqtevMPse3dvScvTxqfT1uaiiRs5jY3Qx43Vsiulf0vElC3ziuxrd29w+O38NArpfs+/bCE++eyx1HdhjxOHcn54NxK7PKNO/tHJ9jNOW9x7USbcESEn2GMxi5rbc7JU2bXbz88GL1ZwwI8/Q4TGL8OFMMwSCmtc4AD4Cs37x6MVraFEEqplNImPFg8FlHKIZCFVR/xDcOr2nl27daD58fvckogpZCweQHjboz1aDoeT+ALbdEHXtAMipTY1s6988m619Cm7UZ0gwtSiOlkCrd/eeft3fsvXr1HQxwYk89hZG2+T3YOD6601n/C3wCE+so4n29eigAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 04 01 15 21 23"\n        title=""\n        src="/static/2020-04-01-15-21-23-c6a39b5a4d7756feb3fd70033eed98a2-a54b5.png"\n        srcset="/static/2020-04-01-15-21-23-c6a39b5a4d7756feb3fd70033eed98a2-33798.png 200w,\n/static/2020-04-01-15-21-23-c6a39b5a4d7756feb3fd70033eed98a2-27c47.png 400w,\n/static/2020-04-01-15-21-23-c6a39b5a4d7756feb3fd70033eed98a2-a54b5.png 590w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/2020-04-01-15-20-24-5fc1161188a447c99aad5a6563b39c06-b3c03.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 534px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 80.5243445692884%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACU0lEQVQoz41TS2sUQRCeX+HFswb0Ij4SvGgCCShCvAheRFHBJKhgoh5C8OJB0Ls3vejBvxLwEBJxQQj7mumZ3Z1n9/Rz+jHW7LJx11Oaj6a6ar6prqqvvZKUldZcyDzHjPNRnHS6/W6vf9zutHtBPwj7Pur5YRAOosEQRUMfDQpSMi4IFV5tJAeTpaJE/T7CODMiyrNsOIw1j9IkCqOR4jEnUbcXgLtiAQrCOE6MQN67D5++fPuhtdIVZ4xXVeWM1LpSqnJWVUpKqaxRRkvOhVJgSyEEeK0R3u77j5+/fvd9P0Qh7PBFXdeuPtXyrizf3tjepUxAHYRyJiSX6gRMqNnjfyHv0o1bT16+zTHNCYM9Kxo0x1PAW1hcebi1g0uekwaY8mJqAzLMi+anbEpgs/CW1tY3X+9BIMEiKN3voevmdSrciLlE1Ee9NE7zylilLexS6Vl4567efLDxCkMSIjLhImJjakrlaFULW/86DoBMCf65v394eGSMnWvY0trdZ9u7GaYlkzCgIkt63Q4t6TjqggCN4lRoF+clpaWx8+SFxeXHz99AYaAYOMNUK1U1PNfMyw9QliZ/ivog0pLhApOJf5p5dX1zZw86PCETQkADJ2TIDNcG5eLxXdy8ALyL11fHo2J4TGaUDqJowp+Qh0nGYfxTz7xIVu5At08yg+4wxiDSSRihEA3iST6oF2qahXfm/OV7j7aASVgjWiiryAtrzL/McSalaLfbKIystW5meWcvXLv/9AWIBPgGXoBqnoKddrXpdpILxlutVqfTtfPd/gsAAGL9y/8pXQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #fafafa;"\n        alt="2020 04 01 15 20 24"\n        title=""\n        src="/static/2020-04-01-15-20-24-5fc1161188a447c99aad5a6563b39c06-b3c03.png"\n        srcset="/static/2020-04-01-15-20-24-5fc1161188a447c99aad5a6563b39c06-52a8d.png 200w,\n/static/2020-04-01-15-20-24-5fc1161188a447c99aad5a6563b39c06-3dc4b.png 400w,\n/static/2020-04-01-15-20-24-5fc1161188a447c99aad5a6563b39c06-b3c03.png 534w"\n        sizes="(max-width: 534px) 100vw, 534px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>',
id:"/github/workspace/blog/微前端适配demo的实践/index.md absPath of file >>> MarkdownRemark",timeToRead:5,frontmatter:{date:"2020-04-01 09:59:12",path:"/micro-front-end-demo-practice/",tags:"前端, 微前端, 预研",title:"微前端适配demo的实践",draft:null}}],page:8,pagesSum:38,length:186,prevPath:"/page/7",nextPath:"/page/9"}}}});